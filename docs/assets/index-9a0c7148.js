var ns=Object.defineProperty;var ss=(t,e,s)=>e in t?ns(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var se=(t,e,s)=>(ss(t,typeof e!="symbol"?e+"":e,s),s),je=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var a=(t,e,s)=>(je(t,e,"read from private field"),s?s.call(t):e.get(t)),G=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},gt=(t,e,s,n)=>(je(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var _e=(t,e,s,n)=>({set _(i){gt(t,e,i,s)},get _(){return a(t,e,n)}}),it=(t,e,s)=>(je(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction$1=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-\w/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,e=>e.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},def=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString$1(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(isString$1(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$1(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString$1(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],r)=>(s[stringifySymbol(n,r)+" =>"]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>stringifySymbol(s))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var s;return isSymbol(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,s=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),removeSub(n),removeDep(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,s=activeSub,n=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const i=t.fn(t._value);(e.version===0||hasChanged(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{activeSub=s,shouldTrack=n,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function removeDep(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=activeSub;activeSub=void 0;try{e()}finally{activeSub=s}}}let globalVersion=0;class Link{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==activeSub)s=this.activeLink=new Link(activeSub,this),activeSub.deps?(s.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=s,activeSub.depsTail=s):activeSub.deps=activeSub.depsTail=s,addSub(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=activeSub.depsTail,s.nextDep=void 0,activeSub.depsTail.nextDep=s,activeSub.depsTail=s,activeSub.deps===s&&(activeSub.deps=n)}return s}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)addSub(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,s){if(shouldTrack&&activeSub){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new Dep),i.map=n,i.key=s),i.track()}}function trigger(t,e,s,n,i,r){const o=targetMap.get(t);if(!o){globalVersion++;return}const b=d=>{d&&d.trigger()};if(startBatch(),e==="clear")o.forEach(b);else{const d=isArray(t),g=d&&isIntegerKey(s);if(d&&s==="length"){const l=Number(n);o.forEach((E,P)=>{(P==="length"||P===ARRAY_ITERATE_KEY||!isSymbol(P)&&P>=l)&&b(E)})}else switch((s!==void 0||o.has(void 0))&&b(o.get(s)),g&&b(o.get(ARRAY_ITERATE_KEY)),e){case"add":d?g&&b(o.get("length")):(b(o.get(ITERATE_KEY)),isMap(t)&&b(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":d||(b(o.get(ITERATE_KEY)),isMap(t)&&b(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&b(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}function toWrapped(t,e){return isReadonly(t)?isReactive(t)?toReadonly(toReactive(e)):toReadonly(e):toReactive(e)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,t=>toWrapped(this,t))},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toWrapped(this,t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,s=>s.map(n=>toWrapped(this,n)),arguments)},find(t,e){return apply(this,"find",t,e,s=>toWrapped(this,s),arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,s=>toWrapped(this,s),arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",t=>toWrapped(this,t))}};function iterator(t,e,s){const n=shallowReadArray(t),i=n[e]();return n!==t&&!isShallow(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const arrayProto=Array.prototype;function apply(t,e,s,n,i,r){const o=shallowReadArray(t),b=o!==t&&!isShallow(t),d=o[e];if(d!==arrayProto[e]){const E=d.apply(t,r);return b?toReactive(E):E}let g=s;o!==t&&(b?g=function(E,P){return s.call(this,toWrapped(t,E),P,t)}:s.length>2&&(g=function(E,P){return s.call(this,E,P,t)}));const l=d.call(o,g,n);return b&&i?i(l):l}function reduce(t,e,s,n){const i=shallowReadArray(t);let r=s;return i!==t&&(isShallow(t)?s.length>3&&(r=function(o,b,d){return s.call(this,o,b,d,t)}):r=function(o,b,d){return s.call(this,o,toWrapped(t,b),d,t)}),i[e](r,...n)}function searchProxy(t,e,s){const n=toRaw(t);track(n,"iterate",ARRAY_ITERATE_KEY);const i=n[e](...s);return(i===-1||i===!1)&&isProxy(s[0])?(s[0]=toRaw(s[0]),n[e](...s)):i}function noTracking(t,e,s=[]){pauseTracking(),startBatch();const n=toRaw(t)[e].apply(t,s);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=isArray(e);if(!i){let d;if(o&&(d=arrayInstrumentations[s]))return d;if(s==="hasOwnProperty")return hasOwnProperty}const b=Reflect.get(e,s,isRef(e)?e:n);if((isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(i||track(e,"get",s),r))return b;if(isRef(b)){const d=o&&isIntegerKey(s)?b:b.value;return i&&isObject(d)?readonly(d):d}return isObject(b)?i?readonly(b):reactive(b):b}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,s,n,i){let r=e[s];const o=isArray(e)&&isIntegerKey(s);if(!this._isShallow){const g=isReadonly(r);if(!isShallow(n)&&!isReadonly(n)&&(r=toRaw(r),n=toRaw(n)),!o&&isRef(r)&&!isRef(n))return g||(r.value=n),!0}const b=o?Number(s)<e.length:hasOwn(e,s),d=Reflect.set(e,s,n,isRef(e)?e:i);return e===toRaw(i)&&(b?hasChanged(n,r)&&trigger(e,"set",s,n):trigger(e,"add",s,n)),d}deleteProperty(e,s){const n=hasOwn(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&trigger(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!isSymbol(s)||!builtInSymbols.has(s))&&track(e,"has",s),n}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,r=toRaw(i),o=isMap(r),b=t==="entries"||t===Symbol.iterator&&o,d=t==="keys"&&o,g=i[t](...n),l=s?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:E,done:P}=g.next();return P?{value:E,done:P}:{value:b?[l(E[0]),l(E[1])]:l(E),done:P}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const s={get(i){const r=this.__v_raw,o=toRaw(r),b=toRaw(i);t||(hasChanged(i,b)&&track(o,"get",i),track(o,"get",b));const{has:d}=getProto(o),g=e?toShallow:t?toReadonly:toReactive;if(d.call(o,i))return g(r.get(i));if(d.call(o,b))return g(r.get(b));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&track(toRaw(i),"iterate",ITERATE_KEY),i.size},has(i){const r=this.__v_raw,o=toRaw(r),b=toRaw(i);return t||(hasChanged(i,b)&&track(o,"has",i),track(o,"has",b)),i===b?r.has(i):r.has(i)||r.has(b)},forEach(i,r){const o=this,b=o.__v_raw,d=toRaw(b),g=e?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",ITERATE_KEY),b.forEach((l,E)=>i.call(r,g(l),g(E),o))}};return extend(s,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!e&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const r=toRaw(this);return getProto(r).has.call(r,i)||(r.add(i),trigger(r,"add",i,i)),this},set(i,r){!e&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const o=toRaw(this),{has:b,get:d}=getProto(o);let g=b.call(o,i);g||(i=toRaw(i),g=b.call(o,i));const l=d.call(o,i);return o.set(i,r),g?hasChanged(r,l)&&trigger(o,"set",i,r):trigger(o,"add",i,r),this},delete(i){const r=toRaw(this),{has:o,get:b}=getProto(r);let d=o.call(r,i);d||(i=toRaw(i),d=o.call(r,i)),b&&b.call(r,i);const g=r.delete(i);return d&&trigger(r,"delete",i,void 0),g},clear(){const i=toRaw(this),r=i.size!==0,o=i.clear();return r&&trigger(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=createIterableMethod(i,t,e)}),s}function createInstrumentationGetter(t,e){const s=createInstrumentations(t,e);return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=getTargetType(t);if(r===0)return t;const o=i.get(t);if(o)return o;const b=new Proxy(t,r===2?n:s);return i.set(t,b),b}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,s)&&(this._rawValue=e,this._value=n?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>e==="__v_raw"?t:unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,s=!1){let n,i;return isFunction$1(t)?n=t:(n=t.get,i=t.set),new ComputedRefImpl(n,i,s)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,s=activeWatcher){if(s){let n=cleanupMap.get(s);n||cleanupMap.set(s,n=[]),n.push(t)}}function watch$1(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:b,call:d}=s,g=x=>i?x:isShallow(x)||i===!1||i===0?traverse(x,1):traverse(x);let l,E,P,C,R=!1,F=!1;if(isRef(t)?(E=()=>t.value,R=isShallow(t)):isReactive(t)?(E=()=>g(t),R=!0):isArray(t)?(F=!0,R=t.some(x=>isReactive(x)||isShallow(x)),E=()=>t.map(x=>{if(isRef(x))return x.value;if(isReactive(x))return g(x);if(isFunction$1(x))return d?d(x,2):x()})):isFunction$1(t)?e?E=d?()=>d(t,2):t:E=()=>{if(P){pauseTracking();try{P()}finally{resetTracking()}}const x=activeWatcher;activeWatcher=l;try{return d?d(t,3,[C]):t(C)}finally{activeWatcher=x}}:E=NOOP,e&&i){const x=E,m=i===!0?1/0:i;E=()=>traverse(x(),m)}const w=getCurrentScope(),T=()=>{l.stop(),w&&w.active&&remove(w.effects,l)};if(r&&e){const x=e;e=(...m)=>{x(...m),T()}}let O=F?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const k=x=>{if(!(!(l.flags&1)||!l.dirty&&!x))if(e){const m=l.run();if(i||R||(F?m.some((A,U)=>hasChanged(A,O[U])):hasChanged(m,O))){P&&P();const A=activeWatcher;activeWatcher=l;try{const U=[m,O===INITIAL_WATCHER_VALUE?void 0:F&&O[0]===INITIAL_WATCHER_VALUE?[]:O,C];O=m,d?d(e,3,U):e(...U)}finally{activeWatcher=A}}}else l.run()};return b&&b(k),l=new ReactiveEffect(E),l.scheduler=o?()=>o(k,!1):k,C=x=>onWatcherCleanup(x,!1,l),P=l.onStop=()=>{const x=cleanupMap.get(l);if(x){if(d)d(x,4);else for(const m of x)m();cleanupMap.delete(l)}},e?n?k(!0):O=l.run():o?o(k.bind(null,!0),!0):l.run(),T.pause=l.pause.bind(l),T.resume=l.resume.bind(l),T.stop=T,T}function traverse(t,e=1/0,s){if(e<=0||!isObject(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,isRef(t))traverse(t.value,e,s);else if(isArray(t))for(let n=0;n<t.length;n++)traverse(t[n],e,s);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e,s)});else if(isPlainObject(t)){for(const n in t)traverse(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&traverse(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const s=stack.length?stack[stack.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=getComponentTrace();if(n)callWithErrorHandling(n,s,11,[t+e.map(r=>{var o,b;return(b=(o=r.toString)==null?void 0:o.call(r))!=null?b:JSON.stringify(r)}).join(""),s&&s.proxy,i.map(({vnode:r})=>`at <${formatComponentName(s,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...formatTrace(i)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function formatTrace(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...formatTraceEntry(s))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${formatComponentName(t.component,t.type,n)}`,r=">"+s;return t.props?[i,...formatProps(t.props),r]:[i+r]}function formatProps(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...formatProp(n,t[n]))}),s.length>3&&e.push(" ..."),e}function formatProp(t,e,s){return isString$1(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),s?e:[`${t}=`,e])}function callWithErrorHandling(t,e,s,n){try{return n?t(...n):t()}catch(i){handleError(i,e,s)}}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction$1(t)){const i=callWithErrorHandling(t,e,s,n);return i&&isPromise(i)&&i.catch(r=>{handleError(r,e,s)}),i}if(isArray(t)){const i=[];for(let r=0;r<t.length;r++)i.push(callWithAsyncErrorHandling(t[r],e,s,n));return i}}function handleError(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||EMPTY_OBJ;if(e){let b=e.parent;const d=e.proxy,g=`https://vuejs.org/error-reference/#runtime-${s}`;for(;b;){const l=b.ec;if(l){for(let E=0;E<l.length;E++)if(l[E](t,d,g)===!1)return}b=b.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[t,d,g]),resetTracking();return}}logError(t,s,i,n,o)}function logError(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1,i=queue[n],r=getId(i);r<t||r===t&&i.flags&2?e=n+1:s=n}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),s=queue[queue.length-1];!s||!(t.flags&2)&&e>=getId(s)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,s=flushIndex+1){for(;s<queue.length;s++){const n=queue[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;queue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((s,n)=>getId(s)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const s=activePostFlushCbs[postFlushIndex];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),callWithErrorHandling(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&(s.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let o;try{o=t(...i)}finally{setCurrentRenderingInstance(r),n._d&&setBlockTracking(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const s=getComponentPublicInstance(currentRenderingInstance),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,b,d=EMPTY_OBJ]=e[i];r&&(isFunction$1(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(o),n.push({dir:r,instance:s,value:o,oldValue:void 0,arg:b,modifiers:d}))}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const b=i[o];r&&(b.oldValue=r[o].value);let d=b.dir[n];d&&(pauseTracking(),callWithAsyncErrorHandling(d,s,8,[t.el,b,t,e]),resetTracking())}}function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=getCurrentInstance();if(n||currentApp){let i=currentApp?currentApp._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction$1(e)?e.call(n&&n.proxy):e}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,e){return doWatch(t,null,e)}function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,flush:r,once:o}=s,b=extend({},s),d=e&&n||!e&&r!=="post";let g;if(isInSSRComponentSetup){if(r==="sync"){const C=useSSRContext();g=C.__watcherHandles||(C.__watcherHandles=[])}else if(!d){const C=()=>{};return C.stop=NOOP,C.resume=NOOP,C.pause=NOOP,C}}const l=currentInstance;b.call=(C,R,F)=>callWithAsyncErrorHandling(C,l,R,F);let E=!1;r==="post"?b.scheduler=C=>{queuePostRenderEffect(C,l&&l.suspense)}:r!=="sync"&&(E=!0,b.scheduler=(C,R)=>{R?C():queueJob(C)}),b.augmentJob=C=>{e&&(C.flags|=4),E&&(C.flags|=2,l&&(C.id=l.uid,C.i=l))};const P=watch$1(t,e,b);return isInSSRComponentSetup&&(g?g.push(P):d&&P()),P}function instanceWatch(t,e,s){const n=this.proxy,i=isString$1(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let r;isFunction$1(e)?r=e:(r=e.handler,s=e);const o=setCurrentInstance(this),b=doWatch(i,r.bind(n),s);return o(),b}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport,leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((R,F)=>setRef(R,e&&(isArray(e)?e[F]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(t,e,s,n.component.subTree);return}const r=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,o=i?null:r,{i:b,r:d}=t,g=e&&e.r,l=b.refs===EMPTY_OBJ?b.refs={}:b.refs,E=b.setupState,P=toRaw(E),C=E===EMPTY_OBJ?NO:R=>hasOwn(P,R);if(g!=null&&g!==d){if(invalidatePendingSetRef(e),isString$1(g))l[g]=null,C(g)&&(E[g]=null);else if(isRef(g)){g.value=null;const R=e;R.k&&(l[R.k]=null)}}if(isFunction$1(d))callWithErrorHandling(d,b,12,[o,l]);else{const R=isString$1(d),F=isRef(d);if(R||F){const w=()=>{if(t.f){const T=R?C(d)?E[d]:l[d]:d.value;if(i)isArray(T)&&remove(T,r);else if(isArray(T))T.includes(r)||T.push(r);else if(R)l[d]=[r],C(d)&&(E[d]=l[d]);else{const O=[r];d.value=O,t.k&&(l[t.k]=O)}}else R?(l[d]=o,C(d)&&(E[d]=o)):F&&(d.value=o,t.k&&(l[t.k]=o))};if(o){const T=()=>{w(),pendingSetRefMap.delete(t)};T.id=-1,pendingSetRefMap.set(t,T),queuePostRenderEffect(T,s)}else invalidatePendingSetRef(t),w()}}}function invalidatePendingSetRef(t){const e=pendingSetRefMap.get(t);e&&(e.flags|=8,pendingSetRefMap.delete(t))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{pauseTracking();const b=setCurrentInstance(s),d=callWithAsyncErrorHandling(e,s,t,o);return b(),resetTracking(),d});return n?i.unshift(r):i.push(r),r}}const createHook=t=>(e,s=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const r=s&&s[n],o=isArray(t);if(o||isString$1(t)){const b=o&&isReactive(t);let d=!1,g=!1;b&&(d=!isShallow(t),g=isReadonly(t),t=shallowReadArray(t)),i=new Array(t.length);for(let l=0,E=t.length;l<E;l++)i[l]=e(d?g?toReadonly(toReactive(t[l])):toReactive(t[l]):t[l],l,void 0,r&&r[l])}else if(typeof t=="number"){i=new Array(t);for(let b=0;b<t;b++)i[b]=e(b+1,b,void 0,r&&r[b])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(b,d)=>e(b,d,void 0,r&&r[d]));else{const b=Object.keys(t);i=new Array(b.length);for(let d=0,g=b.length;d<g;d++){const l=b[d];i[d]=e(t[l],l,d,r&&r[d])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:b,appContext:d}=t;if(e[0]!=="$"){const P=o[e];if(P!==void 0)switch(P){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(hasSetupBinding(n,e))return o[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return o[e]=2,i[e];if(hasOwn(r,e))return o[e]=3,r[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=4,s[e];shouldCacheAccess&&(o[e]=0)}}const g=publicPropertiesMap[e];let l,E;if(g)return e==="$attrs"&&track(t.attrs,"get",""),g(t);if((l=b.__cssModules)&&(l=l[e]))return l;if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=4,s[e];if(E=d.config.globalProperties,hasOwn(E,e))return E[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,props:r,type:o}},b){let d;return!!(s[b]||t!==EMPTY_OBJ&&b[0]!=="$"&&hasOwn(t,b)||hasSetupBinding(e,b)||hasOwn(r,b)||hasOwn(n,b)||hasOwn(publicPropertiesMap,b)||hasOwn(i.config.globalProperties,b)||(d=o.__cssModules)&&d[b])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:b,provide:d,inject:g,created:l,beforeMount:E,mounted:P,beforeUpdate:C,updated:R,activated:F,deactivated:w,beforeDestroy:T,beforeUnmount:O,destroyed:k,unmounted:x,render:m,renderTracked:A,renderTriggered:U,errorCaptured:M,serverPrefetch:_,expose:B,inheritAttrs:L,components:Q,directives:st,filters:$}=e;if(g&&resolveInjections(g,n,null),o)for(const mt in o){const X=o[mt];isFunction$1(X)&&(n[mt]=X.bind(s))}if(i){const mt=i.call(s,s);isObject(mt)&&(t.data=reactive(mt))}if(shouldCacheAccess=!0,r)for(const mt in r){const X=r[mt],yt=isFunction$1(X)?X.bind(s,s):isFunction$1(X.get)?X.get.bind(s,s):NOOP,wt=!isFunction$1(X)&&isFunction$1(X.set)?X.set.bind(s):NOOP,Rt=computed({get:yt,set:wt});Object.defineProperty(n,mt,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:kt=>Rt.value=kt})}if(b)for(const mt in b)createWatcher(b[mt],n,s,mt);if(d){const mt=isFunction$1(d)?d.call(s):d;Reflect.ownKeys(mt).forEach(X=>{provide(X,mt[X])})}l&&callHook(l,t,"c");function pt(mt,X){isArray(X)?X.forEach(yt=>mt(yt.bind(s))):X&&mt(X.bind(s))}if(pt(onBeforeMount,E),pt(onMounted,P),pt(onBeforeUpdate,C),pt(onUpdated,R),pt(onActivated,F),pt(onDeactivated,w),pt(onErrorCaptured,M),pt(onRenderTracked,A),pt(onRenderTriggered,U),pt(onBeforeUnmount,O),pt(onUnmounted,x),pt(onServerPrefetch,_),isArray(B))if(B.length){const mt=t.exposed||(t.exposed={});B.forEach(X=>{Object.defineProperty(mt,X,{get:()=>s[X],set:yt=>s[X]=yt,enumerable:!0})})}else t.exposed||(t.exposed={});m&&t.render===NOOP&&(t.render=m),L!=null&&(t.inheritAttrs=L),Q&&(t.components=Q),st&&(t.directives=st),_&&markAsyncBoundary(t)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let r;isObject(i)?"default"in i?r=inject(i.from||n,i.default,!0):r=inject(i.from||n):r=inject(i),isRef(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){let i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString$1(t)){const r=e[t];isFunction$1(r)&&watch(i,r)}else if(isFunction$1(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(r=>createWatcher(r,e,s,n));else{const r=isFunction$1(t.handler)?t.handler.bind(s):e[t.handler];isFunction$1(r)&&watch(i,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,b=r.get(e);let d;return b?d=b:!i.length&&!s&&!n?d=e:(d={},i.length&&i.forEach(g=>mergeOptions(d,g,o,!0)),mergeOptions(d,e,o)),isObject(e)&&r.set(e,d),d}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&mergeOptions(t,r,s,!0),i&&i.forEach(o=>mergeOptions(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const b=internalOptionMergeStrats[o]||s&&s[o];t[o]=b?b(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction$1(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const r=createAppContext(),o=new WeakSet,b=[];let d=!1;const g=r.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(l){},use(l,...E){return o.has(l)||(l&&isFunction$1(l.install)?(o.add(l),l.install(g,...E)):isFunction$1(l)&&(o.add(l),l(g,...E))),g},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),g},component(l,E){return E?(r.components[l]=E,g):r.components[l]},directive(l,E){return E?(r.directives[l]=E,g):r.directives[l]},mount(l,E,P){if(!d){const C=g._ceVNode||createVNode(n,i);return C.appContext=r,P===!0?P="svg":P===!1&&(P=void 0),E&&e?e(C,l):t(C,l,P),d=!0,g._container=l,l.__vue_app__=g,getComponentPublicInstance(C.component)}},onUnmount(l){b.push(l)},unmount(){d&&(callWithAsyncErrorHandling(b,g._instance,16),t(null,g._container),delete g._container.__vue_app__)},provide(l,E){return r.provides[l]=E,g},runWithContext(l){const E=currentApp;currentApp=g;try{return l()}finally{currentApp=E}}};return g}}let currentApp=null;const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const r=e.startsWith("update:"),o=r&&getModelModifiers(n,e.slice(7));o&&(o.trim&&(i=s.map(l=>isString$1(l)?l.trim():l)),o.number&&(i=s.map(looseToNumber)));let b,d=n[b=toHandlerKey(e)]||n[b=toHandlerKey(camelize(e))];!d&&r&&(d=n[b=toHandlerKey(hyphenate(e))]),d&&callWithAsyncErrorHandling(d,t,6,i);const g=n[b+"Once"];if(g){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,callWithAsyncErrorHandling(g,t,6,i)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(t,e,s=!1){const n=s?mixinEmitsCache:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let o={},b=!1;if(!isFunction$1(t)){const d=g=>{const l=normalizeEmitsOptions(g,e,!0);l&&(b=!0,extend(o,l))};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!r&&!b?(isObject(t)&&n.set(t,null),null):(isArray(r)?r.forEach(d=>o[d]=null):extend(o,r),isObject(t)&&n.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:b,emit:d,render:g,renderCache:l,props:E,data:P,setupState:C,ctx:R,inheritAttrs:F}=t,w=setCurrentRenderingInstance(t);let T,O;try{if(s.shapeFlag&4){const x=i||n,m=x;T=normalizeVNode(g.call(m,x,l,E,C,P,R)),O=b}else{const x=e;T=normalizeVNode(x.length>1?x(E,{attrs:b,slots:o,emit:d}):x(E,null)),O=e.props?b:getFunctionalFallthrough(b)}}catch(x){blockStack.length=0,handleError(x,t,1),T=createVNode(Comment)}let k=T;if(O&&F!==!1){const x=Object.keys(O),{shapeFlag:m}=k;x.length&&m&7&&(r&&x.some(isModelListener)&&(O=filterModelListeners(O,r)),k=cloneVNode(k,O,!1,!0))}return s.dirs&&(k=cloneVNode(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(s.dirs):s.dirs),s.transition&&setTransitionHooks(k,s.transition),T=k,setCurrentRenderingInstance(w),T}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:r}=t,{props:o,children:b,patchFlag:d}=e,g=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&d>=0){if(d&1024)return!0;if(d&16)return n?hasPropsChanged(n,o,g):!!o;if(d&8){const l=e.dynamicProps;for(let E=0;E<l.length;E++){const P=l[E];if(o[P]!==n[P]&&!isEmitListener(g,P))return!0}}}else return(i||b)&&(!b||!b.$stable)?!0:n===o?!1:n?o?hasPropsChanged(n,o,g):!0:!!o;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!isEmitListener(s,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,s,n=!1){const i={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function updateProps(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,b=toRaw(i),[d]=t.propsOptions;let g=!1;if((n||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let E=0;E<l.length;E++){let P=l[E];if(isEmitListener(t.emitsOptions,P))continue;const C=e[P];if(d)if(hasOwn(r,P))C!==r[P]&&(r[P]=C,g=!0);else{const R=camelize(P);i[R]=resolvePropValue(d,b,R,C,t,!1)}else C!==r[P]&&(r[P]=C,g=!0)}}}else{setFullProps(t,e,i,r)&&(g=!0);let l;for(const E in b)(!e||!hasOwn(e,E)&&((l=hyphenate(E))===E||!hasOwn(e,l)))&&(d?s&&(s[E]!==void 0||s[l]!==void 0)&&(i[E]=resolvePropValue(d,b,E,void 0,t,!0)):delete i[E]);if(r!==b)for(const E in r)(!e||!hasOwn(e,E))&&(delete r[E],g=!0)}g&&trigger(t.attrs,"set","")}function setFullProps(t,e,s,n){const[i,r]=t.propsOptions;let o=!1,b;if(e)for(let d in e){if(isReservedProp(d))continue;const g=e[d];let l;i&&hasOwn(i,l=camelize(d))?!r||!r.includes(l)?s[l]=g:(b||(b={}))[l]=g:isEmitListener(t.emitsOptions,d)||(!(d in n)||g!==n[d])&&(n[d]=g,o=!0)}if(r){const d=toRaw(s),g=b||EMPTY_OBJ;for(let l=0;l<r.length;l++){const E=r[l];s[E]=resolvePropValue(i,d,E,g[E],t,!hasOwn(g,E))}}return o}function resolvePropValue(t,e,s,n,i,r){const o=t[s];if(o!=null){const b=hasOwn(o,"default");if(b&&n===void 0){const d=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction$1(d)){const{propsDefaults:g}=i;if(s in g)n=g[s];else{const l=setCurrentInstance(i);n=g[s]=d.call(null,e),l()}}else n=d;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!b?n=!1:o[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,s=!1){const n=s?mixinPropsCache:e.propsCache,i=n.get(t);if(i)return i;const r=t.props,o={},b=[];let d=!1;if(!isFunction$1(t)){const l=E=>{d=!0;const[P,C]=normalizePropsOptions(E,e,!0);extend(o,P),C&&b.push(...C)};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!r&&!d)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(r))for(let l=0;l<r.length;l++){const E=camelize(r[l]);validatePropName(E)&&(o[E]=EMPTY_OBJ)}else if(r)for(const l in r){const E=camelize(l);if(validatePropName(E)){const P=r[l],C=o[E]=isArray(P)||isFunction$1(P)?{type:P}:extend({},P),R=C.type;let F=!1,w=!0;if(isArray(R))for(let T=0;T<R.length;++T){const O=R[T],k=isFunction$1(O)&&O.name;if(k==="Boolean"){F=!0;break}else k==="String"&&(w=!1)}else F=isFunction$1(R)&&R.name==="Boolean";C[0]=F,C[1]=w,(F||hasOwn(C,"default"))&&b.push(E)}}const g=[o,b];return isObject(t)&&n.set(t,g),g}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const r=t[i];if(isFunction$1(r))e[i]=normalizeSlot(i,r,n);else if(r!=null){const o=normalizeSlotValue(r);e[i]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},assignSlots=(t,e,s)=>{for(const n in e)(s||!isInternalKey(n))&&(t[n]=e[n])},initSlots=(t,e,s)=>{const n=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const i=e._;i?(assignSlots(n,e,s),s&&def(n,"_",i,!0)):normalizeObjectSlots(e,n)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,o=EMPTY_OBJ;if(n.shapeFlag&32){const b=e._;b?s&&b===1?r=!1:assignSlots(i,e,s):(r=!e.$stable,normalizeObjectSlots(e,i)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(r)for(const b in i)!isInternalKey(b)&&o[b]==null&&delete i[b]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:b,createComment:d,setText:g,setElementText:l,parentNode:E,nextSibling:P,setScopeId:C=NOOP,insertStaticContent:R}=t,F=(v,I,V,rt=null,K=null,ut=null,St=void 0,ft=null,bt=!!I.dynamicChildren)=>{if(v===I)return;v&&!isSameVNodeType(v,I)&&(rt=y(v),kt(v,K,ut,!0),v=null),I.patchFlag===-2&&(bt=!1,I.dynamicChildren=null);const{type:Z,ref:J,shapeFlag:q}=I;switch(Z){case Text:w(v,I,V,rt);break;case Comment:T(v,I,V,rt);break;case Static:v==null&&O(I,V,rt,St);break;case Fragment:Q(v,I,V,rt,K,ut,St,ft,bt);break;default:q&1?m(v,I,V,rt,K,ut,St,ft,bt):q&6?st(v,I,V,rt,K,ut,St,ft,bt):(q&64||q&128)&&Z.process(v,I,V,rt,K,ut,St,ft,bt,H)}J!=null&&K?setRef(J,v&&v.ref,ut,I||v,!I):J==null&&v&&v.ref!=null&&setRef(v.ref,null,ut,v,!0)},w=(v,I,V,rt)=>{if(v==null)n(I.el=b(I.children),V,rt);else{const K=I.el=v.el;I.children!==v.children&&g(K,I.children)}},T=(v,I,V,rt)=>{v==null?n(I.el=d(I.children||""),V,rt):I.el=v.el},O=(v,I,V,rt)=>{[v.el,v.anchor]=R(v.children,I,V,rt,v.el,v.anchor)},k=({el:v,anchor:I},V,rt)=>{let K;for(;v&&v!==I;)K=P(v),n(v,V,rt),v=K;n(I,V,rt)},x=({el:v,anchor:I})=>{let V;for(;v&&v!==I;)V=P(v),i(v),v=V;i(I)},m=(v,I,V,rt,K,ut,St,ft,bt)=>{if(I.type==="svg"?St="svg":I.type==="math"&&(St="mathml"),v==null)A(I,V,rt,K,ut,St,ft,bt);else{const Z=v.el&&v.el._isVueCE?v.el:null;try{Z&&Z._beginPatch(),_(v,I,K,ut,St,ft,bt)}finally{Z&&Z._endPatch()}}},A=(v,I,V,rt,K,ut,St,ft)=>{let bt,Z;const{props:J,shapeFlag:q,transition:ct,dirs:At}=v;if(bt=v.el=o(v.type,ut,J&&J.is,J),q&8?l(bt,v.children):q&16&&M(v.children,bt,null,rt,K,resolveChildrenNamespace(v,ut),St,ft),At&&invokeDirectiveHook(v,null,rt,"created"),U(bt,v,v.scopeId,St,rt),J){for(const Dt in J)Dt!=="value"&&!isReservedProp(Dt)&&r(bt,Dt,null,J[Dt],ut,rt);"value"in J&&r(bt,"value",null,J.value,ut),(Z=J.onVnodeBeforeMount)&&invokeVNodeHook(Z,rt,v)}At&&invokeDirectiveHook(v,null,rt,"beforeMount");const Et=needTransition(K,ct);Et&&ct.beforeEnter(bt),n(bt,I,V),((Z=J&&J.onVnodeMounted)||Et||At)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,rt,v),Et&&ct.enter(bt),At&&invokeDirectiveHook(v,null,rt,"mounted")},K)},U=(v,I,V,rt,K)=>{if(V&&C(v,V),rt)for(let ut=0;ut<rt.length;ut++)C(v,rt[ut]);if(K){let ut=K.subTree;if(I===ut||isSuspense(ut.type)&&(ut.ssContent===I||ut.ssFallback===I)){const St=K.vnode;U(v,St,St.scopeId,St.slotScopeIds,K.parent)}}},M=(v,I,V,rt,K,ut,St,ft,bt=0)=>{for(let Z=bt;Z<v.length;Z++){const J=v[Z]=ft?cloneIfMounted(v[Z]):normalizeVNode(v[Z]);F(null,J,I,V,rt,K,ut,St,ft)}},_=(v,I,V,rt,K,ut,St)=>{const ft=I.el=v.el;let{patchFlag:bt,dynamicChildren:Z,dirs:J}=I;bt|=v.patchFlag&16;const q=v.props||EMPTY_OBJ,ct=I.props||EMPTY_OBJ;let At;if(V&&toggleRecurse(V,!1),(At=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(At,V,I,v),J&&invokeDirectiveHook(I,v,V,"beforeUpdate"),V&&toggleRecurse(V,!0),(q.innerHTML&&ct.innerHTML==null||q.textContent&&ct.textContent==null)&&l(ft,""),Z?B(v.dynamicChildren,Z,ft,V,rt,resolveChildrenNamespace(I,K),ut):St||X(v,I,ft,null,V,rt,resolveChildrenNamespace(I,K),ut,!1),bt>0){if(bt&16)L(ft,q,ct,V,K);else if(bt&2&&q.class!==ct.class&&r(ft,"class",null,ct.class,K),bt&4&&r(ft,"style",q.style,ct.style,K),bt&8){const Et=I.dynamicProps;for(let Dt=0;Dt<Et.length;Dt++){const Lt=Et[Dt],jt=q[Lt],Wt=ct[Lt];(Wt!==jt||Lt==="value")&&r(ft,Lt,jt,Wt,K,V)}}bt&1&&v.children!==I.children&&l(ft,I.children)}else!St&&Z==null&&L(ft,q,ct,V,K);((At=ct.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{At&&invokeVNodeHook(At,V,I,v),J&&invokeDirectiveHook(I,v,V,"updated")},rt)},B=(v,I,V,rt,K,ut,St)=>{for(let ft=0;ft<I.length;ft++){const bt=v[ft],Z=I[ft],J=bt.el&&(bt.type===Fragment||!isSameVNodeType(bt,Z)||bt.shapeFlag&198)?E(bt.el):V;F(bt,Z,J,null,rt,K,ut,St,!0)}},L=(v,I,V,rt,K)=>{if(I!==V){if(I!==EMPTY_OBJ)for(const ut in I)!isReservedProp(ut)&&!(ut in V)&&r(v,ut,I[ut],null,K,rt);for(const ut in V){if(isReservedProp(ut))continue;const St=V[ut],ft=I[ut];St!==ft&&ut!=="value"&&r(v,ut,ft,St,K,rt)}"value"in V&&r(v,"value",I.value,V.value,K)}},Q=(v,I,V,rt,K,ut,St,ft,bt)=>{const Z=I.el=v?v.el:b(""),J=I.anchor=v?v.anchor:b("");let{patchFlag:q,dynamicChildren:ct,slotScopeIds:At}=I;At&&(ft=ft?ft.concat(At):At),v==null?(n(Z,V,rt),n(J,V,rt),M(I.children||[],V,J,K,ut,St,ft,bt)):q>0&&q&64&&ct&&v.dynamicChildren&&v.dynamicChildren.length===ct.length?(B(v.dynamicChildren,ct,V,K,ut,St,ft),(I.key!=null||K&&I===K.subTree)&&traverseStaticChildren(v,I,!0)):X(v,I,V,J,K,ut,St,ft,bt)},st=(v,I,V,rt,K,ut,St,ft,bt)=>{I.slotScopeIds=ft,v==null?I.shapeFlag&512?K.ctx.activate(I,V,rt,St,bt):$(I,V,rt,K,ut,St,bt):ot(v,I,bt)},$=(v,I,V,rt,K,ut,St)=>{const ft=v.component=createComponentInstance(v,rt,K);if(isKeepAlive(v)&&(ft.ctx.renderer=H),setupComponent(ft,!1,St),ft.asyncDep){if(K&&K.registerDep(ft,pt,St),!v.el){const bt=ft.subTree=createVNode(Comment);T(null,bt,I,V),v.placeholder=bt.el}}else pt(ft,v,I,V,K,ut,St)},ot=(v,I,V)=>{const rt=I.component=v.component;if(shouldUpdateComponent(v,I,V))if(rt.asyncDep&&!rt.asyncResolved){mt(rt,I,V);return}else rt.next=I,rt.update();else I.el=v.el,rt.vnode=I},pt=(v,I,V,rt,K,ut,St)=>{const ft=()=>{if(v.isMounted){let{next:q,bu:ct,u:At,parent:Et,vnode:Dt}=v;{const Vt=locateNonHydratedAsyncRoot(v);if(Vt){q&&(q.el=Dt.el,mt(v,q,St)),Vt.asyncDep.then(()=>{v.isUnmounted||ft()});return}}let Lt=q,jt;toggleRecurse(v,!1),q?(q.el=Dt.el,mt(v,q,St)):q=Dt,ct&&invokeArrayFns(ct),(jt=q.props&&q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(jt,Et,q,Dt),toggleRecurse(v,!0);const Wt=renderComponentRoot(v),Gt=v.subTree;v.subTree=Wt,F(Gt,Wt,E(Gt.el),y(Gt),v,K,ut),q.el=Wt.el,Lt===null&&updateHOCHostEl(v,Wt.el),At&&queuePostRenderEffect(At,K),(jt=q.props&&q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(jt,Et,q,Dt),K)}else{let q;const{el:ct,props:At}=I,{bm:Et,m:Dt,parent:Lt,root:jt,type:Wt}=v,Gt=isAsyncWrapper(I);if(toggleRecurse(v,!1),Et&&invokeArrayFns(Et),!Gt&&(q=At&&At.onVnodeBeforeMount)&&invokeVNodeHook(q,Lt,I),toggleRecurse(v,!0),ct&&dt){const Vt=()=>{v.subTree=renderComponentRoot(v),dt(ct,v.subTree,v,K,null)};Gt&&Wt.__asyncHydrate?Wt.__asyncHydrate(ct,v,Vt):Vt()}else{jt.ce&&jt.ce._def.shadowRoot!==!1&&jt.ce._injectChildStyle(Wt);const Vt=v.subTree=renderComponentRoot(v);F(null,Vt,V,rt,v,K,ut),I.el=Vt.el}if(Dt&&queuePostRenderEffect(Dt,K),!Gt&&(q=At&&At.onVnodeMounted)){const Vt=I;queuePostRenderEffect(()=>invokeVNodeHook(q,Lt,Vt),K)}(I.shapeFlag&256||Lt&&isAsyncWrapper(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&v.a&&queuePostRenderEffect(v.a,K),v.isMounted=!0,I=V=rt=null}};v.scope.on();const bt=v.effect=new ReactiveEffect(ft);v.scope.off();const Z=v.update=bt.run.bind(bt),J=v.job=bt.runIfDirty.bind(bt);J.i=v,J.id=v.uid,bt.scheduler=()=>queueJob(J),toggleRecurse(v,!0),Z()},mt=(v,I,V)=>{I.component=v;const rt=v.vnode.props;v.vnode=I,v.next=null,updateProps(v,I.props,rt,V),updateSlots(v,I.children,V),pauseTracking(),flushPreFlushCbs(v),resetTracking()},X=(v,I,V,rt,K,ut,St,ft,bt=!1)=>{const Z=v&&v.children,J=v?v.shapeFlag:0,q=I.children,{patchFlag:ct,shapeFlag:At}=I;if(ct>0){if(ct&128){wt(Z,q,V,rt,K,ut,St,ft,bt);return}else if(ct&256){yt(Z,q,V,rt,K,ut,St,ft,bt);return}}At&8?(J&16&&u(Z,K,ut),q!==Z&&l(V,q)):J&16?At&16?wt(Z,q,V,rt,K,ut,St,ft,bt):u(Z,K,ut,!0):(J&8&&l(V,""),At&16&&M(q,V,rt,K,ut,St,ft,bt))},yt=(v,I,V,rt,K,ut,St,ft,bt)=>{v=v||EMPTY_ARR,I=I||EMPTY_ARR;const Z=v.length,J=I.length,q=Math.min(Z,J);let ct;for(ct=0;ct<q;ct++){const At=I[ct]=bt?cloneIfMounted(I[ct]):normalizeVNode(I[ct]);F(v[ct],At,V,null,K,ut,St,ft,bt)}Z>J?u(v,K,ut,!0,!1,q):M(I,V,rt,K,ut,St,ft,bt,q)},wt=(v,I,V,rt,K,ut,St,ft,bt)=>{let Z=0;const J=I.length;let q=v.length-1,ct=J-1;for(;Z<=q&&Z<=ct;){const At=v[Z],Et=I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]);if(isSameVNodeType(At,Et))F(At,Et,V,null,K,ut,St,ft,bt);else break;Z++}for(;Z<=q&&Z<=ct;){const At=v[q],Et=I[ct]=bt?cloneIfMounted(I[ct]):normalizeVNode(I[ct]);if(isSameVNodeType(At,Et))F(At,Et,V,null,K,ut,St,ft,bt);else break;q--,ct--}if(Z>q){if(Z<=ct){const At=ct+1,Et=At<J?I[At].el:rt;for(;Z<=ct;)F(null,I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]),V,Et,K,ut,St,ft,bt),Z++}}else if(Z>ct)for(;Z<=q;)kt(v[Z],K,ut,!0),Z++;else{const At=Z,Et=Z,Dt=new Map;for(Z=Et;Z<=ct;Z++){const at=I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]);at.key!=null&&Dt.set(at.key,Z)}let Lt,jt=0;const Wt=ct-Et+1;let Gt=!1,Vt=0;const Yt=new Array(Wt);for(Z=0;Z<Wt;Z++)Yt[Z]=0;for(Z=At;Z<=q;Z++){const at=v[Z];if(jt>=Wt){kt(at,K,ut,!0);continue}let nt;if(at.key!=null)nt=Dt.get(at.key);else for(Lt=Et;Lt<=ct;Lt++)if(Yt[Lt-Et]===0&&isSameVNodeType(at,I[Lt])){nt=Lt;break}nt===void 0?kt(at,K,ut,!0):(Yt[nt-Et]=Z+1,nt>=Vt?Vt=nt:Gt=!0,F(at,I[nt],V,null,K,ut,St,ft,bt),jt++)}const vt=Gt?getSequence(Yt):EMPTY_ARR;for(Lt=vt.length-1,Z=Wt-1;Z>=0;Z--){const at=Et+Z,nt=I[at],xt=I[at+1],Tt=at+1<J?xt.el||resolveAsyncComponentPlaceholder(xt):rt;Yt[Z]===0?F(null,nt,V,Tt,K,ut,St,ft,bt):Gt&&(Lt<0||Z!==vt[Lt]?Rt(nt,V,Tt,2):Lt--)}}},Rt=(v,I,V,rt,K=null)=>{const{el:ut,type:St,transition:ft,children:bt,shapeFlag:Z}=v;if(Z&6){Rt(v.component.subTree,I,V,rt);return}if(Z&128){v.suspense.move(I,V,rt);return}if(Z&64){St.move(v,I,V,H);return}if(St===Fragment){n(ut,I,V);for(let q=0;q<bt.length;q++)Rt(bt[q],I,V,rt);n(v.anchor,I,V);return}if(St===Static){k(v,I,V);return}if(rt!==2&&Z&1&&ft)if(rt===0)ft.beforeEnter(ut),n(ut,I,V),queuePostRenderEffect(()=>ft.enter(ut),K);else{const{leave:q,delayLeave:ct,afterLeave:At}=ft,Et=()=>{v.ctx.isUnmounted?i(ut):n(ut,I,V)},Dt=()=>{ut._isLeaving&&ut[leaveCbKey](!0),q(ut,()=>{Et(),At&&At()})};ct?ct(ut,Et,Dt):Dt()}else n(ut,I,V)},kt=(v,I,V,rt=!1,K=!1)=>{const{type:ut,props:St,ref:ft,children:bt,dynamicChildren:Z,shapeFlag:J,patchFlag:q,dirs:ct,cacheIndex:At}=v;if(q===-2&&(K=!1),ft!=null&&(pauseTracking(),setRef(ft,null,V,v,!0),resetTracking()),At!=null&&(I.renderCache[At]=void 0),J&256){I.ctx.deactivate(v);return}const Et=J&1&&ct,Dt=!isAsyncWrapper(v);let Lt;if(Dt&&(Lt=St&&St.onVnodeBeforeUnmount)&&invokeVNodeHook(Lt,I,v),J&6)f(v.component,V,rt);else{if(J&128){v.suspense.unmount(V,rt);return}Et&&invokeDirectiveHook(v,null,I,"beforeUnmount"),J&64?v.type.remove(v,I,V,H,rt):Z&&!Z.hasOnce&&(ut!==Fragment||q>0&&q&64)?u(Z,I,V,!1,!0):(ut===Fragment&&q&384||!K&&J&16)&&u(bt,I,V),rt&&j(v)}(Dt&&(Lt=St&&St.onVnodeUnmounted)||Et)&&queuePostRenderEffect(()=>{Lt&&invokeVNodeHook(Lt,I,v),Et&&invokeDirectiveHook(v,null,I,"unmounted")},V)},j=v=>{const{type:I,el:V,anchor:rt,transition:K}=v;if(I===Fragment){h(V,rt);return}if(I===Static){x(v);return}const ut=()=>{i(V),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(v.shapeFlag&1&&K&&!K.persisted){const{leave:St,delayLeave:ft}=K,bt=()=>St(V,ut);ft?ft(v.el,ut,bt):bt()}else ut()},h=(v,I)=>{let V;for(;v!==I;)V=P(v),i(v),v=V;i(I)},f=(v,I,V)=>{const{bum:rt,scope:K,job:ut,subTree:St,um:ft,m:bt,a:Z}=v;invalidateMount(bt),invalidateMount(Z),rt&&invokeArrayFns(rt),K.stop(),ut&&(ut.flags|=8,kt(St,v,I,V)),ft&&queuePostRenderEffect(ft,I),queuePostRenderEffect(()=>{v.isUnmounted=!0},I)},u=(v,I,V,rt=!1,K=!1,ut=0)=>{for(let St=ut;St<v.length;St++)kt(v[St],I,V,rt,K)},y=v=>{if(v.shapeFlag&6)return y(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const I=P(v.anchor||v.el),V=I&&I[TeleportEndKey];return V?P(V):I};let S=!1;const N=(v,I,V)=>{let rt;v==null?I._vnode&&(kt(I._vnode,null,null,!0),rt=I._vnode.component):F(I._vnode||null,v,I,null,null,null,V),I._vnode=v,S||(S=!0,flushPreFlushCbs(rt),flushPostFlushCbs(),S=!1)},H={p:F,um:kt,m:Rt,r:j,mt:$,mc:M,pc:X,pbc:B,n:y,o:t};let Y,dt;return e&&([Y,dt]=e(H)),{render:N,hydrate:Y,createApp:createAppAPI(N,Y)}}function resolveChildrenNamespace({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function toggleRecurse({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let r=0;r<n.length;r++){const o=n[r];let b=i[r];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=i[r]=cloneIfMounted(i[r]),b.el=o.el),!s&&b.patchFlag!==-2&&traverseStaticChildren(o,b)),b.type===Text&&(b.patchFlag!==-1?b.el=o.el:b.__elIndex=r+(t.type===Fragment?1:0)),b.type===Comment&&!b.el&&(b.el=o.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,r,o,b;const d=t.length;for(n=0;n<d;n++){const g=t[n];if(g!==0){if(i=s[s.length-1],t[i]<g){e[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)b=r+o>>1,t[s[b]]<g?r=b+1:o=b;g<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function resolveAsyncComponentPlaceholder(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?resolveAsyncComponentPlaceholder(e.subTree):null}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,r){return setupBlock(createBaseVNode(t,e,s,n,i,r,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString$1(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,r=t===Fragment?0:1,o=!1,b=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return b?(normalizeChildren(d,s),r&128&&t.normalize(d)):s&&(d.shapeFlag|=isString$1(s)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const b=cloneVNode(t,e,!0);return s&&normalizeChildren(b,s),isBlockTreeEnabled>0&&!r&&currentBlock&&(b.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=b:currentBlock.push(b)),b.patchFlag=-2,b}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:b,style:d}=e;b&&!isString$1(b)&&(e.class=normalizeClass(b)),isObject(d)&&(isProxy(d)&&!isArray(d)&&(d=extend({},d)),e.style=normalizeStyle(d))}const o=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,s,n,i,o,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:b,transition:d}=t,g=e?mergeProps(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&normalizeKey(g),ref:e&&e.ref?s&&r?isArray(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:b,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:d,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return d&&n&&setTransitionHooks(l,d.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!isInternalObject(e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const r=e[i],o=n[i];o&&r!==o&&!(isArray(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",s=>currentInstance=s),setInSSRSetupState=e("__VUE_SSR_SETTERS__",s=>isInSSRComponentSetup=s)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,s=!1){e&&setInSSRSetupState(e);const{props:n,children:i}=t.vnode,r=isStatefulComponent(t);initProps(t,n,r,e),initSlots(t,i,s||e);const o=r?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),o}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:n}=s;if(n){pauseTracking();const i=t.setupContext=n.length>1?createSetupContext(t):null,r=setCurrentInstance(t),o=callWithErrorHandling(n,t,0,[t.props,i]),b=isPromise(o);if(resetTracking(),r(),(b||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),b){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(d=>{handleSetupResult(t,d,e)}).catch(d=>{handleError(d,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:b,compilerOptions:d}=n,g=extend(extend({isCustomElement:r,delimiters:b},o),d);n.render=compile(i,g)}}t.render=n.render||NOOP}{const i=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,s=!1){let n=getComponentName(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t){const i=r=>{for(const o in r)if(r[o]===e)return o};n=i(t.components)||t.parent&&i(t.parent.type.components)||i(t.appContext.components)}return n?classify(n):s?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):s?doc.createElement(t,{is:s}):doc.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const o=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const b=templateContainer.content;if(n==="svg"||n==="mathml"){const d=b.firstChild;for(;d.firstChild;)b.appendChild(d.firstChild);b.removeChild(d)}e.insertBefore(b,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,s){const n=t[vtcKey];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(t,{value:e},{transition:s}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(t,e,s){const n=t.style,i=isString$1(s);let r=!1;if(s&&!i){if(e)if(isString$1(e))for(const o of e.split(";")){const b=o.slice(0,o.indexOf(":")).trim();s[b]==null&&setStyle(n,b,"")}else for(const o in e)s[o]==null&&setStyle(n,o,"");for(const o in s)o==="display"&&(r=!0),setStyle(n,o,s[o])}else if(i){if(e!==s){const o=n[CSS_VAR_TEXT];o&&(s+=";"+o),n.cssText=s,r=displayRE.test(s)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const r=prefixes[i]+n;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i,r=isSpecialBooleanAttr(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s):s==null||r&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,r?"":isSymbol(s)?String(s):s)}function patchDOMProp(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const b=r==="OPTION"?t.getAttribute("value")||"":t.value,d=s==null?t.type==="checkbox"?"on":"":String(s);(b!==d||!("_value"in t))&&(t.value=d),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const b=typeof t[e];b==="boolean"?s=includeBooleanAttr(s):s==null&&b==="string"?(s="",o=!0):b==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(i||e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}const veiKey=Symbol("_vei");function patchEvent(t,e,s,n,i=null){const r=t[veiKey]||(t[veiKey]={}),o=r[e];if(n&&o)o.value=n;else{const[b,d]=parseName(e);if(n){const g=r[e]=createInvoker(n,i);addEventListener(t,b,g,d)}else o&&(removeEventListener(t,b,o,d),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,s,n,i,r)=>{const o=i==="svg";e==="class"?patchClass(t,n,o):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,o))?(patchDOMProp(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,n,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString$1(n))?patchDOMProp(t,camelize(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,o))};function shouldSetAsProp(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString$1(s)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?s=>invokeArrayFns(e,s):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(t,e,s){return e&&(t=t.trim()),s&&(t=looseToNumber(t)),t}const vModelText={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[assignKey]=getModelAssigner(i);const r=n||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",o=>{o.target.composing||t[assignKey](castValue(t.value,s,r))}),(s||r)&&addEventListener(t,"change",()=>{t.value=castValue(t.value,s,r)}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},o){if(t[assignKey]=getModelAssigner(o),t.composing)return;const b=(r||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,d=e??"";b!==d&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===d)||(t.value=d))}},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const r=e._component;!isFunction$1(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Yt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=yt,e.bytesToString=Y,e.createValidAbsoluteUrl=Rt,e.getModificationDate=Et,e.getUuid=Gt,e.getVerbosityLevel=ot,e.info=pt,e.isArrayBuffer=ct,e.isArrayEqual=At,e.isNodeJS=void 0,e.normalizeUnicode=Wt,e.objectFromMap=V,e.objectSize=I,e.setVerbosityLevel=$,e.shadow=kt,e.string32=v,e.stringToBytes=dt,e.stringToPDFString=Z,e.stringToUTF8String=J,e.unreachable=X,e.utf8StringToString=q,e.warn=mt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const r=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=r;const o=1.35;e.LINE_FACTOR=o;const b=.35;e.LINE_DESCENT_FACTOR=b;const d=b/o;e.BASELINE_FACTOR=d;const g={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=g;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const E="pdfjs_internal_editor_";e.AnnotationEditorPrefix=E;const P={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=P;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=C;const R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=R;const F={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=F;const w={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=w;const T={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=T;const O={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=O;const k={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=k;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=x;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=m;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=A;const U={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=U;const M={O:"PageOpen",C:"PageClose"};e.PageActionEventType=M;const _={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=_;const B={NONE:0,BINARY:1};e.CMapCompressionType=B;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=L;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let st=_.WARNINGS;function $(vt){Number.isInteger(vt)&&(st=vt)}function ot(){return st}function pt(vt){st>=_.INFOS&&console.log(`Info: ${vt}`)}function mt(vt){st>=_.WARNINGS&&console.log(`Warning: ${vt}`)}function X(vt){throw new Error(vt)}function yt(vt,at){vt||X(at)}function wt(vt){switch(vt==null?void 0:vt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rt(vt,at=null,nt=null){if(!vt)return null;try{if(nt&&typeof vt=="string"){if(nt.addDefaultProtocol&&vt.startsWith("www.")){const Tt=vt.match(/\./g);(Tt==null?void 0:Tt.length)>=2&&(vt=`http://${vt}`)}if(nt.tryConvertEncoding)try{vt=J(vt)}catch{}}const xt=at?new URL(vt,at):new URL(vt);if(wt(xt))return xt}catch{}return null}function kt(vt,at,nt,xt=!1){return Object.defineProperty(vt,at,{value:nt,enumerable:!xt,configurable:!0,writable:!1}),nt}const j=function(){function at(nt,xt){this.constructor===at&&X("Cannot initialize BaseException."),this.message=nt,this.name=xt}return at.prototype=new Error,at.constructor=at,at}();e.BaseException=j;class h extends j{constructor(at,nt){super(at,"PasswordException"),this.code=nt}}e.PasswordException=h;class f extends j{constructor(at,nt){super(at,"UnknownErrorException"),this.details=nt}}e.UnknownErrorException=f;class u extends j{constructor(at){super(at,"InvalidPDFException")}}e.InvalidPDFException=u;class y extends j{constructor(at){super(at,"MissingPDFException")}}e.MissingPDFException=y;class S extends j{constructor(at,nt){super(at,"UnexpectedResponseException"),this.status=nt}}e.UnexpectedResponseException=S;class N extends j{constructor(at){super(at,"FormatError")}}e.FormatError=N;class H extends j{constructor(at){super(at,"AbortException")}}e.AbortException=H;function Y(vt){(typeof vt!="object"||(vt==null?void 0:vt.length)===void 0)&&X("Invalid argument for bytesToString");const at=vt.length,nt=8192;if(at<nt)return String.fromCharCode.apply(null,vt);const xt=[];for(let Tt=0;Tt<at;Tt+=nt){const ne=Math.min(Tt+nt,at),ee=vt.subarray(Tt,ne);xt.push(String.fromCharCode.apply(null,ee))}return xt.join("")}function dt(vt){typeof vt!="string"&&X("Invalid argument for stringToBytes");const at=vt.length,nt=new Uint8Array(at);for(let xt=0;xt<at;++xt)nt[xt]=vt.charCodeAt(xt)&255;return nt}function v(vt){return String.fromCharCode(vt>>24&255,vt>>16&255,vt>>8&255,vt&255)}function I(vt){return Object.keys(vt).length}function V(vt){const at=Object.create(null);for(const[nt,xt]of vt)at[nt]=xt;return at}function rt(){const vt=new Uint8Array(4);return vt[0]=1,new Uint32Array(vt.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return kt(this,"isLittleEndian",rt())}static get isEvalSupported(){return kt(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?kt(this,"platform",{isWin:!1,isMac:!1}):kt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var at,nt;return kt(this,"isCSSRoundSupported",(nt=(at=globalThis.CSS)==null?void 0:at.supports)==null?void 0:nt.call(at,"width: round(1.5px, 1px)"))}}e.FeatureTest=ut;const St=[...Array(256).keys()].map(vt=>vt.toString(16).padStart(2,"0"));class ft{static makeHexColor(at,nt,xt){return`#${St[at]}${St[nt]}${St[xt]}`}static scaleMinMax(at,nt){let xt;at[0]?(at[0]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[0],nt[1]*=at[0],at[3]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[3],nt[3]*=at[3]):(xt=nt[0],nt[0]=nt[2],nt[2]=xt,xt=nt[1],nt[1]=nt[3],nt[3]=xt,at[1]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[1],nt[3]*=at[1],at[2]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[2],nt[1]*=at[2]),nt[0]+=at[4],nt[1]+=at[4],nt[2]+=at[5],nt[3]+=at[5]}static transform(at,nt){return[at[0]*nt[0]+at[2]*nt[1],at[1]*nt[0]+at[3]*nt[1],at[0]*nt[2]+at[2]*nt[3],at[1]*nt[2]+at[3]*nt[3],at[0]*nt[4]+at[2]*nt[5]+at[4],at[1]*nt[4]+at[3]*nt[5]+at[5]]}static applyTransform(at,nt){const xt=at[0]*nt[0]+at[1]*nt[2]+nt[4],Tt=at[0]*nt[1]+at[1]*nt[3]+nt[5];return[xt,Tt]}static applyInverseTransform(at,nt){const xt=nt[0]*nt[3]-nt[1]*nt[2],Tt=(at[0]*nt[3]-at[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/xt,ne=(-at[0]*nt[1]+at[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/xt;return[Tt,ne]}static getAxialAlignedBoundingBox(at,nt){const xt=this.applyTransform(at,nt),Tt=this.applyTransform(at.slice(2,4),nt),ne=this.applyTransform([at[0],at[3]],nt),ee=this.applyTransform([at[2],at[1]],nt);return[Math.min(xt[0],Tt[0],ne[0],ee[0]),Math.min(xt[1],Tt[1],ne[1],ee[1]),Math.max(xt[0],Tt[0],ne[0],ee[0]),Math.max(xt[1],Tt[1],ne[1],ee[1])]}static inverseTransform(at){const nt=at[0]*at[3]-at[1]*at[2];return[at[3]/nt,-at[1]/nt,-at[2]/nt,at[0]/nt,(at[2]*at[5]-at[4]*at[3])/nt,(at[4]*at[1]-at[5]*at[0])/nt]}static singularValueDecompose2dScale(at){const nt=[at[0],at[2],at[1],at[3]],xt=at[0]*nt[0]+at[1]*nt[2],Tt=at[0]*nt[1]+at[1]*nt[3],ne=at[2]*nt[0]+at[3]*nt[2],ee=at[2]*nt[1]+at[3]*nt[3],ht=(xt+ee)/2,Mt=Math.sqrt((xt+ee)**2-4*(xt*ee-ne*Tt))/2,Ut=ht+Mt||1,Ft=ht-Mt||1;return[Math.sqrt(Ut),Math.sqrt(Ft)]}static normalizeRect(at){const nt=at.slice(0);return at[0]>at[2]&&(nt[0]=at[2],nt[2]=at[0]),at[1]>at[3]&&(nt[1]=at[3],nt[3]=at[1]),nt}static intersect(at,nt){const xt=Math.max(Math.min(at[0],at[2]),Math.min(nt[0],nt[2])),Tt=Math.min(Math.max(at[0],at[2]),Math.max(nt[0],nt[2]));if(xt>Tt)return null;const ne=Math.max(Math.min(at[1],at[3]),Math.min(nt[1],nt[3])),ee=Math.min(Math.max(at[1],at[3]),Math.max(nt[1],nt[3]));return ne>ee?null:[xt,ne,Tt,ee]}static bezierBoundingBox(at,nt,xt,Tt,ne,ee,ht,Mt){const Ut=[],Ft=[[],[]];let Ht,zt,Zt,Pt,Jt,$t,W,c;for(let lt=0;lt<2;++lt){if(lt===0?(zt=6*at-12*xt+6*ne,Ht=-3*at+9*xt-9*ne+3*ht,Zt=3*xt-3*at):(zt=6*nt-12*Tt+6*ee,Ht=-3*nt+9*Tt-9*ee+3*Mt,Zt=3*Tt-3*nt),Math.abs(Ht)<1e-12){if(Math.abs(zt)<1e-12)continue;Pt=-Zt/zt,0<Pt&&Pt<1&&Ut.push(Pt);continue}W=zt*zt-4*Zt*Ht,c=Math.sqrt(W),!(W<0)&&(Jt=(-zt+c)/(2*Ht),0<Jt&&Jt<1&&Ut.push(Jt),$t=(-zt-c)/(2*Ht),0<$t&&$t<1&&Ut.push($t))}let D=Ut.length,z;const et=D;for(;D--;)Pt=Ut[D],z=1-Pt,Ft[0][D]=z*z*z*at+3*z*z*Pt*xt+3*z*Pt*Pt*ne+Pt*Pt*Pt*ht,Ft[1][D]=z*z*z*nt+3*z*z*Pt*Tt+3*z*Pt*Pt*ee+Pt*Pt*Pt*Mt;return Ft[0][et]=at,Ft[1][et]=nt,Ft[0][et+1]=ht,Ft[1][et+1]=Mt,Ft[0].length=Ft[1].length=et+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}e.Util=ft;const bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Z(vt){if(vt[0]>=""){let nt;if(vt[0]===""&&vt[1]===""?nt="utf-16be":vt[0]===""&&vt[1]===""?nt="utf-16le":vt[0]===""&&vt[1]===""&&vt[2]===""&&(nt="utf-8"),nt)try{const xt=new TextDecoder(nt,{fatal:!0}),Tt=dt(vt);return xt.decode(Tt)}catch(xt){mt(`stringToPDFString: "${xt}".`)}}const at=[];for(let nt=0,xt=vt.length;nt<xt;nt++){const Tt=bt[vt.charCodeAt(nt)];at.push(Tt?String.fromCharCode(Tt):vt.charAt(nt))}return at.join("")}function J(vt){return decodeURIComponent(escape(vt))}function q(vt){return unescape(encodeURIComponent(vt))}function ct(vt){return typeof vt=="object"&&(vt==null?void 0:vt.byteLength)!==void 0}function At(vt,at){if(vt.length!==at.length)return!1;for(let nt=0,xt=vt.length;nt<xt;nt++)if(vt[nt]!==at[nt])return!1;return!0}function Et(vt=new Date){return[vt.getUTCFullYear().toString(),(vt.getUTCMonth()+1).toString().padStart(2,"0"),vt.getUTCDate().toString().padStart(2,"0"),vt.getUTCHours().toString().padStart(2,"0"),vt.getUTCMinutes().toString().padStart(2,"0"),vt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){G(this,Yt,!1);this.promise=new Promise((at,nt)=>{this.resolve=xt=>{gt(this,Yt,!0),at(xt)},this.reject=xt=>{gt(this,Yt,!0),nt(xt)}})}get settled(){return a(this,Yt)}}Yt=new WeakMap,e.PromiseCapability=Dt;let Lt=null,jt=null;function Wt(vt){return Lt||(Lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jt=new Map([["","t"]])),vt.replaceAll(Lt,(at,nt,xt)=>nt?nt.normalize("NFKC"):jt.get(xt))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const vt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(vt);else for(let at=0;at<32;at++)vt[at]=Math.floor(Math.random()*255);return Y(vt)}const Vt="pdfjs_internal_id_";e.AnnotationPrefix=Vt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,de,o,xe,d,g,l,E,P,C,R,F,w,Ce,O,k,$e,m,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(M){if(typeof M=="string"||M instanceof URL?M={url:M}:(0,_util.isArrayBuffer)(M)&&(M={data:M}),typeof M!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!M.url&&!M.data&&!M.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const _=new PDFDocumentLoadingTask,{docId:B}=_,L=M.url?getUrlProp(M.url):null,Q=M.data?getDataProp(M.data):null,st=M.httpHeaders||null,$=M.withCredentials===!0,ot=M.password??null,pt=M.range instanceof PDFDataRangeTransport?M.range:null,mt=Number.isInteger(M.rangeChunkSize)&&M.rangeChunkSize>0?M.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let X=M.worker instanceof PDFWorker?M.worker:null;const yt=M.verbosity,wt=typeof M.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(M.docBaseUrl)?M.docBaseUrl:null,Rt=typeof M.cMapUrl=="string"?M.cMapUrl:null,kt=M.cMapPacked!==!1,j=M.CMapReaderFactory||DefaultCMapReaderFactory,h=typeof M.standardFontDataUrl=="string"?M.standardFontDataUrl:null,f=M.StandardFontDataFactory||DefaultStandardFontDataFactory,u=M.stopAtErrors!==!0,y=Number.isInteger(M.maxImageSize)&&M.maxImageSize>-1?M.maxImageSize:-1,S=M.isEvalSupported!==!1,N=typeof M.isOffscreenCanvasSupported=="boolean"?M.isOffscreenCanvasSupported:!_util.isNodeJS,H=Number.isInteger(M.canvasMaxAreaInBytes)?M.canvasMaxAreaInBytes:-1,Y=typeof M.disableFontFace=="boolean"?M.disableFontFace:_util.isNodeJS,dt=M.fontExtraProperties===!0,v=M.enableXfa===!0,I=M.ownerDocument||globalThis.document,V=M.disableRange===!0,rt=M.disableStream===!0,K=M.disableAutoFetch===!0,ut=M.pdfBug===!0,St=pt?pt.length:M.length??NaN,ft=typeof M.useSystemFonts=="boolean"?M.useSystemFonts:!_util.isNodeJS&&!Y,bt=typeof M.useWorkerFetch=="boolean"?M.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&f===_display_utils.DOMStandardFontDataFactory&&Rt&&h&&(0,_display_utils.isValidFetchUrl)(Rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),Z=M.canvasFactory||new DefaultCanvasFactory({ownerDocument:I}),J=M.filterFactory||new DefaultFilterFactory({docId:B,ownerDocument:I}),q=null;(0,_util.setVerbosityLevel)(yt);const ct={canvasFactory:Z,filterFactory:J};if(bt||(ct.cMapReaderFactory=new j({baseUrl:Rt,isCompressed:kt}),ct.standardFontDataFactory=new f({baseUrl:h})),!X){const Dt={verbosity:yt,port:_worker_options.GlobalWorkerOptions.workerPort};X=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),_._worker=X}const At={docId:B,apiVersion:"3.11.174",data:Q,password:ot,disableAutoFetch:K,rangeChunkSize:mt,length:St,docBaseUrl:wt,enableXfa:v,evaluatorOptions:{maxImageSize:y,disableFontFace:Y,ignoreErrors:u,isEvalSupported:S,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:H,fontExtraProperties:dt,useSystemFonts:ft,cMapUrl:bt?Rt:null,standardFontDataUrl:bt?h:null}},Et={ignoreErrors:u,isEvalSupported:S,disableFontFace:Y,fontExtraProperties:dt,enableXfa:v,ownerDocument:I,disableAutoFetch:K,pdfBug:ut,styleElement:q};return X.promise.then(function(){if(_.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(X,At),Lt=new Promise(function(jt){let Wt;pt?Wt=new _transport_stream.PDFDataTransportStream({length:St,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:V,disableStream:rt},pt):Q||(Wt=(Vt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vt):(0,_display_utils.isValidFetchUrl)(Vt.url)?new _displayFetch_stream.PDFFetchStream(Vt):new _displayNetwork.PDFNetworkStream(Vt))({url:L,length:St,httpHeaders:st,withCredentials:$,rangeChunkSize:mt,disableRange:V,disableStream:rt})),jt(Wt)});return Promise.all([Dt,Lt]).then(function([jt,Wt]){if(_.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(B,jt,X.port),Vt=new WorkerTransport(Gt,_,Wt,Et,ct);_._transport=Vt,Gt.send("Ready",null)})}).catch(_._capability.reject),_}async function _fetchDocument(M,_){if(M.destroyed)throw new Error("Worker was destroyed");const B=await M.messageHandler.sendWithPromise("GetDocRequest",_,_.data?[_.data.buffer]:null);if(M.destroyed)throw new Error("Worker was destroyed");return B}function getUrlProp(M){if(M instanceof URL)return M.href;try{return new URL(M,window.location).href}catch{if(_util.isNodeJS&&typeof M=="string")return M}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(M){if(_util.isNodeJS&&typeof Buffer<"u"&&M instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(M instanceof Uint8Array&&M.byteLength===M.buffer.byteLength)return M;if(typeof M=="string")return(0,_util.stringToBytes)(M);if(typeof M=="object"&&!isNaN(M==null?void 0:M.length)||(0,_util.isArrayBuffer)(M))return new Uint8Array(M);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_e(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var _,B,L;this.destroyed=!0;try{(_=this._worker)!=null&&_.port&&(this._worker._pendingDestroy=!0),await((B=this._transport)==null?void 0:B.destroy())}catch(Q){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,Q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,G(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(_,B,L=!1,Q=null){this.length=_,this.initialData=B,this.progressiveDone=L,this.contentDispositionFilename=Q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(_){this._rangeListeners.push(_)}addProgressListener(_){this._progressListeners.push(_)}addProgressiveReadListener(_){this._progressiveReadListeners.push(_)}addProgressiveDoneListener(_){this._progressiveDoneListeners.push(_)}onDataRange(_,B){for(const L of this._rangeListeners)L(_,B)}onDataProgress(_,B){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(_,B)})}onDataProgressiveRead(_){this._readyCapability.promise.then(()=>{for(const B of this._progressiveReadListeners)B(_)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveDoneListeners)_()})}transportReady(){this._readyCapability.resolve()}requestDataRange(_,B){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(_,B){this._pdfInfo=_,this._transport=B,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const Q=[];for(const st in L)Q.push(...L[st]);return Q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(_){return this._transport.getPage(_)}getPageIndex(_){return this._transport.getPageIndex(_)}getDestinations(){return this._transport.getDestinations()}getDestination(_){return this._transport.getDestination(_)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(_=!1){return this._transport.startCleanup(_||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(_,B,L,Q=!1){G(this,i);G(this,o);G(this,s,null);G(this,n,!1);this._pageIndex=_,this._pageInfo=B,this._transport=L,this._stats=Q?new _display_utils.StatTimer:null,this._pdfBug=Q,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:_,rotation:B=this.rotate,offsetX:L=0,offsetY:Q=0,dontFlip:st=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:_,rotation:B,offsetX:L,offsetY:Q,dontFlip:st})}getAnnotations({intent:_="display"}={}){const B=this._transport.getRenderingIntent(_);return this._transport.getAnnotations(this._pageIndex,B.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var _;return((_=this._transport._htmlForXfa)==null?void 0:_.children[this._pageIndex])||null}render({canvasContext:_,viewport:B,intent:L="display",annotationMode:Q=_util.AnnotationMode.ENABLE,transform:st=null,background:$=null,optionalContentConfigPromise:ot=null,annotationCanvasMap:pt=null,pageColors:mt=null,printAnnotationStorage:X=null}){var f,u;(f=this._stats)==null||f.time("Overall");const yt=this._transport.getRenderingIntent(L,Q,X);gt(this,n,!1),it(this,o,xe).call(this),ot||(ot=this._transport.getOptionalContentConfig());let wt=this._intentStates.get(yt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(yt.cacheKey,wt)),wt.streamReaderCancelTimeout&&(clearTimeout(wt.streamReaderCancelTimeout),wt.streamReaderCancelTimeout=null);const Rt=!!(yt.renderingIntent&_util.RenderingIntentFlag.PRINT);wt.displayReadyCapability||(wt.displayReadyCapability=new _util.PromiseCapability,wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(yt));const kt=y=>{var S,N;wt.renderTasks.delete(j),(this._maybeCleanupAfterRender||Rt)&&gt(this,n,!0),it(this,i,de).call(this,!Rt),y?(j.capability.reject(y),this._abortOperatorList({intentState:wt,reason:y instanceof Error?y:new Error(y)})):j.capability.resolve(),(S=this._stats)==null||S.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},j=new InternalRenderTask({callback:kt,params:{canvasContext:_,viewport:B,transform:st,background:$},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:wt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Rt,pdfBug:this._pdfBug,pageColors:mt});(wt.renderTasks||(wt.renderTasks=new Set)).add(j);const h=j.task;return Promise.all([wt.displayReadyCapability.promise,ot]).then(([y,S])=>{var N;if(this.destroyed){kt();return}(N=this._stats)==null||N.time("Rendering"),j.initializeGraphics({transparency:y,optionalContentConfig:S}),j.operatorListChanged()}).catch(kt),h}getOperatorList({intent:_="display",annotationMode:B=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var pt;function Q(){$.operatorList.lastChunk&&($.opListReadCapability.resolve($.operatorList),$.renderTasks.delete(ot))}const st=this._transport.getRenderingIntent(_,B,L,!0);let $=this._intentStates.get(st.cacheKey);$||($=Object.create(null),this._intentStates.set(st.cacheKey,$));let ot;return $.opListReadCapability||(ot=Object.create(null),ot.operatorListChanged=Q,$.opListReadCapability=new _util.PromiseCapability,($.renderTasks||($.renderTasks=new Set)).add(ot),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(st)),$.opListReadCapability.promise}streamTextContent({includeMarkedContent:_=!1,disableNormalization:B=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:_===!0,disableNormalization:B===!0},{highWaterMark:100,size(Q){return Q.items.length}})}getTextContent(_={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const B=this.streamTextContent(_);return new Promise(function(L,Q){function st(){$.read().then(function({value:pt,done:mt}){if(mt){L(ot);return}Object.assign(ot.styles,pt.styles),ot.items.push(...pt.items),st()},Q)}const $=B.getReader(),ot={items:[],styles:Object.create(null)};st()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const _=[];for(const B of this._intentStates.values())if(this._abortOperatorList({intentState:B,reason:new Error("Page was destroyed."),force:!0}),!B.opListReadCapability)for(const L of B.renderTasks)_.push(L.completed),L.cancel();return this.objs.clear(),gt(this,n,!1),it(this,o,xe).call(this),Promise.all(_)}cleanup(_=!1){gt(this,n,!0);const B=it(this,i,de).call(this,!1);return _&&B&&this._stats&&(this._stats=new _display_utils.StatTimer),B}_startRenderPage(_,B){var Q,st;const L=this._intentStates.get(B);L&&((Q=this._stats)==null||Q.timeEnd("Page Request"),(st=L.displayReadyCapability)==null||st.resolve(_))}_renderPageChunk(_,B){for(let L=0,Q=_.length;L<Q;L++)B.operatorList.fnArray.push(_.fnArray[L]),B.operatorList.argsArray.push(_.argsArray[L]);B.operatorList.lastChunk=_.lastChunk,B.operatorList.separateAnnots=_.separateAnnots;for(const L of B.renderTasks)L.operatorListChanged();_.lastChunk&&it(this,i,de).call(this,!0)}_pumpOperatorList({renderingIntent:_,cacheKey:B,annotationStorageSerializable:L}){const{map:Q,transfers:st}=L,ot=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:_,cacheKey:B,annotationStorage:Q},st).getReader(),pt=this._intentStates.get(B);pt.streamReader=ot;const mt=()=>{ot.read().then(({value:X,done:yt})=>{if(yt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,pt),mt())},X=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const yt of pt.renderTasks)yt.operatorListChanged();it(this,i,de).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject(X);else if(pt.opListReadCapability)pt.opListReadCapability.reject(X);else throw X}})};mt()}_abortOperatorList({intentState:_,reason:B,force:L=!1}){if(_.streamReader){if(_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null),!L){if(_.renderTasks.size>0)return;if(B instanceof _display_utils.RenderingCancelledException){let Q=RENDERING_CANCELLED_TIMEOUT;B.extraDelay>0&&B.extraDelay<1e3&&(Q+=B.extraDelay),_.streamReaderCancelTimeout=setTimeout(()=>{_.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:_,reason:B,force:!0})},Q);return}}if(_.streamReader.cancel(new _util.AbortException(B.message)).catch(()=>{}),_.streamReader=null,!this._transport.destroyed){for(const[Q,st]of this._intentStates)if(st===_){this._intentStates.delete(Q);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,de=function(_=!1){if(it(this,o,xe).call(this),!a(this,n)||this.destroyed)return!1;if(_)return gt(this,s,setTimeout(()=>{gt(this,s,null),it(this,i,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:B,operatorList:L}of this._intentStates.values())if(B.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,n,!1),!0},o=new WeakSet,xe=function(){a(this,s)&&(clearTimeout(a(this,s)),gt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){G(this,d,new Set);G(this,g,Promise.resolve())}postMessage(_,B){const L={data:structuredClone(_,B?{transfer:B}:null)};a(this,g).then(()=>{for(const Q of a(this,d))Q.call(this,L)})}addEventListener(_,B){a(this,d).add(B)}removeEventListener(_,B){a(this,d).delete(B)}terminate(){a(this,d).clear()}}d=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const M=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;M&&(PDFWorkerUtil.fallbackWorkerSrc=M.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(M,_){let B;try{if(B=new URL(M),!B.origin||B.origin==="null")return!1}catch{return!1}const L=new URL(_,B);return B.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(M){const _=`importScripts("${M}");`;return URL.createObjectURL(new Blob([_]))}}const _PDFWorker=class _PDFWorker{constructor({name:M=null,port:_=null,verbosity:B=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=M,this.destroyed=!1,this.verbosity=B,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,_){if((L=a(_PDFWorker,E))!=null&&L.has(_))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,E)||gt(_PDFWorker,E,new WeakMap)).set(_,this),this._initializeFromPort(_);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(M){this._port=M,this._messageHandler=new _message_handler.MessageHandler("main","worker",M),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:M}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,M)||(M=PDFWorkerUtil.createCDNWrapper(new URL(M,window.location).href));const _=new Worker(M),B=new _message_handler.MessageHandler("main","worker",_),L=()=>{_.removeEventListener("error",Q),B.destroy(),_.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Q=()=>{this._webWorker||L()};_.addEventListener("error",Q),B.on("test",$=>{if(_.removeEventListener("error",Q),this.destroyed){L();return}$?(this._messageHandler=B,this._port=_,this._webWorker=_,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),B.destroy(),_.terminate())}),B.on("ready",$=>{if(_.removeEventListener("error",Q),this.destroyed){L();return}try{st()}catch{this._setupFakeWorker()}});const st=()=>{const $=new Uint8Array;B.send("test",$,[$.buffer])};st();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(M=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const _=new LoopbackPort;this._port=_;const B=`fake${PDFWorkerUtil.fakeWorkerId++}`,L=new _message_handler.MessageHandler(B+"_worker",B,_);M.setup(L,_);const Q=new _message_handler.MessageHandler(B,B+"_worker",_);this._messageHandler=Q,this._readyCapability.resolve(),Q.send("configure",{verbosity:this.verbosity})}).catch(M=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${M.message}".`))})}destroy(){var M;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(M=a(_PDFWorker,E))==null||M.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(M){var B;if(!(M!=null&&M.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const _=(B=a(this,E))==null?void 0:B.get(M.port);if(_){if(_._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return _}return new _PDFWorker(M)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var M;try{return((M=globalThis.pdfjsWorker)==null?void 0:M.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};E=new WeakMap,G(_PDFWorker,E,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(_,B,L,Q,st){G(this,w);G(this,P,new Map);G(this,C,new Map);G(this,R,new Map);G(this,F,null);this.messageHandler=_,this.loadingTask=B,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Q.ownerDocument,styleElement:Q.styleElement}),this._params=Q,this.canvasFactory=st.canvasFactory,this.filterFactory=st.filterFactory,this.cMapReaderFactory=st.cMapReaderFactory,this.standardFontDataFactory=st.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(_,B=_util.AnnotationMode.ENABLE,L=null,Q=!1){let st=_util.RenderingIntentFlag.DISPLAY,$=_annotation_storage.SerializableEmpty;switch(_){case"any":st=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":st=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${_}`)}switch(B){case _util.AnnotationMode.DISABLE:st+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:st+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:st+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$=(st&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${B}`)}return Q&&(st+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:st,cacheKey:`${st}_${$.hash}`,annotationStorageSerializable:$}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=a(this,F))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const _=[];for(const Q of a(this,C).values())_.push(Q._destroy());a(this,C).clear(),a(this,R).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const B=this.messageHandler.sendWithPromise("Terminate",null);return _.push(B),Promise.all(_).then(()=>{var Q;this.commonObjs.clear(),this.fontLoader.clear(),a(this,P).clear(),this.filterFactory.destroy(),(Q=this._networkStream)==null||Q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:_,loadingTask:B}=this;_.on("GetReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=st=>{this._lastProgress={loaded:st.loaded,total:st.total}},Q.onPull=()=>{this._fullReader.read().then(function({value:st,done:$}){if($){Q.close();return}(0,_util.assert)(st instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(st),1,[st])}).catch(st=>{Q.error(st)})},Q.onCancel=st=>{this._fullReader.cancel(st),Q.ready.catch($=>{if(!this.destroyed)throw $})}}),_.on("ReaderHeadersReady",L=>{const Q=new _util.PromiseCapability,st=this._fullReader;return st.headersReady.then(()=>{var $;(!st.isStreamingSupported||!st.isRangeSupported)&&(this._lastProgress&&(($=B.onProgress)==null||$.call(B,this._lastProgress)),st.onProgress=ot=>{var pt;(pt=B.onProgress)==null||pt.call(B,{loaded:ot.loaded,total:ot.total})}),Q.resolve({isStreamingSupported:st.isStreamingSupported,isRangeSupported:st.isRangeSupported,contentLength:st.contentLength})},Q.reject),Q.promise}),_.on("GetRangeReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const st=this._networkStream.getRangeReader(L.begin,L.end);if(!st){Q.close();return}Q.onPull=()=>{st.read().then(function({value:$,done:ot}){if(ot){Q.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array($),1,[$])}).catch($=>{Q.error($)})},Q.onCancel=$=>{st.cancel($),Q.ready.catch(ot=>{if(!this.destroyed)throw ot})}}),_.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,B._capability.resolve(new PDFDocumentProxy(L,this))}),_.on("DocException",function(L){let Q;switch(L.name){case"PasswordException":Q=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":Q=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":Q=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":Q=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":Q=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}B._capability.reject(Q)}),_.on("PasswordRequest",L=>{if(gt(this,F,new _util.PromiseCapability),B.onPassword){const Q=st=>{st instanceof Error?a(this,F).reject(st):a(this,F).resolve({password:st})};try{B.onPassword(Q,L.code)}catch(st){a(this,F).reject(st)}}else a(this,F).reject(new _util.PasswordException(L.message,L.code));return a(this,F).promise}),_.on("DataLoaded",L=>{var Q;(Q=B.onProgress)==null||Q.call(B,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),_.on("StartRenderPage",L=>{if(this.destroyed)return;a(this,C).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),_.on("commonobj",([L,Q,st])=>{var $;if(!this.destroyed&&!this.commonObjs.has(L))switch(Q){case"Font":const ot=this._params;if("error"in st){const X=st.error;(0,_util.warn)(`Error during font loading: ${X}`),this.commonObjs.resolve(L,X);break}const pt=ot.pdfBug&&(($=globalThis.FontInspector)!=null&&$.enabled)?(X,yt)=>globalThis.FontInspector.fontAdded(X,yt):null,mt=new _font_loader.FontFaceObject(st,{isEvalSupported:ot.isEvalSupported,disableFontFace:ot.disableFontFace,ignoreErrors:ot.ignoreErrors,inspectFont:pt});this.fontLoader.bind(mt).catch(X=>_.sendWithPromise("FontFallback",{id:L})).finally(()=>{!ot.fontExtraProperties&&mt.data&&(mt.data=null),this.commonObjs.resolve(L,mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,st);break;default:throw new Error(`Got unknown common object type ${Q}`)}}),_.on("obj",([L,Q,st,$])=>{var pt;if(this.destroyed)return;const ot=a(this,C).get(Q);if(!ot.objs.has(L))switch(st){case"Image":if(ot.objs.resolve(L,$),$){let mt;if($.bitmap){const{width:X,height:yt}=$;mt=X*yt*4}else mt=((pt=$.data)==null?void 0:pt.length)||0;mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ot._maybeCleanupAfterRender=!0)}break;case"Pattern":ot.objs.resolve(L,$);break;default:throw new Error(`Got unknown object type ${st}`)}}),_.on("DocProgress",L=>{var Q;this.destroyed||(Q=B.onProgress)==null||Q.call(B,{loaded:L.loaded,total:L.total})}),_.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),_.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:_,transfers:B}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:_,filename:((L=this._fullReader)==null?void 0:L.filename)??null},B).finally(()=>{this.annotationStorage.resetModified()})}getPage(_){if(!Number.isInteger(_)||_<=0||_>this._numPages)return Promise.reject(new Error("Invalid page request."));const B=_-1,L=a(this,R).get(B);if(L)return L;const Q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:B}).then(st=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(B,st,this,this._params.pdfBug);return a(this,C).set(B,$),$});return a(this,R).set(B,Q),Q}getPageIndex(_){return typeof _!="object"||_===null||!Number.isInteger(_.num)||_.num<0||!Number.isInteger(_.gen)||_.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:_.num,gen:_.gen})}getAnnotations(_,B){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:_,intent:B})}getFieldObjects(){return it(this,w,Ce).call(this,"GetFieldObjects")}hasJSActions(){return it(this,w,Ce).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(_){return typeof _!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:_})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return it(this,w,Ce).call(this,"GetDocJSActions")}getPageJSActions(_){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:_})}getStructTree(_){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:_})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(_=>new _optional_content_config.OptionalContentConfig(_))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const _="GetMetadata",B=a(this,P).get(_);if(B)return B;const L=this.messageHandler.sendWithPromise(_,null).then(Q=>{var st,$;return{info:Q[0],metadata:Q[1]?new _metadata.Metadata(Q[1]):null,contentDispositionFilename:((st=this._fullReader)==null?void 0:st.filename)??null,contentLength:(($=this._fullReader)==null?void 0:$.contentLength)??null}});return a(this,P).set(_,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(_=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const B of a(this,C).values())if(!B.cleanup())throw new Error(`startCleanup: Page ${B.pageNumber} is currently rendering.`);this.commonObjs.clear(),_||this.fontLoader.clear(),a(this,P).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:_,enableXfa:B}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:_,enableXfa:B})}}P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakSet,Ce=function(_,B=null){const L=a(this,P).get(_);if(L)return L;const Q=this.messageHandler.sendWithPromise(_,B);return a(this,P).set(_,Q),Q};class PDFObjects{constructor(){G(this,k);G(this,O,Object.create(null))}get(_,B=null){if(B){const Q=it(this,k,$e).call(this,_);return Q.capability.promise.then(()=>B(Q.data)),null}const L=a(this,O)[_];if(!(L!=null&&L.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${_}.`);return L.data}has(_){const B=a(this,O)[_];return(B==null?void 0:B.capability.settled)||!1}resolve(_,B=null){const L=it(this,k,$e).call(this,_);L.data=B,L.capability.resolve()}clear(){var _;for(const B in a(this,O)){const{data:L}=a(this,O)[B];(_=L==null?void 0:L.bitmap)==null||_.close()}gt(this,O,Object.create(null))}}O=new WeakMap,k=new WeakSet,$e=function(_){var B;return(B=a(this,O))[_]||(B[_]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(_){G(this,m,null);gt(this,m,_),this.onContinue=null}get promise(){return a(this,m).capability.promise}cancel(_=0){a(this,m).cancel(null,_)}get separateAnnots(){const{separateAnnots:_}=a(this,m).operatorList;if(!_)return!1;const{annotationCanvasMap:B}=a(this,m);return _.form||_.canvas&&(B==null?void 0:B.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const U=class U{constructor({callback:_,params:B,objs:L,commonObjs:Q,annotationCanvasMap:st,operatorList:$,pageIndex:ot,canvasFactory:pt,filterFactory:mt,useRequestAnimationFrame:X=!1,pdfBug:yt=!1,pageColors:wt=null}){this.callback=_,this.params=B,this.objs=L,this.commonObjs=Q,this.annotationCanvasMap=st,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=ot,this.canvasFactory=pt,this.filterFactory=mt,this._pdfBug=yt,this.pageColors=wt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=X===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=B.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:_=!1,optionalContentConfig:B}){var ot,pt;if(this.cancelled)return;if(this._canvas){if(a(U,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(U,A).add(this._canvas)}this._pdfBug&&((ot=globalThis.StepperManager)!=null&&ot.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:Q,transform:st,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:B},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:st,viewport:Q,transparency:_,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(_=null,B=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),a(U,A).delete(this._canvas),this.callback(_||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,B))}operatorListChanged(){var _;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(_=this.stepper)==null||_.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(U,A).delete(this._canvas),this.callback())))}};A=new WeakMap,G(U,A,new WeakSet);let InternalRenderTask=U;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,s)=>{var g,l,E,Sn,C;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(4),r=s(8);const o=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=o;class b{constructor(){G(this,E);G(this,g,!1);G(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(F,w){const T=a(this,l).get(F);return T===void 0?w:Object.assign(w,T)}getRawValue(F){return a(this,l).get(F)}remove(F){if(a(this,l).delete(F),a(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const w of a(this,l).values())if(w instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(F,w){const T=a(this,l).get(F);let O=!1;if(T!==void 0)for(const[k,x]of Object.entries(w))T[k]!==x&&(O=!0,T[k]=x);else O=!0,a(this,l).set(F,w);O&&it(this,E,Sn).call(this),w instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(w.constructor._type)}has(F){return a(this,l).has(F)}getAll(){return a(this,l).size>0?(0,n.objectFromMap)(a(this,l)):null}setAll(F){for(const[w,T]of Object.entries(F))this.setValue(w,T)}get size(){return a(this,l).size}resetModified(){a(this,g)&&(gt(this,g,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(a(this,l).size===0)return o;const F=new Map,w=new r.MurmurHash3_64,T=[],O=Object.create(null);let k=!1;for(const[x,m]of a(this,l)){const A=m instanceof i.AnnotationEditor?m.serialize(!1,O):m;A&&(F.set(x,A),w.update(`${x}:${JSON.stringify(A)}`),k||(k=!!A.bitmap))}if(k)for(const x of F.values())x.bitmap&&T.push(x.bitmap);return F.size>0?{map:F,hash:w.hexdigest(),transfers:T}:o}}g=new WeakMap,l=new WeakMap,E=new WeakSet,Sn=function(){a(this,g)||(gt(this,g,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=b;class d extends b{constructor(w){super();G(this,C,void 0);const{map:T,hash:O,transfers:k}=w.serializable,x=structuredClone(T,k?{transfer:k}:null);gt(this,C,{map:x,hash:O,transfers:k})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,C)}}C=new WeakMap,e.PrintAnnotationStorage=d},(t,e,s)=>{var d,g,l,E,P,C,R,F,w,T,O,k,x,m,A,Ue,M,He,B,Ve,Q,We,$,En,pt,wn,X,xn,wt,ze,kt,Cn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),i=s(1),r=s(6);const h=class h{constructor(u){G(this,A);G(this,M);G(this,Q);G(this,$);G(this,pt);G(this,X);G(this,wt);G(this,kt);G(this,d,"");G(this,g,!1);G(this,l,null);G(this,E,null);G(this,P,null);G(this,C,!1);G(this,R,null);G(this,F,this.focusin.bind(this));G(this,w,this.focusout.bind(this));G(this,T,!1);G(this,O,!1);G(this,k,!1);se(this,"_initialOptions",Object.create(null));se(this,"_uiManager",null);se(this,"_focusEventsAllowed",!0);se(this,"_l10nPromise",null);G(this,x,!1);G(this,m,h._zIndex++);this.constructor===h&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:y,rawDims:{pageWidth:S,pageHeight:N,pageX:H,pageY:Y}}=this.parent.viewport;this.rotation=y,this.pageRotation=(360+y-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[S,N],this.pageTranslation=[H,Y];const[dt,v]=this.parentDimensions;this.x=u.x/dt,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const y=new b({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});y.annotationElementId=u.annotationElementId,y.deleted=!0,y._uiManager.addToAnnotationStorage(y)}static initialize(u,y=null){if(h._l10nPromise||(h._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,u.get(N)]))),y!=null&&y.strings)for(const N of y.strings)h._l10nPromise.set(N,u.get(N));if(h._borderLineWidth!==-1)return;const S=getComputedStyle(document.documentElement);h._borderLineWidth=parseFloat(S.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,y){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,y){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,x)}set _isDraggable(u){var y;gt(this,x,u),(y=this.div)==null||y.classList.toggle("draggable",u)}center(){const[u,y]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*y/(u*2),this.y+=this.width*u/(y*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*y/(u*2),this.y-=this.width*u/(y*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,m)}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(a(this,T)?gt(this,T,!1):this.parent.setSelected(this))}focusout(u){var S;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const y=u.relatedTarget;y!=null&&y.closest(`#${this.id}`)||(u.preventDefault(),(S=this.parent)!=null&&S.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,y,S,N){const[H,Y]=this.parentDimensions;[S,N]=this.screenToPageTranslation(S,N),this.x=(u+S)/H,this.y=(y+N)/Y,this.fixAndSetPosition()}translate(u,y){it(this,A,Ue).call(this,this.parentDimensions,u,y)}translateInPage(u,y){it(this,A,Ue).call(this,this.pageDimensions,u,y),this.div.scrollIntoView({block:"nearest"})}drag(u,y){const[S,N]=this.parentDimensions;if(this.x+=u/S,this.y+=y/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:I,y:V}=this.div.getBoundingClientRect();this.parent.findNewParent(this,I,V)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:H,y:Y}=this;const[dt,v]=it(this,M,He).call(this);H+=dt,Y+=v,this.div.style.left=`${(100*H).toFixed(2)}%`,this.div.style.top=`${(100*Y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[u,y]=this.pageDimensions;let{x:S,y:N,width:H,height:Y}=this;switch(H*=u,Y*=y,S*=u,N*=y,this.rotation){case 0:S=Math.max(0,Math.min(u-H,S)),N=Math.max(0,Math.min(y-Y,N));break;case 90:S=Math.max(0,Math.min(u-Y,S)),N=Math.min(y,Math.max(H,N));break;case 180:S=Math.min(u,Math.max(H,S)),N=Math.min(y,Math.max(Y,N));break;case 270:S=Math.min(u,Math.max(Y,S)),N=Math.max(0,Math.min(y-H,N));break}this.x=S/=u,this.y=N/=y;const[dt,v]=it(this,M,He).call(this);S+=dt,N+=v;const{style:I}=this.div;I.left=`${(100*S).toFixed(2)}%`,I.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(u,y){var S;return it(S=h,B,Ve).call(S,u,y,this.parentRotation)}pageTranslationToScreen(u,y){var S;return it(S=h,B,Ve).call(S,u,y,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[y,S]}=this,N=y*u,H=S*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(H)]:[N,H]}setDims(u,y){var H;const[S,N]=this.parentDimensions;this.div.style.width=`${(100*u/S).toFixed(2)}%`,a(this,C)||(this.div.style.height=`${(100*y/N).toFixed(2)}%`),(H=a(this,l))==null||H.classList.toggle("small",u<h.SMALL_EDITOR_SIZE||y<h.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:y,width:S}=u,N=S.endsWith("%"),H=!a(this,C)&&y.endsWith("%");if(N&&H)return;const[Y,dt]=this.parentDimensions;N||(u.width=`${(100*parseFloat(S)/Y).toFixed(2)}%`),!a(this,C)&&!H&&(u.height=`${(100*parseFloat(y)/dt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,l))return;const u=gt(this,l,document.createElement("button"));u.className="altText";const y=await h._l10nPromise.get("editor_alt_text_button_label");u.textContent=y,u.setAttribute("aria-label",y),u.tabIndex="0",u.addEventListener("contextmenu",r.noContextMenu),u.addEventListener("pointerdown",S=>S.stopPropagation()),u.addEventListener("click",S=>{S.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",S=>{S.target===u&&S.key==="Enter"&&(S.preventDefault(),this._uiManager.editAltText(this))}),it(this,wt,ze).call(this),this.div.append(u),h.SMALL_EDITOR_SIZE||(h.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,d),decorative:a(this,g)}}set altTextData({altText:u,decorative:y}){a(this,d)===u&&a(this,g)===y||(gt(this,d,u),gt(this,g,y),it(this,wt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,F)),this.div.addEventListener("focusout",a(this,w));const[u,y]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*y/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/y).toFixed(2)}%`);const[S,N]=this.getInitialTranslation();return this.translate(S,N),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:y}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&y){u.preventDefault();return}gt(this,T,!0),it(this,kt,Cn).call(this,u)}moveInDOM(){var u;(u=this.parent)==null||u.moveEditorInDOM(this)}_setParentAndPosition(u,y,S){u.changeParent(this),this.x=y,this.y=S,this.fixAndSetPosition()}getRect(u,y){const S=this.parentScale,[N,H]=this.pageDimensions,[Y,dt]=this.pageTranslation,v=u/S,I=y/S,V=this.x*N,rt=this.y*H,K=this.width*N,ut=this.height*H;switch(this.rotation){case 0:return[V+v+Y,H-rt-I-ut+dt,V+v+K+Y,H-rt-I+dt];case 90:return[V+I+Y,H-rt+v+dt,V+I+ut+Y,H-rt+v+K+dt];case 180:return[V-v-K+Y,H-rt+I+dt,V-v+Y,H-rt+I+ut+dt];case 270:return[V-I-ut+Y,H-rt-v-K+dt,V-I+Y,H-rt-v+dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,y){const[S,N,H,Y]=u,dt=H-S,v=Y-N;switch(this.rotation){case 0:return[S,y-Y,dt,v];case 90:return[S,y-N,v,dt];case 180:return[H,y-N,dt,v];case 270:return[H,y-Y,v,dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,k,!0)}disableEditMode(){gt(this,k,!1)}isInEditMode(){return a(this,k)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var u,y;(u=this.div)==null||u.addEventListener("focusin",a(this,F)),(y=this.div)==null||y.addEventListener("focusout",a(this,w))}serialize(u=!1,y=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,y,S){const N=new this.prototype.constructor({parent:y,id:y.getNextId(),uiManager:S});N.rotation=u.rotation;const[H,Y]=N.pageDimensions,[dt,v,I,V]=N.getRectInCurrentCoords(u.rect,Y);return N.x=dt/H,N.y=v/Y,N.width=I/H,N.height=V/Y,N}remove(){var u;this.div.removeEventListener("focusin",a(this,F)),this.div.removeEventListener("focusout",a(this,w)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(u=a(this,l))==null||u.remove(),gt(this,l,null),gt(this,E,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(it(this,$,En).call(this),a(this,R).classList.remove("hidden"))}select(){var u;this.makeResizable(),(u=this.div)==null||u.classList.add("selectedEditor")}unselect(){var u,y,S;(u=a(this,R))==null||u.classList.add("hidden"),(y=this.div)==null||y.classList.remove("selectedEditor"),(S=this.div)!=null&&S.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,y){}disableEditing(){a(this,l)&&(a(this,l).hidden=!0)}enableEditing(){a(this,l)&&(a(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,O)}set isEditing(u){gt(this,O,u),this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,y){gt(this,C,!0);const S=u/y,{style:N}=this.div;N.aspectRatio=S,N.height="auto"}static get MIN_SIZE(){return 16}};d=new WeakMap,g=new WeakMap,l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakMap,O=new WeakMap,k=new WeakMap,x=new WeakMap,m=new WeakMap,A=new WeakSet,Ue=function([u,y],S,N){[S,N]=this.screenToPageTranslation(S,N),this.x+=S/u,this.y+=N/y,this.fixAndSetPosition()},M=new WeakSet,He=function(){const[u,y]=this.parentDimensions,{_borderLineWidth:S}=h,N=S/u,H=S/y;switch(this.rotation){case 90:return[-N,H];case 180:return[N,H];case 270:return[N,-H];default:return[-N,-H]}},B=new WeakSet,Ve=function(u,y,S){switch(S){case 90:return[y,-u];case 180:return[-u,-y];case 270:return[-y,u];default:return[u,y]}},Q=new WeakSet,We=function(u){switch(u){case 90:{const[y,S]=this.pageDimensions;return[0,-y/S,S/y,0]}case 180:return[-1,0,0,-1];case 270:{const[y,S]=this.pageDimensions;return[0,y/S,-S/y,0]}default:return[1,0,0,1]}},$=new WeakSet,En=function(){if(a(this,R))return;gt(this,R,document.createElement("div")),a(this,R).classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const y of u){const S=document.createElement("div");a(this,R).append(S),S.classList.add("resizer",y),S.addEventListener("pointerdown",it(this,pt,wn).bind(this,y)),S.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(a(this,R))},pt=new WeakSet,wn=function(u,y){y.preventDefault();const{isMac:S}=i.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&S)return;const N=it(this,X,xn).bind(this,u),H=this._isDraggable;this._isDraggable=!1;const Y={passive:!0,capture:!0};window.addEventListener("pointermove",N,Y);const dt=this.x,v=this.y,I=this.width,V=this.height,rt=this.parent.div.style.cursor,K=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(y.target).cursor;const ut=()=>{this._isDraggable=H,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",N,Y),this.parent.div.style.cursor=rt,this.div.style.cursor=K;const St=this.x,ft=this.y,bt=this.width,Z=this.height;St===dt&&ft===v&&bt===I&&Z===V||this.addCommands({cmd:()=>{this.width=bt,this.height=Z,this.x=St,this.y=ft;const[J,q]=this.parentDimensions;this.setDims(J*bt,q*Z),this.fixAndSetPosition()},undo:()=>{this.width=I,this.height=V,this.x=dt,this.y=v;const[J,q]=this.parentDimensions;this.setDims(J*I,q*V),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},X=new WeakSet,xn=function(u,y){const[S,N]=this.parentDimensions,H=this.x,Y=this.y,dt=this.width,v=this.height,I=h.MIN_SIZE/S,V=h.MIN_SIZE/N,rt=xt=>Math.round(xt*1e4)/1e4,K=it(this,Q,We).call(this,this.rotation),ut=(xt,Tt)=>[K[0]*xt+K[2]*Tt,K[1]*xt+K[3]*Tt],St=it(this,Q,We).call(this,360-this.rotation),ft=(xt,Tt)=>[St[0]*xt+St[2]*Tt,St[1]*xt+St[3]*Tt];let bt,Z,J=!1,q=!1;switch(u){case"topLeft":J=!0,bt=(xt,Tt)=>[0,0],Z=(xt,Tt)=>[xt,Tt];break;case"topMiddle":bt=(xt,Tt)=>[xt/2,0],Z=(xt,Tt)=>[xt/2,Tt];break;case"topRight":J=!0,bt=(xt,Tt)=>[xt,0],Z=(xt,Tt)=>[0,Tt];break;case"middleRight":q=!0,bt=(xt,Tt)=>[xt,Tt/2],Z=(xt,Tt)=>[0,Tt/2];break;case"bottomRight":J=!0,bt=(xt,Tt)=>[xt,Tt],Z=(xt,Tt)=>[0,0];break;case"bottomMiddle":bt=(xt,Tt)=>[xt/2,Tt],Z=(xt,Tt)=>[xt/2,0];break;case"bottomLeft":J=!0,bt=(xt,Tt)=>[0,Tt],Z=(xt,Tt)=>[xt,0];break;case"middleLeft":q=!0,bt=(xt,Tt)=>[0,Tt/2],Z=(xt,Tt)=>[xt,Tt/2];break}const ct=bt(dt,v),At=Z(dt,v);let Et=ut(...At);const Dt=rt(H+Et[0]),Lt=rt(Y+Et[1]);let jt=1,Wt=1,[Gt,Vt]=this.screenToPageTranslation(y.movementX,y.movementY);if([Gt,Vt]=ft(Gt/S,Vt/N),J){const xt=Math.hypot(dt,v);jt=Wt=Math.max(Math.min(Math.hypot(At[0]-ct[0]-Gt,At[1]-ct[1]-Vt)/xt,1/dt,1/v),I/dt,V/v)}else q?jt=Math.max(I,Math.min(1,Math.abs(At[0]-ct[0]-Gt)))/dt:Wt=Math.max(V,Math.min(1,Math.abs(At[1]-ct[1]-Vt)))/v;const Yt=rt(dt*jt),vt=rt(v*Wt);Et=ut(...Z(Yt,vt));const at=Dt-Et[0],nt=Lt-Et[1];this.width=Yt,this.height=vt,this.x=at,this.y=nt,this.setDims(S*Yt,N*vt),this.fixAndSetPosition()},wt=new WeakSet,ze=async function(){var S;const u=a(this,l);if(!u)return;if(!a(this,d)&&!a(this,g)){u.classList.remove("done"),(S=a(this,E))==null||S.remove();return}h._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{u.setAttribute("aria-label",N)});let y=a(this,E);if(!y){gt(this,E,y=document.createElement("span")),y.className="tooltip",y.setAttribute("role","tooltip");const N=y.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",N);const H=100;u.addEventListener("mouseenter",()=>{gt(this,P,setTimeout(()=>{gt(this,P,null),a(this,E).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},H))}),u.addEventListener("mouseleave",()=>{var Y;clearTimeout(a(this,P)),gt(this,P,null),(Y=a(this,E))==null||Y.classList.remove("show")})}u.classList.add("done"),y.innerText=a(this,g)?await h._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,d),y.parentNode||u.append(y)},kt=new WeakSet,Cn=function(u){if(!this._isDraggable)return;const y=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let S,N;y&&(S={passive:!0,capture:!0},N=Y=>{const[dt,v]=this.screenToPageTranslation(Y.movementX,Y.movementY);this._uiManager.dragSelectedEditors(dt,v)},window.addEventListener("pointermove",N,S));const H=()=>{if(window.removeEventListener("pointerup",H),window.removeEventListener("blur",H),y&&window.removeEventListener("pointermove",N,S),gt(this,T,!1),!this._uiManager.endDragSession()){const{isMac:Y}=i.FeatureTest.platform;u.ctrlKey&&!Y||u.shiftKey||u.metaKey&&Y?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",H),window.addEventListener("blur",H)},G(h,B),se(h,"_borderLineWidth",-1),se(h,"_colorManager",new n.ColorManager),se(h,"_zIndex",1),se(h,"SMALL_EDITOR_SIZE",0);let o=h;e.AnnotationEditor=o;class b extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var C,R,F,w,T,Ge,x,m,A,U,M,Tn,L,Q,st,$,ot,pt,mt,X,yt,wt,Rt,kt,j,h,f,u,y,S,N,H,Y,dt,v,I,V,rt,K,ut,St,ft,bt,Z,J,q,ct,Pn,Et,qe,Lt,Xe,Wt,Te,Vt,Ye,vt,Ke,nt,oe,Tt,be,ee,Rn,Mt,kn,Ft,Je,zt,ye,Pt,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=r,e.opacityToHex=o;var n=s(1),i=s(6);function r(W,c,D){for(const z of D)c.addEventListener(z,W[z].bind(W))}function o(W){return Math.round(Math.min(255,Math.max(1,255*W))).toString(16).padStart(2,"0")}class b{constructor(){G(this,C,0)}getId(){return`${n.AnnotationEditorPrefix}${_e(this,C)._++}`}}C=new WeakMap;const k=class k{constructor(){G(this,T);G(this,R,(0,n.getUuid)());G(this,F,0);G(this,w,null)}static get _isSVGFittingCanvas(){const c='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',z=new OffscreenCanvas(1,3).getContext("2d"),et=new Image;et.src=c;const lt=et.decode().then(()=>(z.drawImage(et,0,0,1,1,0,0,1,3),new Uint32Array(z.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",lt)}async getFromFile(c){const{lastModified:D,name:z,size:et,type:lt}=c;return it(this,T,Ge).call(this,`${D}_${z}_${et}_${lt}`,c)}async getFromUrl(c){return it(this,T,Ge).call(this,c,c)}async getFromId(c){a(this,w)||gt(this,w,new Map);const D=a(this,w).get(c);return D?D.bitmap?(D.refCounter+=1,D):D.file?this.getFromFile(D.file):this.getFromUrl(D.url):null}getSvgUrl(c){const D=a(this,w).get(c);return D!=null&&D.isSvg?D.svgUrl:null}deleteId(c){a(this,w)||gt(this,w,new Map);const D=a(this,w).get(c);D&&(D.refCounter-=1,D.refCounter===0&&(D.bitmap=null))}isValidId(c){return c.startsWith(`image_${a(this,R)}_`)}};R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakSet,Ge=async function(c,D){a(this,w)||gt(this,w,new Map);let z=a(this,w).get(c);if(z===null)return null;if(z!=null&&z.bitmap)return z.refCounter+=1,z;try{z||(z={bitmap:null,id:`image_${a(this,R)}_${_e(this,F)._++}`,refCounter:0,isSvg:!1});let et;if(typeof D=="string"){z.url=D;const lt=await fetch(D);if(!lt.ok)throw new Error(lt.statusText);et=await lt.blob()}else et=z.file=D;if(et.type==="image/svg+xml"){const lt=k._isSVGFittingCanvas,_t=new FileReader,Ct=new Image,It=new Promise((Ot,Xt)=>{Ct.onload=()=>{z.bitmap=Ct,z.isSvg=!0,Ot()},_t.onload=async()=>{const Nt=z.svgUrl=_t.result;Ct.src=await lt?`${Nt}#svgView(preserveAspectRatio(none))`:Nt},Ct.onerror=_t.onerror=Xt});_t.readAsDataURL(et),await It}else z.bitmap=await createImageBitmap(et);z.refCounter=1}catch(et){console.error(et),z=null}return a(this,w).set(c,z),z&&a(this,w).set(z.id,z),z};let d=k;class g{constructor(c=128){G(this,x,[]);G(this,m,!1);G(this,A,void 0);G(this,U,-1);gt(this,A,c)}add({cmd:c,undo:D,mustExec:z,type:et=NaN,overwriteIfSameType:lt=!1,keepUndo:_t=!1}){if(z&&c(),a(this,m))return;const Ct={cmd:c,undo:D,type:et};if(a(this,U)===-1){a(this,x).length>0&&(a(this,x).length=0),gt(this,U,0),a(this,x).push(Ct);return}if(lt&&a(this,x)[a(this,U)].type===et){_t&&(Ct.undo=a(this,x)[a(this,U)].undo),a(this,x)[a(this,U)]=Ct;return}const It=a(this,U)+1;It===a(this,A)?a(this,x).splice(0,1):(gt(this,U,It),It<a(this,x).length&&a(this,x).splice(It)),a(this,x).push(Ct)}undo(){a(this,U)!==-1&&(gt(this,m,!0),a(this,x)[a(this,U)].undo(),gt(this,m,!1),gt(this,U,a(this,U)-1))}redo(){a(this,U)<a(this,x).length-1&&(gt(this,U,a(this,U)+1),gt(this,m,!0),a(this,x)[a(this,U)].cmd(),gt(this,m,!1))}hasSomethingToUndo(){return a(this,U)!==-1}hasSomethingToRedo(){return a(this,U)<a(this,x).length-1}destroy(){gt(this,x,null)}}x=new WeakMap,m=new WeakMap,A=new WeakMap,U=new WeakMap,e.CommandManager=g;class l{constructor(c){G(this,M);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:D}=n.FeatureTest.platform;for(const[z,et,lt={}]of c)for(const _t of z){const Ct=_t.startsWith("mac+");D&&Ct?(this.callbacks.set(_t.slice(4),{callback:et,options:lt}),this.allKeys.add(_t.split("+").at(-1))):!D&&!Ct&&(this.callbacks.set(_t,{callback:et,options:lt}),this.allKeys.add(_t.split("+").at(-1)))}}exec(c,D){if(!this.allKeys.has(D.key))return;const z=this.callbacks.get(it(this,M,Tn).call(this,D));if(!z)return;const{callback:et,options:{bubbles:lt=!1,args:_t=[],checker:Ct=null}}=z;Ct&&!Ct(c,D)||(et.bind(c,..._t)(),lt||(D.stopPropagation(),D.preventDefault()))}}M=new WeakSet,Tn=function(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const D=this.buffer.join("+");return this.buffer.length=0,D},e.KeyboardManager=l;const B=class B{get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(c),(0,n.shadow)(this,"_colors",c)}convert(c){const D=(0,i.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[z,et]of this._colors)if(et.every((lt,_t)=>lt===D[_t]))return B._colorsMapping.get(z);return D}getHexCode(c){const D=this._colors.get(c);return D?n.Util.makeHexColor(...D):c}};se(B,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let E=B;e.ColorManager=E;const $t=class $t{constructor(c,D,z,et,lt,_t){G(this,ct);G(this,Et);G(this,Lt);G(this,Wt);G(this,Vt);G(this,vt);G(this,nt);G(this,Tt);G(this,ee);G(this,Mt);G(this,Ft);G(this,zt);G(this,Pt);G(this,L,null);G(this,Q,new Map);G(this,st,new Map);G(this,$,null);G(this,ot,null);G(this,pt,new g);G(this,mt,0);G(this,X,new Set);G(this,yt,null);G(this,wt,null);G(this,Rt,new Set);G(this,kt,null);G(this,j,new b);G(this,h,!1);G(this,f,!1);G(this,u,null);G(this,y,n.AnnotationEditorType.NONE);G(this,S,new Set);G(this,N,null);G(this,H,this.blur.bind(this));G(this,Y,this.focus.bind(this));G(this,dt,this.copy.bind(this));G(this,v,this.cut.bind(this));G(this,I,this.paste.bind(this));G(this,V,this.keydown.bind(this));G(this,rt,this.onEditingAction.bind(this));G(this,K,this.onPageChanging.bind(this));G(this,ut,this.onScaleChanging.bind(this));G(this,St,this.onRotationChanging.bind(this));G(this,ft,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});G(this,bt,[0,0]);G(this,Z,null);G(this,J,null);G(this,q,null);gt(this,J,c),gt(this,q,D),gt(this,$,z),this._eventBus=et,this._eventBus._on("editingaction",a(this,rt)),this._eventBus._on("pagechanging",a(this,K)),this._eventBus._on("scalechanging",a(this,ut)),this._eventBus._on("rotationchanging",a(this,St)),gt(this,ot,lt.annotationStorage),gt(this,kt,lt.filterFactory),gt(this,N,_t),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const c=$t.prototype,D=lt=>{const{activeElement:_t}=document;return _t&&a(lt,J).contains(_t)&&lt.hasSomethingToControl()},z=this.TRANSLATE_SMALL,et=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],c.selectAll],[["ctrl+z","mac+meta+z"],c.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],c.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],c.delete],[["Escape","mac+Escape"],c.unselectAll],[["ArrowLeft","mac+ArrowLeft"],c.translateSelectedEditors,{args:[-z,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],c.translateSelectedEditors,{args:[-et,0],checker:D}],[["ArrowRight","mac+ArrowRight"],c.translateSelectedEditors,{args:[z,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],c.translateSelectedEditors,{args:[et,0],checker:D}],[["ArrowUp","mac+ArrowUp"],c.translateSelectedEditors,{args:[0,-z],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],c.translateSelectedEditors,{args:[0,-et],checker:D}],[["ArrowDown","mac+ArrowDown"],c.translateSelectedEditors,{args:[0,z],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],c.translateSelectedEditors,{args:[0,et],checker:D}]]))}destroy(){it(this,Wt,Te).call(this),it(this,Et,qe).call(this),this._eventBus._off("editingaction",a(this,rt)),this._eventBus._off("pagechanging",a(this,K)),this._eventBus._off("scalechanging",a(this,ut)),this._eventBus._off("rotationchanging",a(this,St));for(const c of a(this,st).values())c.destroy();a(this,st).clear(),a(this,Q).clear(),a(this,Rt).clear(),gt(this,L,null),a(this,S).clear(),a(this,pt).destroy(),a(this,$).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",a(this,N)?a(this,kt).addHCMFilter(a(this,N).foreground,a(this,N).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(a(this,J)).direction)}editAltText(c){var D;(D=a(this,$))==null||D.editAltText(this,c)}onPageChanging({pageNumber:c}){gt(this,mt,c-1)}focusMainContainer(){a(this,J).focus()}findParent(c,D){for(const z of a(this,st).values()){const{x:et,y:lt,width:_t,height:Ct}=z.div.getBoundingClientRect();if(c>=et&&c<=et+_t&&D>=lt&&D<=lt+Ct)return z}return null}disableUserSelect(c=!1){a(this,q).classList.toggle("noUserSelect",c)}addShouldRescale(c){a(this,Rt).add(c)}removeShouldRescale(c){a(this,Rt).delete(c)}onScaleChanging({scale:c}){this.commitOrRemove(),this.viewParameters.realScale=c*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const D of a(this,Rt))D.onScaleChanging()}onRotationChanging({pagesRotation:c}){this.commitOrRemove(),this.viewParameters.rotation=c}addToAnnotationStorage(c){!c.isEmpty()&&a(this,ot)&&!a(this,ot).has(c.id)&&a(this,ot).setValue(c.id,c)}blur(){if(!this.hasSelection)return;const{activeElement:c}=document;for(const D of a(this,S))if(D.div.contains(c)){gt(this,u,[D,c]),D._focusEventsAllowed=!1;break}}focus(){if(!a(this,u))return;const[c,D]=a(this,u);gt(this,u,null),D.addEventListener("focusin",()=>{c._focusEventsAllowed=!0},{once:!0}),D.focus()}addEditListeners(){it(this,Lt,Xe).call(this),it(this,Vt,Ye).call(this)}removeEditListeners(){it(this,Wt,Te).call(this),it(this,vt,Ke).call(this)}copy(c){var z;if(c.preventDefault(),(z=a(this,L))==null||z.commitOrRemove(),!this.hasSelection)return;const D=[];for(const et of a(this,S)){const lt=et.serialize(!0);lt&&D.push(lt)}D.length!==0&&c.clipboardData.setData("application/pdfjs",JSON.stringify(D))}cut(c){this.copy(c),this.delete()}paste(c){c.preventDefault();const{clipboardData:D}=c;for(const lt of D.items)for(const _t of a(this,wt))if(_t.isHandlingMimeForPasting(lt.type)){_t.paste(lt,this.currentLayer);return}let z=D.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(lt){(0,n.warn)(`paste: "${lt.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const et=this.currentLayer;try{const lt=[];for(const It of z){const Ot=et.deserialize(It);if(!Ot)return;lt.push(Ot)}const _t=()=>{for(const It of lt)it(this,Ft,Je).call(this,It);it(this,Pt,Qe).call(this,lt)},Ct=()=>{for(const It of lt)It.remove()};this.addCommands({cmd:_t,undo:Ct,mustExec:!0})}catch(lt){(0,n.warn)(`paste: "${lt.message}".`)}}keydown(c){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||$t._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","delete","selectAll"].includes(c.name)&&this[c.name]()}setEditingState(c){c?(it(this,ct,Pn).call(this),it(this,Lt,Xe).call(this),it(this,Vt,Ye).call(this),it(this,nt,oe).call(this,{isEditing:a(this,y)!==n.AnnotationEditorType.NONE,isEmpty:it(this,zt,ye).call(this),hasSomethingToUndo:a(this,pt).hasSomethingToUndo(),hasSomethingToRedo:a(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,Et,qe).call(this),it(this,Wt,Te).call(this),it(this,vt,Ke).call(this),it(this,nt,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(c){if(!a(this,wt)){gt(this,wt,c);for(const D of a(this,wt))it(this,Tt,be).call(this,D.defaultPropertiesToUpdate)}}getId(){return a(this,j).getId()}get currentLayer(){return a(this,st).get(a(this,mt))}getLayer(c){return a(this,st).get(c)}get currentPageIndex(){return a(this,mt)}addLayer(c){a(this,st).set(c.pageIndex,c),a(this,h)?c.enable():c.disable()}removeLayer(c){a(this,st).delete(c.pageIndex)}updateMode(c,D=null){if(a(this,y)!==c){if(gt(this,y,c),c===n.AnnotationEditorType.NONE){this.setEditingState(!1),it(this,Mt,kn).call(this);return}this.setEditingState(!0),it(this,ee,Rn).call(this),this.unselectAll();for(const z of a(this,st).values())z.updateMode(c);if(D){for(const z of a(this,Q).values())if(z.annotationElementId===D){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(c){c!==a(this,y)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,D){if(a(this,wt)){if(c===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(c);return}for(const z of a(this,S))z.updateParams(c,D);for(const z of a(this,wt))z.updateDefaultParams(c,D)}}enableWaiting(c=!1){if(a(this,f)!==c){gt(this,f,c);for(const D of a(this,st).values())c?D.disableClick():D.enableClick(),D.div.classList.toggle("waiting",c)}}getEditors(c){const D=[];for(const z of a(this,Q).values())z.pageIndex===c&&D.push(z);return D}getEditor(c){return a(this,Q).get(c)}addEditor(c){a(this,Q).set(c.id,c)}removeEditor(c){var D;a(this,Q).delete(c.id),this.unselect(c),(!c.annotationElementId||!a(this,X).has(c.annotationElementId))&&((D=a(this,ot))==null||D.remove(c.id))}addDeletedAnnotationElement(c){a(this,X).add(c.annotationElementId),c.deleted=!0}isDeletedAnnotationElement(c){return a(this,X).has(c)}removeDeletedAnnotationElement(c){a(this,X).delete(c.annotationElementId),c.deleted=!1}setActiveEditor(c){a(this,L)!==c&&(gt(this,L,c),c&&it(this,Tt,be).call(this,c.propertiesToUpdate))}toggleSelected(c){if(a(this,S).has(c)){a(this,S).delete(c),c.unselect(),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,S).add(c),c.select(),it(this,Tt,be).call(this,c.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}setSelected(c){for(const D of a(this,S))D!==c&&D.unselect();a(this,S).clear(),a(this,S).add(c),c.select(),it(this,Tt,be).call(this,c.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}isSelected(c){return a(this,S).has(c)}unselect(c){c.unselect(),a(this,S).delete(c),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,S).size!==0}undo(){a(this,pt).undo(),it(this,nt,oe).call(this,{hasSomethingToUndo:a(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,zt,ye).call(this)})}redo(){a(this,pt).redo(),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,pt).hasSomethingToRedo(),isEmpty:it(this,zt,ye).call(this)})}addCommands(c){a(this,pt).add(c),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,zt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const c=[...a(this,S)],D=()=>{for(const et of c)et.remove()},z=()=>{for(const et of c)it(this,Ft,Je).call(this,et)};this.addCommands({cmd:D,undo:z,mustExec:!0})}commitOrRemove(){var c;(c=a(this,L))==null||c.commitOrRemove()}hasSomethingToControl(){return a(this,L)||this.hasSelection}selectAll(){for(const c of a(this,S))c.commit();it(this,Pt,Qe).call(this,a(this,Q).values())}unselectAll(){if(a(this,L)){a(this,L).commitOrRemove();return}if(this.hasSelection){for(const c of a(this,S))c.unselect();a(this,S).clear(),it(this,nt,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(c,D,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;a(this,bt)[0]+=c,a(this,bt)[1]+=D;const[et,lt]=a(this,bt),_t=[...a(this,S)],Ct=1e3;a(this,Z)&&clearTimeout(a(this,Z)),gt(this,Z,setTimeout(()=>{gt(this,Z,null),a(this,bt)[0]=a(this,bt)[1]=0,this.addCommands({cmd:()=>{for(const It of _t)a(this,Q).has(It.id)&&It.translateInPage(et,lt)},undo:()=>{for(const It of _t)a(this,Q).has(It.id)&&It.translateInPage(-et,-lt)},mustExec:!1})},Ct));for(const It of _t)It.translateInPage(c,D)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,yt,new Map);for(const c of a(this,S))a(this,yt).set(c,{savedX:c.x,savedY:c.y,savedPageIndex:c.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,yt))return!1;this.disableUserSelect(!1);const c=a(this,yt);gt(this,yt,null);let D=!1;for(const[{x:et,y:lt,pageIndex:_t},Ct]of c)Ct.newX=et,Ct.newY=lt,Ct.newPageIndex=_t,D||(D=et!==Ct.savedX||lt!==Ct.savedY||_t!==Ct.savedPageIndex);if(!D)return!1;const z=(et,lt,_t,Ct)=>{if(a(this,Q).has(et.id)){const It=a(this,st).get(Ct);It?et._setParentAndPosition(It,lt,_t):(et.pageIndex=Ct,et.x=lt,et.y=_t)}};return this.addCommands({cmd:()=>{for(const[et,{newX:lt,newY:_t,newPageIndex:Ct}]of c)z(et,lt,_t,Ct)},undo:()=>{for(const[et,{savedX:lt,savedY:_t,savedPageIndex:Ct}]of c)z(et,lt,_t,Ct)},mustExec:!0}),!0}dragSelectedEditors(c,D){if(a(this,yt))for(const z of a(this,yt).keys())z.drag(c,D)}rebuild(c){if(c.parent===null){const D=this.getLayer(c.pageIndex);D?(D.changeParent(c),D.addOrRebuild(c)):(this.addEditor(c),this.addToAnnotationStorage(c),c.rebuild())}else c.parent.addOrRebuild(c)}isActive(c){return a(this,L)===c}getActive(){return a(this,L)}getMode(){return a(this,y)}get imageManager(){return(0,n.shadow)(this,"imageManager",new d)}};L=new WeakMap,Q=new WeakMap,st=new WeakMap,$=new WeakMap,ot=new WeakMap,pt=new WeakMap,mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,f=new WeakMap,u=new WeakMap,y=new WeakMap,S=new WeakMap,N=new WeakMap,H=new WeakMap,Y=new WeakMap,dt=new WeakMap,v=new WeakMap,I=new WeakMap,V=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,bt=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakSet,Pn=function(){window.addEventListener("focus",a(this,Y)),window.addEventListener("blur",a(this,H))},Et=new WeakSet,qe=function(){window.removeEventListener("focus",a(this,Y)),window.removeEventListener("blur",a(this,H))},Lt=new WeakSet,Xe=function(){window.addEventListener("keydown",a(this,V),{capture:!0})},Wt=new WeakSet,Te=function(){window.removeEventListener("keydown",a(this,V),{capture:!0})},Vt=new WeakSet,Ye=function(){document.addEventListener("copy",a(this,dt)),document.addEventListener("cut",a(this,v)),document.addEventListener("paste",a(this,I))},vt=new WeakSet,Ke=function(){document.removeEventListener("copy",a(this,dt)),document.removeEventListener("cut",a(this,v)),document.removeEventListener("paste",a(this,I))},nt=new WeakSet,oe=function(c){Object.entries(c).some(([z,et])=>a(this,ft)[z]!==et)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,ft),c)})},Tt=new WeakSet,be=function(c){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:c})},ee=new WeakSet,Rn=function(){if(!a(this,h)){gt(this,h,!0);for(const c of a(this,st).values())c.enable()}},Mt=new WeakSet,kn=function(){if(this.unselectAll(),a(this,h)){gt(this,h,!1);for(const c of a(this,st).values())c.disable()}},Ft=new WeakSet,Je=function(c){const D=a(this,st).get(c.pageIndex);D?D.addOrRebuild(c):this.addEditor(c)},zt=new WeakSet,ye=function(){if(a(this,Q).size===0)return!0;if(a(this,Q).size===1)for(const c of a(this,Q).values())return c.isEmpty();return!1},Pt=new WeakSet,Qe=function(c){a(this,S).clear();for(const D of c)D.isEmpty()||(a(this,S).add(D),D.select());it(this,nt,oe).call(this,{hasSelectedEditor:!0})},se($t,"TRANSLATE_SMALL",1),se($t,"TRANSLATE_BIG",10);let P=$t;e.AnnotationEditorUIManager=P},(t,e,s)=>{var mt,X,yt,wt,Rt,kt,j,h,f,u,y,S,fe,H,pe,dt,Ze,I,Pe,rt,Re,ut,ve,ft,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=U,e.getColorValues=Q,e.getCurrentTransform=st,e.getCurrentTransformInverse=$,e.getFilenameFromUrl=T,e.getPdfFilenameFromUrl=O,e.getRGB=L,e.getXfaPageViewport=B,e.isDataScheme=F,e.isPdfFile=w,e.isValidFetchUrl=x,e.loadScript=A,e.noContextMenu=m,e.setLayerDimensions=ot;var n=s(7),i=s(1);const r="http://www.w3.org/2000/svg",pt=class pt{};se(pt,"CSS",96),se(pt,"PDF",72),se(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let o=pt;e.PixelsPerInch=o;class b extends n.BaseFilterFactory{constructor({docId:q,ownerDocument:ct=globalThis.document}={}){super();G(this,S);G(this,H);G(this,dt);G(this,I);G(this,rt);G(this,ut);G(this,ft);G(this,mt,void 0);G(this,X,void 0);G(this,yt,void 0);G(this,wt,void 0);G(this,Rt,void 0);G(this,kt,void 0);G(this,j,void 0);G(this,h,void 0);G(this,f,void 0);G(this,u,void 0);G(this,y,0);gt(this,yt,q),gt(this,wt,ct)}addFilter(q){if(!q)return"none";let ct=a(this,S,fe).get(q);if(ct)return ct;let At,Et,Dt,Lt;if(q.length===1){const Vt=q[0],Yt=new Array(256);for(let vt=0;vt<256;vt++)Yt[vt]=Vt[vt]/255;Lt=At=Et=Dt=Yt.join(",")}else{const[Vt,Yt,vt]=q,at=new Array(256),nt=new Array(256),xt=new Array(256);for(let Tt=0;Tt<256;Tt++)at[Tt]=Vt[Tt]/255,nt[Tt]=Yt[Tt]/255,xt[Tt]=vt[Tt]/255;At=at.join(","),Et=nt.join(","),Dt=xt.join(","),Lt=`${At}${Et}${Dt}`}if(ct=a(this,S,fe).get(Lt),ct)return a(this,S,fe).set(q,ct),ct;const jt=`g_${a(this,yt)}_transfer_map_${_e(this,y)._++}`,Wt=`url(#${jt})`;a(this,S,fe).set(q,Wt),a(this,S,fe).set(Lt,Wt);const Gt=it(this,I,Pe).call(this,jt);return it(this,ut,ve).call(this,At,Et,Dt,Gt),Wt}addHCMFilter(q,ct){var Yt;const At=`${q}-${ct}`;if(a(this,kt)===At)return a(this,j);if(gt(this,kt,At),gt(this,j,"none"),(Yt=a(this,Rt))==null||Yt.remove(),!q||!ct)return a(this,j);const Et=it(this,ft,Ae).call(this,q);q=i.Util.makeHexColor(...Et);const Dt=it(this,ft,Ae).call(this,ct);if(ct=i.Util.makeHexColor(...Dt),a(this,H,pe).style.color="",q==="#000000"&&ct==="#ffffff"||q===ct)return a(this,j);const Lt=new Array(256);for(let vt=0;vt<=255;vt++){const at=vt/255;Lt[vt]=at<=.03928?at/12.92:((at+.055)/1.055)**2.4}const jt=Lt.join(","),Wt=`g_${a(this,yt)}_hcm_filter`,Gt=gt(this,h,it(this,I,Pe).call(this,Wt));it(this,ut,ve).call(this,jt,jt,jt,Gt),it(this,dt,Ze).call(this,Gt);const Vt=(vt,at)=>{const nt=Et[vt]/255,xt=Dt[vt]/255,Tt=new Array(at+1);for(let ne=0;ne<=at;ne++)Tt[ne]=nt+ne/at*(xt-nt);return Tt.join(",")};return it(this,ut,ve).call(this,Vt(0,5),Vt(1,5),Vt(2,5),Gt),gt(this,j,`url(#${Wt})`),a(this,j)}addHighlightHCMFilter(q,ct,At,Et){var xt;const Dt=`${q}-${ct}-${At}-${Et}`;if(a(this,f)===Dt)return a(this,u);if(gt(this,f,Dt),gt(this,u,"none"),(xt=a(this,h))==null||xt.remove(),!q||!ct)return a(this,u);const[Lt,jt]=[q,ct].map(it(this,ft,Ae).bind(this));let Wt=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),Gt=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),[Vt,Yt]=[At,Et].map(it(this,ft,Ae).bind(this));Gt<Wt&&([Wt,Gt,Vt,Yt]=[Gt,Wt,Yt,Vt]),a(this,H,pe).style.color="";const vt=(Tt,ne,ee)=>{const ht=new Array(256),Mt=(Gt-Wt)/ee,Ut=Tt/255,Ft=(ne-Tt)/(255*ee);let Ht=0;for(let zt=0;zt<=ee;zt++){const Zt=Math.round(Wt+zt*Mt),Pt=Ut+zt*Ft;for(let Jt=Ht;Jt<=Zt;Jt++)ht[Jt]=Pt;Ht=Zt+1}for(let zt=Ht;zt<256;zt++)ht[zt]=ht[Ht-1];return ht.join(",")},at=`g_${a(this,yt)}_hcm_highlight_filter`,nt=gt(this,h,it(this,I,Pe).call(this,at));return it(this,dt,Ze).call(this,nt),it(this,ut,ve).call(this,vt(Vt[0],Yt[0],5),vt(Vt[1],Yt[1],5),vt(Vt[2],Yt[2],5),nt),gt(this,u,`url(#${at})`),a(this,u)}destroy(q=!1){q&&(a(this,j)||a(this,u))||(a(this,X)&&(a(this,X).parentNode.parentNode.remove(),gt(this,X,null)),a(this,mt)&&(a(this,mt).clear(),gt(this,mt,null)),gt(this,y,0))}}mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,f=new WeakMap,u=new WeakMap,y=new WeakMap,S=new WeakSet,fe=function(){return a(this,mt)||gt(this,mt,new Map)},H=new WeakSet,pe=function(){if(!a(this,X)){const q=a(this,wt).createElement("div"),{style:ct}=q;ct.visibility="hidden",ct.contain="strict",ct.width=ct.height=0,ct.position="absolute",ct.top=ct.left=0,ct.zIndex=-1;const At=a(this,wt).createElementNS(r,"svg");At.setAttribute("width",0),At.setAttribute("height",0),gt(this,X,a(this,wt).createElementNS(r,"defs")),q.append(At),At.append(a(this,X)),a(this,wt).body.append(q)}return a(this,X)},dt=new WeakSet,Ze=function(q){const ct=a(this,wt).createElementNS(r,"feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(ct)},I=new WeakSet,Pe=function(q){const ct=a(this,wt).createElementNS(r,"filter");return ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("id",q),a(this,H,pe).append(ct),ct},rt=new WeakSet,Re=function(q,ct,At){const Et=a(this,wt).createElementNS(r,ct);Et.setAttribute("type","discrete"),Et.setAttribute("tableValues",At),q.append(Et)},ut=new WeakSet,ve=function(q,ct,At,Et){const Dt=a(this,wt).createElementNS(r,"feComponentTransfer");Et.append(Dt),it(this,rt,Re).call(this,Dt,"feFuncR",q),it(this,rt,Re).call(this,Dt,"feFuncG",ct),it(this,rt,Re).call(this,Dt,"feFuncB",At)},ft=new WeakSet,Ae=function(q){return a(this,H,pe).style.color=q,L(getComputedStyle(a(this,H,pe)).getPropertyValue("color"))},e.DOMFilterFactory=b;class d extends n.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,q){const ct=this._document.createElement("canvas");return ct.width=J,ct.height=q,ct}}e.DOMCanvasFactory=d;async function g(Z,J=!1){if(x(Z,document.baseURI)){const q=await fetch(Z);if(!q.ok)throw new Error(q.statusText);return J?new Uint8Array(await q.arrayBuffer()):(0,i.stringToBytes)(await q.text())}return new Promise((q,ct)=>{const At=new XMLHttpRequest;At.open("GET",Z,!0),J&&(At.responseType="arraybuffer"),At.onreadystatechange=()=>{if(At.readyState===XMLHttpRequest.DONE){if(At.status===200||At.status===0){let Et;if(J&&At.response?Et=new Uint8Array(At.response):!J&&At.responseText&&(Et=(0,i.stringToBytes)(At.responseText)),Et){q(Et);return}}ct(new Error(At.statusText))}},At.send(null)})}class l extends n.BaseCMapReaderFactory{_fetchData(J,q){return g(J,this.isCompressed).then(ct=>({cMapData:ct,compressionType:q}))}}e.DOMCMapReaderFactory=l;class E extends n.BaseStandardFontDataFactory{_fetchData(J){return g(J,!0)}}e.DOMStandardFontDataFactory=E;class P extends n.BaseSVGFactory{_createSVG(J){return document.createElementNS(r,J)}}e.DOMSVGFactory=P;class C{constructor({viewBox:J,scale:q,rotation:ct,offsetX:At=0,offsetY:Et=0,dontFlip:Dt=!1}){this.viewBox=J,this.scale=q,this.rotation=ct,this.offsetX=At,this.offsetY=Et;const Lt=(J[2]+J[0])/2,jt=(J[3]+J[1])/2;let Wt,Gt,Vt,Yt;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:Wt=-1,Gt=0,Vt=0,Yt=1;break;case 90:Wt=0,Gt=1,Vt=1,Yt=0;break;case 270:Wt=0,Gt=-1,Vt=-1,Yt=0;break;case 0:Wt=1,Gt=0,Vt=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Vt=-Vt,Yt=-Yt);let vt,at,nt,xt;Wt===0?(vt=Math.abs(jt-J[1])*q+At,at=Math.abs(Lt-J[0])*q+Et,nt=(J[3]-J[1])*q,xt=(J[2]-J[0])*q):(vt=Math.abs(Lt-J[0])*q+At,at=Math.abs(jt-J[1])*q+Et,nt=(J[2]-J[0])*q,xt=(J[3]-J[1])*q),this.transform=[Wt*q,Gt*q,Vt*q,Yt*q,vt-Wt*q*Lt-Vt*q*jt,at-Gt*q*Lt-Yt*q*jt],this.width=nt,this.height=xt}get rawDims(){const{viewBox:J}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:q=this.rotation,offsetX:ct=this.offsetX,offsetY:At=this.offsetY,dontFlip:Et=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:J,rotation:q,offsetX:ct,offsetY:At,dontFlip:Et})}convertToViewportPoint(J,q){return i.Util.applyTransform([J,q],this.transform)}convertToViewportRectangle(J){const q=i.Util.applyTransform([J[0],J[1]],this.transform),ct=i.Util.applyTransform([J[2],J[3]],this.transform);return[q[0],q[1],ct[0],ct[1]]}convertToPdfPoint(J,q){return i.Util.applyInverseTransform([J,q],this.transform)}}e.PageViewport=C;class R extends i.BaseException{constructor(J,q=0){super(J,"RenderingCancelledException"),this.extraDelay=q}}e.RenderingCancelledException=R;function F(Z){const J=Z.length;let q=0;for(;q<J&&Z[q].trim()==="";)q++;return Z.substring(q,q+5).toLowerCase()==="data:"}function w(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function T(Z,J=!1){return J||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function O(Z,J="document.pdf"){if(typeof Z!="string")return J;if(F(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,At=q.exec(Z);let Et=ct.exec(At[1])||ct.exec(At[2])||ct.exec(At[3]);if(Et&&(Et=Et[0],Et.includes("%")))try{Et=ct.exec(decodeURIComponent(Et))[0]}catch{}return Et||J}class k{constructor(){se(this,"started",Object.create(null));se(this,"times",[])}time(J){J in this.started&&(0,i.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,i.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let q=0;for(const{name:ct}of this.times)q=Math.max(ct.length,q);for(const{name:ct,start:At,end:Et}of this.times)J.push(`${ct.padEnd(q)} ${Et-At}ms
`);return J.join("")}}e.StatTimer=k;function x(Z,J){try{const{protocol:q}=J?new URL(Z,J):new URL(Z);return q==="http:"||q==="https:"}catch{return!1}}function m(Z){Z.preventDefault()}function A(Z,J=!1){return new Promise((q,ct)=>{const At=document.createElement("script");At.src=Z,At.onload=function(Et){J&&At.remove(),q(Et)},At.onerror=function(){ct(new Error(`Cannot load script at: ${At.src}`))},(document.head||document.documentElement).append(At)})}function U(Z){console.log("Deprecated API usage: "+Z)}let M;class _{static toDateObject(J){if(!J||typeof J!="string")return null;M||(M=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=M.exec(J);if(!q)return null;const ct=parseInt(q[1],10);let At=parseInt(q[2],10);At=At>=1&&At<=12?At-1:0;let Et=parseInt(q[3],10);Et=Et>=1&&Et<=31?Et:1;let Dt=parseInt(q[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Lt=parseInt(q[5],10);Lt=Lt>=0&&Lt<=59?Lt:0;let jt=parseInt(q[6],10);jt=jt>=0&&jt<=59?jt:0;const Wt=q[7]||"Z";let Gt=parseInt(q[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Vt=parseInt(q[9],10)||0;return Vt=Vt>=0&&Vt<=59?Vt:0,Wt==="-"?(Dt+=Gt,Lt+=Vt):Wt==="+"&&(Dt-=Gt,Lt-=Vt),new Date(Date.UTC(ct,At,Et,Dt,Lt,jt))}}e.PDFDateString=_;function B(Z,{scale:J=1,rotation:q=0}){const{width:ct,height:At}=Z.attributes.style,Et=[0,0,parseInt(ct),parseInt(At)];return new C({viewBox:Et,scale:J,rotation:q})}function L(Z){if(Z.startsWith("#")){const J=parseInt(Z.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(J=>parseInt(J)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function Q(Z){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const q of Z.keys()){J.style.color=q;const ct=window.getComputedStyle(J).color;Z.set(q,L(ct))}J.remove()}function st(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform();return[J,q,ct,At,Et,Dt]}function $(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform().invertSelf();return[J,q,ct,At,Et,Dt]}function ot(Z,J,q=!1,ct=!0){if(J instanceof C){const{pageWidth:At,pageHeight:Et}=J.rawDims,{style:Dt}=Z,Lt=i.FeatureTest.isCSSRoundSupported,jt=`var(--scale-factor) * ${At}px`,Wt=`var(--scale-factor) * ${Et}px`,Gt=Lt?`round(${jt}, 1px)`:`calc(${jt})`,Vt=Lt?`round(${Wt}, 1px)`:`calc(${Wt})`;!q||J.rotation%180===0?(Dt.width=Gt,Dt.height=Vt):(Dt.width=Vt,Dt.height=Gt)}ct&&Z.setAttribute("data-main-rotation",J.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,E){return"none"}addHighlightHCMFilter(l,E,P,C){return"none"}destroy(l=!1){}}e.BaseFilterFactory=i;class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,E){if(l<=0||E<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(l,E);return{canvas:P,context:P.getContext("2d")}}reset(l,E,P){if(!l.canvas)throw new Error("Canvas is not specified");if(E<=0||P<=0)throw new Error("Invalid canvas size");l.canvas.width=E,l.canvas.height=P}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,E){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class o{constructor({baseUrl:l=null,isCompressed:E=!0}){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=E}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const E=this.baseUrl+l+(this.isCompressed?".bcmap":""),P=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(E,P).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(l,E){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class b{constructor({baseUrl:l=null}){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${l}`;return this._fetchData(E).catch(P=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(l){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=b;class d{constructor(){this.constructor===d&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,E,P=!1){if(l<=0||E<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),P||(C.setAttribute("width",`${l}px`),C.setAttribute("height",`${E}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${l} ${E}`),C}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=d},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,r=4294901760,o=65535;class b{constructor(g){this.h1=g?g&4294967295:i,this.h2=g?g&4294967295:i}update(g){let l,E;if(typeof g=="string"){l=new Uint8Array(g.length*2),E=0;for(let U=0,M=g.length;U<M;U++){const _=g.charCodeAt(U);_<=255?l[E++]=_:(l[E++]=_>>>8,l[E++]=_&255)}}else if((0,n.isArrayBuffer)(g))l=g.slice(),E=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=E>>2,C=E-P*4,R=new Uint32Array(l.buffer,0,P);let F=0,w=0,T=this.h1,O=this.h2;const k=3432918353,x=461845907,m=k&o,A=x&o;for(let U=0;U<P;U++)U&1?(F=R[U],F=F*k&r|F*m&o,F=F<<15|F>>>17,F=F*x&r|F*A&o,T^=F,T=T<<13|T>>>19,T=T*5+3864292196):(w=R[U],w=w*k&r|w*m&o,w=w<<15|w>>>17,w=w*x&r|w*A&o,O^=w,O=O<<13|O>>>19,O=O*5+3864292196);switch(F=0,C){case 3:F^=l[P*4+2]<<16;case 2:F^=l[P*4+1]<<8;case 1:F^=l[P*4],F=F*k&r|F*m&o,F=F<<15|F>>>17,F=F*x&r|F*A&o,P&1?T^=F:O^=F}this.h1=T,this.h2=O}hexdigest(){let g=this.h1,l=this.h2;return g^=l>>>1,g=g*3981806797&r|g*36045&o,l=l*4283543511&r|((l<<16|g>>>16)*2950163797&r)>>>16,g^=l>>>1,g=g*444984403&r|g*60499&o,l=l*3301882366&r|((l<<16|g>>>16)*3120437893&r)>>>16,g^=l>>>1,(g>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=b},(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:d=globalThis.document,styleElement:g=null}){G(this,o,new Set);this._document=d,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(d){this.nativeFontFaces.add(d),this._document.fonts.add(d)}removeNativeFontFace(d){this.nativeFontFaces.delete(d),this._document.fonts.delete(d)}insertRule(d){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const g=this.styleElement.sheet;g.insertRule(d,g.cssRules.length)}clear(){for(const d of this.nativeFontFaces)this._document.fonts.delete(d);this.nativeFontFaces.clear(),a(this,o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(d){if(!(!d||a(this,o).has(d.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:g,src:l,style:E}=d,P=new FontFace(g,l,E);this.addNativeFontFace(P);try{await P.load(),a(this,o).add(g)}catch{(0,n.warn)(`Cannot load system font: ${d.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(P)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(d){if(d.attached||d.missingFile&&!d.systemFontInfo)return;if(d.attached=!0,d.systemFontInfo){await this.loadSystemFont(d.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=d.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(E){throw(0,n.warn)(`Failed to load font '${l.family}': '${E}'.`),d.disableFontFace=!0,E}}return}const g=d.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const E=this._queueLoadingCallback(l);this._prepareFontLoadEvent(d,E)})}}get isFontLoadingAPISupported(){var g;const d=!!((g=this._document)!=null&&g.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",d)}get isSyncFontLoadingSupported(){let d=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(d=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",d)}_queueLoadingCallback(d){function g(){for((0,n.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;l.length>0&&l[0].done;){const P=l.shift();setTimeout(P.callback,0)}}const{loadingRequests:l}=this,E={done:!1,complete:g,callback:d};return l.push(E),E}get _loadTestFont(){const d=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",d)}_prepareFontLoadEvent(d,g){function l(L,Q){return L.charCodeAt(Q)<<24|L.charCodeAt(Q+1)<<16|L.charCodeAt(Q+2)<<8|L.charCodeAt(Q+3)&255}function E(L,Q,st,$){const ot=L.substring(0,Q),pt=L.substring(Q+st);return ot+$+pt}let P,C;const R=this._document.createElement("canvas");R.width=1,R.height=1;const F=R.getContext("2d");let w=0;function T(L,Q){if(++w>30){(0,n.warn)("Load test font never loaded."),Q();return}if(F.font="30px "+L,F.fillText(".",0,20),F.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(T.bind(null,L,Q))}const O=`lt${Date.now()}${this.loadTestFontId++}`;let k=this._loadTestFont;k=E(k,976,O.length,O);const m=16,A=1482184792;let U=l(k,m);for(P=0,C=O.length-3;P<C;P+=4)U=U-A+l(O,P)|0;P<O.length&&(U=U-A+l(O+"XXX",P)|0),k=E(k,m,4,(0,n.string32)(U));const M=`url(data:font/opentype;base64,${btoa(k)});`,_=`@font-face {font-family:"${O}";src:${M}}`;this.insertRule(_);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const L of[d.loadedName,O]){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=L,B.append(Q)}this._document.body.append(B),T(O,()=>{B.remove(),g.complete()})}}o=new WeakMap,e.FontLoader=i;class r{constructor(d,{isEvalSupported:g=!0,disableFontFace:l=!1,ignoreErrors:E=!1,inspectFont:P=null}){this.compiledGlyphs=Object.create(null);for(const C in d)this[C]=d[C];this.isEvalSupported=g!==!1,this.disableFontFace=l===!0,this.ignoreErrors=E===!0,this._inspectFont=P}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let d;if(!this.cssFontInfo)d=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),d=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(g=this._inspectFont)==null||g.call(this,this),d}createFontFaceRule(){var E;if(!this.data||this.disableFontFace)return null;const d=(0,n.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(d)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${g}}`}return(E=this._inspectFont)==null||E.call(this,this,g),l}getPathGenerator(d,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let l;try{l=d.get(this.loadedName+"_path_"+g)}catch(E){if(!this.ignoreErrors)throw E;return(0,n.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[g]=function(P,C){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const E=[];for(const P of l){const C=P.args!==void 0?P.args.join(","):"";E.push("c.",P.cmd,"(",C,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",E.join(""))}return this.compiledGlyphs[g]=function(E,P){for(const C of l)C.cmd==="scale"&&(C.args=[P,-P]),E[C.cmd].apply(E,C.args)}}}e.FontFaceObject=r},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(g){return new Promise((l,E)=>{require$$5.readFile(g,(C,R)=>{if(C||!R){E(new Error(C));return}l(new Uint8Array(R))})})};class r extends n.BaseFilterFactory{}e.NodeFilterFactory=r;class o extends n.BaseCanvasFactory{_createCanvas(l,E){return require$$5.createCanvas(l,E)}}e.NodeCanvasFactory=o;class b extends n.BaseCMapReaderFactory{_fetchData(l,E){return i(l).then(P=>({cMapData:P,compressionType:E}))}}e.NodeCMapReaderFactory=b;class d extends n.BaseStandardFontDataFactory{_fetchData(l){return i(l)}}e.NodeStandardFontDataFactory=d},(t,e,s)=>{var X,tn,wt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),i=s(6),r=s(12),o=s(13);const b=16,d=100,g=4096,l=15,E=10,P=1e3,C=16;function R(j,h){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){h.save(),this.__originalSave()},j.restore=function(){h.restore(),this.__originalRestore()},j.translate=function(u,y){h.translate(u,y),this.__originalTranslate(u,y)},j.scale=function(u,y){h.scale(u,y),this.__originalScale(u,y)},j.transform=function(u,y,S,N,H,Y){h.transform(u,y,S,N,H,Y),this.__originalTransform(u,y,S,N,H,Y)},j.setTransform=function(u,y,S,N,H,Y){h.setTransform(u,y,S,N,H,Y),this.__originalSetTransform(u,y,S,N,H,Y)},j.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},j.rotate=function(u){h.rotate(u),this.__originalRotate(u)},j.clip=function(u){h.clip(u),this.__originalClip(u)},j.moveTo=function(f,u){h.moveTo(f,u),this.__originalMoveTo(f,u)},j.lineTo=function(f,u){h.lineTo(f,u),this.__originalLineTo(f,u)},j.bezierCurveTo=function(f,u,y,S,N,H){h.bezierCurveTo(f,u,y,S,N,H),this.__originalBezierCurveTo(f,u,y,S,N,H)},j.rect=function(f,u,y,S){h.rect(f,u,y,S),this.__originalRect(f,u,y,S)},j.closePath=function(){h.closePath(),this.__originalClosePath()},j.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class F{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,f,u){let y;return this.cache[h]!==void 0?(y=this.cache[h],this.canvasFactory.reset(y,f,u)):(y=this.canvasFactory.create(f,u),this.cache[h]=y),y}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const f=this.cache[h];this.canvasFactory.destroy(f),delete this.cache[h]}}}function w(j,h,f,u,y,S,N,H,Y,dt){const[v,I,V,rt,K,ut]=(0,i.getCurrentTransform)(j);if(I===0&&V===0){const bt=N*v+K,Z=Math.round(bt),J=H*rt+ut,q=Math.round(J),ct=(N+Y)*v+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(H+dt)*rt+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(Math.sign(v),0,0,Math.sign(rt),Z,q),j.drawImage(h,f,u,y,S,0,0,At,Dt),j.setTransform(v,I,V,rt,K,ut),[At,Dt]}if(v===0&&rt===0){const bt=H*V+K,Z=Math.round(bt),J=N*I+ut,q=Math.round(J),ct=(H+dt)*V+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(N+Y)*I+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(0,Math.sign(I),Math.sign(V),0,Z,q),j.drawImage(h,f,u,y,S,0,0,Dt,At),j.setTransform(v,I,V,rt,K,ut),[Dt,At]}j.drawImage(h,f,u,y,S,N,H,Y,dt);const St=Math.hypot(v,I),ft=Math.hypot(V,rt);return[St*Y,ft*dt]}function T(j){const{width:h,height:f}=j;if(h>P||f>P)return null;const u=1e3,y=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),S=h+1;let N=new Uint8Array(S*(f+1)),H,Y,dt;const v=h+7&-8;let I=new Uint8Array(v*f),V=0;for(const ft of j.data){let bt=128;for(;bt>0;)I[V++]=ft&bt?0:255,bt>>=1}let rt=0;for(V=0,I[V]!==0&&(N[0]=1,++rt),Y=1;Y<h;Y++)I[V]!==I[V+1]&&(N[Y]=I[V]?2:1,++rt),V++;for(I[V]!==0&&(N[Y]=2,++rt),H=1;H<f;H++){V=H*v,dt=H*S,I[V-v]!==I[V]&&(N[dt]=I[V]?1:8,++rt);let ft=(I[V]?4:0)+(I[V-v]?8:0);for(Y=1;Y<h;Y++)ft=(ft>>2)+(I[V+1]?4:0)+(I[V-v+1]?8:0),y[ft]&&(N[dt+Y]=y[ft],++rt),V++;if(I[V-v]!==I[V]&&(N[dt+Y]=I[V]?2:4,++rt),rt>u)return null}for(V=v*(f-1),dt=H*S,I[V]!==0&&(N[dt]=8,++rt),Y=1;Y<h;Y++)I[V]!==I[V+1]&&(N[dt+Y]=I[V]?4:8,++rt),V++;if(I[V]!==0&&(N[dt+Y]=4,++rt),rt>u)return null;const K=new Int32Array([0,S,-1,0,-S,0,0,0,1]),ut=new Path2D;for(H=0;rt&&H<=f;H++){let ft=H*S;const bt=ft+h;for(;ft<bt&&!N[ft];)ft++;if(ft===bt)continue;ut.moveTo(ft%S,H);const Z=ft;let J=N[ft];do{const q=K[J];do ft+=q;while(!N[ft]);const ct=N[ft];ct!==5&&ct!==10?(J=ct,N[ft]=0):(J=ct&51*J>>4,N[ft]&=J>>2|J<<2),ut.lineTo(ft%S,ft/S|0),N[ft]||--rt}while(Z!==ft);--H}return I=null,N=null,function(ft){ft.save(),ft.scale(1/h,-1/f),ft.translate(0,-f),ft.fill(ut),ft.beginPath(),ft.restore()}}class O{constructor(h,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,f])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,f){this.x=h,this.y=f}updatePathMinMax(h,f,u){[f,u]=n.Util.applyTransform([f,u],h),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(h,f){const u=n.Util.applyTransform(f,h),y=n.Util.applyTransform(f.slice(2),h);this.minX=Math.min(this.minX,u[0],y[0]),this.minY=Math.min(this.minY,u[1],y[1]),this.maxX=Math.max(this.maxX,u[0],y[0]),this.maxY=Math.max(this.maxY,u[1],y[1])}updateScalingPathMinMax(h,f){n.Util.scaleMinMax(h,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(h,f,u,y,S,N,H,Y,dt,v){const I=n.Util.bezierBoundingBox(f,u,y,S,N,H,Y,dt);if(v){v[0]=Math.min(v[0],I[0],I[2]),v[1]=Math.max(v[1],I[0],I[2]),v[2]=Math.min(v[2],I[1],I[3]),v[3]=Math.max(v[3],I[1],I[3]);return}this.updateRectMinMax(h,I)}getPathBoundingBox(h=r.PathType.FILL,f=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(h===r.PathType.STROKE){f||(0,n.unreachable)("Stroke bounding box must include transform.");const y=n.Util.singularValueDecompose2dScale(f),S=y[0]*this.lineWidth/2,N=y[1]*this.lineWidth/2;u[0]-=S,u[1]-=N,u[2]+=S,u[3]+=N}return u}updateClipFromPath(){const h=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=r.PathType.FILL,f=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(h,f))}}function k(j,h){if(typeof ImageData<"u"&&h instanceof ImageData){j.putImageData(h,0,0);return}const f=h.height,u=h.width,y=f%C,S=(f-y)/C,N=y===0?S:S+1,H=j.createImageData(u,C);let Y=0,dt;const v=h.data,I=H.data;let V,rt,K,ut;if(h.kind===n.ImageKind.GRAYSCALE_1BPP){const St=v.byteLength,ft=new Uint32Array(I.buffer,0,I.byteLength>>2),bt=ft.length,Z=u+7>>3,J=4294967295,q=n.FeatureTest.isLittleEndian?4278190080:255;for(V=0;V<N;V++){for(K=V<S?C:y,dt=0,rt=0;rt<K;rt++){const ct=St-Y;let At=0;const Et=ct>Z?u:ct*8-7,Dt=Et&-8;let Lt=0,jt=0;for(;At<Dt;At+=8)jt=v[Y++],ft[dt++]=jt&128?J:q,ft[dt++]=jt&64?J:q,ft[dt++]=jt&32?J:q,ft[dt++]=jt&16?J:q,ft[dt++]=jt&8?J:q,ft[dt++]=jt&4?J:q,ft[dt++]=jt&2?J:q,ft[dt++]=jt&1?J:q;for(;At<Et;At++)Lt===0&&(jt=v[Y++],Lt=128),ft[dt++]=jt&Lt?J:q,Lt>>=1}for(;dt<bt;)ft[dt++]=0;j.putImageData(H,0,V*C)}}else if(h.kind===n.ImageKind.RGBA_32BPP){for(rt=0,ut=u*C*4,V=0;V<S;V++)I.set(v.subarray(Y,Y+ut)),Y+=ut,j.putImageData(H,0,rt),rt+=C;V<N&&(ut=u*y*4,I.set(v.subarray(Y,Y+ut)),j.putImageData(H,0,rt))}else if(h.kind===n.ImageKind.RGB_24BPP)for(K=C,ut=u*K,V=0;V<N;V++){for(V>=S&&(K=y,ut=u*K),dt=0,rt=ut;rt--;)I[dt++]=v[Y++],I[dt++]=v[Y++],I[dt++]=v[Y++],I[dt++]=255;j.putImageData(H,0,V*C)}else throw new Error(`bad image kind: ${h.kind}`)}function x(j,h){if(h.bitmap){j.drawImage(h.bitmap,0,0);return}const f=h.height,u=h.width,y=f%C,S=(f-y)/C,N=y===0?S:S+1,H=j.createImageData(u,C);let Y=0;const dt=h.data,v=H.data;for(let I=0;I<N;I++){const V=I<S?C:y;({srcPos:Y}=(0,o.convertBlackAndWhiteToRGBA)({src:dt,srcPos:Y,dest:v,width:u,height:V,nonBlackColor:0})),j.putImageData(H,0,I*C)}}function m(j,h){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of f)j[u]!==void 0&&(h[u]=j[u]);j.setLineDash!==void 0&&(h.setLineDash(j.getLineDash()),h.lineDashOffset=j.lineDashOffset)}function A(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!n.isNodeJS){const{filter:h}=j;h!=="none"&&h!==""&&(j.filter="none")}}function U(j,h,f,u){const y=j.length;for(let S=3;S<y;S+=4){const N=j[S];if(N===0)j[S-3]=h,j[S-2]=f,j[S-1]=u;else if(N<255){const H=255-N;j[S-3]=j[S-3]*N+h*H>>8,j[S-2]=j[S-2]*N+f*H>>8,j[S-1]=j[S-1]*N+u*H>>8}}}function M(j,h,f){const u=j.length,y=1/255;for(let S=3;S<u;S+=4){const N=f?f[j[S]]:j[S];h[S]=h[S]*N*y|0}}function _(j,h,f){const u=j.length;for(let y=3;y<u;y+=4){const S=j[y-3]*77+j[y-2]*152+j[y-1]*28;h[y]=f?h[y]*f[S>>8]>>8:h[y]*S>>16}}function B(j,h,f,u,y,S,N,H,Y,dt,v){const I=!!S,V=I?S[0]:0,rt=I?S[1]:0,K=I?S[2]:0,ut=y==="Luminosity"?_:M,ft=Math.min(u,Math.ceil(1048576/f));for(let bt=0;bt<u;bt+=ft){const Z=Math.min(ft,u-bt),J=j.getImageData(H-dt,bt+(Y-v),f,Z),q=h.getImageData(H,bt+Y,f,Z);I&&U(J.data,V,rt,K),ut(J.data,q.data,N),h.putImageData(q,H,bt+Y)}}function L(j,h,f,u){const y=u[0],S=u[1],N=u[2]-y,H=u[3]-S;N===0||H===0||(B(h.context,f,N,H,h.subtype,h.backdrop,h.transferMap,y,S,h.offsetX,h.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(f.canvas,0,0),j.restore())}function Q(j,h){const f=n.Util.singularValueDecompose2dScale(j);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:f[0]<=u||f[1]<=u}const st=["butt","round","square"],$=["miter","round","bevel"],ot={},pt={},kt=class kt{constructor(h,f,u,y,S,{optionalContentConfig:N,markedContentStack:H=null},Y,dt){G(this,X);G(this,wt);this.ctx=h,this.current=new O(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=u,this.canvasFactory=y,this.filterFactory=S,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=H||[],this.optionalContentConfig=N,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,f=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):f}beginDrawing({transform:h,viewport:f,transparency:u=!1,background:y=null}){const S=this.ctx.canvas.width,N=this.ctx.canvas.height,H=this.ctx.fillStyle;if(this.ctx.fillStyle=y||"#ffffff",this.ctx.fillRect(0,0,S,N),this.ctx.fillStyle=H,u){const Y=this.cachedCanvases.getCanvas("transparent",S,N);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...f.transform),this.viewportScale=f.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(h,f,u,y){const S=h.argsArray,N=h.fnArray;let H=f||0;const Y=S.length;if(Y===H)return H;const dt=Y-H>E&&typeof u=="function",v=dt?Date.now()+l:0;let I=0;const V=this.commonObjs,rt=this.objs;let K;for(;;){if(y!==void 0&&H===y.nextBreakPoint)return y.breakIt(H,u),H;if(K=N[H],K!==n.OPS.dependency)this[K].apply(this,S[H]);else for(const ut of S[H]){const St=ut.startsWith("g_")?V:rt;if(!St.has(ut))return St.get(ut,u),H}if(H++,H===Y)return H;if(dt&&++I>E){if(Date.now()>v)return u(),H;I=0}}}endDrawing(){it(this,X,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const f of h.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);h.clear()}this._cachedBitmapsMap.clear(),it(this,wt,en).call(this)}_scaleImage(h,f){const u=h.width,y=h.height;let S=Math.max(Math.hypot(f[0],f[1]),1),N=Math.max(Math.hypot(f[2],f[3]),1),H=u,Y=y,dt="prescale1",v,I;for(;S>2&&H>1||N>2&&Y>1;){let V=H,rt=Y;S>2&&H>1&&(V=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H/2),S/=H/V),N>2&&Y>1&&(rt=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,N/=Y/rt),v=this.cachedCanvases.getCanvas(dt,V,rt),I=v.context,I.clearRect(0,0,V,rt),I.drawImage(h,0,0,H,Y,0,0,V,rt),h=v.canvas,H=V,Y=rt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:H,paintHeight:Y}}_createMaskCanvas(h){const f=this.ctx,{width:u,height:y}=h,S=this.current.fillColor,N=this.current.patternFill,H=(0,i.getCurrentTransform)(f);let Y,dt,v,I;if((h.bitmap||h.data)&&h.count>1){const At=h.bitmap||h.data.buffer;dt=JSON.stringify(N?H:[H.slice(0,4),S]),Y=this._cachedBitmapsMap.get(At),Y||(Y=new Map,this._cachedBitmapsMap.set(At,Y));const Et=Y.get(dt);if(Et&&!N){const Dt=Math.round(Math.min(H[0],H[2])+H[4]),Lt=Math.round(Math.min(H[1],H[3])+H[5]);return{canvas:Et,offsetX:Dt,offsetY:Lt}}v=Et}v||(I=this.cachedCanvases.getCanvas("maskCanvas",u,y),x(I.context,h));let V=n.Util.transform(H,[1/u,0,0,-1/y,0,0]);V=n.Util.transform(V,[1,0,0,1,0,-y]);const rt=n.Util.applyTransform([0,0],V),K=n.Util.applyTransform([u,y],V),ut=n.Util.normalizeRect([rt[0],rt[1],K[0],K[1]]),St=Math.round(ut[2]-ut[0])||1,ft=Math.round(ut[3]-ut[1])||1,bt=this.cachedCanvases.getCanvas("fillCanvas",St,ft),Z=bt.context,J=Math.min(rt[0],K[0]),q=Math.min(rt[1],K[1]);Z.translate(-J,-q),Z.transform(...V),v||(v=this._scaleImage(I.canvas,(0,i.getCurrentTransformInverse)(Z)),v=v.img,Y&&N&&Y.set(dt,v)),Z.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(Z),h.interpolate),w(Z,v,0,0,v.width,v.height,0,0,u,y),Z.globalCompositeOperation="source-in";const ct=n.Util.transform((0,i.getCurrentTransformInverse)(Z),[1,0,0,1,-J,-q]);return Z.fillStyle=N?S.getPattern(f,this,ct,r.PathType.FILL):S,Z.fillRect(0,0,u,y),Y&&!N&&(this.cachedCanvases.delete("fillCanvas"),Y.set(dt,bt.canvas)),{canvas:bt.canvas,offsetX:Math.round(J),offsetY:Math.round(q)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=st[h]}setLineJoin(h){this.ctx.lineJoin=$[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,f){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(h),u.lineDashOffset=f)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,u]of h)switch(f){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,f=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,y=this.cachedCanvases.getCanvas(u,h,f);this.suspendedCtx=this.ctx,this.ctx=y.context;const S=this.ctx;S.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,S),R(S,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const f=this.current.activeSMask,u=this.suspendedCtx;L(u,f,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(h,f,u,y,S,N){this.ctx.transform(h,f,u,y,S,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(h,f,u){const y=this.ctx,S=this.current;let N=S.x,H=S.y,Y,dt;const v=(0,i.getCurrentTransform)(y),I=v[0]===0&&v[3]===0||v[1]===0&&v[2]===0,V=I?u.slice(0):null;for(let rt=0,K=0,ut=h.length;rt<ut;rt++)switch(h[rt]|0){case n.OPS.rectangle:N=f[K++],H=f[K++];const St=f[K++],ft=f[K++],bt=N+St,Z=H+ft;y.moveTo(N,H),St===0||ft===0?y.lineTo(bt,Z):(y.lineTo(bt,H),y.lineTo(bt,Z),y.lineTo(N,Z)),I||S.updateRectMinMax(v,[N,H,bt,Z]),y.closePath();break;case n.OPS.moveTo:N=f[K++],H=f[K++],y.moveTo(N,H),I||S.updatePathMinMax(v,N,H);break;case n.OPS.lineTo:N=f[K++],H=f[K++],y.lineTo(N,H),I||S.updatePathMinMax(v,N,H);break;case n.OPS.curveTo:Y=N,dt=H,N=f[K+4],H=f[K+5],y.bezierCurveTo(f[K],f[K+1],f[K+2],f[K+3],N,H),S.updateCurvePathMinMax(v,Y,dt,f[K],f[K+1],f[K+2],f[K+3],N,H,V),K+=6;break;case n.OPS.curveTo2:Y=N,dt=H,y.bezierCurveTo(N,H,f[K],f[K+1],f[K+2],f[K+3]),S.updateCurvePathMinMax(v,Y,dt,N,H,f[K],f[K+1],f[K+2],f[K+3],V),N=f[K+2],H=f[K+3],K+=4;break;case n.OPS.curveTo3:Y=N,dt=H,N=f[K+2],H=f[K+3],y.bezierCurveTo(f[K],f[K+1],N,H,N,H),S.updateCurvePathMinMax(v,Y,dt,f[K],f[K+1],N,H,N,H,V),K+=4;break;case n.OPS.closePath:y.closePath();break}I&&S.updateScalingPathMinMax(v,V),S.setCurrentPoint(N,H)}closePath(){this.ctx.closePath()}stroke(h=!0){const f=this.ctx,u=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(f.save(),f.strokeStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),r.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const f=this.ctx,u=this.current.fillColor,y=this.current.patternFill;let S=!1;y&&(f.save(),f.fillStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),r.PathType.FILL),S=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),S&&f.restore(),h&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ot}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,f=this.ctx;if(h===void 0){f.beginPath();return}f.save(),f.beginPath();for(const u of h)f.setTransform(...u.transform),f.translate(u.x,u.y),u.addToPath(f,u.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,f){var v;const u=this.commonObjs.get(h),y=this.current;if(!u)throw new Error(`Can't find font for ${h}`);if(y.fontMatrix=u.fontMatrix||n.FONT_IDENTITY_MATRIX,(y.fontMatrix[0]===0||y.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+h),f<0?(f=-f,y.fontDirection=-1):y.fontDirection=1,this.current.font=u,this.current.fontSize=f,u.isType3Font)return;const S=u.loadedName||"sans-serif",N=((v=u.systemFontInfo)==null?void 0:v.css)||`"${S}", ${u.fallbackName}`;let H="normal";u.black?H="900":u.bold&&(H="bold");const Y=u.italic?"italic":"normal";let dt=f;f<b?dt=b:f>d&&(dt=d),this.current.fontSizeScale=f/dt,this.ctx.font=`${Y} ${H} ${dt}px ${N}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,f){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=f}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}setTextMatrix(h,f,u,y,S,N){this.current.textMatrix=[h,f,u,y,S,N],this.current.textMatrixScale=Math.hypot(h,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,f,u,y){const S=this.ctx,N=this.current,H=N.font,Y=N.textRenderingMode,dt=N.fontSize/N.fontSizeScale,v=Y&n.TextRenderingMode.FILL_STROKE_MASK,I=!!(Y&n.TextRenderingMode.ADD_TO_PATH_FLAG),V=N.patternFill&&!H.missingFile;let rt;(H.disableFontFace||I||V)&&(rt=H.getPathGenerator(this.commonObjs,h)),H.disableFontFace||V?(S.save(),S.translate(f,u),S.beginPath(),rt(S,dt),y&&S.setTransform(...y),(v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fill(),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.stroke(),S.restore()):((v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fillText(h,f,u),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.strokeText(h,f,u)),I&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(S),x:f,y:u,fontSize:dt,addToPath:rt})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const f=h.getImageData(0,0,10,10).data;let u=!1;for(let y=3;y<f.length;y+=4)if(f[y]>0&&f[y]<255){u=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(h){const f=this.current,u=f.font;if(u.isType3Font)return this.showType3Text(h);const y=f.fontSize;if(y===0)return;const S=this.ctx,N=f.fontSizeScale,H=f.charSpacing,Y=f.wordSpacing,dt=f.fontDirection,v=f.textHScale*dt,I=h.length,V=u.vertical,rt=V?1:-1,K=u.defaultVMetrics,ut=y*f.fontMatrix[0],St=f.textRenderingMode===n.TextRenderingMode.FILL&&!u.disableFontFace&&!f.patternFill;S.save(),S.transform(...f.textMatrix),S.translate(f.x,f.y+f.textRise),dt>0?S.scale(v,-1):S.scale(v,1);let ft;if(f.patternFill){S.save();const ct=f.fillColor.getPattern(S,this,(0,i.getCurrentTransformInverse)(S),r.PathType.FILL);ft=(0,i.getCurrentTransform)(S),S.restore(),S.fillStyle=ct}let bt=f.lineWidth;const Z=f.textMatrixScale;if(Z===0||bt===0){const ct=f.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(ct===n.TextRenderingMode.STROKE||ct===n.TextRenderingMode.FILL_STROKE)&&(bt=this.getSinglePixelWidth())}else bt/=Z;if(N!==1&&(S.scale(N,N),bt/=N),S.lineWidth=bt,u.isInvalidPDFjsFont){const ct=[];let At=0;for(const Et of h)ct.push(Et.unicode),At+=Et.width;S.fillText(ct.join(""),0,0),f.x+=At*ut*v,S.restore(),this.compose();return}let J=0,q;for(q=0;q<I;++q){const ct=h[q];if(typeof ct=="number"){J+=rt*ct*y/1e3;continue}let At=!1;const Et=(ct.isSpace?Y:0)+H,Dt=ct.fontChar,Lt=ct.accent;let jt,Wt,Gt=ct.width;if(V){const Yt=ct.vmetric||K,vt=-(ct.vmetric?Yt[1]:Gt*.5)*ut,at=Yt[2]*ut;Gt=Yt?-Yt[0]:Gt,jt=vt/N,Wt=(J+at)/N}else jt=J/N,Wt=0;if(u.remeasure&&Gt>0){const Yt=S.measureText(Dt).width*1e3/y*N;if(Gt<Yt&&this.isFontSubpixelAAEnabled){const vt=Gt/Yt;At=!0,S.save(),S.scale(vt,1),jt/=vt}else Gt!==Yt&&(jt+=(Gt-Yt)/2e3*y/N)}if(this.contentVisible&&(ct.isInFont||u.missingFile)){if(St&&!Lt)S.fillText(Dt,jt,Wt);else if(this.paintChar(Dt,jt,Wt,ft),Lt){const Yt=jt+y*Lt.offset.x/N,vt=Wt-y*Lt.offset.y/N;this.paintChar(Lt.fontChar,Yt,vt,ft)}}const Vt=V?Gt*ut-Et*dt:Gt*ut+Et*dt;J+=Vt,At&&S.restore()}V?f.y-=J:f.x+=J*v,S.restore(),this.compose()}showType3Text(h){const f=this.ctx,u=this.current,y=u.font,S=u.fontSize,N=u.fontDirection,H=y.vertical?1:-1,Y=u.charSpacing,dt=u.wordSpacing,v=u.textHScale*N,I=u.fontMatrix||n.FONT_IDENTITY_MATRIX,V=h.length,rt=u.textRenderingMode===n.TextRenderingMode.INVISIBLE;let K,ut,St,ft;if(!(rt||S===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...u.textMatrix),f.translate(u.x,u.y),f.scale(v,N),K=0;K<V;++K){if(ut=h[K],typeof ut=="number"){ft=H*ut*S/1e3,this.ctx.translate(ft,0),u.x+=ft*v;continue}const bt=(ut.isSpace?dt:0)+Y,Z=y.charProcOperatorList[ut.operatorListId];if(!Z){(0,n.warn)(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),f.scale(S,S),f.transform(...I),this.executeOperatorList(Z),this.restore()),St=n.Util.applyTransform([ut.width,0],I)[0]*S+bt,f.translate(St,0),u.x+=St*v}f.restore(),this.processingType3=null}}setCharWidth(h,f){}setCharWidthAndBounds(h,f,u,y,S,N){this.ctx.rect(u,y,S-u,N-y),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let f;if(h[0]==="TilingPattern"){const u=h[1],y=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),S={createCanvasGraphics:N=>new kt(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};f=new r.TilingPattern(h,u,this.ctx,S,y)}else f=this._getPattern(h[1],h[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,f,u){const y=n.Util.makeHexColor(h,f,u);this.ctx.strokeStyle=y,this.current.strokeColor=y}setFillRGBColor(h,f,u){const y=n.Util.makeHexColor(h,f,u);this.ctx.fillStyle=y,this.current.fillColor=y,this.current.patternFill=!1}_getPattern(h,f=null){let u;return this.cachedPatterns.has(h)?u=this.cachedPatterns.get(h):(u=(0,r.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,u)),f&&(u.matrix=f),u}shadingFill(h){if(!this.contentVisible)return;const f=this.ctx;this.save();const u=this._getPattern(h);f.fillStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),r.PathType.SHADING);const y=(0,i.getCurrentTransformInverse)(f);if(y){const{width:S,height:N}=f.canvas,[H,Y,dt,v]=n.Util.getAxialAlignedBoundingBox([0,0,S,N],y);this.ctx.fillRect(H,Y,dt-H,v-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,f){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),f)){const u=f[2]-f[0],y=f[3]-f[1];this.ctx.rect(f[0],f[1],u,y),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;h.isolated||(0,n.info)("TODO: Support non-isolated groups."),h.knockout&&(0,n.warn)("Knockout groups not supported.");const u=(0,i.getCurrentTransform)(f);if(h.matrix&&f.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let y=n.Util.getAxialAlignedBoundingBox(h.bbox,(0,i.getCurrentTransform)(f));const S=[0,0,f.canvas.width,f.canvas.height];y=n.Util.intersect(y,S)||[0,0,0,0];const N=Math.floor(y[0]),H=Math.floor(y[1]);let Y=Math.max(Math.ceil(y[2])-N,1),dt=Math.max(Math.ceil(y[3])-H,1),v=1,I=1;Y>g&&(v=Y/g,Y=g),dt>g&&(I=dt/g,dt=g),this.current.startNewPathAndClipBox([0,0,Y,dt]);let V="groupAt"+this.groupLevel;h.smask&&(V+="_smask_"+this.smaskCounter++%2);const rt=this.cachedCanvases.getCanvas(V,Y,dt),K=rt.context;K.scale(1/v,1/I),K.translate(-N,-H),K.transform(...u),h.smask?this.smaskStack.push({canvas:rt.canvas,context:K,offsetX:N,offsetY:H,scaleX:v,scaleY:I,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(N,H),f.scale(v,I),f.save()),m(f,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const y=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...y);const S=n.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],y);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(S)}}beginAnnotation(h,f,u,y,S){if(it(this,X,tn).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&f.length===4){const N=f[2]-f[0],H=f[3]-f[1];if(S&&this.annotationCanvasMap){u=u.slice(),u[4]-=f[0],u[5]-=f[1],f=f.slice(),f[0]=f[1]=0,f[2]=N,f[3]=H;const[Y,dt]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:v}=this,I=Math.ceil(N*this.outputScaleX*v),V=Math.ceil(H*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(I,V);const{canvas:rt,context:K}=this.annotationCanvas;this.annotationCanvasMap.set(h,rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=K,this.ctx.save(),this.ctx.setTransform(Y,0,0,-dt,0,H*dt),A(this.ctx)}else A(this.ctx),this.ctx.rect(f[0],f[1],N,H),this.ctx.clip(),this.endPath()}this.current=new O(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...y)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,wt,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const f=h.count;h=this.getObject(h.data,h),h.count=f;const u=this.ctx,y=this.processingType3;if(y&&(y.compiled===void 0&&(y.compiled=T(h)),y.compiled)){y.compiled(u);return}const S=this._createMaskCanvas(h),N=S.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(N,S.offsetX,S.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(h,f,u=0,y=0,S,N){if(!this.contentVisible)return;h=this.getObject(h.data,h);const H=this.ctx;H.save();const Y=(0,i.getCurrentTransform)(H);H.transform(f,u,y,S,0,0);const dt=this._createMaskCanvas(h);H.setTransform(1,0,0,1,dt.offsetX-Y[4],dt.offsetY-Y[5]);for(let v=0,I=N.length;v<I;v+=2){const V=n.Util.transform(Y,[f,u,y,S,N[v],N[v+1]]),[rt,K]=n.Util.applyTransform([0,0],V);H.drawImage(dt.canvas,rt,K)}H.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const f=this.ctx,u=this.current.fillColor,y=this.current.patternFill;for(const S of h){const{data:N,width:H,height:Y,transform:dt}=S,v=this.cachedCanvases.getCanvas("maskCanvas",H,Y),I=v.context;I.save();const V=this.getObject(N,S);x(I,V),I.globalCompositeOperation="source-in",I.fillStyle=y?u.getPattern(I,this,(0,i.getCurrentTransformInverse)(f),r.PathType.FILL):u,I.fillRect(0,0,H,Y),I.restore(),f.save(),f.transform(...dt),f.scale(1,-1),w(f,v.canvas,0,0,H,Y,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const f=this.getObject(h);if(!f){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)}paintImageXObjectRepeat(h,f,u,y){if(!this.contentVisible)return;const S=this.getObject(h);if(!S){(0,n.warn)("Dependent image isn't ready yet");return}const N=S.width,H=S.height,Y=[];for(let dt=0,v=y.length;dt<v;dt+=2)Y.push({transform:[f,0,0,u,y[dt],y[dt+1]],x:0,y:0,w:N,h:H});this.paintInlineImageXObjectGroup(S,Y)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:f,width:u,height:y}=h,S=this.cachedCanvases.getCanvas("inlineImage",u,y),N=S.context;return N.filter=this.current.transferMaps,N.drawImage(f,0,0),N.filter="none",S.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const f=h.width,u=h.height,y=this.ctx;if(this.save(),!n.isNodeJS){const{filter:H}=y;H!=="none"&&H!==""&&(y.filter="none")}y.scale(1/f,-1/u);let S;if(h.bitmap)S=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)S=h;else{const Y=this.cachedCanvases.getCanvas("inlineImage",f,u).context;k(Y,h),S=this.applyTransferMapsToCanvas(Y)}const N=this._scaleImage(S,(0,i.getCurrentTransformInverse)(y));y.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(y),h.interpolate),w(y,N.img,0,0,N.paintWidth,N.paintHeight,0,-u,f,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,f){if(!this.contentVisible)return;const u=this.ctx;let y;if(h.bitmap)y=h.bitmap;else{const S=h.width,N=h.height,Y=this.cachedCanvases.getCanvas("inlineImage",S,N).context;k(Y,h),y=this.applyTransferMapsToCanvas(Y)}for(const S of f)u.save(),u.transform(...S.transform),u.scale(1,-1),w(u,y,S.x,S.y,S.w,S.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,f){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,f){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(f)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const u=this.ctx;this.pendingClip&&(f||(this.pendingClip===pt?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,i.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const f=Math.abs(h[0]*h[3]-h[2]*h[1]),u=Math.hypot(h[0],h[2]),y=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(u,y)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:h}=this.current,{a:f,b:u,c:y,d:S}=this.ctx.getTransform();let N,H;if(u===0&&y===0){const Y=Math.abs(f),dt=Math.abs(S);if(Y===dt)if(h===0)N=H=1/Y;else{const v=Y*h;N=H=v<1?1/v:1}else if(h===0)N=1/Y,H=1/dt;else{const v=Y*h,I=dt*h;N=v<1?1/v:1,H=I<1?1/I:1}}else{const Y=Math.abs(f*S-u*y),dt=Math.hypot(f,u),v=Math.hypot(y,S);if(h===0)N=v/Y,H=dt/Y;else{const I=h*Y;N=v>I?v/I:1,H=dt>I?dt/I:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=H}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:f}=this,{lineWidth:u}=this.current,[y,S]=this.getScaleForStroking();if(f.lineWidth=u||1,y===1&&S===1){f.stroke();return}const N=f.getLineDash();if(h&&f.save(),f.scale(y,S),N.length>0){const H=Math.max(y,S);f.setLineDash(N.map(Y=>Y/H)),f.lineDashOffset/=H}f.stroke(),h&&f.restore()}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};X=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wt=new WeakSet,en=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const f=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=f}}};let mt=kt;e.CanvasGraphics=mt;for(const j in n.OPS)mt.prototype[j]!==void 0&&(mt.prototype[n.OPS[j]]=mt.prototype[j])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=C;var n=s(1),i=s(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=r;function o(T,O){if(!O)return;const k=O[2]-O[0],x=O[3]-O[1],m=new Path2D;m.rect(O[0],O[1],k,x),T.clip(m)}class b{constructor(){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class d extends b{constructor(O){super(),this._type=O[1],this._bbox=O[2],this._colorStops=O[3],this._p0=O[4],this._p1=O[5],this._r0=O[6],this._r1=O[7],this.matrix=null}_createGradient(O){let k;this._type==="axial"?k=O.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(k=O.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)k.addColorStop(x[0],x[1]);return k}getPattern(O,k,x,m){let A;if(m===r.STROKE||m===r.FILL){const U=k.current.getClippedPathBoundingBox(m,(0,i.getCurrentTransform)(O))||[0,0,0,0],M=Math.ceil(U[2]-U[0])||1,_=Math.ceil(U[3]-U[1])||1,B=k.cachedCanvases.getCanvas("pattern",M,_,!0),L=B.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-U[0],-U[1]),x=n.Util.transform(x,[1,0,0,1,U[0],U[1]]),L.transform(...k.baseTransform),this.matrix&&L.transform(...this.matrix),o(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),A=O.createPattern(B.canvas,"no-repeat");const Q=new DOMMatrix(x);A.setTransform(Q)}else o(O,this._bbox),A=this._createGradient(O);return A}}function g(T,O,k,x,m,A,U,M){const _=O.coords,B=O.colors,L=T.data,Q=T.width*4;let st;_[k+1]>_[x+1]&&(st=k,k=x,x=st,st=A,A=U,U=st),_[x+1]>_[m+1]&&(st=x,x=m,m=st,st=U,U=M,M=st),_[k+1]>_[x+1]&&(st=k,k=x,x=st,st=A,A=U,U=st);const $=(_[k]+O.offsetX)*O.scaleX,ot=(_[k+1]+O.offsetY)*O.scaleY,pt=(_[x]+O.offsetX)*O.scaleX,mt=(_[x+1]+O.offsetY)*O.scaleY,X=(_[m]+O.offsetX)*O.scaleX,yt=(_[m+1]+O.offsetY)*O.scaleY;if(ot>=yt)return;const wt=B[A],Rt=B[A+1],kt=B[A+2],j=B[U],h=B[U+1],f=B[U+2],u=B[M],y=B[M+1],S=B[M+2],N=Math.round(ot),H=Math.round(yt);let Y,dt,v,I,V,rt,K,ut;for(let St=N;St<=H;St++){if(St<mt){const q=St<ot?0:(ot-St)/(ot-mt);Y=$-($-pt)*q,dt=wt-(wt-j)*q,v=Rt-(Rt-h)*q,I=kt-(kt-f)*q}else{let q;St>yt?q=1:mt===yt?q=0:q=(mt-St)/(mt-yt),Y=pt-(pt-X)*q,dt=j-(j-u)*q,v=h-(h-y)*q,I=f-(f-S)*q}let ft;St<ot?ft=0:St>yt?ft=1:ft=(ot-St)/(ot-yt),V=$-($-X)*ft,rt=wt-(wt-u)*ft,K=Rt-(Rt-y)*ft,ut=kt-(kt-S)*ft;const bt=Math.round(Math.min(Y,V)),Z=Math.round(Math.max(Y,V));let J=Q*St+bt*4;for(let q=bt;q<=Z;q++)ft=(Y-q)/(Y-V),ft<0?ft=0:ft>1&&(ft=1),L[J++]=dt-(dt-rt)*ft|0,L[J++]=v-(v-K)*ft|0,L[J++]=I-(I-ut)*ft|0,L[J++]=255}}function l(T,O,k){const x=O.coords,m=O.colors;let A,U;switch(O.type){case"lattice":const M=O.verticesPerRow,_=Math.floor(x.length/M)-1,B=M-1;for(A=0;A<_;A++){let L=A*M;for(let Q=0;Q<B;Q++,L++)g(T,k,x[L],x[L+1],x[L+M],m[L],m[L+1],m[L+M]),g(T,k,x[L+M+1],x[L+1],x[L+M],m[L+M+1],m[L+1],m[L+M])}break;case"triangles":for(A=0,U=x.length;A<U;A+=3)g(T,k,x[A],x[A+1],x[A+2],m[A],m[A+1],m[A+2]);break;default:throw new Error("illegal figure")}}class E extends b{constructor(O){super(),this._coords=O[2],this._colors=O[3],this._figures=O[4],this._bounds=O[5],this._bbox=O[7],this._background=O[8],this.matrix=null}_createMeshCanvas(O,k,x){const M=Math.floor(this._bounds[0]),_=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-M,L=Math.ceil(this._bounds[3])-_,Q=Math.min(Math.ceil(Math.abs(B*O[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(L*O[1]*1.1)),3e3),$=B/Q,ot=L/st,pt={coords:this._coords,colors:this._colors,offsetX:-M,offsetY:-_,scaleX:1/$,scaleY:1/ot},mt=Q+2*2,X=st+2*2,yt=x.getCanvas("mesh",mt,X,!1),wt=yt.context,Rt=wt.createImageData(Q,st);if(k){const j=Rt.data;for(let h=0,f=j.length;h<f;h+=4)j[h]=k[0],j[h+1]=k[1],j[h+2]=k[2],j[h+3]=255}for(const j of this._figures)l(Rt,j,pt);return wt.putImageData(Rt,2,2),{canvas:yt.canvas,offsetX:M-2*$,offsetY:_-2*ot,scaleX:$,scaleY:ot}}getPattern(O,k,x,m){o(O,this._bbox);let A;if(m===r.SHADING)A=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(O));else if(A=n.Util.singularValueDecompose2dScale(k.baseTransform),this.matrix){const M=n.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*M[0],A[1]*M[1]]}const U=this._createMeshCanvas(A,m===r.SHADING?null:this._background,k.cachedCanvases);return m!==r.SHADING&&(O.setTransform(...k.baseTransform),this.matrix&&O.transform(...this.matrix)),O.translate(U.offsetX,U.offsetY),O.scale(U.scaleX,U.scaleY),O.createPattern(U.canvas,"no-repeat")}}class P extends b{getPattern(){return"hotpink"}}function C(T){switch(T[0]){case"RadialAxial":return new d(T);case"Mesh":return new E(T);case"Dummy":return new P}throw new Error(`Unknown IR type: ${T[0]}`)}const R={COLORED:1,UNCOLORED:2},w=class w{constructor(O,k,x,m,A){this.operatorList=O[2],this.matrix=O[3]||[1,0,0,1,0,0],this.bbox=O[4],this.xstep=O[5],this.ystep=O[6],this.paintType=O[7],this.tilingType=O[8],this.color=k,this.ctx=x,this.canvasGraphicsFactory=m,this.baseTransform=A}createPatternCanvas(O){const k=this.operatorList,x=this.bbox,m=this.xstep,A=this.ystep,U=this.paintType,M=this.tilingType,_=this.color,B=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+M);const L=x[0],Q=x[1],st=x[2],$=x[3],ot=n.Util.singularValueDecompose2dScale(this.matrix),pt=n.Util.singularValueDecompose2dScale(this.baseTransform),mt=[ot[0]*pt[0],ot[1]*pt[1]],X=this.getSizeAndScale(m,this.ctx.canvas.width,mt[0]),yt=this.getSizeAndScale(A,this.ctx.canvas.height,mt[1]),wt=O.cachedCanvases.getCanvas("pattern",X.size,yt.size,!0),Rt=wt.context,kt=B.createCanvasGraphics(Rt);kt.groupLevel=O.groupLevel,this.setFillAndStrokeStyleToContext(kt,U,_);let j=L,h=Q,f=st,u=$;return L<0&&(j=0,f+=Math.abs(L)),Q<0&&(h=0,u+=Math.abs(Q)),Rt.translate(-(X.scale*j),-(yt.scale*h)),kt.transform(X.scale,0,0,yt.scale,0,0),Rt.save(),this.clipBbox(kt,j,h,f,u),kt.baseTransform=(0,i.getCurrentTransform)(kt.ctx),kt.executeOperatorList(k),kt.endDrawing(),{canvas:wt.canvas,scaleX:X.scale,scaleY:yt.scale,offsetX:j,offsetY:h}}getSizeAndScale(O,k,x){O=Math.abs(O);const m=Math.max(w.MAX_PATTERN_SIZE,k);let A=Math.ceil(O*x);return A>=m?A=m:x=A/O,{scale:x,size:A}}clipBbox(O,k,x,m,A){const U=m-k,M=A-x;O.ctx.rect(k,x,U,M),O.current.updateRectMinMax((0,i.getCurrentTransform)(O.ctx),[k,x,m,A]),O.clip(),O.endPath()}setFillAndStrokeStyleToContext(O,k,x){const m=O.ctx,A=O.current;switch(k){case R.COLORED:const U=this.ctx;m.fillStyle=U.fillStyle,m.strokeStyle=U.strokeStyle,A.fillColor=U.fillStyle,A.strokeColor=U.strokeStyle;break;case R.UNCOLORED:const M=n.Util.makeHexColor(x[0],x[1],x[2]);m.fillStyle=M,m.strokeStyle=M,A.fillColor=M,A.strokeColor=M;break;default:throw new n.FormatError(`Unsupported paint type: ${k}`)}}getPattern(O,k,x,m){let A=x;m!==r.SHADING&&(A=n.Util.transform(A,k.baseTransform),this.matrix&&(A=n.Util.transform(A,this.matrix)));const U=this.createPatternCanvas(k);let M=new DOMMatrix(A);M=M.translate(U.offsetX,U.offsetY),M=M.scale(1/U.scaleX,1/U.scaleY);const _=O.createPattern(U.canvas,"repeat");return _.setTransform(M),_}};se(w,"MAX_PATTERN_SIZE",3e3);let F=w;e.TilingPattern=F},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=i,e.grayToRGBA=b;var n=s(1);function i(d){switch(d.kind){case n.ImageKind.GRAYSCALE_1BPP:return r(d);case n.ImageKind.RGB_24BPP:return o(d)}return null}function r({src:d,srcPos:g=0,dest:l,width:E,height:P,nonBlackColor:C=4294967295,inverseDecode:R=!1}){const F=n.FeatureTest.isLittleEndian?4278190080:255,[w,T]=R?[C,F]:[F,C],O=E>>3,k=E&7,x=d.length;l=new Uint32Array(l.buffer);let m=0;for(let A=0;A<P;A++){for(const M=g+O;g<M;g++){const _=g<x?d[g]:255;l[m++]=_&128?T:w,l[m++]=_&64?T:w,l[m++]=_&32?T:w,l[m++]=_&16?T:w,l[m++]=_&8?T:w,l[m++]=_&4?T:w,l[m++]=_&2?T:w,l[m++]=_&1?T:w}if(k===0)continue;const U=g<x?d[g++]:255;for(let M=0;M<k;M++)l[m++]=U&1<<7-M?T:w}return{srcPos:g,destPos:m}}function o({src:d,srcPos:g=0,dest:l,destPos:E=0,width:P,height:C}){let R=0;const F=d.length>>2,w=new Uint32Array(d.buffer,g,F);if(n.FeatureTest.isLittleEndian){for(;R<F-2;R+=3,E+=4){const T=w[R],O=w[R+1],k=w[R+2];l[E]=T|4278190080,l[E+1]=T>>>24|O<<8|4278190080,l[E+2]=O>>>16|k<<16|4278190080,l[E+3]=k>>>8|4278190080}for(let T=R*4,O=d.length;T<O;T+=3)l[E++]=d[T]|d[T+1]<<8|d[T+2]<<16|4278190080}else{for(;R<F-2;R+=3,E+=4){const T=w[R],O=w[R+1],k=w[R+2];l[E]=T|255,l[E+1]=T<<24|O>>>8|255,l[E+2]=O<<16|k>>>16|255,l[E+3]=k<<8|255}for(let T=R*4,O=d.length;T<O;T+=3)l[E++]=d[T]<<24|d[T+1]<<16|d[T+2]<<8|255}return{srcPos:g,destPos:E}}function b(d,g){if(n.FeatureTest.isLittleEndian)for(let l=0,E=d.length;l<E;l++)g[l]=d[l]*65793|4278190080;else for(let l=0,E=d.length;l<E;l++)g[l]=d[l]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var d,Mn,l,Fn,P,ke;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new n.AbortException(R.message);case"MissingPDFException":return new n.MissingPDFException(R.message);case"PasswordException":return new n.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new n.UnknownErrorException(R.message,R.details);default:return new n.UnknownErrorException(R.message,R.toString())}}class b{constructor(F,w,T){G(this,d);G(this,l);G(this,P);this.sourceName=F,this.targetName=w,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const k=O.data;if(k.targetName!==this.sourceName)return;if(k.stream){it(this,l,Fn).call(this,k);return}if(k.callback){const m=k.callbackId,A=this.callbackCapabilities[m];if(!A)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],k.callback===i.DATA)A.resolve(k.data);else if(k.callback===i.ERROR)A.reject(o(k.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[k.action];if(!x)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const m=this.sourceName,A=k.sourceName;new Promise(function(U){U(x(k.data))}).then(function(U){T.postMessage({sourceName:m,targetName:A,callback:i.DATA,callbackId:k.callbackId,data:U})},function(U){T.postMessage({sourceName:m,targetName:A,callback:i.ERROR,callbackId:k.callbackId,reason:o(U)})});return}if(k.streamId){it(this,d,Mn).call(this,k);return}x(k.data)},T.addEventListener("message",this._onComObjOnMessage)}on(F,w){const T=this.actionHandler;if(T[F])throw new Error(`There is already an actionName called "${F}"`);T[F]=w}send(F,w,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:F,data:w},T)}sendWithPromise(F,w,T){const O=this.callbackId++,k=new n.PromiseCapability;this.callbackCapabilities[O]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:F,callbackId:O,data:w},T)}catch(x){k.reject(x)}return k.promise}sendWithStream(F,w,T,O){const k=this.streamId++,x=this.sourceName,m=this.targetName,A=this.comObj;return new ReadableStream({start:U=>{const M=new n.PromiseCapability;return this.streamControllers[k]={controller:U,startCall:M,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:x,targetName:m,action:F,streamId:k,data:w,desiredSize:U.desiredSize},O),M.promise},pull:U=>{const M=new n.PromiseCapability;return this.streamControllers[k].pullCall=M,A.postMessage({sourceName:x,targetName:m,stream:r.PULL,streamId:k,desiredSize:U.desiredSize}),M.promise},cancel:U=>{(0,n.assert)(U instanceof Error,"cancel must have a valid reason");const M=new n.PromiseCapability;return this.streamControllers[k].cancelCall=M,this.streamControllers[k].isClosed=!0,A.postMessage({sourceName:x,targetName:m,stream:r.CANCEL,streamId:k,reason:o(U)}),M.promise}},T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}d=new WeakSet,Mn=function(F){const w=F.streamId,T=this.sourceName,O=F.sourceName,k=this.comObj,x=this,m=this.actionHandler[F.action],A={enqueue(U,M=1,_){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=M,B>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),k.postMessage({sourceName:T,targetName:O,stream:r.ENQUEUE,streamId:w,chunk:U},_)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:T,targetName:O,stream:r.CLOSE,streamId:w}),delete x.streamSinks[w])},error(U){(0,n.assert)(U instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:T,targetName:O,stream:r.ERROR,streamId:w,reason:o(U)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:F.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[w]=A,new Promise(function(U){U(m(F.data,A))}).then(function(){k.postMessage({sourceName:T,targetName:O,stream:r.START_COMPLETE,streamId:w,success:!0})},function(U){k.postMessage({sourceName:T,targetName:O,stream:r.START_COMPLETE,streamId:w,reason:o(U)})})},l=new WeakSet,Fn=function(F){const w=F.streamId,T=this.sourceName,O=F.sourceName,k=this.comObj,x=this.streamControllers[w],m=this.streamSinks[w];switch(F.stream){case r.START_COMPLETE:F.success?x.startCall.resolve():x.startCall.reject(o(F.reason));break;case r.PULL_COMPLETE:F.success?x.pullCall.resolve():x.pullCall.reject(o(F.reason));break;case r.PULL:if(!m){k.postMessage({sourceName:T,targetName:O,stream:r.PULL_COMPLETE,streamId:w,success:!0});break}m.desiredSize<=0&&F.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=F.desiredSize,new Promise(function(A){var U;A((U=m.onPull)==null?void 0:U.call(m))}).then(function(){k.postMessage({sourceName:T,targetName:O,stream:r.PULL_COMPLETE,streamId:w,success:!0})},function(A){k.postMessage({sourceName:T,targetName:O,stream:r.PULL_COMPLETE,streamId:w,reason:o(A)})});break;case r.ENQUEUE:if((0,n.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(F.chunk);break;case r.CLOSE:if((0,n.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),it(this,P,ke).call(this,x,w);break;case r.ERROR:(0,n.assert)(x,"error should have stream controller"),x.controller.error(o(F.reason)),it(this,P,ke).call(this,x,w);break;case r.CANCEL_COMPLETE:F.success?x.cancelCall.resolve():x.cancelCall.reject(o(F.reason)),it(this,P,ke).call(this,x,w);break;case r.CANCEL:if(!m)break;new Promise(function(A){var U;A((U=m.onCancel)==null?void 0:U.call(m,o(F.reason)))}).then(function(){k.postMessage({sourceName:T,targetName:O,stream:r.CANCEL_COMPLETE,streamId:w,success:!0})},function(A){k.postMessage({sourceName:T,targetName:O,stream:r.CANCEL_COMPLETE,streamId:w,reason:o(A)})}),m.sinkCapability.reject(o(F.reason)),m.isCancelled=!0,delete this.streamSinks[w];break;default:throw new Error("Unexpected stream case")}},P=new WeakSet,ke=async function(F,w){var T,O,k;await Promise.allSettled([(T=F.startCall)==null?void 0:T.promise,(O=F.pullCall)==null?void 0:O.promise,(k=F.cancelCall)==null?void 0:k.promise]),delete this.streamControllers[w]},e.MessageHandler=b},(t,e,s)=>{var r,o;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:d,rawData:g}){G(this,r,void 0);G(this,o,void 0);gt(this,r,d),gt(this,o,g)}getRaw(){return a(this,o)}get(d){return a(this,r).get(d)??null}getAll(){return(0,n.objectFromMap)(a(this,r))}has(d){return a(this,r).has(d)}}r=new WeakMap,o=new WeakMap,e.Metadata=i},(t,e,s)=>{var d,g,l,E,P,C,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),i=s(8);const r=Symbol("INTERNAL");class o{constructor(w,T){G(this,d,!0);this.name=w,this.intent=T}get visible(){return a(this,d)}_setVisible(w,T){w!==r&&(0,n.unreachable)("Internal method `_setVisible` called."),gt(this,d,T)}}d=new WeakMap;class b{constructor(w){G(this,C);G(this,g,null);G(this,l,new Map);G(this,E,null);G(this,P,null);if(this.name=null,this.creator=null,w!==null){this.name=w.name,this.creator=w.creator,gt(this,P,w.order);for(const T of w.groups)a(this,l).set(T.id,new o(T.name,T.intent));if(w.baseState==="OFF")for(const T of a(this,l).values())T._setVisible(r,!1);for(const T of w.on)a(this,l).get(T)._setVisible(r,!0);for(const T of w.off)a(this,l).get(T)._setVisible(r,!1);gt(this,E,this.getHash())}}isVisible(w){if(a(this,l).size===0)return!0;if(!w)return(0,n.warn)("Optional content group not defined."),!0;if(w.type==="OCG")return a(this,l).has(w.id)?a(this,l).get(w.id).visible:((0,n.warn)(`Optional content group not found: ${w.id}`),!0);if(w.type==="OCMD"){if(w.expression)return it(this,C,nn).call(this,w.expression);if(!w.policy||w.policy==="AnyOn"){for(const T of w.ids){if(!a(this,l).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(a(this,l).get(T).visible)return!0}return!1}else if(w.policy==="AllOn"){for(const T of w.ids){if(!a(this,l).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!a(this,l).get(T).visible)return!1}return!0}else if(w.policy==="AnyOff"){for(const T of w.ids){if(!a(this,l).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!a(this,l).get(T).visible)return!0}return!1}else if(w.policy==="AllOff"){for(const T of w.ids){if(!a(this,l).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(a(this,l).get(T).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${w.policy}.`),!0}return(0,n.warn)(`Unknown group type ${w.type}.`),!0}setVisibility(w,T=!0){if(!a(this,l).has(w)){(0,n.warn)(`Optional content group not found: ${w}`);return}a(this,l).get(w)._setVisible(r,!!T),gt(this,g,null)}get hasInitialVisibility(){return a(this,E)===null||this.getHash()===a(this,E)}getOrder(){return a(this,l).size?a(this,P)?a(this,P).slice():[...a(this,l).keys()]:null}getGroups(){return a(this,l).size>0?(0,n.objectFromMap)(a(this,l)):null}getGroup(w){return a(this,l).get(w)||null}getHash(){if(a(this,g)!==null)return a(this,g);const w=new i.MurmurHash3_64;for(const[T,O]of a(this,l))w.update(`${T}:${O.visible}`);return gt(this,g,w.hexdigest())}}g=new WeakMap,l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakSet,nn=function(w){const T=w.length;if(T<2)return!0;const O=w[0];for(let k=1;k<T;k++){const x=w[k];let m;if(Array.isArray(x))m=it(this,C,nn).call(this,x);else if(a(this,l).has(x))m=a(this,l).get(x).visible;else return(0,n.warn)(`Optional content group not found: ${x}`),!0;switch(O){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return O==="And"},e.OptionalContentConfig=b},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class r{constructor({length:g,initialData:l,progressiveDone:E=!1,contentDispositionFilename:P=null,disableRange:C=!1,disableStream:R=!1},F){if((0,n.assert)(F,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=E,this._contentDispositionFilename=P,(l==null?void 0:l.length)>0){const w=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(w)}this._pdfDataRangeTransport=F,this._isStreamingSupported=!R,this._isRangeSupported=!C,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((w,T)=>{this._onReceiveData({begin:w,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((w,T)=>{this._onProgress({loaded:w,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(w=>{this._onReceiveData({chunk:w})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:l}){const E=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(E):this._queuedChunks.push(E);else{const P=this._rangeReaders.some(function(C){return C._begin!==g?!1:(C._enqueue(E),!0)});(0,n.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var l,E,P,C;g.total===void 0?(E=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||E.call(l,{loaded:g.loaded}):(C=(P=this._fullRequestReader)==null?void 0:P.onProgress)==null||C.call(P,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const l=this._rangeReaders.indexOf(g);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new o(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,l){if(l<=this._progressiveDataLength)return null;const E=new b(this,g,l);return this._pdfDataRangeTransport.requestDataRange(g,l),this._rangeReaders.push(E),E}cancelAllRequests(g){var l;(l=this._fullRequestReader)==null||l.cancel(g);for(const E of this._rangeReaders.slice(0))E.cancel(g);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=r;class o{constructor(g,l,E=!1,P=null){this._stream=g,this._done=E||!1,this._filename=(0,i.isPdfFile)(P)?P:null,this._queuedChunks=l||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new n.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(g,l,E){this._stream=g,this._begin=l,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new n.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(20);function r(E,P,C){return{method:"GET",headers:E,signal:C.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function o(E){const P=new Headers;for(const C in E){const R=E[C];R!==void 0&&P.append(C,R)}return P}function b(E){return E instanceof Uint8Array?E.buffer:E instanceof ArrayBuffer?E:((0,n.warn)(`getArrayBuffer - unexpected data format: ${E}`),new Uint8Array(E).buffer)}class d{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(P,C){if(C<=this._progressiveDataLength)return null;const R=new l(this,P,C);return this._rangeRequestReaders.push(R),R}cancelAllRequests(P){var C;(C=this._fullRequestReader)==null||C.cancel(P);for(const R of this._rangeRequestReaders.slice(0))R.cancel(P)}}e.PDFFetchStream=d;class g{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const C=P.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new n.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=o(this._stream.httpHeaders);const R=C.url;fetch(R,r(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,i.validateResponseStatus)(F.status))throw(0,i.createResponseStatusError)(F.status,R);this._reader=F.body.getReader(),this._headersCapability.resolve();const w=k=>F.headers.get(k),{allowRangeRequests:T,suggestedLength:O}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=O||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(w),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;await this._headersCapability.promise;const{value:P,done:C}=await this._reader.read();return C?{value:P,done:C}:(this._loaded+=P.byteLength,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(P),done:!1})}cancel(P){var C;(C=this._reader)==null||C.cancel(P),this._abortController.abort()}}class l{constructor(P,C,R){this._stream=P,this._reader=null,this._loaded=0;const F=P.source;this._withCredentials=F.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!F.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${R-1}`);const w=F.url;fetch(w,r(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,w);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;await this._readCapability.promise;const{value:P,done:C}=await this._reader.read();return C?{value:P,done:C}:(this._loaded+=P.byteLength,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded}),{value:b(P),done:!1})}cancel(P){var C;(C=this._reader)==null||C.cancel(P),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=d,e.extractFilenameFromHeader=b,e.validateRangeRequestCapabilities=o,e.validateResponseStatus=g;var n=s(1),i=s(21),r=s(6);function o({getResponseHeader:l,isHttp:E,rangeChunkSize:P,disableRange:C}){const R={allowRangeRequests:!1,suggestedLength:void 0},F=parseInt(l("Content-Length"),10);return!Number.isInteger(F)||(R.suggestedLength=F,F<=2*P)||C||!E||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(R.allowRangeRequests=!0),R}function b(l){const E=l("Content-Disposition");if(E){let P=(0,i.getFilenameFromContentDispositionHeader)(E);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,r.isPdfFile)(P))return P}return null}function d(l,E){return l===404||l===0&&E.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+E+'".'):new n.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${E}".`,l)}function g(l){return l===200||l===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(r){let o=!0,b=d("filename\\*","i").exec(r);if(b){b=b[1];let F=P(b);return F=unescape(F),F=C(F),F=R(F),l(F)}if(b=E(r),b){const F=R(b);return l(F)}if(b=d("filename","i").exec(r),b){b=b[1];let F=P(b);return F=R(F),l(F)}function d(F,w){return new RegExp("(?:^|;)\\s*"+F+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function g(F,w){if(F){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const T=new TextDecoder(F,{fatal:!0}),O=(0,n.stringToBytes)(w);w=T.decode(O),o=!1}catch{}}return w}function l(F){return o&&/[\x80-\xff]/.test(F)&&(F=g("utf-8",F),o&&(F=g("iso-8859-1",F))),F}function E(F){const w=[];let T;const O=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=O.exec(F))!==null;){let[,x,m,A]=T;if(x=parseInt(x,10),x in w){if(x===0)break;continue}w[x]=[m,A]}const k=[];for(let x=0;x<w.length&&x in w;++x){let[m,A]=w[x];A=P(A),m&&(A=unescape(A),x===0&&(A=C(A))),k.push(A)}return k.join("")}function P(F){if(F.startsWith('"')){const w=F.slice(1).split('\\"');for(let T=0;T<w.length;++T){const O=w[T].indexOf('"');O!==-1&&(w[T]=w[T].slice(0,O),w.length=T+1),w[T]=w[T].replaceAll(/\\(.)/g,"$1")}F=w.join('"')}return F}function C(F){const w=F.indexOf("'");if(w===-1)return F;const T=F.slice(0,w),k=F.slice(w+1).replace(/^[^']*'/,"");return g(T,k)}function R(F){return!F.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(F)?F:F.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,T,O,k){if(O==="q"||O==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,m){return String.fromCharCode(parseInt(m,16))}),g(T,k);try{k=atob(k)}catch{}return g(T,k)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(20);const r=200,o=206;function b(P){const C=P.response;return typeof C!="string"?C:(0,n.stringToBytes)(C).buffer}class d{constructor(C,R={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&R.httpHeaders||Object.create(null),this.withCredentials=R.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,R,F){const w={begin:C,end:R};for(const T in F)w[T]=F[T];return this.request(w)}requestFull(C){return this.request(C)}request(C){const R=new XMLHttpRequest,F=this.currXhrId++,w=this.pendingRequests[F]={xhr:R};R.open("GET",this.url),R.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const O=this.httpHeaders[T];O!==void 0&&R.setRequestHeader(T,O)}return this.isHttp&&"begin"in C&&"end"in C?(R.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),w.expectedStatus=o):w.expectedStatus=r,R.responseType="arraybuffer",C.onError&&(R.onerror=function(T){C.onError(R.status)}),R.onreadystatechange=this.onStateChange.bind(this,F),R.onprogress=this.onProgress.bind(this,F),w.onHeadersReceived=C.onHeadersReceived,w.onDone=C.onDone,w.onError=C.onError,w.onProgress=C.onProgress,R.send(null),F}onProgress(C,R){var w;const F=this.pendingRequests[C];F&&((w=F.onProgress)==null||w.call(F,R))}onStateChange(C,R){var x,m,A;const F=this.pendingRequests[C];if(!F)return;const w=F.xhr;if(w.readyState>=2&&F.onHeadersReceived&&(F.onHeadersReceived(),delete F.onHeadersReceived),w.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],w.status===0&&this.isHttp){(x=F.onError)==null||x.call(F,w.status);return}const T=w.status||r;if(!(T===r&&F.expectedStatus===o)&&T!==F.expectedStatus){(m=F.onError)==null||m.call(F,w.status);return}const k=b(w);if(T===o){const U=w.getResponseHeader("Content-Range"),M=/bytes (\d+)-(\d+)\/(\d+)/.exec(U);F.onDone({begin:parseInt(M[1],10),chunk:k})}else k?F.onDone({begin:0,chunk:k}):(A=F.onError)==null||A.call(F,w.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const R=this.pendingRequests[C].xhr;delete this.pendingRequests[C],R.abort()}}class g{constructor(C){this._source=C,this._manager=new d(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const R=this._rangeRequestReaders.indexOf(C);R>=0&&this._rangeRequestReaders.splice(R,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(C,R){const F=new E(this._manager,C,R);return F.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(F),F}cancelAllRequests(C){var R;(R=this._fullRequestReader)==null||R.cancel(C);for(const F of this._rangeRequestReaders.slice(0))F.cancel(C)}}e.PDFNetworkStream=g;class l{constructor(C,R){this._manager=C;const F={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._fullRequestId=C.requestFull(F),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=R.disableRange||!1,this._contentLength=R.length,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,R=this._manager.getRequestXhr(C),F=O=>R.getResponseHeader(O),{allowRangeRequests:w,suggestedLength:T}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:F,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});w&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(F),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,i.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var R;(R=this.onProgress)==null||R.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new n.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(C,R,F){this._manager=C;const w={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(R,F,w),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const R=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:R,done:!1}):this._queuedChunk=R,this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,i.createResponseStatusError)(C,this._url);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var R;this.isStreamingSupported||(R=this.onProgress)==null||R.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const R=this._queuedChunk;return this._queuedChunk=null,{value:R,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new n.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function o(F){const w=require$$5,T=w.parse(F);return T.protocol==="file:"||T.host?T:/^[a-z]:[/\\]/i.test(F)?w.parse(`file:///${F}`):(T.host||(T.protocol="file:"),T)}class b{constructor(w){this.source=w,this.url=o(w.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new E(this),this._fullRequestReader}getRangeReader(w,T){if(T<=this._progressiveDataLength)return null;const O=this.isFsUrl?new R(this,w,T):new P(this,w,T);return this._rangeRequestReaders.push(O),O}cancelAllRequests(w){var T;(T=this._fullRequestReader)==null||T.cancel(w);for(const O of this._rangeRequestReaders.slice(0))O.cancel(w)}}e.PDFNodeStream=b;class d{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null;const T=w.source;this._contentLength=T.length,this._loaded=0,this._filename=null,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=w.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",T=>{this._error(T)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(w){this._url=w.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const T=w.source;this._isStreamingSupported=!T.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const w=this._readableStream.read();return w===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=w.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){if(!this._readableStream){this._error(w);return}this._readableStream.destroy(w)}_error(w){this._storedError=w,this._readCapability.resolve()}_setReadableStream(w){this._readableStream=w,w.on("readable",()=>{this._readCapability.resolve()}),w.on("end",()=>{w.destroy(),this._done=!0,this._readCapability.resolve()}),w.on("error",T=>{this._error(T)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(F,w){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:w}}class E extends d{constructor(w){super(w);const T=O=>{if(O.statusCode===404){const A=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(O);const k=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:x,suggestedLength:m}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:w.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=m||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(k)};if(this._request=null,this._url.protocol==="http:"){const O=require$$5;this._request=O.request(l(this._url,w.httpHeaders),T)}else{const O=require$$5;this._request=O.request(l(this._url,w.httpHeaders),T)}this._request.on("error",O=>{this._storedError=O,this._headersCapability.reject(O)}),this._request.end()}}class P extends g{constructor(w,T,O){super(w),this._httpHeaders={};for(const x in w.httpHeaders){const m=w.httpHeaders[x];m!==void 0&&(this._httpHeaders[x]=m)}this._httpHeaders.Range=`bytes=${T}-${O-1}`;const k=x=>{if(x.statusCode===404){const m=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),k)}else{const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),k)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class C extends d{constructor(w){super(w);let T=decodeURIComponent(this._url.path);r.test(this._url.href)&&(T=T.replace(/^\//,""));const O=require$$5;O.lstat(T,(k,x)=>{if(k){k.code==="ENOENT"&&(k=new n.MissingPDFException(`Missing PDF "${T}".`)),this._storedError=k,this._headersCapability.reject(k);return}this._contentLength=x.size,this._setReadableStream(O.createReadStream(T)),this._headersCapability.resolve()})}}class R extends g{constructor(w,T,O){super(w);let k=decodeURIComponent(this._url.path);r.test(this._url.href)&&(k=k.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(k,{start:T,end:O-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),i=s(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",d=["butt","round","square"],g=["miter","round","bevel"],l=function(x,m="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([x],{type:m}));const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M=`data:${m};base64,`;for(let _=0,B=x.length;_<B;_+=3){const L=x[_]&255,Q=x[_+1]&255,st=x[_+2]&255,$=L>>2,ot=(L&3)<<4|Q>>4,pt=_+1<B?(Q&15)<<2|st>>6:64,mt=_+2<B?st&63:64;M+=U[$]+U[ot]+U[pt]+U[mt]}return M},E=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),m=12,A=new Int32Array(256);for(let st=0;st<256;st++){let $=st;for(let ot=0;ot<8;ot++)$=$&1?3988292384^$>>1&2147483647:$>>1&2147483647;A[st]=$}function U(st,$,ot){let pt=-1;for(let mt=$;mt<ot;mt++){const X=(pt^st[mt])&255,yt=A[X];pt=pt>>>8^yt}return pt^-1}function M(st,$,ot,pt){let mt=pt;const X=$.length;ot[mt]=X>>24&255,ot[mt+1]=X>>16&255,ot[mt+2]=X>>8&255,ot[mt+3]=X&255,mt+=4,ot[mt]=st.charCodeAt(0)&255,ot[mt+1]=st.charCodeAt(1)&255,ot[mt+2]=st.charCodeAt(2)&255,ot[mt+3]=st.charCodeAt(3)&255,mt+=4,ot.set($,mt),mt+=$.length;const yt=U(ot,pt+4,mt);ot[mt]=yt>>24&255,ot[mt+1]=yt>>16&255,ot[mt+2]=yt>>8&255,ot[mt+3]=yt&255}function _(st,$,ot){let pt=1,mt=0;for(let X=$;X<ot;++X)pt=(pt+(st[X]&255))%65521,mt=(mt+pt)%65521;return mt<<16|pt}function B(st){if(!i.isNodeJS)return L(st);try{const $=parseInt(process.versions.node)>=8?st:Buffer.from(st),ot=require$$5.deflateSync($,{level:9});return ot instanceof Uint8Array?ot:new Uint8Array(ot)}catch($){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+$)}return L(st)}function L(st){let $=st.length;const ot=65535,pt=Math.ceil($/ot),mt=new Uint8Array(2+$+pt*5+4);let X=0;mt[X++]=120,mt[X++]=156;let yt=0;for(;$>ot;)mt[X++]=0,mt[X++]=255,mt[X++]=255,mt[X++]=0,mt[X++]=0,mt.set(st.subarray(yt,yt+ot),X),X+=ot,yt+=ot,$-=ot;mt[X++]=1,mt[X++]=$&255,mt[X++]=$>>8&255,mt[X++]=~$&65535&255,mt[X++]=(~$&65535)>>8&255,mt.set(st.subarray(yt),X),X+=st.length-yt;const wt=_(st,0,st.length);return mt[X++]=wt>>24&255,mt[X++]=wt>>16&255,mt[X++]=wt>>8&255,mt[X++]=wt&255,mt}function Q(st,$,ot,pt){const mt=st.width,X=st.height;let yt,wt,Rt;const kt=st.data;switch($){case i.ImageKind.GRAYSCALE_1BPP:wt=0,yt=1,Rt=mt+7>>3;break;case i.ImageKind.RGB_24BPP:wt=2,yt=8,Rt=mt*3;break;case i.ImageKind.RGBA_32BPP:wt=6,yt=8,Rt=mt*4;break;default:throw new Error("invalid format")}const j=new Uint8Array((1+Rt)*X);let h=0,f=0;for(let Y=0;Y<X;++Y)j[h++]=0,j.set(kt.subarray(f,f+Rt),h),f+=Rt,h+=Rt;if($===i.ImageKind.GRAYSCALE_1BPP&&pt){h=0;for(let Y=0;Y<X;Y++){h++;for(let dt=0;dt<Rt;dt++)j[h++]^=255}}const u=new Uint8Array([mt>>24&255,mt>>16&255,mt>>8&255,mt&255,X>>24&255,X>>16&255,X>>8&255,X&255,yt,wt,0,0,0]),y=B(j),S=x.length+m*3+u.length+y.length,N=new Uint8Array(S);let H=0;return N.set(x,H),H+=x.length,M("IHDR",u,N,H),H+=m+u.length,M("IDATA",y,N,H),H+=m+y.length,M("IEND",new Uint8Array(0),N,H),l(N,"image/png",ot)}return function($,ot,pt){const mt=$.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:$.kind;return Q($,mt,ot,pt)}}();class P{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(m,A){this.x=m,this.y=A}}function C(x){let m=[];const A=[];for(const U of x){if(U.fn==="save"){m.push({fnId:92,fn:"group",items:[]}),A.push(m),m=m.at(-1).items;continue}U.fn==="restore"?m=A.pop():m.push(U)}return m}function R(x){if(Number.isInteger(x))return x.toString();const m=x.toFixed(10);let A=m.length-1;if(m[A]!=="0")return m;do A--;while(m[A]==="0");return m.substring(0,m[A]==="."?A:A+1)}function F(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${R(x[0])} ${R(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const m=Math.acos(x[0])*180/Math.PI;return`rotate(${R(m)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${R(x[4])} ${R(x[5])})`;return`matrix(${R(x[0])} ${R(x[1])} ${R(x[2])} ${R(x[3])} ${R(x[4])} ${R(x[5])})`}let w=0,T=0,O=0;class k{constructor(m,A,U=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new P,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=m,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!U,this._operatorIdMapping=[];for(const M in i.OPS)this._operatorIdMapping[i.OPS[M]]=M}getObject(m,A=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):A}save(){this.transformStack.push(this.transformMatrix);const m=this.current;this.extraStack.push(m),this.current=m.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(m){this.save(),this.executeOpTree(m),this.restore()}loadDependencies(m){const A=m.fnArray,U=m.argsArray;for(let M=0,_=A.length;M<_;M++)if(A[M]===i.OPS.dependency)for(const B of U[M]){const L=B.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(st=>{L.get(B,st)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(m,A,U,M,_,B){const L=[m,A,U,M,_,B];this.transformMatrix=i.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(m,A){this.viewport=A;const U=this._initialize(A);return this.loadDependencies(m).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(m)),U))}convertOpList(m){const A=this._operatorIdMapping,U=m.argsArray,M=m.fnArray,_=[];for(let B=0,L=M.length;B<L;B++){const Q=M[B];_.push({fnId:Q,fn:A[Q],args:U[B]})}return C(_)}executeOpTree(m){for(const A of m){const U=A.fn,M=A.fnId,_=A.args;switch(M|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(_);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(_[0],_[1]);break;case i.OPS.setFont:this.setFont(_);break;case i.OPS.showText:this.showText(_[0]);break;case i.OPS.showSpacedText:this.showText(_[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(_[0],_[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(_[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(_[0]);break;case i.OPS.setHScale:this.setHScale(_[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(_[0],_[1],_[2],_[3],_[4],_[5]);break;case i.OPS.setTextRise:this.setTextRise(_[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(_[0]);break;case i.OPS.setLineWidth:this.setLineWidth(_[0]);break;case i.OPS.setLineJoin:this.setLineJoin(_[0]);break;case i.OPS.setLineCap:this.setLineCap(_[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(_[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(_[0],_[1],_[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(_[0],_[1],_[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(_);break;case i.OPS.setFillColorN:this.setFillColorN(_);break;case i.OPS.shadingFill:this.shadingFill(_[0]);break;case i.OPS.setDash:this.setDash(_[0],_[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(_[0]);break;case i.OPS.setFlatness:this.setFlatness(_[0]);break;case i.OPS.setGState:this.setGState(_[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(_[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(_[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(_[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(_[0],_[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(_[0],_[1],_[2],_[3],_[4],_[5]);break;case i.OPS.constructPath:this.constructPath(_[0],_[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,i.warn)(`Unimplemented operator ${U}`);break}}}setWordSpacing(m){this.current.wordSpacing=m}setCharSpacing(m){this.current.charSpacing=m}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(m,A,U,M,_,B){const L=this.current;L.textMatrix=L.lineMatrix=[m,A,U,M,_,B],L.textMatrixScale=Math.hypot(m,A),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${R(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",R(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const m=this.current;m.x=m.lineX=0,m.y=m.lineY=0,m.textMatrix=i.IDENTITY_MATRIX,m.lineMatrix=i.IDENTITY_MATRIX,m.textMatrixScale=1,m.tspan=this.svgFactory.createElement("svg:tspan"),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtgrp=this.svgFactory.createElement("svg:g"),m.xcoords=[],m.ycoords=[]}moveText(m,A){const U=this.current;U.x=U.lineX+=m,U.y=U.lineY+=A,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${R(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",R(-U.y))}showText(m){const A=this.current,U=A.font,M=A.fontSize;if(M===0)return;const _=A.fontSizeScale,B=A.charSpacing,L=A.wordSpacing,Q=A.fontDirection,st=A.textHScale*Q,$=U.vertical,ot=$?1:-1,pt=U.defaultVMetrics,mt=M*A.fontMatrix[0];let X=0;for(const Rt of m){if(Rt===null){X+=Q*L;continue}else if(typeof Rt=="number"){X+=ot*Rt*M/1e3;continue}const kt=(Rt.isSpace?L:0)+B,j=Rt.fontChar;let h,f,u=Rt.width;if($){let S;const N=Rt.vmetric||pt;S=Rt.vmetric?N[1]:u*.5,S=-S*mt;const H=N[2]*mt;u=N?-N[0]:u,h=S/_,f=(X+H)/_}else h=X/_,f=0;(Rt.isInFont||U.missingFile)&&(A.xcoords.push(A.x+h),$&&A.ycoords.push(-A.y+f),A.tspan.textContent+=j);const y=$?u*mt-kt*Q:u*mt+kt*Q;X+=y}A.tspan.setAttributeNS(null,"x",A.xcoords.map(R).join(" ")),$?A.tspan.setAttributeNS(null,"y",A.ycoords.map(R).join(" ")):A.tspan.setAttributeNS(null,"y",R(-A.y)),$?A.y-=X:A.x+=X*st,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${R(A.fontSize)}px`),A.fontStyle!==r.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==r.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const yt=A.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(yt===i.TextRenderingMode.FILL||yt===i.TextRenderingMode.FILL_STROKE?(A.fillColor!==r.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),yt===i.TextRenderingMode.STROKE||yt===i.TextRenderingMode.FILL_STROKE){const Rt=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,Rt)}let wt=A.textMatrix;A.textRise!==0&&(wt=wt.slice(),wt[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${F(wt)} scale(${R(st)}, -1)`),A.txtElement.setAttributeNS(o,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(m,A){this.setLeading(-A),this.moveText(m,A)}addFontStyle(m){if(!m.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=l(m.data,m.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${m.loadedName}"; src: url(${A}); }
`}setFont(m){const A=this.current,U=this.commonObjs.get(m[0]);let M=m[1];A.font=U,this.embedFonts&&!U.missingFile&&!this.embeddedFonts[U.loadedName]&&(this.addFontStyle(U),this.embeddedFonts[U.loadedName]=U),A.fontMatrix=U.fontMatrix||i.FONT_IDENTITY_MATRIX;let _="normal";U.black?_="900":U.bold&&(_="bold");const B=U.italic?"italic":"normal";M<0?(M=-M,A.fontDirection=-1):A.fontDirection=1,A.fontSize=M,A.fontFamily=U.loadedName,A.fontWeight=_,A.fontStyle=B,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",R(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const m=this.current;m.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=m.txtElement)!=null&&A.hasChildNodes())&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(m){m>0&&(this.current.lineWidth=m)}setLineCap(m){this.current.lineCap=d[m]}setLineJoin(m){this.current.lineJoin=g[m]}setMiterLimit(m){this.current.miterLimit=m}setStrokeAlpha(m){this.current.strokeAlpha=m}setStrokeRGBColor(m,A,U){this.current.strokeColor=i.Util.makeHexColor(m,A,U)}setFillAlpha(m){this.current.fillAlpha=m}setFillRGBColor(m,A,U){this.current.fillColor=i.Util.makeHexColor(m,A,U),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(m){this.current.strokeColor=this._makeColorN_Pattern(m)}setFillColorN(m){this.current.fillColor=this._makeColorN_Pattern(m)}shadingFill(m){const{width:A,height:U}=this.viewport,M=i.Util.inverseTransform(this.transformMatrix),[_,B,L,Q]=i.Util.getAxialAlignedBoundingBox([0,0,A,U],M),st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x",_),st.setAttributeNS(null,"y",B),st.setAttributeNS(null,"width",L-_),st.setAttributeNS(null,"height",Q-B),st.setAttributeNS(null,"fill",this._makeShadingPattern(m)),this.current.fillAlpha<1&&st.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(st)}_makeColorN_Pattern(m){return m[0]==="TilingPattern"?this._makeTilingPattern(m):this._makeShadingPattern(m)}_makeTilingPattern(m){const A=m[1],U=m[2],M=m[3]||i.IDENTITY_MATRIX,[_,B,L,Q]=m[4],st=m[5],$=m[6],ot=m[7],pt=`shading${O++}`,[mt,X,yt,wt]=i.Util.normalizeRect([...i.Util.applyTransform([_,B],M),...i.Util.applyTransform([L,Q],M)]),[Rt,kt]=i.Util.singularValueDecompose2dScale(M),j=st*Rt,h=$*kt,f=this.svgFactory.createElement("svg:pattern");f.setAttributeNS(null,"id",pt),f.setAttributeNS(null,"patternUnits","userSpaceOnUse"),f.setAttributeNS(null,"width",j),f.setAttributeNS(null,"height",h),f.setAttributeNS(null,"x",`${mt}`),f.setAttributeNS(null,"y",`${X}`);const u=this.svg,y=this.transformMatrix,S=this.current.fillColor,N=this.current.strokeColor,H=this.svgFactory.create(yt-mt,wt-X);if(this.svg=H,this.transformMatrix=M,ot===2){const Y=i.Util.makeHexColor(...A);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(U)),this.svg=u,this.transformMatrix=y,this.current.fillColor=S,this.current.strokeColor=N,f.append(H.childNodes[0]),this.defs.append(f),`url(#${pt})`}_makeShadingPattern(m){switch(typeof m=="string"&&(m=this.objs.get(m)),m[0]){case"RadialAxial":const A=`shading${O++}`,U=m[3];let M;switch(m[1]){case"axial":const _=m[4],B=m[5];M=this.svgFactory.createElement("svg:linearGradient"),M.setAttributeNS(null,"id",A),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"x1",_[0]),M.setAttributeNS(null,"y1",_[1]),M.setAttributeNS(null,"x2",B[0]),M.setAttributeNS(null,"y2",B[1]);break;case"radial":const L=m[4],Q=m[5],st=m[6],$=m[7];M=this.svgFactory.createElement("svg:radialGradient"),M.setAttributeNS(null,"id",A),M.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),M.setAttributeNS(null,"cx",Q[0]),M.setAttributeNS(null,"cy",Q[1]),M.setAttributeNS(null,"r",$),M.setAttributeNS(null,"fx",L[0]),M.setAttributeNS(null,"fy",L[1]),M.setAttributeNS(null,"fr",st);break;default:throw new Error(`Unknown RadialAxial type: ${m[1]}`)}for(const _ of U){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",_[0]),B.setAttributeNS(null,"stop-color",_[1]),M.append(B)}return this.defs.append(M),`url(#${A})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${m[0]}`)}}setDash(m,A){this.current.dashArray=m,this.current.dashPhase=A}constructPath(m,A){const U=this.current;let M=U.x,_=U.y,B=[],L=0;for(const Q of m)switch(Q|0){case i.OPS.rectangle:M=A[L++],_=A[L++];const st=A[L++],$=A[L++],ot=M+st,pt=_+$;B.push("M",R(M),R(_),"L",R(ot),R(_),"L",R(ot),R(pt),"L",R(M),R(pt),"Z");break;case i.OPS.moveTo:M=A[L++],_=A[L++],B.push("M",R(M),R(_));break;case i.OPS.lineTo:M=A[L++],_=A[L++],B.push("L",R(M),R(_));break;case i.OPS.curveTo:M=A[L+4],_=A[L+5],B.push("C",R(A[L]),R(A[L+1]),R(A[L+2]),R(A[L+3]),R(M),R(_)),L+=6;break;case i.OPS.curveTo2:B.push("C",R(M),R(_),R(A[L]),R(A[L+1]),R(A[L+2]),R(A[L+3])),M=A[L+2],_=A[L+3],L+=4;break;case i.OPS.curveTo3:M=A[L+2],_=A[L+3],B.push("C",R(A[L]),R(A[L+1]),R(M),R(_),R(M),R(_)),L+=4;break;case i.OPS.closePath:B.push("Z");break}B=B.join(" "),U.path&&m.length>0&&m[0]!==i.OPS.rectangle&&m[0]!==i.OPS.moveTo?B=U.path.getAttributeNS(null,"d")+B:(U.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(U.path)),U.path.setAttributeNS(null,"d",B),U.path.setAttributeNS(null,"fill","none"),U.element=U.path,U.setCurrentPoint(M,_)}endPath(){const m=this.current;if(m.path=null,!this.pendingClip)return;if(!m.element){this.pendingClip=null;return}const A=`clippath${w++}`,U=this.svgFactory.createElement("svg:clipPath");U.setAttributeNS(null,"id",A),U.setAttributeNS(null,"transform",F(this.transformMatrix));const M=m.element.cloneNode(!0);if(this.pendingClip==="evenodd"?M.setAttributeNS(null,"clip-rule","evenodd"):M.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,U.append(M),this.defs.append(U),m.activeClipUrl){m.clipGroup=null;for(const _ of this.extraStack)_.clipGroup=null;U.setAttributeNS(null,"clip-path",m.activeClipUrl)}m.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(m){this.pendingClip=m}closePath(){const m=this.current;if(m.path){const A=`${m.path.getAttributeNS(null,"d")}Z`;m.path.setAttributeNS(null,"d",A)}}setLeading(m){this.current.leading=-m}setTextRise(m){this.current.textRise=m}setTextRenderingMode(m){this.current.textRenderingMode=m}setHScale(m){this.current.textHScale=m/100}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[A,U]of m)switch(A){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U);break;case"CA":this.setStrokeAlpha(U);break;case"ca":this.setFillAlpha(U);break;default:(0,i.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const m=this.current;m.element&&(m.element.setAttributeNS(null,"fill",m.fillColor),m.element.setAttributeNS(null,"fill-opacity",m.fillAlpha),this.endPath())}stroke(){const m=this.current;m.element&&(this._setStrokeAttributes(m.element),m.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(m,A=1){const U=this.current;let M=U.dashArray;A!==1&&M.length>0&&(M=M.map(function(_){return A*_})),m.setAttributeNS(null,"stroke",U.strokeColor),m.setAttributeNS(null,"stroke-opacity",U.strokeAlpha),m.setAttributeNS(null,"stroke-miterlimit",R(U.miterLimit)),m.setAttributeNS(null,"stroke-linecap",U.lineCap),m.setAttributeNS(null,"stroke-linejoin",U.lineJoin),m.setAttributeNS(null,"stroke-width",R(A*U.lineWidth)+"px"),m.setAttributeNS(null,"stroke-dasharray",M.map(R).join(" ")),m.setAttributeNS(null,"stroke-dashoffset",R(A*U.dashPhase)+"px")}eoFill(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(m)}paintImageXObject(m){const A=this.getObject(m);if(!A){(0,i.warn)(`Dependent image with object ID ${m} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(m,A){const U=m.width,M=m.height,_=E(m,this.forceDataSchema,!!A),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",R(U)),B.setAttributeNS(null,"height",R(M)),this.current.element=B,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(b,"xlink:href",_),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",R(-M)),L.setAttributeNS(null,"width",R(U)+"px"),L.setAttributeNS(null,"height",R(M)+"px"),L.setAttributeNS(null,"transform",`scale(${R(1/U)} ${R(-1/M)})`),A?A.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(m){const A=this.getObject(m.data,m);if(A.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const U=this.current,M=A.width,_=A.height,B=U.fillColor;U.maskId=`mask${T++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",U.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",R(M)),Q.setAttributeNS(null,"height",R(_)),Q.setAttributeNS(null,"fill",B),Q.setAttributeNS(null,"mask",`url(#${U.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(A,L)}paintFormXObjectBegin(m,A){if(Array.isArray(m)&&m.length===6&&this.transform(m[0],m[1],m[2],m[3],m[4],m[5]),A){const U=A[2]-A[0],M=A[3]-A[1],_=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x",A[0]),_.setAttributeNS(null,"y",A[1]),_.setAttributeNS(null,"width",R(U)),_.setAttributeNS(null,"height",R(M)),this.current.element=_,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(m){const A=this.svgFactory.create(m.width,m.height),U=this.svgFactory.createElement("svg:defs");A.append(U),this.defs=U;const M=this.svgFactory.createElement("svg:g");return M.setAttributeNS(null,"transform",F(m.transform)),A.append(M),this.svg=M,A}_ensureClipGroup(){if(!this.current.clipGroup){const m=this.svgFactory.createElement("svg:g");m.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(m),this.current.clipGroup=m}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",F(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=k},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const r=[],o={items:r,styles:Object.create(null)};function b(d){var E;if(!d)return;let g=null;const l=d.name;if(l==="#text")g=d.value;else if(s.shouldBuildText(l))(E=d==null?void 0:d.attributes)!=null&&E.textContent?g=d.attributes.textContent:d.value&&(g=d.value);else return;if(g!==null&&r.push({str:g}),!!d.children)for(const P of d.children)b(P)}return b(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=F,e.updateTextLayer=w;var n=s(1),i=s(6);const r=1e5,o=30,b=.8,d=new Map;function g(T,O){let k;if(O&&n.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=T,k=x.getContext("2d",{alpha:!1})}return k}function l(T,O){const k=d.get(T);if(k)return k;const x=g(o,O);x.font=`${o}px ${T}`;const m=x.measureText("");let A=m.fontBoundingBoxAscent,U=Math.abs(m.fontBoundingBoxDescent);if(A){const _=A/(A+U);return d.set(T,_),x.canvas.width=x.canvas.height=0,_}x.strokeStyle="red",x.clearRect(0,0,o,o),x.strokeText("g",0,0);let M=x.getImageData(0,0,o,o).data;U=0;for(let _=M.length-1-3;_>=0;_-=4)if(M[_]>0){U=Math.ceil(_/4/o);break}x.clearRect(0,0,o,o),x.strokeText("A",0,o),M=x.getImageData(0,0,o,o).data,A=0;for(let _=0,B=M.length;_<B;_+=4)if(M[_]>0){A=o-Math.floor(_/4/o);break}if(x.canvas.width=x.canvas.height=0,A){const _=A/(A+U);return d.set(T,_),_}return d.set(T,b),b}function E(T,O,k){const x=document.createElement("span"),m={angle:0,canvasWidth:0,hasText:O.str!=="",hasEOL:O.hasEOL,fontSize:0};T._textDivs.push(x);const A=n.Util.transform(T._transform,O.transform);let U=Math.atan2(A[1],A[0]);const M=k[O.fontName];M.vertical&&(U+=Math.PI/2);const _=Math.hypot(A[2],A[3]),B=_*l(M.fontFamily,T._isOffscreenCanvasSupported);let L,Q;U===0?(L=A[4],Q=A[5]-B):(L=A[4]+B*Math.sin(U),Q=A[5]-B*Math.cos(U));const st="calc(var(--scale-factor)*",$=x.style;T._container===T._rootContainer?($.left=`${(100*L/T._pageWidth).toFixed(2)}%`,$.top=`${(100*Q/T._pageHeight).toFixed(2)}%`):($.left=`${st}${L.toFixed(2)}px)`,$.top=`${st}${Q.toFixed(2)}px)`),$.fontSize=`${st}${_.toFixed(2)}px)`,$.fontFamily=M.fontFamily,m.fontSize=_,x.setAttribute("role","presentation"),x.textContent=O.str,x.dir=O.dir,T._fontInspectorEnabled&&(x.dataset.fontName=O.fontName),U!==0&&(m.angle=U*(180/Math.PI));let ot=!1;if(O.str.length>1)ot=!0;else if(O.str!==" "&&O.transform[0]!==O.transform[3]){const pt=Math.abs(O.transform[0]),mt=Math.abs(O.transform[3]);pt!==mt&&Math.max(pt,mt)/Math.min(pt,mt)>1.5&&(ot=!0)}ot&&(m.canvasWidth=M.vertical?O.height:O.width),T._textDivProperties.set(x,m),T._isReadableStream&&T._layoutText(x)}function P(T){const{div:O,scale:k,properties:x,ctx:m,prevFontSize:A,prevFontFamily:U}=T,{style:M}=O;let _="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:B}=M,{canvasWidth:L,fontSize:Q}=x;(A!==Q||U!==B)&&(m.font=`${Q*k}px ${B}`,T.prevFontSize=Q,T.prevFontFamily=B);const{width:st}=m.measureText(O.textContent);st>0&&(_=`scaleX(${L*k/st})`)}x.angle!==0&&(_=`rotate(${x.angle}deg) ${_}`),_.length>0&&(M.transform=_)}function C(T){if(T._canceled)return;const O=T._textDivs,k=T._capability;if(O.length>r){k.resolve();return}if(!T._isReadableStream)for(const m of O)T._layoutText(m);k.resolve()}class R{constructor({textContentSource:O,container:k,viewport:x,textDivs:m,textDivProperties:A,textContentItemsStr:U,isOffscreenCanvasSupported:M}){var st;this._textContentSource=O,this._isReadableStream=O instanceof ReadableStream,this._container=this._rootContainer=k,this._textDivs=m||[],this._textContentItemsStr=U||[],this._isOffscreenCanvasSupported=M,this._fontInspectorEnabled=!!((st=globalThis.FontInspector)!=null&&st.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,M)};const{pageWidth:_,pageHeight:B,pageX:L,pageY:Q}=x.rawDims;this._transform=[1,0,0,-1,-L,Q+B],this._pageWidth=_,this._pageHeight=B,(0,i.setLayerDimensions)(k,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(O,k){for(const x of O){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),m.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),E(this,x,k)}}_layoutText(O){const k=this._layoutTextParams.properties=this._textDivProperties.get(O);if(this._layoutTextParams.div=O,P(this._layoutTextParams),k.hasText&&this._container.append(O),k.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const O=new n.PromiseCapability;let k=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:m,done:A})=>{if(A){O.resolve();return}Object.assign(k,m.styles),this._processItems(m.items,k),x()},O.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:m}=this._textContentSource;this._processItems(x,m),O.resolve()}else throw new Error('No "textContentSource" parameter specified.');O.promise.then(()=>{k=null,C(this)},this._capability.reject)}}e.TextLayerRenderTask=R;function F(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:O,viewport:k}=T,x=getComputedStyle(O),m=x.getPropertyValue("visibility"),A=parseFloat(x.getPropertyValue("--scale-factor"));m==="visible"&&(!A||Math.abs(A-k.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const U=new R(T);return U._render(),U}function w({container:T,viewport:O,textDivs:k,textDivProperties:x,isOffscreenCanvasSupported:m,mustRotate:A=!0,mustRescale:U=!0}){if(A&&(0,i.setLayerDimensions)(T,{rotation:O.rotation}),U){const M=g(0,m),B={prevFontSize:null,prevFontFamily:null,div:null,scale:O.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:M};for(const L of k)B.properties=x.get(L),B.div=L,P(B)}}},(t,e,s)=>{var l,E,P,C,R,F,w,T,O,k,x,sn,A,Me,M,rn,B,an;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),r=s(28),o=s(33),b=s(6),d=s(34);const Q=class Q{constructor({uiManager:$,pageIndex:ot,div:pt,accessibilityManager:mt,annotationLayer:X,viewport:yt,l10n:wt}){G(this,x);G(this,A);G(this,M);G(this,B);G(this,l,void 0);G(this,E,!1);G(this,P,null);G(this,C,this.pointerup.bind(this));G(this,R,this.pointerdown.bind(this));G(this,F,new Map);G(this,w,!1);G(this,T,!1);G(this,O,!1);G(this,k,void 0);const Rt=[r.FreeTextEditor,o.InkEditor,d.StampEditor];if(!Q._initialized){Q._initialized=!0;for(const kt of Rt)kt.initialize(wt)}$.registerEditorTypes(Rt),gt(this,k,$),this.pageIndex=ot,this.div=pt,gt(this,l,mt),gt(this,P,X),this.viewport=yt,a(this,k).addLayer(this)}get isEmpty(){return a(this,F).size===0}updateToolbar($){a(this,k).updateToolbar($)}updateMode($=a(this,k).getMode()){it(this,B,an).call(this),$===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),$!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",$===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",$===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",$===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded($){if(!$&&a(this,k).getMode()!==n.AnnotationEditorType.INK)return;if(!$){for(const pt of a(this,F).values())if(pt.isEmpty()){pt.setInBackground();return}}it(this,A,Me).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState($){a(this,k).setEditingState($)}addCommands($){a(this,k).addCommands($)}enable(){this.div.style.pointerEvents="auto";const $=new Set;for(const pt of a(this,F).values())pt.enableEditing(),pt.annotationElementId&&$.add(pt.annotationElementId);if(!a(this,P))return;const ot=a(this,P).getEditableAnnotations();for(const pt of ot){if(pt.hide(),a(this,k).isDeletedAnnotationElement(pt.data.id)||$.has(pt.data.id))continue;const mt=this.deserialize(pt);mt&&(this.addOrRebuild(mt),mt.enableEditing())}}disable(){var ot;gt(this,O,!0),this.div.style.pointerEvents="none";const $=new Set;for(const pt of a(this,F).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){$.add(pt.annotationElementId);continue}(ot=this.getEditableAnnotation(pt.annotationElementId))==null||ot.show(),pt.remove()}if(a(this,P)){const pt=a(this,P).getEditableAnnotations();for(const mt of pt){const{id:X}=mt.data;$.has(X)||a(this,k).isDeletedAnnotationElement(X)||mt.show()}}it(this,B,an).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,O,!1)}getEditableAnnotation($){var ot;return((ot=a(this,P))==null?void 0:ot.getEditableAnnotation($))||null}setActiveEditor($){a(this,k).getActive()!==$&&a(this,k).setActiveEditor($)}enableClick(){this.div.addEventListener("pointerdown",a(this,R)),this.div.addEventListener("pointerup",a(this,C))}disableClick(){this.div.removeEventListener("pointerdown",a(this,R)),this.div.removeEventListener("pointerup",a(this,C))}attach($){a(this,F).set($.id,$);const{annotationElementId:ot}=$;ot&&a(this,k).isDeletedAnnotationElement(ot)&&a(this,k).removeDeletedAnnotationElement($)}detach($){var ot;a(this,F).delete($.id),(ot=a(this,l))==null||ot.removePointerInTextLayer($.contentDiv),!a(this,O)&&$.annotationElementId&&a(this,k).addDeletedAnnotationElement($)}remove($){this.detach($),a(this,k).removeEditor($),$.div.contains(document.activeElement)&&setTimeout(()=>{a(this,k).focusMainContainer()},0),$.div.remove(),$.isAttachedToDOM=!1,a(this,T)||this.addInkEditorIfNeeded(!1)}changeParent($){var ot;$.parent!==this&&($.annotationElementId&&(a(this,k).addDeletedAnnotationElement($.annotationElementId),i.AnnotationEditor.deleteAnnotationElement($),$.annotationElementId=null),this.attach($),(ot=$.parent)==null||ot.detach($),$.setParent(this),$.div&&$.isAttachedToDOM&&($.div.remove(),this.div.append($.div)))}add($){if(this.changeParent($),a(this,k).addEditor($),this.attach($),!$.isAttachedToDOM){const ot=$.render();this.div.append(ot),$.isAttachedToDOM=!0}$.fixAndSetPosition(),$.onceAdded(),a(this,k).addToAnnotationStorage($)}moveEditorInDOM($){var pt;if(!$.isAttachedToDOM)return;const{activeElement:ot}=document;$.div.contains(ot)&&($._focusEventsAllowed=!1,setTimeout(()=>{$.div.contains(document.activeElement)?$._focusEventsAllowed=!0:($.div.addEventListener("focusin",()=>{$._focusEventsAllowed=!0},{once:!0}),ot.focus())},0)),$._structTreeParentId=(pt=a(this,l))==null?void 0:pt.moveElementInDOM(this.div,$.div,$.contentDiv,!0)}addOrRebuild($){$.needsToBeRebuilt()?$.rebuild():this.add($)}addUndoableEditor($){const ot=()=>$._uiManager.rebuild($),pt=()=>{$.remove()};this.addCommands({cmd:ot,undo:pt,mustExec:!1})}getNextId(){return a(this,k).getId()}pasteEditor($,ot){a(this,k).updateToolbar($),a(this,k).updateMode($);const{offsetX:pt,offsetY:mt}=it(this,M,rn).call(this),X=this.getNextId(),yt=it(this,x,sn).call(this,{parent:this,id:X,x:pt,y:mt,uiManager:a(this,k),isCentered:!0,...ot});yt&&this.add(yt)}deserialize($){switch($.annotationType??$.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize($,this,a(this,k));case n.AnnotationEditorType.INK:return o.InkEditor.deserialize($,this,a(this,k));case n.AnnotationEditorType.STAMP:return d.StampEditor.deserialize($,this,a(this,k))}return null}addNewEditor(){it(this,A,Me).call(this,it(this,M,rn).call(this),!0)}setSelected($){a(this,k).setSelected($)}toggleSelected($){a(this,k).toggleSelected($)}isSelected($){return a(this,k).isSelected($)}unselect($){a(this,k).unselect($)}pointerup($){const{isMac:ot}=n.FeatureTest.platform;if(!($.button!==0||$.ctrlKey&&ot)&&$.target===this.div&&a(this,w)){if(gt(this,w,!1),!a(this,E)){gt(this,E,!0);return}if(a(this,k).getMode()===n.AnnotationEditorType.STAMP){a(this,k).unselectAll();return}it(this,A,Me).call(this,$,!1)}}pointerdown($){if(a(this,w)){gt(this,w,!1);return}const{isMac:ot}=n.FeatureTest.platform;if($.button!==0||$.ctrlKey&&ot||$.target!==this.div)return;gt(this,w,!0);const pt=a(this,k).getActive();gt(this,E,!pt||pt.isEmpty())}findNewParent($,ot,pt){const mt=a(this,k).findParent(ot,pt);return mt===null||mt===this?!1:(mt.changeParent($),!0)}destroy(){var $,ot;(($=a(this,k).getActive())==null?void 0:$.parent)===this&&(a(this,k).commitOrRemove(),a(this,k).setActiveEditor(null));for(const pt of a(this,F).values())(ot=a(this,l))==null||ot.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,a(this,F).clear(),a(this,k).removeLayer(this)}render({viewport:$}){this.viewport=$,(0,b.setLayerDimensions)(this.div,$);for(const ot of a(this,k).getEditors(this.pageIndex))this.add(ot);this.updateMode()}update({viewport:$}){a(this,k).commitOrRemove(),this.viewport=$,(0,b.setLayerDimensions)(this.div,{rotation:$.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:$,pageHeight:ot}=this.viewport.rawDims;return[$,ot]}};l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakMap,O=new WeakMap,k=new WeakMap,x=new WeakSet,sn=function($){switch(a(this,k).getMode()){case n.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor($);case n.AnnotationEditorType.INK:return new o.InkEditor($);case n.AnnotationEditorType.STAMP:return new d.StampEditor($)}return null},A=new WeakSet,Me=function($,ot){const pt=this.getNextId(),mt=it(this,x,sn).call(this,{parent:this,id:pt,x:$.offsetX,y:$.offsetY,uiManager:a(this,k),isCentered:ot});return mt&&this.add(mt),mt},M=new WeakSet,rn=function(){const{x:$,y:ot,width:pt,height:mt}=this.div.getBoundingClientRect(),X=Math.max(0,$),yt=Math.max(0,ot),wt=Math.min(window.innerWidth,$+pt),Rt=Math.min(window.innerHeight,ot+mt),kt=(X+wt)/2-$,j=(yt+Rt)/2-ot,[h,f]=this.viewport.rotation%180===0?[kt,j]:[j,kt];return{offsetX:h,offsetY:f}},B=new WeakSet,an=function(){gt(this,T,!0);for(const $ of a(this,F).values())$.isEmpty()&&$.remove();gt(this,T,!1)},se(Q,"_initialized",!1);let g=Q;e.AnnotationEditorLayer=g},(t,e,s)=>{var d,g,l,E,P,C,R,F,w,T,On,k,In,m,Dn,U,Se,_,on,L,Ln,st,ln;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(5),r=s(4),o=s(29);const ot=class ot extends r.AnnotationEditor{constructor(X){super({...X,name:"freeTextEditor"});G(this,T);G(this,k);G(this,m);G(this,U);G(this,_);G(this,L);G(this,st);G(this,d,this.editorDivBlur.bind(this));G(this,g,this.editorDivFocus.bind(this));G(this,l,this.editorDivInput.bind(this));G(this,E,this.editorDivKeydown.bind(this));G(this,P,void 0);G(this,C,"");G(this,R,`${this.id}-editor`);G(this,F,void 0);G(this,w,null);gt(this,P,X.color||ot._defaultColor||r.AnnotationEditor._defaultLineColor),gt(this,F,X.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const X=ot.prototype,yt=kt=>kt.isEmpty(),wt=i.AnnotationEditorUIManager.TRANSLATE_SMALL,Rt=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],X.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],X.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],X._translateEmpty,{args:[-wt,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X._translateEmpty,{args:[-Rt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],X._translateEmpty,{args:[wt,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X._translateEmpty,{args:[Rt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],X._translateEmpty,{args:[0,-wt],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X._translateEmpty,{args:[0,-Rt],checker:yt}],[["ArrowDown","mac+ArrowDown"],X._translateEmpty,{args:[0,wt],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X._translateEmpty,{args:[0,Rt],checker:yt}]]))}static initialize(X){r.AnnotationEditor.initialize(X,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ot._defaultFontSize=yt;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ot._defaultColor=yt;break}}updateParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,T,On).call(this,yt);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,k,In).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,ot._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,ot._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,F)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,P)]]}_translateEmpty(X,yt){this._uiManager.translateSelectedEditors(X,yt,!0)}getInitialTranslation(){const X=this.parentScale;return[-ot._internalPadding*X,-(ot._internalPadding+a(this,F))*X]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,E)),this.editorDiv.addEventListener("focus",a(this,g)),this.editorDiv.addEventListener("blur",a(this,d)),this.editorDiv.addEventListener("input",a(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,R)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,E)),this.editorDiv.removeEventListener("focus",a(this,g)),this.editorDiv.removeEventListener("blur",a(this,d)),this.editorDiv.removeEventListener("input",a(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),X.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var X;if(this.width){it(this,st,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(X=this._initialOptions)!=null&&X.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const X=a(this,C),yt=gt(this,C,it(this,m,Dn).call(this).trimEnd());if(X===yt)return;const wt=Rt=>{if(gt(this,C,Rt),!Rt){this.remove();return}it(this,_,on).call(this),this._uiManager.rebuild(this),it(this,U,Se).call(this)};this.addCommands({cmd:()=>{wt(yt)},undo:()=>{wt(X)},mustExec:!1}),it(this,U,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(X){this.enterInEditMode()}keydown(X){X.target===this.div&&X.key==="Enter"&&(this.enterInEditMode(),X.preventDefault())}editorDivKeydown(X){ot._keyboardManager.exec(this,X)}editorDivFocus(X){this.isEditing=!0}editorDivBlur(X){this.isEditing=!1}editorDivInput(X){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let X,yt;this.width&&(X=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,R)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("aria-label",Rt)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("default-content",Rt)}),this.editorDiv.contentEditable=!0;const{style:wt}=this.editorDiv;if(wt.fontSize=`calc(${a(this,F)}px * var(--scale-factor))`,wt.color=a(this,P),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Rt,kt]=this.parentDimensions;if(this.annotationElementId){const{position:j}=a(this,w);let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[u,y]=this.pageDimensions,[S,N]=this.pageTranslation;let H,Y;switch(this.rotation){case 0:H=X+(j[0]-S)/u,Y=yt+this.height-(j[1]-N)/y;break;case 90:H=X+(j[0]-S)/u,Y=yt-(j[1]-N)/y,[h,f]=[f,-h];break;case 180:H=X-this.width+(j[0]-S)/u,Y=yt-(j[1]-N)/y,[h,f]=[-h,-f];break;case 270:H=X+(j[0]-S-this.height*y)/u,Y=yt+(j[1]-N-this.width*u)/y,[h,f]=[-f,h];break}this.setAt(H*Rt,Y*kt,h,f)}else this.setAt(X*Rt,yt*kt,this.width*Rt,this.height*kt);it(this,_,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(X,yt,wt){let Rt=null;if(X instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:j,fontColor:h},rect:f,rotation:u,id:y},textContent:S,textPosition:N,parent:{page:{pageNumber:H}}}=X;if(!S||S.length===0)return null;Rt=X={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(h),fontSize:j,value:S.join(`
`),position:N,pageIndex:H-1,rect:f,rotation:u,id:y,deleted:!1}}const kt=super.deserialize(X,yt,wt);return gt(kt,F,X.fontSize),gt(kt,P,n.Util.makeHexColor(...X.color)),gt(kt,C,X.value),kt.annotationElementId=X.id||null,gt(kt,w,Rt),kt}serialize(X=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=ot._internalPadding*this.parentScale,wt=this.getRect(yt,yt),Rt=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,P)),kt={annotationType:n.AnnotationEditorType.FREETEXT,color:Rt,fontSize:a(this,F),value:a(this,C),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return X?kt:this.annotationElementId&&!it(this,L,Ln).call(this,kt)?null:(kt.id=this.annotationElementId,kt)}};d=new WeakMap,g=new WeakMap,l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakSet,On=function(X){const yt=Rt=>{this.editorDiv.style.fontSize=`calc(${Rt}px * var(--scale-factor))`,this.translate(0,-(Rt-a(this,F))*this.parentScale),gt(this,F,Rt),it(this,U,Se).call(this)},wt=a(this,F);this.addCommands({cmd:()=>{yt(X)},undo:()=>{yt(wt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,In=function(X){const yt=a(this,P);this.addCommands({cmd:()=>{gt(this,P,this.editorDiv.style.color=X)},undo:()=>{gt(this,P,this.editorDiv.style.color=yt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Dn=function(){const X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;const yt=[];for(const wt of X)yt.push(wt.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},U=new WeakSet,Se=function(){const[X,yt]=this.parentDimensions;let wt;if(this.isAttachedToDOM)wt=this.div.getBoundingClientRect();else{const{currentLayer:Rt,div:kt}=this,j=kt.style.display;kt.style.display="hidden",Rt.div.append(this.div),wt=kt.getBoundingClientRect(),kt.remove(),kt.style.display=j}this.rotation%180===this.parentRotation%180?(this.width=wt.width/X,this.height=wt.height/yt):(this.width=wt.height/X,this.height=wt.width/yt),this.fixAndSetPosition()},_=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!a(this,C))for(const X of a(this,C).split(`
`)){const yt=document.createElement("div");yt.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(yt)}},L=new WeakSet,Ln=function(X){const{value:yt,fontSize:wt,color:Rt,rect:kt,pageIndex:j}=a(this,w);return X.value!==yt||X.fontSize!==wt||X.rect.some((h,f)=>Math.abs(h-kt[f])>=1)||X.color.some((h,f)=>h!==Rt[f])||X.pageIndex!==j},st=new WeakSet,ln=function(X=!1){if(!this.annotationElementId)return;if(it(this,U,Se).call(this),!X&&(this.width===0||this.height===0)){setTimeout(()=>it(this,st,ln).call(this,!0),0);return}const yt=ot._internalPadding*this.parentScale;a(this,w).rect=this.getRect(yt,yt)},se(ot,"_freeTextDefaultContent",""),se(ot,"_internalPadding",0),se(ot,"_defaultColor",null),se(ot,"_defaultFontSize",10),se(ot,"_type","freetext");let b=ot;e.FreeTextEditor=b},(t,e,s)=>{var f,y,ue,N,Nn,Y,dt,v,I,V,rt,K,ut,St,ft,bt,Z,J,q,ct,At,Et,Dt,Bn,jt,Fe,Gt,cn,Yt,hn,at,nt,xt,Tt,ne,ee,ht,un,Ut,Ft,Ht,zt,jn,Pt,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),i=s(6),r=s(3),o=s(30),b=s(31),d=s(32);const g=1e3,l=9,E=new WeakSet;function P($t){return{width:$t[2]-$t[0],height:$t[3]-$t[1]}}class C{static create(W){switch(W.data.annotationType){case n.AnnotationType.LINK:return new F(W);case n.AnnotationType.TEXT:return new w(W);case n.AnnotationType.WIDGET:switch(W.data.fieldType){case"Tx":return new O(W);case"Btn":return W.data.radioButton?new m(W):W.data.checkBox?new x(W):new A(W);case"Ch":return new U(W);case"Sig":return new k(W)}return new T(W);case n.AnnotationType.POPUP:return new M(W);case n.AnnotationType.FREETEXT:return new B(W);case n.AnnotationType.LINE:return new L(W);case n.AnnotationType.SQUARE:return new Q(W);case n.AnnotationType.CIRCLE:return new st(W);case n.AnnotationType.POLYLINE:return new $(W);case n.AnnotationType.CARET:return new pt(W);case n.AnnotationType.INK:return new mt(W);case n.AnnotationType.POLYGON:return new ot(W);case n.AnnotationType.HIGHLIGHT:return new X(W);case n.AnnotationType.UNDERLINE:return new yt(W);case n.AnnotationType.SQUIGGLY:return new wt(W);case n.AnnotationType.STRIKEOUT:return new Rt(W);case n.AnnotationType.STAMP:return new kt(W);case n.AnnotationType.FILEATTACHMENT:return new j(W);default:return new R(W)}}}const u=class u{constructor(W,{isRenderable:c=!1,ignoreBorder:D=!1,createQuadrilaterals:z=!1}={}){G(this,f,!1);this.isRenderable=c,this.data=W.data,this.layer=W.layer,this.linkService=W.linkService,this.downloadManager=W.downloadManager,this.imageResourcesPath=W.imageResourcesPath,this.renderForms=W.renderForms,this.svgFactory=W.svgFactory,this.annotationStorage=W.annotationStorage,this.enableScripting=W.enableScripting,this.hasJSActions=W.hasJSActions,this._fieldObjects=W.fieldObjects,this.parent=W.parent,c&&(this.container=this._createContainer(D)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:W,contentsObj:c,richText:D}){return!!(W!=null&&W.str||c!=null&&c.str||D!=null&&D.str)}get hasPopupData(){return u._hasPopupData(this.data)}_createContainer(W){const{data:c,parent:{page:D,viewport:z}}=this,et=document.createElement("section");et.setAttribute("data-annotation-id",c.id),this instanceof T||(et.tabIndex=g),et.style.zIndex=this.parent.zIndex++,this.data.popupRef&&et.setAttribute("aria-haspopup","dialog"),c.noRotate&&et.classList.add("norotate");const{pageWidth:lt,pageHeight:_t,pageX:Ct,pageY:It}=z.rawDims;if(!c.rect||this instanceof M){const{rotation:qt}=c;return!c.hasOwnCanvas&&qt!==0&&this.setRotation(qt,et),et}const{width:Ot,height:Xt}=P(c.rect),Nt=n.Util.normalizeRect([c.rect[0],D.view[3]-c.rect[1]+D.view[1],c.rect[2],D.view[3]-c.rect[3]+D.view[1]]);if(!W&&c.borderStyle.width>0){et.style.borderWidth=`${c.borderStyle.width}px`;const qt=c.borderStyle.horizontalCornerRadius,Kt=c.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const te=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;et.style.borderRadius=te}else if(this instanceof m){const te=`calc(${Ot}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;et.style.borderRadius=te}switch(c.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:et.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:et.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:et.style.borderBottomStyle="solid";break}const Qt=c.borderColor||null;Qt?(gt(this,f,!0),et.style.borderColor=n.Util.makeHexColor(Qt[0]|0,Qt[1]|0,Qt[2]|0)):et.style.borderWidth=0}et.style.left=`${100*(Nt[0]-Ct)/lt}%`,et.style.top=`${100*(Nt[1]-It)/_t}%`;const{rotation:Bt}=c;return c.hasOwnCanvas||Bt===0?(et.style.width=`${100*Ot/lt}%`,et.style.height=`${100*Xt/_t}%`):this.setRotation(Bt,et),et}setRotation(W,c=this.container){if(!this.data.rect)return;const{pageWidth:D,pageHeight:z}=this.parent.viewport.rawDims,{width:et,height:lt}=P(this.data.rect);let _t,Ct;W%180===0?(_t=100*et/D,Ct=100*lt/z):(_t=100*lt/D,Ct=100*et/z),c.style.width=`${_t}%`,c.style.height=`${Ct}%`,c.setAttribute("data-main-rotation",(360-W)%360)}get _commonActions(){const W=(c,D,z)=>{const et=z.detail[c],lt=et[0],_t=et.slice(1);z.target.style[D]=o.ColorConverters[`${lt}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[D]:o.ColorConverters[`${lt}_rgb`](_t)})};return(0,n.shadow)(this,"_commonActions",{display:c=>{const{display:D}=c.detail,z=D%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:D===1||D===2})},print:c=>{this.annotationStorage.setValue(this.data.id,{noPrint:!c.detail.print})},hidden:c=>{const{hidden:D}=c.detail;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:D,noView:D})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.target.disabled=c.detail.readonly},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{W("bgColor","backgroundColor",c)},fillColor:c=>{W("fillColor","backgroundColor",c)},fgColor:c=>{W("fgColor","color",c)},textColor:c=>{W("textColor","color",c)},borderColor:c=>{W("borderColor","borderColor",c)},strokeColor:c=>{W("strokeColor","borderColor",c)},rotation:c=>{const D=c.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox(W,c){const D=this._commonActions;for(const z of Object.keys(c.detail)){const et=W[z]||D[z];et==null||et(c)}}_setDefaultPropertiesFromJS(W){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const D=this._commonActions;for(const[z,et]of Object.entries(c)){const lt=D[z];if(lt){const _t={detail:{[z]:et},target:W};lt(_t),delete c[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:W}=this.data;if(!W)return;const[c,D,z,et]=this.data.rect;if(W.length===1){const[,{x:Kt,y:Qt},{x:te,y:re}]=W[0];if(z===Kt&&et===Qt&&c===te&&D===re)return}const{style:lt}=this.container;let _t;if(a(this,f)){const{borderColor:Kt,borderWidth:Qt}=lt;lt.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Qt}">`],this.container.classList.add("hasBorder")}const Ct=z-c,It=et-D,{svgFactory:Ot}=this,Xt=Ot.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Nt=Ot.createElement("defs");Xt.append(Nt);const Bt=Ot.createElement("clipPath"),qt=`clippath_${this.data.id}`;Bt.setAttribute("id",qt),Bt.setAttribute("clipPathUnits","objectBoundingBox"),Nt.append(Bt);for(const[,{x:Kt,y:Qt},{x:te,y:re}]of W){const ie=Ot.createElement("rect"),ae=(te-c)/Ct,ce=(et-Qt)/It,he=(Kt-te)/Ct,An=(Qt-re)/It;ie.setAttribute("x",ae),ie.setAttribute("y",ce),ie.setAttribute("width",he),ie.setAttribute("height",An),Bt.append(ie),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${An}"/>`)}a(this,f)&&(_t.push("</g></svg>')"),lt.backgroundImage=_t.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:W,data:c}=this;W.setAttribute("aria-haspopup","dialog");const D=new M({data:{color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,parentRect:c.rect,borderStyle:0,id:`popup_${c.id}`,rotation:c.rotation},parent:this.parent,elements:[this]});this.parent.div.append(D.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(W,c=null){const D=[];if(this._fieldObjects){const z=this._fieldObjects[W];if(z)for(const{page:et,id:lt,exportValues:_t}of z){if(et===-1||lt===c)continue;const Ct=typeof _t=="string"?_t:null,It=document.querySelector(`[data-element-id="${lt}"]`);if(It&&!E.has(It)){(0,n.warn)(`_getElementsByName - element not allowed: ${lt}`);continue}D.push({id:lt,exportValue:Ct,domElement:It})}return D}for(const z of document.getElementsByName(W)){const{exportValue:et}=z,lt=z.getAttribute("data-element-id");lt!==c&&E.has(z)&&D.push({id:lt,exportValue:et,domElement:z})}return D}show(){var W;this.container&&(this.container.hidden=!1),(W=this.popup)==null||W.maybeShow()}hide(){var W;this.container&&(this.container.hidden=!0),(W=this.popup)==null||W.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const W=this.getElementsToTriggerPopup();if(Array.isArray(W))for(const c of W)c.classList.add("highlightArea");else W.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:W,data:{id:c}}=this;this.container.addEventListener("dblclick",()=>{var D;(D=this.linkService.eventBus)==null||D.dispatch("switchannotationeditormode",{source:this,mode:W,editId:c})})}};f=new WeakMap;let R=u;class F extends R{constructor(c,D=null){super(c,{isRenderable:!0,ignoreBorder:!!(D!=null&&D.ignoreBorder),createQuadrilaterals:!0});G(this,y);G(this,N);this.isTooltipOnly=c.data.isTooltipOnly}render(){const{data:c,linkService:D}=this,z=document.createElement("a");z.setAttribute("data-element-id",c.id);let et=!1;return c.url?(D.addLinkAttributes(z,c.url,c.newWindow),et=!0):c.action?(this._bindNamedAction(z,c.action),et=!0):c.attachment?(this._bindAttachment(z,c.attachment),et=!0):c.setOCGState?(it(this,N,Nn).call(this,z,c.setOCGState),et=!0):c.dest?(this._bindLink(z,c.dest),et=!0):(c.actions&&(c.actions.Action||c.actions["Mouse Up"]||c.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,c),et=!0),c.resetForm?(this._bindResetFormAction(z,c.resetForm),et=!0):this.isTooltipOnly&&!et&&(this._bindLink(z,""),et=!0)),this.container.classList.add("linkAnnotation"),et&&this.container.append(z),this.container}_bindLink(c,D){c.href=this.linkService.getDestinationHash(D),c.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&it(this,y,ue).call(this)}_bindNamedAction(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeNamedAction(D),!1),it(this,y,ue).call(this)}_bindAttachment(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,D.content,D.filename),!1},it(this,y,ue).call(this)}_bindJSAction(c,D){c.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const et of Object.keys(D.actions)){const lt=z.get(et);lt&&(c[lt]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:et}}),!1})}c.onclick||(c.onclick=()=>!1),it(this,y,ue).call(this)}_bindResetFormAction(c,D){const z=c.onclick;if(z||(c.href=this.linkService.getAnchorUrl("")),it(this,y,ue).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(c.onclick=()=>!1);return}c.onclick=()=>{var Xt;z==null||z();const{fields:et,refs:lt,include:_t}=D,Ct=[];if(et.length!==0||lt.length!==0){const Nt=new Set(lt);for(const Bt of et){const qt=this._fieldObjects[Bt]||[];for(const{id:Kt}of qt)Nt.add(Kt)}for(const Bt of Object.values(this._fieldObjects))for(const qt of Bt)Nt.has(qt.id)===_t&&Ct.push(qt)}else for(const Nt of Object.values(this._fieldObjects))Ct.push(...Nt);const It=this.annotationStorage,Ot=[];for(const Nt of Ct){const{id:Bt}=Nt;switch(Ot.push(Bt),Nt.type){case"text":{const Kt=Nt.defaultValue||"";It.setValue(Bt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Nt.defaultValue===Nt.exportValues;It.setValue(Bt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Nt.defaultValue||"";It.setValue(Bt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${Bt}"]`);if(qt){if(!E.has(qt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ot,name:"ResetForm"}})),!1}}}y=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,Nn=function(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeSetOCGState(D),!1),it(this,y,ue).call(this)};class w extends R{constructor(W){super(W,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const W=document.createElement("img");return W.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",W.alt="[{{type}} Annotation]",W.dataset.l10nId="text_annotation_type",W.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(W),this.container}}class T extends R{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(W){var c;this.data.hasOwnCanvas&&(((c=W.previousSibling)==null?void 0:c.nodeName)==="CANVAS"&&(W.previousSibling.hidden=!0),W.hidden=!1)}_getKeyModifier(W){const{isWin:c,isMac:D}=n.FeatureTest.platform;return c&&W.ctrlKey||D&&W.metaKey}_setEventListener(W,c,D,z,et){D.includes("mouse")?W.addEventListener(D,lt=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt),shift:lt.shiftKey,modifier:this._getKeyModifier(lt)}})}):W.addEventListener(D,lt=>{var _t;if(D==="blur"){if(!c.focused||!lt.relatedTarget)return;c.focused=!1}else if(D==="focus"){if(c.focused)return;c.focused=!0}et&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt)}}))})}_setEventListeners(W,c,D,z){var et,lt,_t;for(const[Ct,It]of D)(It==="Action"||(et=this.data.actions)!=null&&et[It])&&((It==="Focus"||It==="Blur")&&(c||(c={focused:!1})),this._setEventListener(W,c,Ct,It,z),It==="Focus"&&!((lt=this.data.actions)!=null&&lt.Blur)?this._setEventListener(W,c,"blur","Blur",null):It==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener(W,c,"focus","Focus",null))}_setBackgroundColor(W){const c=this.data.backgroundColor||null;W.style.backgroundColor=c===null?"transparent":n.Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle(W){const c=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||l,et=W.style;let lt;const _t=2,Ct=It=>Math.round(10*It)/10;if(this.data.multiLine){const It=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),Ot=Math.round(It/(n.LINE_FACTOR*z))||1,Xt=It/Ot;lt=Math.min(z,Ct(Xt/n.LINE_FACTOR))}else{const It=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);lt=Math.min(z,Ct(It/n.LINE_FACTOR))}et.fontSize=`calc(${lt}px * var(--scale-factor))`,et.color=n.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(et.textAlign=c[this.data.textAlignment])}_setRequired(W,c){c?W.setAttribute("required",!0):W.removeAttribute("required"),W.setAttribute("aria-required",c)}}class O extends T{constructor(W){const c=W.renderForms||!W.data.hasAppearance&&!!W.data.fieldValue;super(W,{isRenderable:c})}setPropertyOnSiblings(W,c,D,z){const et=this.annotationStorage;for(const lt of this._getElementsByName(W.name,W.id))lt.domElement&&(lt.domElement[c]=D),et.setValue(lt.id,{[z]:D})}render(){var z,et;const W=this.annotationStorage,c=this.data.id;this.container.classList.add("textWidgetAnnotation");let D=null;if(this.renderForms){const lt=W.getValue(c,{value:this.data.fieldValue});let _t=lt.value||"";const Ct=W.getValue(c,{charLimit:this.data.maxLen}).charLimit;Ct&&_t.length>Ct&&(_t=_t.slice(0,Ct));let It=lt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;It&&this.data.comb&&(It=It.replaceAll(/\s+/g,""));const Ot={userValue:_t,formattedValue:It,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=It??_t,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",It??_t),this.data.doNotScroll&&(D.style.overflowX="hidden")),this.data.hasOwnCanvas&&(D.hidden=!0),E.add(D),D.setAttribute("data-element-id",c),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=g,this._setRequired(D,this.data.required),Ct&&(D.maxLength=Ct),D.addEventListener("input",Nt=>{W.setValue(c,{value:Nt.target.value}),this.setPropertyOnSiblings(D,"value",Nt.target.value,"value"),Ot.formattedValue=null}),D.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue??"";D.value=Ot.userValue=Bt,Ot.formattedValue=null});let Xt=Nt=>{const{formattedValue:Bt}=Ot;Bt!=null&&(Nt.target.value=Bt),Nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Bt=>{if(Ot.focused)return;const{target:qt}=Bt;Ot.userValue&&(qt.value=Ot.userValue),Ot.lastCommittedValue=qt.value,Ot.commitKey=1,Ot.focused=!0}),D.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const qt={value(Kt){Ot.userValue=Kt.detail.value??"",W.setValue(c,{value:Ot.userValue.toString()}),Kt.target.value=Ot.userValue},formattedValue(Kt){const{formattedValue:Qt}=Kt.detail;Ot.formattedValue=Qt,Qt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Qt),W.setValue(c,{formattedValue:Qt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ie;const{charLimit:Qt}=Kt.detail,{target:te}=Kt;if(Qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Qt);let re=Ot.userValue;!re||re.length<=Qt||(re=re.slice(0,Qt),te.value=Ot.userValue=re,W.setValue(c,{value:re}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,Bt)}),D.addEventListener("keydown",Bt=>{var Qt;Ot.commitKey=1;let qt=-1;if(Bt.key==="Escape"?qt=0:Bt.key==="Enter"&&!this.data.multiLine?qt=2:Bt.key==="Tab"&&(Ot.commitKey=3),qt===-1)return;const{value:Kt}=Bt.target;Ot.lastCommittedValue!==Kt&&(Ot.lastCommittedValue=Kt,Ot.userValue=Kt,(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Nt=Xt;Xt=null,D.addEventListener("blur",Bt=>{var Kt;if(!Ot.focused||!Bt.relatedTarget)return;Ot.focused=!1;const{value:qt}=Bt.target;Ot.userValue=qt,Ot.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:qt,willCommit:!0,commitKey:Ot.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Nt(Bt)}),(et=this.data.actions)!=null&&et.Keystroke&&D.addEventListener("beforeinput",Bt=>{var ce;Ot.lastCommittedValue=null;const{data:qt,target:Kt}=Bt,{value:Qt,selectionStart:te,selectionEnd:re}=Kt;let ie=te,ae=re;switch(Bt.inputType){case"deleteWordBackward":{const he=Qt.substring(0,te).match(/\w*[^\w]*$/);he&&(ie-=he[0].length);break}case"deleteWordForward":{const he=Qt.substring(te).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":te===re&&(ie-=1);break;case"deleteContentForward":te===re&&(ae+=1);break}Bt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Qt,change:qt||"",willCommit:!1,selStart:ie,selEnd:ae}})}),this._setEventListeners(D,Ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Xt&&D.addEventListener("blur",Xt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Ct;D.classList.add("comb"),D.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class k extends T{constructor(W){super(W,{isRenderable:!!W.data.hasOwnCanvas})}}class x extends T{constructor(W){super(W,{isRenderable:W.renderForms})}render(){const W=this.annotationStorage,c=this.data,D=c.id;let z=W.getValue(D,{value:c.exportValue===c.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",W.setValue(D,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const et=document.createElement("input");return E.add(et),et.setAttribute("data-element-id",D),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="checkbox",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.setAttribute("exportValue",c.exportValue),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:_t,checked:Ct}=lt.target;for(const It of this._getElementsByName(_t,D)){const Ot=Ct&&It.exportValue===c.exportValue;It.domElement&&(It.domElement.checked=Ot),W.setValue(It.id,{value:Ot})}W.setValue(D,{value:Ct})}),et.addEventListener("resetform",lt=>{const _t=c.defaultFieldValue||"Off";lt.target.checked=_t===c.exportValue}),this.enableScripting&&this.hasJSActions&&(et.addEventListener("updatefromsandbox",lt=>{const _t={value(Ct){Ct.target.checked=Ct.detail.value!=="Off",W.setValue(D,{value:Ct.target.checked})}};this._dispatchEventFromSandbox(_t,lt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)),this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class m extends T{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const W=this.annotationStorage,c=this.data,D=c.id;let z=W.getValue(D,{value:c.fieldValue===c.buttonValue}).value;typeof z=="string"&&(z=z!==c.buttonValue,W.setValue(D,{value:z}));const et=document.createElement("input");if(E.add(et),et.setAttribute("data-element-id",D),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="radio",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:_t,checked:Ct}=lt.target;for(const It of this._getElementsByName(_t,D))W.setValue(It.id,{value:!1});W.setValue(D,{value:Ct})}),et.addEventListener("resetform",lt=>{const _t=c.defaultFieldValue;lt.target.checked=_t!=null&&_t===c.buttonValue}),this.enableScripting&&this.hasJSActions){const lt=c.buttonValue;et.addEventListener("updatefromsandbox",_t=>{const Ct={value:It=>{const Ot=lt===It.detail.value;for(const Xt of this._getElementsByName(It.target.name)){const Nt=Ot&&Xt.id===D;Xt.domElement&&(Xt.domElement.checked=Nt),W.setValue(Xt.id,{value:Nt})}}};this._dispatchEventFromSandbox(Ct,_t)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class A extends F{constructor(W){super(W,{ignoreBorder:W.data.hasAppearance})}render(){const W=super.render();W.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(W.title=this.data.alternativeText);const c=W.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),W}}class U extends T{constructor(W){super(W,{isRenderable:W.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const W=this.annotationStorage,c=this.data.id,D=W.getValue(c,{value:this.data.fieldValue}),z=document.createElement("select");E.add(z),z.setAttribute("data-element-id",c),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=g;let et=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",Ot=>{const Xt=this.data.defaultFieldValue;for(const Nt of z.options)Nt.selected=Nt.value===Xt});for(const Ot of this.data.options){const Xt=document.createElement("option");Xt.textContent=Ot.displayValue,Xt.value=Ot.exportValue,D.value.includes(Ot.exportValue)&&(Xt.setAttribute("selected",!0),et=!1),z.append(Xt)}let lt=null;if(et){const Ot=document.createElement("option");Ot.value=" ",Ot.setAttribute("hidden",!0),Ot.setAttribute("selected",!0),z.prepend(Ot),lt=()=>{Ot.remove(),z.removeEventListener("input",lt),lt=null},z.addEventListener("input",lt)}const _t=Ot=>{const Xt=Ot?"value":"textContent",{options:Nt,multiple:Bt}=z;return Bt?Array.prototype.filter.call(Nt,qt=>qt.selected).map(qt=>qt[Xt]):Nt.selectedIndex===-1?null:Nt[Nt.selectedIndex][Xt]};let Ct=_t(!1);const It=Ot=>{const Xt=Ot.target.options;return Array.prototype.map.call(Xt,Nt=>({displayValue:Nt.textContent,exportValue:Nt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",Ot=>{const Xt={value(Nt){lt==null||lt();const Bt=Nt.detail.value,qt=new Set(Array.isArray(Bt)?Bt:[Bt]);for(const Kt of z.options)Kt.selected=qt.has(Kt.value);W.setValue(c,{value:_t(!0)}),Ct=_t(!1)},multipleSelection(Nt){z.multiple=!0},remove(Nt){const Bt=z.options,qt=Nt.detail.remove;Bt[qt].selected=!1,z.remove(qt),Bt.length>0&&Array.prototype.findIndex.call(Bt,Qt=>Qt.selected)===-1&&(Bt[0].selected=!0),W.setValue(c,{value:_t(!0),items:It(Nt)}),Ct=_t(!1)},clear(Nt){for(;z.length!==0;)z.remove(0);W.setValue(c,{value:null,items:[]}),Ct=_t(!1)},insert(Nt){const{index:Bt,displayValue:qt,exportValue:Kt}=Nt.detail.insert,Qt=z.children[Bt],te=document.createElement("option");te.textContent=qt,te.value=Kt,Qt?Qt.before(te):z.append(te),W.setValue(c,{value:_t(!0),items:It(Nt)}),Ct=_t(!1)},items(Nt){const{items:Bt}=Nt.detail;for(;z.length!==0;)z.remove(0);for(const qt of Bt){const{displayValue:Kt,exportValue:Qt}=qt,te=document.createElement("option");te.textContent=Kt,te.value=Qt,z.append(te)}z.options.length>0&&(z.options[0].selected=!0),W.setValue(c,{value:_t(!0),items:It(Nt)}),Ct=_t(!1)},indices(Nt){const Bt=new Set(Nt.detail.indices);for(const qt of Nt.target.options)qt.selected=Bt.has(qt.index);W.setValue(c,{value:_t(!0)}),Ct=_t(!1)},editable(Nt){Nt.target.disabled=!Nt.detail.editable}};this._dispatchEventFromSandbox(Xt,Ot)}),z.addEventListener("input",Ot=>{var Nt;const Xt=_t(!0);W.setValue(c,{value:Xt}),Ot.preventDefault(),(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Ct,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ot=>Ot.target.value)):z.addEventListener("input",function(Ot){W.setValue(c,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class M extends R{constructor(W){const{data:c,elements:D}=W;super(W,{isRenderable:R._hasPopupData(c)}),this.elements=D}render(){this.container.classList.add("popupAnnotation");const W=new _({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),c=[];for(const D of this.elements)D.popup=W,c.push(D.data.id),D.addHighlightArea();return this.container.setAttribute("aria-controls",c.map(D=>`${n.AnnotationPrefix}${D}`).join(",")),this.container}}class _{constructor({container:W,color:c,elements:D,titleObj:z,modificationDate:et,contentsObj:lt,richText:_t,parent:Ct,rect:It,parentRect:Ot,open:Xt}){G(this,Dt);G(this,jt);G(this,Gt);G(this,Yt);G(this,Y,null);G(this,dt,it(this,Dt,Bn).bind(this));G(this,v,it(this,Yt,hn).bind(this));G(this,I,it(this,Gt,cn).bind(this));G(this,V,it(this,jt,Fe).bind(this));G(this,rt,null);G(this,K,null);G(this,ut,null);G(this,St,null);G(this,ft,null);G(this,bt,null);G(this,Z,!1);G(this,J,null);G(this,q,null);G(this,ct,null);G(this,At,null);G(this,Et,!1);var Bt;gt(this,K,W),gt(this,At,z),gt(this,ut,lt),gt(this,ct,_t),gt(this,ft,Ct),gt(this,rt,c),gt(this,q,It),gt(this,bt,Ot),gt(this,St,D);const Nt=i.PDFDateString.toDateObject(et);Nt&&gt(this,Y,Ct.l10n.get("annotation_date_string",{date:Nt.toLocaleDateString(),time:Nt.toLocaleTimeString()})),this.trigger=D.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",a(this,V)),qt.addEventListener("mouseenter",a(this,I)),qt.addEventListener("mouseleave",a(this,v)),qt.classList.add("popupTriggerArea");for(const qt of D)(Bt=qt.container)==null||Bt.addEventListener("keydown",a(this,dt));a(this,K).hidden=!0,Xt&&it(this,jt,Fe).call(this)}render(){if(a(this,J))return;const{page:{view:W},viewport:{rawDims:{pageWidth:c,pageHeight:D,pageX:z,pageY:et}}}=a(this,ft),lt=gt(this,J,document.createElement("div"));if(lt.className="popup",a(this,rt)){const ie=lt.style.outlineColor=n.Util.makeHexColor(...a(this,rt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?lt.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:lt.style.backgroundColor=n.Util.makeHexColor(...a(this,rt).map(ce=>Math.floor(.7*(255-ce)+ce)))}const _t=document.createElement("span");_t.className="header";const Ct=document.createElement("h1");if(_t.append(Ct),{dir:Ct.dir,str:Ct.textContent}=a(this,At),lt.append(_t),a(this,Y)){const ie=document.createElement("span");ie.classList.add("popupDate"),a(this,Y).then(ae=>{ie.textContent=ae}),_t.append(ie)}const It=a(this,ut),Ot=a(this,ct);if(Ot!=null&&Ot.str&&(!(It!=null&&It.str)||It.str===Ot.str))d.XfaLayer.render({xfaHtml:Ot.html,intent:"richText",div:lt}),lt.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(It);lt.append(ie)}let Xt=!!a(this,bt),Nt=Xt?a(this,bt):a(this,q);for(const ie of a(this,St))if(!Nt||n.Util.intersect(ie.data.rect,Nt)!==null){Nt=ie.data.rect,Xt=!0;break}const Bt=n.Util.normalizeRect([Nt[0],W[3]-Nt[1]+W[1],Nt[2],W[3]-Nt[3]+W[1]]),qt=5,Kt=Xt?Nt[2]-Nt[0]+qt:0,Qt=Bt[0]+Kt,te=Bt[1],{style:re}=a(this,K);re.left=`${100*(Qt-z)/c}%`,re.top=`${100*(te-et)/D}%`,a(this,K).append(lt)}_formatContents({str:W,dir:c}){const D=document.createElement("p");D.classList.add("popupContent"),D.dir=c;const z=W.split(/(?:\r\n?|\n)/);for(let et=0,lt=z.length;et<lt;++et){const _t=z[et];D.append(document.createTextNode(_t)),et<lt-1&&D.append(document.createElement("br"))}return D}forceHide(){gt(this,Et,this.isVisible),a(this,Et)&&(a(this,K).hidden=!0)}maybeShow(){a(this,Et)&&(gt(this,Et,!1),a(this,K).hidden=!1)}get isVisible(){return a(this,K).hidden===!1}}Y=new WeakMap,dt=new WeakMap,v=new WeakMap,I=new WeakMap,V=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,bt=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakMap,At=new WeakMap,Et=new WeakMap,Dt=new WeakSet,Bn=function(W){W.altKey||W.shiftKey||W.ctrlKey||W.metaKey||(W.key==="Enter"||W.key==="Escape"&&a(this,Z))&&it(this,jt,Fe).call(this)},jt=new WeakSet,Fe=function(){gt(this,Z,!a(this,Z)),a(this,Z)?(it(this,Gt,cn).call(this),a(this,K).addEventListener("click",a(this,V)),a(this,K).addEventListener("keydown",a(this,dt))):(it(this,Yt,hn).call(this),a(this,K).removeEventListener("click",a(this,V)),a(this,K).removeEventListener("keydown",a(this,dt)))},Gt=new WeakSet,cn=function(){a(this,J)||this.render(),this.isVisible?a(this,Z)&&a(this,K).classList.add("focused"):(a(this,K).hidden=!1,a(this,K).style.zIndex=parseInt(a(this,K).style.zIndex)+1e3)},Yt=new WeakSet,hn=function(){a(this,K).classList.remove("focused"),!(a(this,Z)||!this.isVisible)&&(a(this,K).hidden=!0,a(this,K).style.zIndex=parseInt(a(this,K).style.zIndex)-1e3)};class B extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0}),this.textContent=W.data.textContent,this.textPosition=W.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const W=document.createElement("div");W.classList.add("annotationTextContent"),W.setAttribute("role","comment");for(const c of this.textContent){const D=document.createElement("span");D.textContent=c,W.append(D)}this.container.append(W)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=B;class L extends R{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,at,null)}render(){this.container.classList.add("lineAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=gt(this,at,this.svgFactory.createElement("svg:line"));return lt.setAttribute("x1",c.rect[2]-c.lineCoordinates[0]),lt.setAttribute("y1",c.rect[3]-c.lineCoordinates[1]),lt.setAttribute("x2",c.rect[2]-c.lineCoordinates[2]),lt.setAttribute("y2",c.rect[3]-c.lineCoordinates[3]),lt.setAttribute("stroke-width",c.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),et.append(lt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap;class Q extends R{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,nt,null)}render(){this.container.classList.add("squareAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=c.borderStyle.width,_t=gt(this,nt,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",lt/2),_t.setAttribute("y",lt/2),_t.setAttribute("width",D-lt),_t.setAttribute("height",z-lt),_t.setAttribute("stroke-width",lt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}nt=new WeakMap;class st extends R{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,xt,null)}render(){this.container.classList.add("circleAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=c.borderStyle.width,_t=gt(this,xt,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",D/2),_t.setAttribute("cy",z/2),_t.setAttribute("rx",D/2-lt/2),_t.setAttribute("ry",z/2-lt/2),_t.setAttribute("stroke-width",lt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class $ extends R{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,Tt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0);let lt=[];for(const Ct of c.vertices){const It=Ct.x-c.rect[0],Ot=c.rect[3]-Ct.y;lt.push(It+","+Ot)}lt=lt.join(" ");const _t=gt(this,Tt,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",lt),_t.setAttribute("stroke-width",c.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class ot extends ${constructor(W){super(W),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class mt extends R{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,ne,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0);for(const lt of c.inkLists){let _t=[];for(const It of lt){const Ot=It.x-c.rect[0],Xt=c.rect[3]-It.y;_t.push(`${Ot},${Xt}`)}_t=_t.join(" ");const Ct=this.svgFactory.createElement(this.svgElementName);a(this,ne).push(Ct),Ct.setAttribute("points",_t),Ct.setAttribute("stroke-width",c.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),!c.popupRef&&this.hasPopupData&&this._createPopup(),et.append(Ct)}return this.container.append(et),this.container}getElementsToTriggerPopup(){return a(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,e.InkAnnotationElement=mt;class X extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class wt extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Rt extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kt extends R{constructor(W){super(W,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=kt;class j extends R{constructor(c){var et;super(c,{isRenderable:!0});G(this,ht);G(this,ee,null);const{filename:D,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=z,(et=this.linkService.eventBus)==null||et.dispatch("fileattachmentannotation",{source:this,filename:D,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:c,data:D}=this;let z;D.hasAppearance||D.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),z.addEventListener("dblclick",it(this,ht,un).bind(this)),gt(this,ee,z);const{isMac:et}=n.FeatureTest.platform;return c.addEventListener("keydown",lt=>{lt.key==="Enter"&&(et?lt.metaKey:lt.ctrlKey)&&it(this,ht,un).call(this)}),!D.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),c.append(z),c}getElementsToTriggerPopup(){return a(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,ht=new WeakSet,un=function(){var c;(c=this.downloadManager)==null||c.openOrDownloadData(this.container,this.content,this.filename)};class h{constructor({div:W,accessibilityManager:c,annotationCanvasMap:D,l10n:z,page:et,viewport:lt}){G(this,zt);G(this,Pt);G(this,Ut,null);G(this,Ft,null);G(this,Ht,new Map);this.div=W,gt(this,Ut,c),gt(this,Ft,D),this.l10n=z,this.page=et,this.viewport=lt,this.zIndex=0,this.l10n||(this.l10n=b.NullL10n)}async render(W){const{annotations:c}=W,D=this.div;(0,i.setLayerDimensions)(D,this.viewport);const z=new Map,et={data:null,layer:D,linkService:W.linkService,downloadManager:W.downloadManager,imageResourcesPath:W.imageResourcesPath||"",renderForms:W.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:W.annotationStorage||new r.AnnotationStorage,enableScripting:W.enableScripting===!0,hasJSActions:W.hasJSActions,fieldObjects:W.fieldObjects,parent:this,elements:null};for(const lt of c){if(lt.noHTML)continue;const _t=lt.annotationType===n.AnnotationType.POPUP;if(_t){const Ot=z.get(lt.id);if(!Ot)continue;et.elements=Ot}else{const{width:Ot,height:Xt}=P(lt.rect);if(Ot<=0||Xt<=0)continue}et.data=lt;const Ct=C.create(et);if(!Ct.isRenderable)continue;if(!_t&&lt.popupRef){const Ot=z.get(lt.popupRef);Ot?Ot.push(Ct):z.set(lt.popupRef,[Ct])}Ct.annotationEditorType>0&&a(this,Ht).set(Ct.data.id,Ct);const It=Ct.render();lt.hidden&&(It.style.visibility="hidden"),it(this,zt,jn).call(this,It,lt.id)}it(this,Pt,dn).call(this),await this.l10n.translate(D)}update({viewport:W}){const c=this.div;this.viewport=W,(0,i.setLayerDimensions)(c,{rotation:W.rotation}),it(this,Pt,dn).call(this),c.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ht).values())}getEditableAnnotation(W){return a(this,Ht).get(W)}}Ut=new WeakMap,Ft=new WeakMap,Ht=new WeakMap,zt=new WeakSet,jn=function(W,c){var z;const D=W.firstChild||W;D.id=`${n.AnnotationPrefix}${c}`,this.div.append(W),(z=a(this,Ut))==null||z.moveElementInDOM(this.div,W,D,!1)},Pt=new WeakSet,dn=function(){if(!a(this,Ft))return;const W=this.div;for(const[c,D]of a(this,Ft)){const z=W.querySelector(`[data-annotation-id="${c}"]`);if(!z)continue;const{firstChild:et}=z;et?et.nodeName==="CANVAS"?et.replaceWith(D):et.before(D):z.append(D)}a(this,Ft).clear()},e.AnnotationLayer=h},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function n(r){return Math.max(0,Math.min(255,255*r))}class i{static CMYK_G([o,b,d,g]){return["G",1-Math.min(1,.3*o+.59*d+.11*b+g)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=n(o),[o,o,o]}static G_HTML([o]){const b=s(o);return`#${b}${b}${b}`}static RGB_G([o,b,d]){return["G",.3*o+.59*b+.11*d]}static RGB_rgb(o){return o.map(n)}static RGB_HTML(o){return`#${o.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,b,d,g]){return["RGB",1-Math.min(1,o+g),1-Math.min(1,d+g),1-Math.min(1,b+g)]}static CMYK_rgb([o,b,d,g]){return[n(1-Math.min(1,o+g)),n(1-Math.min(1,d+g)),n(1-Math.min(1,b+g))]}static CMYK_HTML(o){const b=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([o,b,d]){const g=1-o,l=1-b,E=1-d,P=Math.min(g,l,E);return["CMYK",g,l,E,P]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(o,b){switch(o){case"find_match_count":o=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":o=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return s[o]||""}function i(o,b){return b?o.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(d,g)=>g in b?b[g]:"{{"+g+"}}"):o}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(o,b=null,d=n(o,b)){return i(d,b)},async translate(o){}};e.NullL10n=r},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class i{static setupStorage(o,b,d,g,l){const E=g.getValue(b,{value:null});switch(d.name){case"textarea":if(E.value!==null&&(o.textContent=E.value),l==="print")break;o.addEventListener("input",P=>{g.setValue(b,{value:P.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(E.value===d.attributes.xfaOn?o.setAttribute("checked",!0):E.value===d.attributes.xfaOff&&o.removeAttribute("checked"),l==="print")break;o.addEventListener("change",P=>{g.setValue(b,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&o.setAttribute("value",E.value),l==="print")break;o.addEventListener("input",P=>{g.setValue(b,{value:P.target.value})})}break;case"select":if(E.value!==null){o.setAttribute("value",E.value);for(const P of d.children)P.attributes.value===E.value?P.attributes.selected=!0:P.attributes.hasOwnProperty("selected")&&delete P.attributes.selected}o.addEventListener("input",P=>{const C=P.target.options,R=C.selectedIndex===-1?"":C[C.selectedIndex].value;g.setValue(b,{value:R})});break}}static setAttributes({html:o,element:b,storage:d=null,intent:g,linkService:l}){const{attributes:E}=b,P=o instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${g}`);for(const[C,R]of Object.entries(E))if(R!=null)switch(C){case"class":R.length&&o.setAttribute(C,R.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",R);break;case"style":Object.assign(o.style,R);break;case"textContent":o.textContent=R;break;default:(!P||C!=="href"&&C!=="newWindow")&&o.setAttribute(C,R)}P&&l.addLinkAttributes(o,E.href,E.newWindow),d&&E.dataId&&this.setupStorage(o,E.dataId,b,d)}static render(o){var F;const b=o.annotationStorage,d=o.linkService,g=o.xfaHtml,l=o.intent||"display",E=document.createElement(g.name);g.attributes&&this.setAttributes({html:E,element:g,intent:l,linkService:d});const P=[[g,-1,E]],C=o.div;if(C.append(E),o.viewport){const w=`matrix(${o.viewport.transform.join(",")})`;C.style.transform=w}l!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const R=[];for(;P.length>0;){const[w,T,O]=P.at(-1);if(T+1===w.children.length){P.pop();continue}const k=w.children[++P.at(-1)[1]];if(k===null)continue;const{name:x}=k;if(x==="#text"){const A=document.createTextNode(k.value);R.push(A),O.append(A);continue}const m=(F=k==null?void 0:k.attributes)!=null&&F.xmlns?document.createElementNS(k.attributes.xmlns,x):document.createElement(x);if(O.append(m),k.attributes&&this.setAttributes({html:m,element:k,storage:b,intent:l,linkService:d}),k.children&&k.children.length>0)P.push([k,-1,m]);else if(k.value){const A=document.createTextNode(k.value);n.XfaText.shouldBuildText(x)&&R.push(A),m.append(A)}}for(const w of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:R}}static update(o){const b=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=b,o.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{var g,l,E,P,C,R,F,w,T,O,k,x,m,A,U,$n,_,Un,L,Hn,st,Vn,ot,fn,mt,Wn,yt,pn,Rt,zn,j,Gn,f,qn,y,Xn,N,Yn,Y,le,v,gn,V,Oe,K,Ie,St,ge,bt,mn,J,De,ct,Kn,Et,_n,Lt,Jn,Wt,Qn,Vt,bn,vt,Le,nt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),i=s(4),r=s(29),o=s(6),b=s(5);const Tt=class Tt extends i.AnnotationEditor{constructor(ht){super({...ht,name:"inkEditor"});G(this,U);G(this,_);G(this,L);G(this,st);G(this,ot);G(this,mt);G(this,yt);G(this,Rt);G(this,j);G(this,f);G(this,y);G(this,N);G(this,Y);G(this,v);G(this,V);G(this,K);G(this,St);G(this,bt);G(this,J);G(this,Wt);G(this,Vt);G(this,vt);G(this,nt);G(this,g,0);G(this,l,0);G(this,E,this.canvasPointermove.bind(this));G(this,P,this.canvasPointerleave.bind(this));G(this,C,this.canvasPointerup.bind(this));G(this,R,this.canvasPointerdown.bind(this));G(this,F,new Path2D);G(this,w,!1);G(this,T,!1);G(this,O,!1);G(this,k,null);G(this,x,0);G(this,m,0);G(this,A,null);this.color=ht.color||null,this.thickness=ht.thickness||null,this.opacity=ht.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ht){i.AnnotationEditor.initialize(ht,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:Tt._defaultThickness=Mt;break;case n.AnnotationEditorParamsType.INK_COLOR:Tt._defaultColor=Mt;break;case n.AnnotationEditorParamsType.INK_OPACITY:Tt._defaultOpacity=Mt/100;break}}updateParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:it(this,U,$n).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_COLOR:it(this,_,Un).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_OPACITY:it(this,L,Hn).call(this,Mt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Tt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Tt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(it(this,V,Oe).call(this),it(this,K,Ie).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,St,ge).call(this)),it(this,nt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,k).disconnect(),gt(this,k,null),super.remove())}setParent(ht){!this.parent&&ht?this._uiManager.removeShouldRescale(this):this.parent&&ht===null&&this._uiManager.addShouldRescale(this),super.setParent(ht)}onScaleChanging(){const[ht,Mt]=this.parentDimensions,Ut=this.width*ht,Ft=this.height*Mt;this.setDimensions(Ut,Ft)}enableEditMode(){a(this,w)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,R)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,R)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,w)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,w,!0),this.div.classList.add("disabled"),it(this,nt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),this.enableEditMode())}canvasPointerdown(ht){ht.button!==0||!this.isInEditMode()||a(this,w)||(this.setInForeground(),ht.preventDefault(),ht.type!=="mouse"&&this.div.focus(),it(this,mt,Wn).call(this,ht.offsetX,ht.offsetY))}canvasPointermove(ht){ht.preventDefault(),it(this,yt,pn).call(this,ht.offsetX,ht.offsetY)}canvasPointerup(ht){ht.preventDefault(),it(this,v,gn).call(this,ht)}canvasPointerleave(ht){it(this,v,gn).call(this,ht)}get isResizable(){return!this.isEmpty()&&a(this,w)}render(){if(this.div)return this.div;let ht,Mt;this.width&&(ht=this.x,Mt=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var Pt;return(Pt=this.div)==null?void 0:Pt.setAttribute("aria-label",Zt)});const[Ut,Ft,Ht,zt]=it(this,st,Vn).call(this);if(this.setAt(Ut,Ft,0,0),this.setDims(Ht,zt),it(this,V,Oe).call(this),this.width){const[Zt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*Pt),this.setAt(ht*Zt,Mt*Pt,this.width*Zt,this.height*Pt),gt(this,O,!0),it(this,St,ge).call(this),this.setDims(this.width*Zt,this.height*Pt),it(this,Y,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,K,Ie).call(this),this.div}setDimensions(ht,Mt){const Ut=Math.round(ht),Ft=Math.round(Mt);if(a(this,x)===Ut&&a(this,m)===Ft)return;gt(this,x,Ut),gt(this,m,Ft),this.canvas.style.visibility="hidden";const[Ht,zt]=this.parentDimensions;this.width=ht/Ht,this.height=Mt/zt,this.fixAndSetPosition(),a(this,w)&&it(this,bt,mn).call(this,ht,Mt),it(this,St,ge).call(this),it(this,Y,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ht,Mt,Ut){var et,lt,_t;if(ht instanceof r.InkAnnotationElement)return null;const Ft=super.deserialize(ht,Mt,Ut);Ft.thickness=ht.thickness,Ft.color=n.Util.makeHexColor(...ht.color),Ft.opacity=ht.opacity;const[Ht,zt]=Ft.pageDimensions,Zt=Ft.width*Ht,Pt=Ft.height*zt,Jt=Ft.parentScale,$t=ht.thickness/2;gt(Ft,w,!0),gt(Ft,x,Math.round(Zt)),gt(Ft,m,Math.round(Pt));const{paths:W,rect:c,rotation:D}=ht;for(let{bezier:Ct}of W){Ct=it(et=Tt,Lt,Jn).call(et,Ct,c,D);const It=[];Ft.paths.push(It);let Ot=Jt*(Ct[0]-$t),Xt=Jt*(Ct[1]-$t);for(let Bt=2,qt=Ct.length;Bt<qt;Bt+=6){const Kt=Jt*(Ct[Bt]-$t),Qt=Jt*(Ct[Bt+1]-$t),te=Jt*(Ct[Bt+2]-$t),re=Jt*(Ct[Bt+3]-$t),ie=Jt*(Ct[Bt+4]-$t),ae=Jt*(Ct[Bt+5]-$t);It.push([[Ot,Xt],[Kt,Qt],[te,re],[ie,ae]]),Ot=ie,Xt=ae}const Nt=it(this,ct,Kn).call(this,It);Ft.bezierPath2D.push(Nt)}const z=it(lt=Ft,Vt,bn).call(lt);return gt(Ft,l,Math.max(i.AnnotationEditor.MIN_SIZE,z[2]-z[0])),gt(Ft,g,Math.max(i.AnnotationEditor.MIN_SIZE,z[3]-z[1])),it(_t=Ft,bt,mn).call(_t,Zt,Pt),Ft}serialize(){if(this.isEmpty())return null;const ht=this.getRect(0,0),Mt=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:Mt,thickness:this.thickness,opacity:this.opacity,paths:it(this,Wt,Qn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ht),pageIndex:this.pageIndex,rect:ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};g=new WeakMap,l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakMap,O=new WeakMap,k=new WeakMap,x=new WeakMap,m=new WeakMap,A=new WeakMap,U=new WeakSet,$n=function(ht){const Mt=this.thickness;this.addCommands({cmd:()=>{this.thickness=ht,it(this,nt,me).call(this)},undo:()=>{this.thickness=Mt,it(this,nt,me).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,Un=function(ht){const Mt=this.color;this.addCommands({cmd:()=>{this.color=ht,it(this,Y,le).call(this)},undo:()=>{this.color=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,Hn=function(ht){ht/=100;const Mt=this.opacity;this.addCommands({cmd:()=>{this.opacity=ht,it(this,Y,le).call(this)},undo:()=>{this.opacity=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},st=new WeakSet,Vn=function(){const{parentRotation:ht,parentDimensions:[Mt,Ut]}=this;switch(ht){case 90:return[0,Ut,Ut,Mt];case 180:return[Mt,Ut,Mt,Ut];case 270:return[Mt,0,Ut,Mt];default:return[0,0,Mt,Ut]}},ot=new WeakSet,fn=function(){const{ctx:ht,color:Mt,opacity:Ut,thickness:Ft,parentScale:Ht,scaleFactor:zt}=this;ht.lineWidth=Ft*Ht/zt,ht.lineCap="round",ht.lineJoin="round",ht.miterLimit=10,ht.strokeStyle=`${Mt}${(0,b.opacityToHex)(Ut)}`},mt=new WeakSet,Wn=function(ht,Mt){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,P)),this.canvas.addEventListener("pointermove",a(this,E)),this.canvas.addEventListener("pointerup",a(this,C)),this.canvas.removeEventListener("pointerdown",a(this,R)),this.isEditing=!0,a(this,O)||(gt(this,O,!0),it(this,St,ge).call(this),this.thickness||(this.thickness=Tt._defaultThickness),this.color||(this.color=Tt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Tt._defaultOpacity)),this.currentPath.push([ht,Mt]),gt(this,T,!1),it(this,ot,fn).call(this),gt(this,A,()=>{it(this,f,qn).call(this),a(this,A)&&window.requestAnimationFrame(a(this,A))}),window.requestAnimationFrame(a(this,A))},yt=new WeakSet,pn=function(ht,Mt){const[Ut,Ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&ht===Ut&&Mt===Ft)return;const Ht=this.currentPath;let zt=a(this,F);if(Ht.push([ht,Mt]),gt(this,T,!0),Ht.length<=2){zt.moveTo(...Ht[0]),zt.lineTo(ht,Mt);return}Ht.length===3&&(gt(this,F,zt=new Path2D),zt.moveTo(...Ht[0])),it(this,y,Xn).call(this,zt,...Ht.at(-3),...Ht.at(-2),ht,Mt)},Rt=new WeakSet,zn=function(){if(this.currentPath.length===0)return;const ht=this.currentPath.at(-1);a(this,F).lineTo(...ht)},j=new WeakSet,Gn=function(ht,Mt){gt(this,A,null),ht=Math.min(Math.max(ht,0),this.canvas.width),Mt=Math.min(Math.max(Mt,0),this.canvas.height),it(this,yt,pn).call(this,ht,Mt),it(this,Rt,zn).call(this);let Ut;if(this.currentPath.length!==1)Ut=it(this,N,Yn).call(this);else{const Pt=[ht,Mt];Ut=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const Ft=a(this,F),Ht=this.currentPath;this.currentPath=[],gt(this,F,new Path2D);const zt=()=>{this.allRawPaths.push(Ht),this.paths.push(Ut),this.bezierPath2D.push(Ft),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,V,Oe).call(this),it(this,K,Ie).call(this)),it(this,nt,me).call(this))};this.addCommands({cmd:zt,undo:Zt,mustExec:!0})},f=new WeakSet,qn=function(){if(!a(this,T))return;gt(this,T,!1);const ht=Math.ceil(this.thickness*this.parentScale),Mt=this.currentPath.slice(-3),Ut=Mt.map(zt=>zt[0]),Ft=Mt.map(zt=>zt[1]);Math.min(...Ut)-ht,Math.max(...Ut)+ht,Math.min(...Ft)-ht,Math.max(...Ft)+ht;const{ctx:Ht}=this;Ht.save(),Ht.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zt of this.bezierPath2D)Ht.stroke(zt);Ht.stroke(a(this,F)),Ht.restore()},y=new WeakSet,Xn=function(ht,Mt,Ut,Ft,Ht,zt,Zt){const Pt=(Mt+Ft)/2,Jt=(Ut+Ht)/2,$t=(Ft+zt)/2,W=(Ht+Zt)/2;ht.bezierCurveTo(Pt+2*(Ft-Pt)/3,Jt+2*(Ht-Jt)/3,$t+2*(Ft-$t)/3,W+2*(Ht-W)/3,$t,W)},N=new WeakSet,Yn=function(){const ht=this.currentPath;if(ht.length<=2)return[[ht[0],ht[0],ht.at(-1),ht.at(-1)]];const Mt=[];let Ut,[Ft,Ht]=ht[0];for(Ut=1;Ut<ht.length-2;Ut++){const[c,D]=ht[Ut],[z,et]=ht[Ut+1],lt=(c+z)/2,_t=(D+et)/2,Ct=[Ft+2*(c-Ft)/3,Ht+2*(D-Ht)/3],It=[lt+2*(c-lt)/3,_t+2*(D-_t)/3];Mt.push([[Ft,Ht],Ct,It,[lt,_t]]),[Ft,Ht]=[lt,_t]}const[zt,Zt]=ht[Ut],[Pt,Jt]=ht[Ut+1],$t=[Ft+2*(zt-Ft)/3,Ht+2*(Zt-Ht)/3],W=[Pt+2*(zt-Pt)/3,Jt+2*(Zt-Jt)/3];return Mt.push([[Ft,Ht],$t,W,[Pt,Jt]]),Mt},Y=new WeakSet,le=function(){if(this.isEmpty()){it(this,J,De).call(this);return}it(this,ot,fn).call(this);const{canvas:ht,ctx:Mt}=this;Mt.setTransform(1,0,0,1,0,0),Mt.clearRect(0,0,ht.width,ht.height),it(this,J,De).call(this);for(const Ut of this.bezierPath2D)Mt.stroke(Ut)},v=new WeakSet,gn=function(ht){this.canvas.removeEventListener("pointerleave",a(this,P)),this.canvas.removeEventListener("pointermove",a(this,E)),this.canvas.removeEventListener("pointerup",a(this,C)),this.canvas.addEventListener("pointerdown",a(this,R)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),it(this,j,Gn).call(this,ht.offsetX,ht.offsetY),this.addToAnnotationStorage(),this.setInBackground()},V=new WeakSet,Oe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ht=>{var Mt;return(Mt=this.canvas)==null?void 0:Mt.setAttribute("aria-label",ht)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,Ie=function(){gt(this,k,new ResizeObserver(ht=>{const Mt=ht[0].contentRect;Mt.width&&Mt.height&&this.setDimensions(Mt.width,Mt.height)})),a(this,k).observe(this.div)},St=new WeakSet,ge=function(){if(!a(this,O))return;const[ht,Mt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ht),this.canvas.height=Math.ceil(this.height*Mt),it(this,J,De).call(this)},bt=new WeakSet,mn=function(ht,Mt){const Ut=it(this,vt,Le).call(this),Ft=(ht-Ut)/a(this,l),Ht=(Mt-Ut)/a(this,g);this.scaleFactor=Math.min(Ft,Ht)},J=new WeakSet,De=function(){const ht=it(this,vt,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ht,this.translationY*this.scaleFactor+ht)},ct=new WeakSet,Kn=function(ht){const Mt=new Path2D;for(let Ut=0,Ft=ht.length;Ut<Ft;Ut++){const[Ht,zt,Zt,Pt]=ht[Ut];Ut===0&&Mt.moveTo(...Ht),Mt.bezierCurveTo(zt[0],zt[1],Zt[0],Zt[1],Pt[0],Pt[1])}return Mt},Et=new WeakSet,_n=function(ht,Mt,Ut){const[Ft,Ht,zt,Zt]=Mt;switch(Ut){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]+=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=ht[Pt+1]+Ft,ht[Pt+1]=$t+Ht}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]+=Ht;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=zt-ht[Pt+1],ht[Pt+1]=Zt-$t}break;default:throw new Error("Invalid rotation")}return ht},Lt=new WeakSet,Jn=function(ht,Mt,Ut){const[Ft,Ht,zt,Zt]=Mt;switch(Ut){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]-=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=ht[Pt+1]-Ht,ht[Pt+1]=$t-Ft}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]-=Ht;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=Zt-ht[Pt+1],ht[Pt+1]=zt-$t}break;default:throw new Error("Invalid rotation")}return ht},Wt=new WeakSet,Qn=function(ht,Mt,Ut,Ft){var Jt,$t;const Ht=[],zt=this.thickness/2,Zt=ht*Mt+zt,Pt=ht*Ut+zt;for(const W of this.paths){const c=[],D=[];for(let z=0,et=W.length;z<et;z++){const[lt,_t,Ct,It]=W[z],Ot=ht*lt[0]+Zt,Xt=ht*lt[1]+Pt,Nt=ht*_t[0]+Zt,Bt=ht*_t[1]+Pt,qt=ht*Ct[0]+Zt,Kt=ht*Ct[1]+Pt,Qt=ht*It[0]+Zt,te=ht*It[1]+Pt;z===0&&(c.push(Ot,Xt),D.push(Ot,Xt)),c.push(Nt,Bt,qt,Kt,Qt,te),D.push(Nt,Bt),z===et-1&&D.push(Qt,te)}Ht.push({bezier:it(Jt=Tt,Et,_n).call(Jt,c,Ft,this.rotation),points:it($t=Tt,Et,_n).call($t,D,Ft,this.rotation)})}return Ht},Vt=new WeakSet,bn=function(){let ht=1/0,Mt=-1/0,Ut=1/0,Ft=-1/0;for(const Ht of this.paths)for(const[zt,Zt,Pt,Jt]of Ht){const $t=n.Util.bezierBoundingBox(...zt,...Zt,...Pt,...Jt);ht=Math.min(ht,$t[0]),Ut=Math.min(Ut,$t[1]),Mt=Math.max(Mt,$t[2]),Ft=Math.max(Ft,$t[3])}return[ht,Ut,Mt,Ft]},vt=new WeakSet,Le=function(){return a(this,w)?Math.ceil(this.thickness*this.parentScale):0},nt=new WeakSet,me=function(ht=!1){if(this.isEmpty())return;if(!a(this,w)){it(this,Y,le).call(this);return}const Mt=it(this,Vt,bn).call(this),Ut=it(this,vt,Le).call(this);gt(this,l,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),gt(this,g,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1]));const Ft=Math.ceil(Ut+a(this,l)*this.scaleFactor),Ht=Math.ceil(Ut+a(this,g)*this.scaleFactor),[zt,Zt]=this.parentDimensions;this.width=Ft/zt,this.height=Ht/Zt,this.setAspectRatio(Ft,Ht);const Pt=this.translationX,Jt=this.translationY;this.translationX=-Mt[0],this.translationY=-Mt[1],it(this,St,ge).call(this),it(this,Y,le).call(this),gt(this,x,Ft),gt(this,m,Ht),this.setDims(Ft,Ht);const $t=ht?Ut/this.scaleFactor/2:0;this.translate(Pt-this.translationX-$t,Jt-this.translationY-$t)},G(Tt,ct),G(Tt,Et),G(Tt,Lt),se(Tt,"_defaultColor",null),se(Tt,"_defaultOpacity",1),se(Tt,"_defaultThickness",1),se(Tt,"_type","ink");let d=Tt;e.InkEditor=d},(t,e,s)=>{var d,g,l,E,P,C,R,F,w,T,O,Ee,x,we,A,Ne,M,yn,B,Zn,Q,ts,$,vn,pt,Be,X,es;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),i=s(4),r=s(6),o=s(29);const wt=class wt extends i.AnnotationEditor{constructor(j){super({...j,name:"stampEditor"});G(this,O);G(this,x);G(this,A);G(this,M);G(this,B);G(this,Q);G(this,$);G(this,pt);G(this,X);G(this,d,null);G(this,g,null);G(this,l,null);G(this,E,null);G(this,P,null);G(this,C,null);G(this,R,null);G(this,F,null);G(this,w,!1);G(this,T,!1);gt(this,E,j.bitmapUrl),gt(this,P,j.bitmapFile)}static initialize(j){i.AnnotationEditor.initialize(j)}static get supportedTypes(){const j=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",j.map(h=>`image/${h}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(j){return this.supportedTypes.includes(j)}static paste(j,h){h.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:j.getAsFile()})}remove(){var j,h;a(this,g)&&(gt(this,d,null),this._uiManager.imageManager.deleteId(a(this,g)),(j=a(this,C))==null||j.remove(),gt(this,C,null),(h=a(this,R))==null||h.disconnect(),gt(this,R,null)),super.remove()}rebuild(){if(!this.parent){a(this,g)&&it(this,A,Ne).call(this);return}super.rebuild(),this.div!==null&&(a(this,g)&&it(this,A,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,l)||a(this,d)||a(this,E)||a(this,P))}get isResizable(){return!0}render(){if(this.div)return this.div;let j,h;if(this.width&&(j=this.x,h=this.y),super.render(),this.div.hidden=!0,a(this,d)?it(this,M,yn).call(this):it(this,A,Ne).call(this),this.width){const[f,u]=this.parentDimensions;this.setAt(j*f,h*u,this.width*f,this.height*u)}return this.div}static deserialize(j,h,f){if(j instanceof o.StampAnnotationElement)return null;const u=super.deserialize(j,h,f),{rect:y,bitmapUrl:S,bitmapId:N,isSvg:H,accessibilityData:Y}=j;N&&f.imageManager.isValidId(N)?gt(u,g,N):gt(u,E,S),gt(u,w,H);const[dt,v]=u.pageDimensions;return u.width=(y[2]-y[0])/dt,u.height=(y[3]-y[1])/v,Y&&(u.altTextData=Y),u}serialize(j=!1,h=null){if(this.isEmpty())return null;const f={annotationType:n.AnnotationEditorType.STAMP,bitmapId:a(this,g),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,w),structTreeParentId:this._structTreeParentId};if(j)return f.bitmapUrl=it(this,pt,Be).call(this,!0),f.accessibilityData=this.altTextData,f;const{decorative:u,altText:y}=this.altTextData;if(!u&&y&&(f.accessibilityData={type:"Figure",alt:y}),h===null)return f;h.stamps||(h.stamps=new Map);const S=a(this,w)?(f.rect[2]-f.rect[0])*(f.rect[3]-f.rect[1]):null;if(!h.stamps.has(a(this,g)))h.stamps.set(a(this,g),{area:S,serialized:f}),f.bitmap=it(this,pt,Be).call(this,!1);else if(a(this,w)){const N=h.stamps.get(a(this,g));S>N.area&&(N.area=S,N.serialized.bitmap.close(),N.serialized.bitmap=it(this,pt,Be).call(this,!1))}return f}};d=new WeakMap,g=new WeakMap,l=new WeakMap,E=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,F=new WeakMap,w=new WeakMap,T=new WeakMap,O=new WeakSet,Ee=function(j,h=!1){if(!j){this.remove();return}gt(this,d,j.bitmap),h||(gt(this,g,j.id),gt(this,w,j.isSvg)),it(this,M,yn).call(this)},x=new WeakSet,we=function(){gt(this,l,null),this._uiManager.enableWaiting(!1),a(this,C)&&this.div.focus()},A=new WeakSet,Ne=function(){if(a(this,g)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,g)).then(h=>it(this,O,Ee).call(this,h,!0)).finally(()=>it(this,x,we).call(this));return}if(a(this,E)){const h=a(this,E);gt(this,E,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromUrl(h).then(f=>it(this,O,Ee).call(this,f)).finally(()=>it(this,x,we).call(this)));return}if(a(this,P)){const h=a(this,P);gt(this,P,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromFile(h).then(f=>it(this,O,Ee).call(this,f)).finally(()=>it(this,x,we).call(this)));return}const j=document.createElement("input");j.type="file",j.accept=wt.supportedTypesStr,gt(this,l,new Promise(h=>{j.addEventListener("change",async()=>{if(!j.files||j.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const f=await this._uiManager.imageManager.getFromFile(j.files[0]);it(this,O,Ee).call(this,f)}h()}),j.addEventListener("cancel",()=>{this.remove(),h()})}).finally(()=>it(this,x,we).call(this))),j.click()},M=new WeakSet,yn=function(){const{div:j}=this;let{width:h,height:f}=a(this,d);const[u,y]=this.pageDimensions,S=.75;if(this.width)h=this.width*u,f=this.height*y;else if(h>S*u||f>S*y){const dt=Math.min(S*u/h,S*y/f);h*=dt,f*=dt}const[N,H]=this.parentDimensions;this.setDims(h*N/u,f*H/y),this._uiManager.enableWaiting(!1);const Y=gt(this,C,document.createElement("canvas"));j.append(Y),j.hidden=!1,it(this,$,vn).call(this,h,f),it(this,X,es).call(this),a(this,T)||(this.parent.addUndoableEditor(this),gt(this,T,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},B=new WeakSet,Zn=function(j,h){var S;const[f,u]=this.parentDimensions;this.width=j/f,this.height=h/u,this.setDims(j,h),(S=this._initialOptions)!=null&&S.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,F)!==null&&clearTimeout(a(this,F)),gt(this,F,setTimeout(()=>{gt(this,F,null),it(this,$,vn).call(this,j,h)},200))},Q=new WeakSet,ts=function(j,h){const{width:f,height:u}=a(this,d);let y=f,S=u,N=a(this,d);for(;y>2*j||S>2*h;){const H=y,Y=S;y>2*j&&(y=y>=16384?Math.floor(y/2)-1:Math.ceil(y/2)),S>2*h&&(S=S>=16384?Math.floor(S/2)-1:Math.ceil(S/2));const dt=new OffscreenCanvas(y,S);dt.getContext("2d").drawImage(N,0,0,H,Y,0,0,y,S),N=dt.transferToImageBitmap()}return N},$=new WeakSet,vn=function(j,h){j=Math.ceil(j),h=Math.ceil(h);const f=a(this,C);if(!f||f.width===j&&f.height===h)return;f.width=j,f.height=h;const u=a(this,w)?a(this,d):it(this,Q,ts).call(this,j,h),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(u,0,0,u.width,u.height,0,0,j,h)},pt=new WeakSet,Be=function(j){if(j){if(a(this,w)){const u=this._uiManager.imageManager.getSvgUrl(a(this,g));if(u)return u}const h=document.createElement("canvas");return{width:h.width,height:h.height}=a(this,d),h.getContext("2d").drawImage(a(this,d),0,0),h.toDataURL()}if(a(this,w)){const[h,f]=this.pageDimensions,u=Math.round(this.width*h*r.PixelsPerInch.PDF_TO_CSS_UNITS),y=Math.round(this.height*f*r.PixelsPerInch.PDF_TO_CSS_UNITS),S=new OffscreenCanvas(u,y);return S.getContext("2d").drawImage(a(this,d),0,0,a(this,d).width,a(this,d).height,0,0,u,y),S.transferToImageBitmap()}return structuredClone(a(this,d))},X=new WeakSet,es=function(){gt(this,R,new ResizeObserver(j=>{const h=j[0].contentRect;h.width&&h.height&&it(this,B,Zn).call(this,h.width,h.height)})),a(this,R).observe(this.div)},se(wt,"_type","stamp");let b=wt;e.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),b=__w_pdfjs_require__(29),d=__w_pdfjs_require__(14),g=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(s,n){n()})(commonjsGlobal,function(){function s(g,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function n(g,l,E){var P=new XMLHttpRequest;P.open("GET",g),P.responseType="blob",P.onload=function(){d(P.response,l,E)},P.onerror=function(){console.error("could not download file")},P.send()}function i(g){var l=new XMLHttpRequest;l.open("HEAD",g,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,b=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!b?function(g,l,E){var P=o.URL||o.webkitURL,C=document.createElement("a");l=l||g.name||"download",C.download=l,C.rel="noopener",typeof g=="string"?(C.href=g,C.origin===location.origin?r(C):i(C.href)?n(g,l,E):r(C,C.target="_blank")):(C.href=P.createObjectURL(g),setTimeout(function(){P.revokeObjectURL(C.href)},4e4),setTimeout(function(){r(C)},0))}:"msSaveOrOpenBlob"in navigator?function(g,l,E){if(l=l||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(s(g,E),l);else if(i(g))n(g,l,E);else{var P=document.createElement("a");P.href=g,P.target="_blank",setTimeout(function(){r(P)})}}:function(g,l,E,P){if(P=P||open("","_blank"),P&&(P.document.title=P.document.body.innerText="downloading..."),typeof g=="string")return n(g,l,E);var C=g.type==="application/octet-stream",R=/constructor/i.test(o.HTMLElement)||o.safari,F=/CriOS\/[\d]+/.test(navigator.userAgent);if((F||C&&R||b)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var k=w.result;k=F?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),P?P.location.href=k:location=k,P=null},w.readAsDataURL(g)}else{var T=o.URL||o.webkitURL,O=T.createObjectURL(g);P?P.location=O:location.href=O,P=null,setTimeout(function(){T.revokeObjectURL(O)},4e4)}});o.saveAs=d.saveAs=d,t.exports=d})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function hexToRgba(t,e){const s=t.replace("#",""),n=parseInt(s.substring(0,2),16),i=parseInt(s.substring(2,4),16),r=parseInt(s.substring(4,6),16);return`rgba(${n}, ${i}, ${r}, ${e/100})`}function generateCanvas(t,e,s){const{width:n,height:i,words:r,compression:o}=t,b=document.createElement("canvas"),d=b.getContext("2d");return b.width=s?e.width:n,b.height=s?e.height:i,d.drawImage(e,0,0,b.width,b.height),r.trim().length>0&&addWaterMark(t,d),{src:b.toDataURL("image/jpeg",o),newCanvas:b}}function addWaterMark(t,e){const{width:s,height:n,words:i,fontSize:r,color:o,opacity:b,rotate:d}=t;let{row:g,col:l,startX:E,startY:P,offsetX:C,offsetY:R}=t;const F=i.length*r*.6,w=r*1.3;C===48&&R===48&&(C=Math.max(30,Math.min(80,s/10)),R=Math.max(30,Math.min(80,n/10)));const T=F+C,O=w+R,k=Math.sqrt(s*s+n*n),x=Math.ceil(k/T)+3,m=Math.ceil(k/O)+3;g===7&&l===7&&(g=Math.max(m,8),l=Math.max(x,8)),E===-100&&P===0&&(E=-Math.abs(k*.3),P=-Math.abs(k*.1)),e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,s,n),e.rotate(parseInt(String(d))*Math.PI/180),e.fillStyle=hexToRgba(o,b),e.font=`normal ${r}px Arial`,Array.from({length:g}).forEach((A,U)=>{Array.from({length:l}).forEach((M,_)=>{if(i.includes(`
`))multipleWords(e,U,_,i,r,E,P,C,R);else{const B=E+_*(i.length*r+C),L=P+U*(R+r);e.fillText(i,B,L)}})})}function multipleWords(t,e,s,n,i,r,o,b,d){const g=n.split(`
`),l=g.length,E=Math.max(...g.map(P=>P.length));for(let P=0;P<l;P++){const C=+r+s*(E*i+b)+(E-g[P].length)/2*i,R=+o+e*d+i*1.3*(P+l*e);t.fillText(g[P],C,R)}}function downloadImage(t,e,s){const n=new Image;n.src=t,n.onload=()=>{const i=document.createElement("canvas");i.width=+e.width,i.height=+e.height;const r=i.getContext("2d");r==null||r.drawImage(n,0,0);const o=i.toDataURL("image/png"),b=dataURLToBlob(o),d=document.createElement("a");d.href=URL.createObjectURL(b),d.download=s,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}function dataURLToBlob(t){const e=t.split(";base64,"),s=e[0].split(":")[1],n=window.atob(e[1]),i=n.length,r=new Uint8Array(i);for(let o=0;o<i;++o)r[o]=n.charCodeAt(o);return new Blob([r],{type:s})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(t,e,s,n,i){const r=pdfExports.getDocument({url:t,disableRange:!0});imgData.length=0,r.promise.then(o=>{s.value&&(s.value.innerHTML="");const b=o.numPages;for(let d=1;d<=b;d++)o.getPage(d).then(g=>{const l=document.createElement("canvas"),E=l.getContext("2d"),P=g.getViewport({scale:1});l.width=P.width,l.height=P.height,i&&(e.width=l.width,e.height=l.height);const C={canvasContext:E,viewport:P};g.render(C).promise.then(function(){const{newCanvas:F,src:w}=generateCanvas(e,l,i);s.value.appendChild(F),imgData.push({src:w,width:l.width,height:l.height}),imgData.length===b&&(n.value=!1)})})})}function img2Pdf(t,e){const s={autoFirstPage:!1,compress:!1},n=new PDFDocument(s),i=n.pipe(blobStream());for(let r=0;r<imgData.length;r++){const{src:o,width:b,height:d}=imgData[r];n.addPage({size:[b,d]}),n.image(o,0,0)}n.end(),i.on("finish",function(){var r=i.toBlob("application/pdf");FileSaver_minExports.saveAs(r,t),e.value=!1})}const _hoisted_1$5={class:"flex gap-2 mb-4"},_hoisted_2$4={class:"inline-flex items-center gap-1.5 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors"},_hoisted_3$3=["disabled"],_hoisted_4$3={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-3 min-h-[150px] sm:min-h-[200px] lg:min-h-[250px] flex items-center justify-center"},_hoisted_5$2={key:0,class:"flex items-center justify-center"},_hoisted_6$1=["src"],_hoisted_7$1={key:1,class:"overflow-auto w-full"},_hoisted_8$1={key:2,class:"flex flex-col items-center justify-center cursor-pointer group"},_hoisted_9$1={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm"},_sfc_main$6=defineComponent({__name:"TheMain",props:{config:null},setup(t){let e;const s=ref(),n=ref(),i=ref(""),r=ref(""),o=ref(!1),b=ref();let d=!1;watch(t.config,g),watch(o,O=>{!O&&d&&(d=!1)});function g(){l=!1,e&&(n.value.src=generateCanvas(t.config,e,l).src),r.value&&!d&&loadPdf(r.value,t.config,b,o,l)}let l=!1,E="",P="";function C(O){l=!0,R();const k=O.target.files;if(k&&k.length>0){const x=k[0];E=x.type,P=x.name,E.startsWith("image/")&&F(x),E==="application/pdf"&&(o.value=!0,d=!0,w(x))}}function R(){e&&(e=null),i.value&&(i.value=""),r.value&&(r.value=""),b.value&&(b.value.innerHTML="")}function F(O){const k=new FileReader;k.readAsDataURL(O),k.onload=()=>{const x=new Image;x.src=k.result,e=x,x.onload=()=>{t.config.width=x.width,t.config.height=x.height,n.value.src=generateCanvas(t.config,x,l).src}},k.onloadend=()=>{i.value=k.result}}function w(O){const k=new FileReader;k.readAsDataURL(O),k.onloadend=()=>{r.value=k.result,loadPdf(r.value,t.config,b,o,l)}}function T(){if(!(i.value===""&&r.value==="")){if(E.startsWith("image/")&&e){const O=generateCanvas(t.config,e,l).src;downloadImage(O,t.config,P)}E==="application/pdf"&&img2Pdf(P,o)}}return(O,k)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("label",_hoisted_2$4,[k[0]||(k[0]=createBaseVNode("span",{"i-carbon-upload":"",class:"text-base"},null,-1)),k[1]||(k[1]=createBaseVNode("span",null,"Load",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:C},null,32)]),createBaseVNode("button",{class:"inline-flex items-center gap-1.5 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:unref(i)===""&&unref(r)==="",onClick:T},[...k[2]||(k[2]=[createBaseVNode("span",{"i-carbon-download":"",class:"text-base"},null,-1),createBaseVNode("span",null,"Download",-1)])],8,_hoisted_3$3)]),createBaseVNode("div",_hoisted_4$3,[unref(i)?(openBlock(),createElementBlock("div",_hoisted_5$2,[createBaseVNode("img",{ref_key:"preview",ref:n,src:unref(i),class:"max-w-full h-auto rounded-lg shadow-xl",style:{"max-height":"70vh"}},null,8,_hoisted_6$1),createBaseVNode("canvas",{ref_key:"canvas",ref:s,class:"hidden"},null,512)])):unref(r)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",{ref_key:"wrap",ref:b,class:"flex flex-wrap gap-3 justify-center [&>canvas]:rounded-lg [&>canvas]:shadow-xl [&>canvas]:max-w-full [&>canvas]:h-auto"},null,512)])):(openBlock(),createElementBlock("label",_hoisted_8$1,[k[3]||(k[3]=createBaseVNode("div",{class:"p-3 rounded-full bg-slate-700/50 mb-2 group-hover:bg-violet-600/20 transition-colors"},[createBaseVNode("div",{"i-carbon-document-add":"",class:"text-2xl text-violet-400"})],-1)),k[4]||(k[4]=createBaseVNode("p",{class:"text-xs text-gray-300 font-medium"},"Drop file here or click to browse",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:C},null,32)]))]),unref(o)?(openBlock(),createElementBlock("div",_hoisted_9$1,[...k[5]||(k[5]=[createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"w-10 h-10 border-3 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),createBaseVNode("p",{class:"text-sm text-gray-300"},"Processing...")],-1)])])):createCommentVNode("",!0)]))}});var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,e){function s(...n){return new Promise((i,r)=>{Promise.resolve(t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(r)})}return s}const bypassFilter=t=>t();function pausableFilter(t=bypassFilter){const e=ref(!0);function s(){e.value=!1}function n(){e.value=!0}const i=(...r)=>{e.value&&t(...r)};return{isActive:readonly(e),pause:s,resume:n,eventFilter:i}}function identity(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function resolveRef(t){return typeof t=="function"?computed(t):ref(t)}function tryOnMounted(t,e=!0){getCurrentInstance()?onMounted(t):e?t():nextTick(t)}function useToggle(t=!1,e={}){const{truthyValue:s=!0,falsyValue:n=!1}=e,i=isRef(t),r=ref(t);function o(b){if(arguments.length)return r.value=b,r.value;{const d=resolveUnref(s);return r.value=r.value===d?resolveUnref(n):d,r.value}}return i?o:[r,o]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(t,e)=>{var s={};for(var n in t)__hasOwnProp$6.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&__getOwnPropSymbols$6)for(var n of __getOwnPropSymbols$6(t))e.indexOf(n)<0&&__propIsEnum$6.call(t,n)&&(s[n]=t[n]);return s};function watchWithFilter(t,e,s={}){const n=s,{eventFilter:i=bypassFilter}=n,r=__objRest$5(n,["eventFilter"]);return watch(t,createFilterWrapper(i,e),r)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(t,e,s)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$2=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$2.call(e,s)&&__defNormalProp$2(t,s,e[s]);if(__getOwnPropSymbols$2)for(var s of __getOwnPropSymbols$2(e))__propIsEnum$2.call(e,s)&&__defNormalProp$2(t,s,e[s]);return t},__spreadProps$2=(t,e)=>__defProps$2(t,__getOwnPropDescs$2(e)),__objRest$1=(t,e)=>{var s={};for(var n in t)__hasOwnProp$2.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(t))e.indexOf(n)<0&&__propIsEnum$2.call(t,n)&&(s[n]=t[n]);return s};function watchPausable(t,e,s={}){const n=s,{eventFilter:i}=n,r=__objRest$1(n,["eventFilter"]),{eventFilter:o,pause:b,resume:d,isActive:g}=pausableFilter(i);return{stop:watchWithFilter(t,e,__spreadProps$2(__spreadValues$2({},r),{eventFilter:o})),pause:b,resume:d,isActive:g}}function unrefElement(t){var e;const s=resolveUnref(t);return(e=s==null?void 0:s.$el)!=null?e:s}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let e,s,n,i;if(isString(t[0])||Array.isArray(t[0])?([s,n,i]=t,e=defaultWindow):[e,s,n,i]=t,!e)return noop;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const r=[],o=()=>{r.forEach(l=>l()),r.length=0},b=(l,E,P,C)=>(l.addEventListener(E,P,C),()=>l.removeEventListener(E,P,C)),d=watch(()=>[unrefElement(e),resolveUnref(i)],([l,E])=>{o(),l&&r.push(...s.flatMap(P=>n.map(C=>b(l,P,C,E))))},{immediate:!0,flush:"post"}),g=()=>{d(),o()};return tryOnScopeDispose(g),g}function useSupported(t,e=!1){const s=ref(),n=()=>s.value=!!t();return n(),tryOnMounted(n,e),s}function useMediaQuery(t,e={}){const{window:s=defaultWindow}=e,n=useSupported(()=>s&&"matchMedia"in s&&typeof s.matchMedia=="function");let i;const r=ref(!1),o=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",b):i.removeListener(b))},b=()=>{n.value&&(o(),i=s.matchMedia(resolveRef(t).value),r.value=i.matches,"addEventListener"in i?i.addEventListener("change",b):i.addListener(b))};return watchEffect(b),tryOnScopeDispose(()=>o()),r}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(t,e){return handlers[t]||e}function guessSerializerType(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(t,e,s)=>e in t?__defProp$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$k=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$m.call(e,s)&&__defNormalProp$k(t,s,e[s]);if(__getOwnPropSymbols$m)for(var s of __getOwnPropSymbols$m(e))__propIsEnum$m.call(e,s)&&__defNormalProp$k(t,s,e[s]);return t};const StorageSerializers={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(t,e,s,n={}){var i;const{flush:r="pre",deep:o=!0,listenToStorageChanges:b=!0,writeDefaults:d=!0,mergeDefaults:g=!1,shallow:l,window:E=defaultWindow,eventFilter:P,onError:C=M=>{console.error(M)}}=n,R=(l?shallowRef:ref)(e);if(!s)try{s=getSSRHandler("getDefaultStorage",()=>{var M;return(M=defaultWindow)==null?void 0:M.localStorage})()}catch(M){C(M)}if(!s)return R;const F=resolveUnref(e),w=guessSerializerType(F),T=(i=n.serializer)!=null?i:StorageSerializers[w],{pause:O,resume:k}=watchPausable(R,()=>x(R.value),{flush:r,deep:o,eventFilter:P});return E&&b&&(useEventListener(E,"storage",U),useEventListener(E,customStorageEventName,A)),U(),R;function x(M){try{if(M==null)s.removeItem(t);else{const _=T.write(M),B=s.getItem(t);B!==_&&(s.setItem(t,_),E&&E.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:t,oldValue:B,newValue:_,storageArea:s}})))}}catch(_){C(_)}}function m(M){const _=M?M.newValue:s.getItem(t);if(_==null)return d&&F!==null&&s.setItem(t,T.write(F)),F;if(!M&&g){const B=T.read(_);return isFunction(g)?g(B,F):w==="object"&&!Array.isArray(B)?__spreadValues$k(__spreadValues$k({},F),B):B}else return typeof _!="string"?_:T.read(_)}function A(M){U(M.detail)}function U(M){if(!(M&&M.storageArea!==s)){if(M&&M.key==null){R.value=F;return}if(!(M&&M.key!==t)){O();try{R.value=m(M)}catch(_){C(_)}finally{M?nextTick(k):k()}}}}}function usePreferredDark(t){return useMediaQuery("(prefers-color-scheme: dark)",t)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(t,e,s)=>e in t?__defProp$j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$j=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$l.call(e,s)&&__defNormalProp$j(t,s,e[s]);if(__getOwnPropSymbols$l)for(var s of __getOwnPropSymbols$l(e))__propIsEnum$l.call(e,s)&&__defNormalProp$j(t,s,e[s]);return t};function useColorMode(t={}){const{selector:e="html",attribute:s="class",initialValue:n="auto",window:i=defaultWindow,storage:r,storageKey:o="vueuse-color-scheme",listenToStorageChanges:b=!0,storageRef:d,emitAuto:g}=t,l=__spreadValues$j({auto:"",light:"light",dark:"dark"},t.modes||{}),E=usePreferredDark({window:i}),P=computed(()=>E.value?"dark":"light"),C=d||(o==null?ref(n):useStorage(o,n,r,{window:i,listenToStorageChanges:b})),R=computed({get(){return C.value==="auto"&&!g?P.value:C.value},set(O){C.value=O}}),F=getSSRHandler("updateHTMLAttrs",(O,k,x)=>{const m=i==null?void 0:i.document.querySelector(O);if(m)if(k==="class"){const A=x.split(/\s/g);Object.values(l).flatMap(U=>(U||"").split(/\s/g)).filter(Boolean).forEach(U=>{A.includes(U)?m.classList.add(U):m.classList.remove(U)})}else m.setAttribute(k,x)});function w(O){var k;const x=O==="auto"?P.value:O;F(e,s,(k=l[x])!=null?k:x)}function T(O){t.onChanged?t.onChanged(O,w):w(O)}return watch(R,T,{flush:"post",immediate:!0}),g&&watch(P,()=>T(R.value),{flush:"post"}),tryOnMounted(()=>T(R.value)),R}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(t,e,s)=>e in t?__defProp$i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$i=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$k.call(e,s)&&__defNormalProp$i(t,s,e[s]);if(__getOwnPropSymbols$k)for(var s of __getOwnPropSymbols$k(e))__propIsEnum$k.call(e,s)&&__defNormalProp$i(t,s,e[s]);return t},__spreadProps$7=(t,e)=>__defProps$7(t,__getOwnPropDescs$7(e));function useDark(t={}){const{valueDark:e="dark",valueLight:s="",window:n=defaultWindow}=t,i=useColorMode(__spreadProps$7(__spreadValues$i({},t),{onChanged:(b,d)=>{var g;t.onChanged?(g=t.onChanged)==null||g.call(t,b==="dark"):d(b)},modes:{dark:e,light:s}})),r=usePreferredDark({window:n});return computed({get(){return i.value==="dark"},set(b){b===r.value?i.value="auto":i.value=b?"dark":"light"}})}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,s)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues=(t,e)=>{for(var s in e||(e={}))__hasOwnProp.call(e,s)&&__defNormalProp(t,s,e[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))__propIsEnum.call(e,s)&&__defNormalProp(t,s,e[s]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,s,n={}){var i,r,o;const{clone:b=!1,passive:d=!1,eventName:g,deep:l=!1,defaultValue:E}=n,P=getCurrentInstance(),C=s||(P==null?void 0:P.emit)||((i=P==null?void 0:P.$emit)==null?void 0:i.bind(P))||((o=(r=P==null?void 0:P.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(P==null?void 0:P.proxy));let R=g;e||(e="modelValue"),R=g||R||`update:${e.toString()}`;const F=T=>b?isFunction(b)?b(T):cloneFnJSON(T):T,w=()=>isDef(t[e])?F(t[e]):E;if(d){const T=w(),O=ref(T);return watch(()=>t[e],k=>O.value=F(k)),watch(O,k=>{(k!==t[e]||l)&&C(R,k)},{deep:l}),O}else return computed({get(){return w()},set(T){C(R,T)}})}const isDark=useDark(),toggleDark=useToggle(isDark),_hoisted_1$4={class:"flex items-center justify-center gap-2"},_sfc_main$5=defineComponent({__name:"TheFooter",setup(t){return(e,s)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("button",{class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",onClick:s[0]||(s[0]=n=>unref(toggleDark)()),title:"Toggle theme"},[...s[1]||(s[1]=[createBaseVNode("div",{"i-carbon-sun":"",class:"text-sm dark:hidden"},null,-1),createBaseVNode("div",{"i-carbon-moon":"",class:"text-sm hidden dark:block"},null,-1)])]),s[2]||(s[2]=createBaseVNode("a",{href:"https://github.com/9M2PJU/9M2PJU-PDF-Watermark",target:"_blank",class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",title:"View on GitHub"},[createBaseVNode("div",{"i-carbon-logo-github":"",class:"text-sm"})],-1))]))}}),_sfc_main$4=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const s=e;return(n,i)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["relative w-9 h-5 rounded-full transition-colors",t.value?"bg-violet-600":"bg-slate-600"]),onClick:i[0]||(i[0]=r=>s("update:value",!t.value))},[createBaseVNode("span",{class:normalizeClass(["absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform",t.value?"left-[18px]":"left-0.5"])},null,2)],2))}}),__MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,s=Object.create(null);for(const n of t)if(typeof n=="string")s[n]=useVModel(e,n,void 0,{eventName:`update:${n}`,passive:!0});else{const[i,r=i,o=`update:${i}`,b={}]=n;s[i]=useVModel(e,r,void 0,{eventName:o,passive:!0,...b})}return s},WATERMWRK_KEY="watermark-config",defaultConfig={words:"CONFIDENTIAL",width:0,height:0,fontSize:24,color:"#000000",opacity:20,rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},rotatePresets=[{label:" Diagonal",value:-15},{label:" Horizontal",value:0},{label:" Vertical",value:-90}],tooltips={words:"Text to display as watermark",width:"Image width (auto-detected)",height:"Image height (auto-detected)",fontSize:"Size of the watermark text",color:"Watermark color",opacity:"Watermark transparency (0-100%)",rotate:"Rotation angle of watermark",row:"Number of watermark rows",col:"Number of watermark columns",startX:"Horizontal starting position",startY:"Vertical starting position",offsetX:"Horizontal spacing between watermarks",offsetY:"Vertical spacing between watermarks",compression:"Output quality (higher = better)",saveConfig:"Remember settings for next time"},basicSettings=["words","color","opacity","fontSize","rotate"],advancedSettings=["row","col","startX","startY","offsetX","offsetY","compression"],_hoisted_1$3={class:"flex items-center justify-between py-1.5"},_hoisted_2$3=["for","title"],_hoisted_3$2=["id"],_hoisted_4$2={key:2,class:"flex items-center gap-2"},_hoisted_5$1=["id"],_hoisted_6={class:"text-[10px] text-gray-500 font-mono"},_hoisted_7={key:3,class:"flex items-center gap-2"},_hoisted_8={class:"text-[10px] text-gray-500 w-8"},_hoisted_9={key:4,class:"flex items-center gap-2"},_hoisted_10={class:"text-[10px] text-gray-500 w-6"},_hoisted_11={key:5,class:"flex items-center gap-1"},_hoisted_12=["onClick"],_hoisted_13={key:6,class:"flex items-center gap-2"},_hoisted_14={class:"text-[10px] text-gray-500 w-6"},_hoisted_15={key:7,class:"flex items-center gap-2"},_hoisted_16={class:"text-[10px] text-gray-500 w-6"},_hoisted_17={key:8,class:"flex items-center gap-2"},_hoisted_18={class:"text-[10px] text-gray-500 w-6"},_hoisted_19={key:9,class:"flex items-center gap-2"},_hoisted_20={class:"text-[10px] text-gray-500 w-8"},_hoisted_21={key:10,class:"flex items-center gap-2"},_hoisted_22={class:"text-[10px] text-gray-500 w-8"},_hoisted_23={key:11,class:"flex items-center gap-2"},_hoisted_24={class:"text-[10px] text-gray-500 w-6"},_hoisted_25={key:12,class:"flex items-center gap-2"},_hoisted_26={class:"text-[10px] text-gray-500 w-6"},_hoisted_27=["id"],_hoisted_28=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),s={words:"Watermark Text",color:"Color",opacity:"Opacity",fontSize:"Font Size",rotate:"Rotation",row:"Rows",col:"Columns",startX:"Start X",startY:"Start Y",offsetX:"Spacing X",offsetY:"Spacing Y",compression:"Quality",saveConfig:"Remember Settings"};return(n,i)=>{const r=_sfc_main$4;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("label",{for:t.property,class:"text-xs text-gray-400",title:unref(tooltips)[t.property]},toDisplayString(s[t.property]||t.property),9,_hoisted_2$3),t.property==="saveConfig"?(openBlock(),createBlock(r,{key:0,value:unref(e),"onUpdate:value":i[0]||(i[0]=o=>n.$emit("update:value",o))},null,8,["value"])):t.property==="words"?withDirectives((openBlock(),createElementBlock("input",{key:1,id:t.property,"onUpdate:modelValue":i[1]||(i[1]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-32 sm:w-36 px-2 py-1 text-xs bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none",placeholder:"Enter text..."},null,8,_hoisted_3$2)),[[vModelText,unref(e)]]):t.property==="color"?(openBlock(),createElementBlock("div",_hoisted_4$2,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":i[2]||(i[2]=o=>isRef(e)?e.value=o:null),type:"color",class:"w-8 h-8 rounded cursor-pointer border border-slate-600 bg-transparent"},null,8,_hoisted_5$1),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_6,toDisplayString(unref(e)),1)])):t.property==="opacity"?(openBlock(),createElementBlock("div",_hoisted_7,[withDirectives(createBaseVNode("input",{type:"range",min:"5",max:"100",step:"5","onUpdate:modelValue":i[3]||(i[3]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_8,toDisplayString(unref(e))+"%",1)])):t.property==="fontSize"?(openBlock(),createElementBlock("div",_hoisted_9,[withDirectives(createBaseVNode("input",{type:"range",min:"12",max:"48",step:"2","onUpdate:modelValue":i[4]||(i[4]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_10,toDisplayString(unref(e)),1)])):t.property==="rotate"?(openBlock(),createElementBlock("div",_hoisted_11,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(rotatePresets),o=>(openBlock(),createElementBlock("button",{key:o.value,onClick:b=>n.$emit("update:value",o.value),class:normalizeClass(["px-2 py-0.5 text-[10px] rounded transition-colors",unref(e)===o.value?"bg-violet-600 text-white":"bg-slate-700/50 text-gray-400 hover:bg-slate-600"])},toDisplayString(o.label),11,_hoisted_12))),128))])):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_13,[withDirectives(createBaseVNode("input",{type:"range",min:"0.1",max:"1",step:"0.1","onUpdate:modelValue":i[5]||(i[5]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_14,toDisplayString(Math.round(Number(unref(e))*100))+"%",1)])):t.property==="row"?(openBlock(),createElementBlock("div",_hoisted_15,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[6]||(i[6]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_16,toDisplayString(unref(e)),1)])):t.property==="col"?(openBlock(),createElementBlock("div",_hoisted_17,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[7]||(i[7]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_18,toDisplayString(unref(e)),1)])):t.property==="startX"?(openBlock(),createElementBlock("div",_hoisted_19,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[8]||(i[8]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_20,toDisplayString(unref(e)),1)])):t.property==="startY"?(openBlock(),createElementBlock("div",_hoisted_21,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[9]||(i[9]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_22,toDisplayString(unref(e)),1)])):t.property==="offsetX"?(openBlock(),createElementBlock("div",_hoisted_23,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[10]||(i[10]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_24,toDisplayString(unref(e)),1)])):t.property==="offsetY"?(openBlock(),createElementBlock("div",_hoisted_25,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[11]||(i[11]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_26,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?withDirectives((openBlock(),createElementBlock("input",{key:13,id:t.property,"onUpdate:modelValue":i[12]||(i[12]=o=>isRef(e)?e.value=o:null),type:"number",class:"w-24 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_27)),[[vModelText,unref(e)]]):withDirectives((openBlock(),createElementBlock("input",{key:14,id:t.property,"onUpdate:modelValue":i[13]||(i[13]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-24 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_28)),[[vModelText,unref(e)]])])}}}),_hoisted_1$2={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4 lg:sticky lg:top-4"},_hoisted_2$2={class:"space-y-2"},_hoisted_3$1={class:"mt-2 pt-2 border-t border-slate-700/30 space-y-2"},_hoisted_4$1={class:"mt-3 pt-3 border-t border-slate-700/50"},_hoisted_5={class:"mt-3 pt-3 border-t border-slate-700/50"},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){const e=ref(!1);return(s,n)=>{const i=_sfc_main$3,r=_sfc_main$5;return openBlock(),createElementBlock("div",_hoisted_1$2,[n[3]||(n[3]=createBaseVNode("div",{class:"text-center pb-3 mb-3 border-b border-slate-700/50"},[createBaseVNode("div",{class:"flex items-center justify-center gap-2 mb-2"},[createBaseVNode("span",{"i-material-symbols-add-photo-alternate-rounded":"",class:"text-xl text-violet-400"}),createBaseVNode("span",{"i-material-symbols:picture-as-pdf":"",class:"text-xl text-cyan-400"})]),createBaseVNode("h1",{class:"text-base font-bold text-white"},"9M2PJU PDF Watermark"),createBaseVNode("p",{class:"text-xs text-gray-400"},"Add watermark to image/pdf")],-1)),createBaseVNode("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(basicSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":b=>s.$emit("update",o,b)},null,8,["property","value","onUpdate:value"]))),128))]),createBaseVNode("button",{onClick:n[0]||(n[0]=o=>e.value=!unref(e)),class:"w-full mt-3 py-2 flex items-center justify-center gap-2 text-xs text-gray-400 hover:text-white transition-colors"},[createBaseVNode("span",null,toDisplayString(unref(e)?"Hide":"Show")+" Advanced Settings",1),createBaseVNode("span",{class:normalizeClass([unref(e)?"rotate-180":"","transition-transform duration-200"]),"i-carbon-chevron-down":""},null,2)]),withDirectives(createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(advancedSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":b=>s.$emit("update",o,b)},null,8,["property","value","onUpdate:value"]))),128))],512),[[vShow,unref(e)]]),createBaseVNode("div",_hoisted_4$1,[createVNode(i,{property:"saveConfig",value:t.config.saveConfig,"onUpdate:value":n[1]||(n[1]=o=>s.$emit("update","saveConfig",o))},null,8,["value"])]),createBaseVNode("div",_hoisted_5,[n[2]||(n[2]=createBaseVNode("p",{class:"text-[10px] text-gray-500 text-center mb-2"}," Host on GitHub, your files will be safe ",-1)),createVNode(r)])])}}}),_hoisted_1$1={class:"max-w-6xl mx-auto"},_hoisted_2$1={class:"flex flex-col lg:flex-row lg:items-start gap-4"},_hoisted_3={class:"w-full lg:w-72 lg:flex-shrink-0 order-2 lg:order-1"},_hoisted_4={class:"flex-1 order-1 lg:order-2"},_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),s=e&&JSON.parse(e),n=reactive(i(s)||defaultConfig);function i(b){if(!b)return;const{rotate:d,startX:g,startY:l}=b;return{...b,rotate:Number(d),startX:Number(g),startY:Number(l)}}const r=["words","color","rotate","startX","startY"];function o(b,d){b==="saveConfig"?n[b]=!!d:r.includes(b)?n[b]=d:n[b]=+d,b==="saveConfig"&&d===!1?localStorage.setItem(WATERMWRK_KEY,""):n.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(n))}return(b,d)=>{const g=_sfc_main$2,l=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3,[createVNode(g,{config:unref(n),onUpdate:o},null,8,["config"])]),createBaseVNode("div",_hoisted_4,[createVNode(l,{config:unref(n)},null,8,["config"])])])])}}}),_hoisted_1={class:"min-h-screen bg-slate-900 text-gray-200 font-sans"},_hoisted_2={class:"relative z-10 p-3 sm:p-4 lg:p-6"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,s)=>(openBlock(),createElementBlock("main",_hoisted_1,[s[0]||(s[0]=createBaseVNode("div",{class:"fixed inset-0 bg-gradient-to-br from-slate-900 via-violet-950/30 to-slate-900 pointer-events-none"},null,-1)),createBaseVNode("div",_hoisted_2,[createVNode(_sfc_main$1)])]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
