var ns=Object.defineProperty;var ss=(t,e,s)=>e in t?ns(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var se=(t,e,s)=>(ss(t,typeof e!="symbol"?e+"":e,s),s),Ue=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var r=(t,e,s)=>(Ue(t,e,"read from private field"),s?s.call(t):e.get(t)),G=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},gt=(t,e,s,n)=>(Ue(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var be=(t,e,s,n)=>({set _(i){gt(t,e,i,s)},get _(){return r(t,e,n)}}),it=(t,e,s)=>(Ue(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction$1=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-\w/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,e=>e.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},def=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const a in i)e[a]=i[a]}return e}else if(isString(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],a)=>(s[stringifySymbol(n,a)+" =>"]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>stringifySymbol(s))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var s;return isSymbol(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,s=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),removeSub(n),removeDep(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,s=activeSub,n=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const i=t.fn(t._value);(e.version===0||hasChanged(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{activeSub=s,shouldTrack=n,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)removeSub(a,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function removeDep(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=activeSub;activeSub=void 0;try{e()}finally{activeSub=s}}}let globalVersion=0;class Link{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==activeSub)s=this.activeLink=new Link(activeSub,this),activeSub.deps?(s.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=s,activeSub.depsTail=s):activeSub.deps=activeSub.depsTail=s,addSub(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=activeSub.depsTail,s.nextDep=void 0,activeSub.depsTail.nextDep=s,activeSub.depsTail=s,activeSub.deps===s&&(activeSub.deps=n)}return s}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)addSub(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,s){if(shouldTrack&&activeSub){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new Dep),i.map=n,i.key=s),i.track()}}function trigger(t,e,s,n,i,a){const o=targetMap.get(t);if(!o){globalVersion++;return}const y=f=>{f&&f.trigger()};if(startBatch(),e==="clear")o.forEach(y);else{const f=isArray(t),m=f&&isIntegerKey(s);if(f&&s==="length"){const l=Number(n);o.forEach((w,P)=>{(P==="length"||P===ARRAY_ITERATE_KEY||!isSymbol(P)&&P>=l)&&y(w)})}else switch((s!==void 0||o.has(void 0))&&y(o.get(s)),m&&y(o.get(ARRAY_ITERATE_KEY)),e){case"add":f?m&&y(o.get("length")):(y(o.get(ITERATE_KEY)),isMap(t)&&y(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":f||(y(o.get(ITERATE_KEY)),isMap(t)&&y(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&y(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}function toWrapped(t,e){return isReadonly(t)?isReactive(t)?toReadonly(toReactive(e)):toReadonly(e):toReactive(e)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,t=>toWrapped(this,t))},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toWrapped(this,t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,s=>s.map(n=>toWrapped(this,n)),arguments)},find(t,e){return apply(this,"find",t,e,s=>toWrapped(this,s),arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,s=>toWrapped(this,s),arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",t=>toWrapped(this,t))}};function iterator(t,e,s){const n=shallowReadArray(t),i=n[e]();return n!==t&&!isShallow(t)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=s(a.value)),a}),i}const arrayProto=Array.prototype;function apply(t,e,s,n,i,a){const o=shallowReadArray(t),y=o!==t&&!isShallow(t),f=o[e];if(f!==arrayProto[e]){const w=f.apply(t,a);return y?toReactive(w):w}let m=s;o!==t&&(y?m=function(w,P){return s.call(this,toWrapped(t,w),P,t)}:s.length>2&&(m=function(w,P){return s.call(this,w,P,t)}));const l=f.call(o,m,n);return y&&i?i(l):l}function reduce(t,e,s,n){const i=shallowReadArray(t);let a=s;return i!==t&&(isShallow(t)?s.length>3&&(a=function(o,y,f){return s.call(this,o,y,f,t)}):a=function(o,y,f){return s.call(this,o,toWrapped(t,y),f,t)}),i[e](a,...n)}function searchProxy(t,e,s){const n=toRaw(t);track(n,"iterate",ARRAY_ITERATE_KEY);const i=n[e](...s);return(i===-1||i===!1)&&isProxy(s[0])?(s[0]=toRaw(s[0]),n[e](...s)):i}function noTracking(t,e,s=[]){pauseTracking(),startBatch();const n=toRaw(t)[e].apply(t,s);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(i?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=isArray(e);if(!i){let f;if(o&&(f=arrayInstrumentations[s]))return f;if(s==="hasOwnProperty")return hasOwnProperty}const y=Reflect.get(e,s,isRef(e)?e:n);if((isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(i||track(e,"get",s),a))return y;if(isRef(y)){const f=o&&isIntegerKey(s)?y:y.value;return i&&isObject(f)?readonly(f):f}return isObject(y)?i?readonly(y):reactive(y):y}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,s,n,i){let a=e[s];const o=isArray(e)&&isIntegerKey(s);if(!this._isShallow){const m=isReadonly(a);if(!isShallow(n)&&!isReadonly(n)&&(a=toRaw(a),n=toRaw(n)),!o&&isRef(a)&&!isRef(n))return m||(a.value=n),!0}const y=o?Number(s)<e.length:hasOwn(e,s),f=Reflect.set(e,s,n,isRef(e)?e:i);return e===toRaw(i)&&(y?hasChanged(n,a)&&trigger(e,"set",s,n):trigger(e,"add",s,n)),f}deleteProperty(e,s){const n=hasOwn(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&trigger(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!isSymbol(s)||!builtInSymbols.has(s))&&track(e,"has",s),n}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,a=toRaw(i),o=isMap(a),y=t==="entries"||t===Symbol.iterator&&o,f=t==="keys"&&o,m=i[t](...n),l=s?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",f?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:w,done:P}=m.next();return P?{value:w,done:P}:{value:y?[l(w[0]),l(w[1])]:l(w),done:P}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const s={get(i){const a=this.__v_raw,o=toRaw(a),y=toRaw(i);t||(hasChanged(i,y)&&track(o,"get",i),track(o,"get",y));const{has:f}=getProto(o),m=e?toShallow:t?toReadonly:toReactive;if(f.call(o,i))return m(a.get(i));if(f.call(o,y))return m(a.get(y));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!t&&track(toRaw(i),"iterate",ITERATE_KEY),i.size},has(i){const a=this.__v_raw,o=toRaw(a),y=toRaw(i);return t||(hasChanged(i,y)&&track(o,"has",i),track(o,"has",y)),i===y?a.has(i):a.has(i)||a.has(y)},forEach(i,a){const o=this,y=o.__v_raw,f=toRaw(y),m=e?toShallow:t?toReadonly:toReactive;return!t&&track(f,"iterate",ITERATE_KEY),y.forEach((l,w)=>i.call(a,m(l),m(w),o))}};return extend(s,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!e&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const a=toRaw(this);return getProto(a).has.call(a,i)||(a.add(i),trigger(a,"add",i,i)),this},set(i,a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const o=toRaw(this),{has:y,get:f}=getProto(o);let m=y.call(o,i);m||(i=toRaw(i),m=y.call(o,i));const l=f.call(o,i);return o.set(i,a),m?hasChanged(a,l)&&trigger(o,"set",i,a):trigger(o,"add",i,a),this},delete(i){const a=toRaw(this),{has:o,get:y}=getProto(a);let f=o.call(a,i);f||(i=toRaw(i),f=o.call(a,i)),y&&y.call(a,i);const m=a.delete(i);return f&&trigger(a,"delete",i,void 0),m},clear(){const i=toRaw(this),a=i.size!==0,o=i.clear();return a&&trigger(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=createIterableMethod(i,t,e)}),s}function createInstrumentationGetter(t,e){const s=createInstrumentations(t,e);return(n,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=getTargetType(t);if(a===0)return t;const o=i.get(t);if(o)return o;const y=new Proxy(t,a===2?n:s);return i.set(t,y),y}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,s)&&(this._rawValue=e,this._value=n?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>e==="__v_raw"?t:unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,s=!1){let n,i;return isFunction$1(t)?n=t:(n=t.get,i=t.set),new ComputedRefImpl(n,i,s)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,s=activeWatcher){if(s){let n=cleanupMap.get(s);n||cleanupMap.set(s,n=[]),n.push(t)}}function watch$1(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:y,call:f}=s,m=x=>i?x:isShallow(x)||i===!1||i===0?traverse(x,1):traverse(x);let l,w,P,T,k=!1,M=!1;if(isRef(t)?(w=()=>t.value,k=isShallow(t)):isReactive(t)?(w=()=>m(t),k=!0):isArray(t)?(M=!0,k=t.some(x=>isReactive(x)||isShallow(x)),w=()=>t.map(x=>{if(isRef(x))return x.value;if(isReactive(x))return m(x);if(isFunction$1(x))return f?f(x,2):x()})):isFunction$1(t)?e?w=f?()=>f(t,2):t:w=()=>{if(P){pauseTracking();try{P()}finally{resetTracking()}}const x=activeWatcher;activeWatcher=l;try{return f?f(t,3,[T]):t(T)}finally{activeWatcher=x}}:w=NOOP,e&&i){const x=w,g=i===!0?1/0:i;w=()=>traverse(x(),g)}const E=getCurrentScope(),C=()=>{l.stop(),E&&E.active&&remove(E.effects,l)};if(a&&e){const x=e;e=(...g)=>{x(...g),C()}}let I=M?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const R=x=>{if(!(!(l.flags&1)||!l.dirty&&!x))if(e){const g=l.run();if(i||k||(M?g.some((A,H)=>hasChanged(A,I[H])):hasChanged(g,I))){P&&P();const A=activeWatcher;activeWatcher=l;try{const H=[g,I===INITIAL_WATCHER_VALUE?void 0:M&&I[0]===INITIAL_WATCHER_VALUE?[]:I,T];I=g,f?f(e,3,H):e(...H)}finally{activeWatcher=A}}}else l.run()};return y&&y(R),l=new ReactiveEffect(w),l.scheduler=o?()=>o(R,!1):R,T=x=>onWatcherCleanup(x,!1,l),P=l.onStop=()=>{const x=cleanupMap.get(l);if(x){if(f)f(x,4);else for(const g of x)g();cleanupMap.delete(l)}},e?n?R(!0):I=l.run():o?o(R.bind(null,!0),!0):l.run(),C.pause=l.pause.bind(l),C.resume=l.resume.bind(l),C.stop=C,C}function traverse(t,e=1/0,s){if(e<=0||!isObject(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,isRef(t))traverse(t.value,e,s);else if(isArray(t))for(let n=0;n<t.length;n++)traverse(t[n],e,s);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e,s)});else if(isPlainObject(t)){for(const n in t)traverse(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&traverse(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const s=stack.length?stack[stack.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=getComponentTrace();if(n)callWithErrorHandling(n,s,11,[t+e.map(a=>{var o,y;return(y=(o=a.toString)==null?void 0:o.call(a))!=null?y:JSON.stringify(a)}).join(""),s&&s.proxy,i.map(({vnode:a})=>`at <${formatComponentName(s,a.type)}>`).join(`
`),i]);else{const a=[`[Vue warn]: ${t}`,...e];i.length&&a.push(`
`,...formatTrace(i)),console.warn(...a)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function formatTrace(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...formatTraceEntry(s))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${formatComponentName(t.component,t.type,n)}`,a=">"+s;return t.props?[i,...formatProps(t.props),a]:[i+a]}function formatProps(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...formatProp(n,t[n]))}),s.length>3&&e.push(" ..."),e}function formatProp(t,e,s){return isString(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),s?e:[`${t}=`,e])}function callWithErrorHandling(t,e,s,n){try{return n?t(...n):t()}catch(i){handleError(i,e,s)}}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction$1(t)){const i=callWithErrorHandling(t,e,s,n);return i&&isPromise(i)&&i.catch(a=>{handleError(a,e,s)}),i}if(isArray(t)){const i=[];for(let a=0;a<t.length;a++)i.push(callWithAsyncErrorHandling(t[a],e,s,n));return i}}function handleError(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||EMPTY_OBJ;if(e){let y=e.parent;const f=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${s}`;for(;y;){const l=y.ec;if(l){for(let w=0;w<l.length;w++)if(l[w](t,f,m)===!1)return}y=y.parent}if(a){pauseTracking(),callWithErrorHandling(a,null,10,[t,f,m]),resetTracking();return}}logError(t,s,i,n,o)}function logError(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1,i=queue[n],a=getId(i);a<t||a===t&&i.flags&2?e=n+1:s=n}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),s=queue[queue.length-1];!s||!(t.flags&2)&&e>=getId(s)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,s=flushIndex+1){for(;s<queue.length;s++){const n=queue[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;queue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((s,n)=>getId(s)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const s=activePostFlushCbs[postFlushIndex];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),callWithErrorHandling(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&(s.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(e);let o;try{o=t(...i)}finally{setCurrentRenderingInstance(a),n._d&&setBlockTracking(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const s=getComponentPublicInstance(currentRenderingInstance),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,y,f=EMPTY_OBJ]=e[i];a&&(isFunction$1(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(o),n.push({dir:a,instance:s,value:o,oldValue:void 0,arg:y,modifiers:f}))}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const y=i[o];a&&(y.oldValue=a[o].value);let f=y.dir[n];f&&(pauseTracking(),callWithAsyncErrorHandling(f,s,8,[t.el,y,t,e]),resetTracking())}}function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=getCurrentInstance();if(n||currentApp){let i=currentApp?currentApp._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction$1(e)?e.call(n&&n.proxy):e}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,flush:a,once:o}=s,y=extend({},s),f=e&&n||!e&&a!=="post";let m;if(isInSSRComponentSetup){if(a==="sync"){const T=useSSRContext();m=T.__watcherHandles||(T.__watcherHandles=[])}else if(!f){const T=()=>{};return T.stop=NOOP,T.resume=NOOP,T.pause=NOOP,T}}const l=currentInstance;y.call=(T,k,M)=>callWithAsyncErrorHandling(T,l,k,M);let w=!1;a==="post"?y.scheduler=T=>{queuePostRenderEffect(T,l&&l.suspense)}:a!=="sync"&&(w=!0,y.scheduler=(T,k)=>{k?T():queueJob(T)}),y.augmentJob=T=>{e&&(T.flags|=4),w&&(T.flags|=2,l&&(T.id=l.uid,T.i=l))};const P=watch$1(t,e,y);return isInSSRComponentSetup&&(m?m.push(P):f&&P()),P}function instanceWatch(t,e,s){const n=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let a;isFunction$1(e)?a=e:(a=e.handler,s=e);const o=setCurrentInstance(this),y=doWatch(i,a.bind(n),s);return o(),y}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport,leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((k,M)=>setRef(k,e&&(isArray(e)?e[M]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(t,e,s,n.component.subTree);return}const a=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,o=i?null:a,{i:y,r:f}=t,m=e&&e.r,l=y.refs===EMPTY_OBJ?y.refs={}:y.refs,w=y.setupState,P=toRaw(w),T=w===EMPTY_OBJ?NO:k=>hasOwn(P,k);if(m!=null&&m!==f){if(invalidatePendingSetRef(e),isString(m))l[m]=null,T(m)&&(w[m]=null);else if(isRef(m)){m.value=null;const k=e;k.k&&(l[k.k]=null)}}if(isFunction$1(f))callWithErrorHandling(f,y,12,[o,l]);else{const k=isString(f),M=isRef(f);if(k||M){const E=()=>{if(t.f){const C=k?T(f)?w[f]:l[f]:f.value;if(i)isArray(C)&&remove(C,a);else if(isArray(C))C.includes(a)||C.push(a);else if(k)l[f]=[a],T(f)&&(w[f]=l[f]);else{const I=[a];f.value=I,t.k&&(l[t.k]=I)}}else k?(l[f]=o,T(f)&&(w[f]=o)):M&&(f.value=o,t.k&&(l[t.k]=o))};if(o){const C=()=>{E(),pendingSetRefMap.delete(t)};C.id=-1,pendingSetRefMap.set(t,C),queuePostRenderEffect(C,s)}else invalidatePendingSetRef(t),E()}}}function invalidatePendingSetRef(t){const e=pendingSetRefMap.get(t);e&&(e.flags|=8,pendingSetRefMap.delete(t))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),a=e.__weh||(e.__weh=(...o)=>{pauseTracking();const y=setCurrentInstance(s),f=callWithAsyncErrorHandling(e,s,t,o);return y(),resetTracking(),f});return n?i.unshift(a):i.push(a),a}}const createHook=t=>(e,s=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const a=s&&s[n],o=isArray(t);if(o||isString(t)){const y=o&&isReactive(t);let f=!1,m=!1;y&&(f=!isShallow(t),m=isReadonly(t),t=shallowReadArray(t)),i=new Array(t.length);for(let l=0,w=t.length;l<w;l++)i[l]=e(f?m?toReadonly(toReactive(t[l])):toReactive(t[l]):t[l],l,void 0,a&&a[l])}else if(typeof t=="number"){i=new Array(t);for(let y=0;y<t;y++)i[y]=e(y+1,y,void 0,a&&a[y])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(y,f)=>e(y,f,void 0,a&&a[f]));else{const y=Object.keys(t);i=new Array(y.length);for(let f=0,m=y.length;f<m;f++){const l=y[f];i[f]=e(t[l],l,f,a&&a[f])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:a,accessCache:o,type:y,appContext:f}=t;if(e[0]!=="$"){const P=o[e];if(P!==void 0)switch(P){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return a[e]}else{if(hasSetupBinding(n,e))return o[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return o[e]=2,i[e];if(hasOwn(a,e))return o[e]=3,a[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=4,s[e];shouldCacheAccess&&(o[e]=0)}}const m=publicPropertiesMap[e];let l,w;if(m)return e==="$attrs"&&track(t.attrs,"get",""),m(t);if((l=y.__cssModules)&&(l=l[e]))return l;if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=4,s[e];if(w=f.config.globalProperties,hasOwn(w,e))return w[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:a}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,props:a,type:o}},y){let f;return!!(s[y]||t!==EMPTY_OBJ&&y[0]!=="$"&&hasOwn(t,y)||hasSetupBinding(e,y)||hasOwn(a,y)||hasOwn(n,y)||hasOwn(publicPropertiesMap,y)||hasOwn(i.config.globalProperties,y)||(f=o.__cssModules)&&f[y])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:o,watch:y,provide:f,inject:m,created:l,beforeMount:w,mounted:P,beforeUpdate:T,updated:k,activated:M,deactivated:E,beforeDestroy:C,beforeUnmount:I,destroyed:R,unmounted:x,render:g,renderTracked:A,renderTriggered:H,errorCaptured:F,serverPrefetch:b,expose:j,inheritAttrs:L,components:Q,directives:st,filters:U}=e;if(m&&resolveInjections(m,n,null),o)for(const mt in o){const X=o[mt];isFunction$1(X)&&(n[mt]=X.bind(s))}if(i){const mt=i.call(s,s);isObject(mt)&&(t.data=reactive(mt))}if(shouldCacheAccess=!0,a)for(const mt in a){const X=a[mt],yt=isFunction$1(X)?X.bind(s,s):isFunction$1(X.get)?X.get.bind(s,s):NOOP,wt=!isFunction$1(X)&&isFunction$1(X.set)?X.set.bind(s):NOOP,Rt=computed({get:yt,set:wt});Object.defineProperty(n,mt,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:kt=>Rt.value=kt})}if(y)for(const mt in y)createWatcher(y[mt],n,s,mt);if(f){const mt=isFunction$1(f)?f.call(s):f;Reflect.ownKeys(mt).forEach(X=>{provide(X,mt[X])})}l&&callHook(l,t,"c");function pt(mt,X){isArray(X)?X.forEach(yt=>mt(yt.bind(s))):X&&mt(X.bind(s))}if(pt(onBeforeMount,w),pt(onMounted,P),pt(onBeforeUpdate,T),pt(onUpdated,k),pt(onActivated,M),pt(onDeactivated,E),pt(onErrorCaptured,F),pt(onRenderTracked,A),pt(onRenderTriggered,H),pt(onBeforeUnmount,I),pt(onUnmounted,x),pt(onServerPrefetch,b),isArray(j))if(j.length){const mt=t.exposed||(t.exposed={});j.forEach(X=>{Object.defineProperty(mt,X,{get:()=>s[X],set:yt=>s[X]=yt,enumerable:!0})})}else t.exposed||(t.exposed={});g&&t.render===NOOP&&(t.render=g),L!=null&&(t.inheritAttrs=L),Q&&(t.components=Q),st&&(t.directives=st),b&&markAsyncBoundary(t)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let a;isObject(i)?"default"in i?a=inject(i.from||n,i.default,!0):a=inject(i.from||n):a=inject(i),isRef(a)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){let i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(t)){const a=e[t];isFunction$1(a)&&watch(i,a)}else if(isFunction$1(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(a=>createWatcher(a,e,s,n));else{const a=isFunction$1(t.handler)?t.handler.bind(s):e[t.handler];isFunction$1(a)&&watch(i,a,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=t.appContext,y=a.get(e);let f;return y?f=y:!i.length&&!s&&!n?f=e:(f={},i.length&&i.forEach(m=>mergeOptions(f,m,o,!0)),mergeOptions(f,e,o)),isObject(e)&&a.set(e,f),f}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:a}=e;a&&mergeOptions(t,a,s,!0),i&&i.forEach(o=>mergeOptions(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const y=internalOptionMergeStrats[o]||s&&s[o];t[o]=y?y(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction$1(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const a=createAppContext(),o=new WeakSet,y=[];let f=!1;const m=a.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(l){},use(l,...w){return o.has(l)||(l&&isFunction$1(l.install)?(o.add(l),l.install(m,...w)):isFunction$1(l)&&(o.add(l),l(m,...w))),m},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),m},component(l,w){return w?(a.components[l]=w,m):a.components[l]},directive(l,w){return w?(a.directives[l]=w,m):a.directives[l]},mount(l,w,P){if(!f){const T=m._ceVNode||createVNode(n,i);return T.appContext=a,P===!0?P="svg":P===!1&&(P=void 0),w&&e?e(T,l):t(T,l,P),f=!0,m._container=l,l.__vue_app__=m,getComponentPublicInstance(T.component)}},onUnmount(l){y.push(l)},unmount(){f&&(callWithAsyncErrorHandling(y,m._instance,16),t(null,m._container),delete m._container.__vue_app__)},provide(l,w){return a.provides[l]=w,m},runWithContext(l){const w=currentApp;currentApp=m;try{return l()}finally{currentApp=w}}};return m}}let currentApp=null;const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const a=e.startsWith("update:"),o=a&&getModelModifiers(n,e.slice(7));o&&(o.trim&&(i=s.map(l=>isString(l)?l.trim():l)),o.number&&(i=s.map(looseToNumber)));let y,f=n[y=toHandlerKey(e)]||n[y=toHandlerKey(camelize(e))];!f&&a&&(f=n[y=toHandlerKey(hyphenate(e))]),f&&callWithAsyncErrorHandling(f,t,6,i);const m=n[y+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,callWithAsyncErrorHandling(m,t,6,i)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(t,e,s=!1){const n=s?mixinEmitsCache:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const a=t.emits;let o={},y=!1;if(!isFunction$1(t)){const f=m=>{const l=normalizeEmitsOptions(m,e,!0);l&&(y=!0,extend(o,l))};!s&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!a&&!y?(isObject(t)&&n.set(t,null),null):(isArray(a)?a.forEach(f=>o[f]=null):extend(o,a),isObject(t)&&n.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:y,emit:f,render:m,renderCache:l,props:w,data:P,setupState:T,ctx:k,inheritAttrs:M}=t,E=setCurrentRenderingInstance(t);let C,I;try{if(s.shapeFlag&4){const x=i||n,g=x;C=normalizeVNode(m.call(g,x,l,w,T,P,k)),I=y}else{const x=e;C=normalizeVNode(x.length>1?x(w,{attrs:y,slots:o,emit:f}):x(w,null)),I=e.props?y:getFunctionalFallthrough(y)}}catch(x){blockStack.length=0,handleError(x,t,1),C=createVNode(Comment)}let R=C;if(I&&M!==!1){const x=Object.keys(I),{shapeFlag:g}=R;x.length&&g&7&&(a&&x.some(isModelListener)&&(I=filterModelListeners(I,a)),R=cloneVNode(R,I,!1,!0))}return s.dirs&&(R=cloneVNode(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(s.dirs):s.dirs),s.transition&&setTransitionHooks(R,s.transition),C=R,setCurrentRenderingInstance(E),C}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:a}=t,{props:o,children:y,patchFlag:f}=e,m=a.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&f>=0){if(f&1024)return!0;if(f&16)return n?hasPropsChanged(n,o,m):!!o;if(f&8){const l=e.dynamicProps;for(let w=0;w<l.length;w++){const P=l[w];if(o[P]!==n[P]&&!isEmitListener(m,P))return!0}}}else return(i||y)&&(!y||!y.$stable)?!0:n===o?!1:n?o?hasPropsChanged(n,o,m):!0:!!o;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==t[a]&&!isEmitListener(s,a))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,s,n=!1){const i={},a=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,i,a);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function updateProps(t,e,s,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=t,y=toRaw(i),[f]=t.propsOptions;let m=!1;if((n||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let w=0;w<l.length;w++){let P=l[w];if(isEmitListener(t.emitsOptions,P))continue;const T=e[P];if(f)if(hasOwn(a,P))T!==a[P]&&(a[P]=T,m=!0);else{const k=camelize(P);i[k]=resolvePropValue(f,y,k,T,t,!1)}else T!==a[P]&&(a[P]=T,m=!0)}}}else{setFullProps(t,e,i,a)&&(m=!0);let l;for(const w in y)(!e||!hasOwn(e,w)&&((l=hyphenate(w))===w||!hasOwn(e,l)))&&(f?s&&(s[w]!==void 0||s[l]!==void 0)&&(i[w]=resolvePropValue(f,y,w,void 0,t,!0)):delete i[w]);if(a!==y)for(const w in a)(!e||!hasOwn(e,w))&&(delete a[w],m=!0)}m&&trigger(t.attrs,"set","")}function setFullProps(t,e,s,n){const[i,a]=t.propsOptions;let o=!1,y;if(e)for(let f in e){if(isReservedProp(f))continue;const m=e[f];let l;i&&hasOwn(i,l=camelize(f))?!a||!a.includes(l)?s[l]=m:(y||(y={}))[l]=m:isEmitListener(t.emitsOptions,f)||(!(f in n)||m!==n[f])&&(n[f]=m,o=!0)}if(a){const f=toRaw(s),m=y||EMPTY_OBJ;for(let l=0;l<a.length;l++){const w=a[l];s[w]=resolvePropValue(i,f,w,m[w],t,!hasOwn(m,w))}}return o}function resolvePropValue(t,e,s,n,i,a){const o=t[s];if(o!=null){const y=hasOwn(o,"default");if(y&&n===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction$1(f)){const{propsDefaults:m}=i;if(s in m)n=m[s];else{const l=setCurrentInstance(i);n=m[s]=f.call(null,e),l()}}else n=f;i.ce&&i.ce._setProp(s,n)}o[0]&&(a&&!y?n=!1:o[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,s=!1){const n=s?mixinPropsCache:e.propsCache,i=n.get(t);if(i)return i;const a=t.props,o={},y=[];let f=!1;if(!isFunction$1(t)){const l=w=>{f=!0;const[P,T]=normalizePropsOptions(w,e,!0);extend(o,P),T&&y.push(...T)};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!a&&!f)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let l=0;l<a.length;l++){const w=camelize(a[l]);validatePropName(w)&&(o[w]=EMPTY_OBJ)}else if(a)for(const l in a){const w=camelize(l);if(validatePropName(w)){const P=a[l],T=o[w]=isArray(P)||isFunction$1(P)?{type:P}:extend({},P),k=T.type;let M=!1,E=!0;if(isArray(k))for(let C=0;C<k.length;++C){const I=k[C],R=isFunction$1(I)&&I.name;if(R==="Boolean"){M=!0;break}else R==="String"&&(E=!1)}else M=isFunction$1(k)&&k.name==="Boolean";T[0]=M,T[1]=E,(M||hasOwn(T,"default"))&&y.push(w)}}const m=[o,y];return isObject(t)&&n.set(t,m),m}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const a=t[i];if(isFunction$1(a))e[i]=normalizeSlot(i,a,n);else if(a!=null){const o=normalizeSlotValue(a);e[i]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},assignSlots=(t,e,s)=>{for(const n in e)(s||!isInternalKey(n))&&(t[n]=e[n])},initSlots=(t,e,s)=>{const n=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const i=e._;i?(assignSlots(n,e,s),s&&def(n,"_",i,!0)):normalizeObjectSlots(e,n)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let a=!0,o=EMPTY_OBJ;if(n.shapeFlag&32){const y=e._;y?s&&y===1?a=!1:assignSlots(i,e,s):(a=!e.$stable,normalizeObjectSlots(e,i)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(a)for(const y in i)!isInternalKey(y)&&o[y]==null&&delete i[y]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:y,createComment:f,setText:m,setElementText:l,parentNode:w,nextSibling:P,setScopeId:T=NOOP,insertStaticContent:k}=t,M=(v,O,W,rt=null,K=null,ut=null,St=void 0,ft=null,_t=!!O.dynamicChildren)=>{if(v===O)return;v&&!isSameVNodeType(v,O)&&(rt=_(v),kt(v,K,ut,!0),v=null),O.patchFlag===-2&&(_t=!1,O.dynamicChildren=null);const{type:Z,ref:J,shapeFlag:q}=O;switch(Z){case Text:E(v,O,W,rt);break;case Comment:C(v,O,W,rt);break;case Static:v==null&&I(O,W,rt,St);break;case Fragment:Q(v,O,W,rt,K,ut,St,ft,_t);break;default:q&1?g(v,O,W,rt,K,ut,St,ft,_t):q&6?st(v,O,W,rt,K,ut,St,ft,_t):(q&64||q&128)&&Z.process(v,O,W,rt,K,ut,St,ft,_t,V)}J!=null&&K?setRef(J,v&&v.ref,ut,O||v,!O):J==null&&v&&v.ref!=null&&setRef(v.ref,null,ut,v,!0)},E=(v,O,W,rt)=>{if(v==null)n(O.el=y(O.children),W,rt);else{const K=O.el=v.el;O.children!==v.children&&m(K,O.children)}},C=(v,O,W,rt)=>{v==null?n(O.el=f(O.children||""),W,rt):O.el=v.el},I=(v,O,W,rt)=>{[v.el,v.anchor]=k(v.children,O,W,rt,v.el,v.anchor)},R=({el:v,anchor:O},W,rt)=>{let K;for(;v&&v!==O;)K=P(v),n(v,W,rt),v=K;n(O,W,rt)},x=({el:v,anchor:O})=>{let W;for(;v&&v!==O;)W=P(v),i(v),v=W;i(O)},g=(v,O,W,rt,K,ut,St,ft,_t)=>{if(O.type==="svg"?St="svg":O.type==="math"&&(St="mathml"),v==null)A(O,W,rt,K,ut,St,ft,_t);else{const Z=v.el&&v.el._isVueCE?v.el:null;try{Z&&Z._beginPatch(),b(v,O,K,ut,St,ft,_t)}finally{Z&&Z._endPatch()}}},A=(v,O,W,rt,K,ut,St,ft)=>{let _t,Z;const{props:J,shapeFlag:q,transition:ct,dirs:At}=v;if(_t=v.el=o(v.type,ut,J&&J.is,J),q&8?l(_t,v.children):q&16&&F(v.children,_t,null,rt,K,resolveChildrenNamespace(v,ut),St,ft),At&&invokeDirectiveHook(v,null,rt,"created"),H(_t,v,v.scopeId,St,rt),J){for(const Dt in J)Dt!=="value"&&!isReservedProp(Dt)&&a(_t,Dt,null,J[Dt],ut,rt);"value"in J&&a(_t,"value",null,J.value,ut),(Z=J.onVnodeBeforeMount)&&invokeVNodeHook(Z,rt,v)}At&&invokeDirectiveHook(v,null,rt,"beforeMount");const Et=needTransition(K,ct);Et&&ct.beforeEnter(_t),n(_t,O,W),((Z=J&&J.onVnodeMounted)||Et||At)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,rt,v),Et&&ct.enter(_t),At&&invokeDirectiveHook(v,null,rt,"mounted")},K)},H=(v,O,W,rt,K)=>{if(W&&T(v,W),rt)for(let ut=0;ut<rt.length;ut++)T(v,rt[ut]);if(K){let ut=K.subTree;if(O===ut||isSuspense(ut.type)&&(ut.ssContent===O||ut.ssFallback===O)){const St=K.vnode;H(v,St,St.scopeId,St.slotScopeIds,K.parent)}}},F=(v,O,W,rt,K,ut,St,ft,_t=0)=>{for(let Z=_t;Z<v.length;Z++){const J=v[Z]=ft?cloneIfMounted(v[Z]):normalizeVNode(v[Z]);M(null,J,O,W,rt,K,ut,St,ft)}},b=(v,O,W,rt,K,ut,St)=>{const ft=O.el=v.el;let{patchFlag:_t,dynamicChildren:Z,dirs:J}=O;_t|=v.patchFlag&16;const q=v.props||EMPTY_OBJ,ct=O.props||EMPTY_OBJ;let At;if(W&&toggleRecurse(W,!1),(At=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(At,W,O,v),J&&invokeDirectiveHook(O,v,W,"beforeUpdate"),W&&toggleRecurse(W,!0),(q.innerHTML&&ct.innerHTML==null||q.textContent&&ct.textContent==null)&&l(ft,""),Z?j(v.dynamicChildren,Z,ft,W,rt,resolveChildrenNamespace(O,K),ut):St||X(v,O,ft,null,W,rt,resolveChildrenNamespace(O,K),ut,!1),_t>0){if(_t&16)L(ft,q,ct,W,K);else if(_t&2&&q.class!==ct.class&&a(ft,"class",null,ct.class,K),_t&4&&a(ft,"style",q.style,ct.style,K),_t&8){const Et=O.dynamicProps;for(let Dt=0;Dt<Et.length;Dt++){const Lt=Et[Dt],Ut=q[Lt],$t=ct[Lt];($t!==Ut||Lt==="value")&&a(ft,Lt,Ut,$t,K,W)}}_t&1&&v.children!==O.children&&l(ft,O.children)}else!St&&Z==null&&L(ft,q,ct,W,K);((At=ct.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{At&&invokeVNodeHook(At,W,O,v),J&&invokeDirectiveHook(O,v,W,"updated")},rt)},j=(v,O,W,rt,K,ut,St)=>{for(let ft=0;ft<O.length;ft++){const _t=v[ft],Z=O[ft],J=_t.el&&(_t.type===Fragment||!isSameVNodeType(_t,Z)||_t.shapeFlag&198)?w(_t.el):W;M(_t,Z,J,null,rt,K,ut,St,!0)}},L=(v,O,W,rt,K)=>{if(O!==W){if(O!==EMPTY_OBJ)for(const ut in O)!isReservedProp(ut)&&!(ut in W)&&a(v,ut,O[ut],null,K,rt);for(const ut in W){if(isReservedProp(ut))continue;const St=W[ut],ft=O[ut];St!==ft&&ut!=="value"&&a(v,ut,ft,St,K,rt)}"value"in W&&a(v,"value",O.value,W.value,K)}},Q=(v,O,W,rt,K,ut,St,ft,_t)=>{const Z=O.el=v?v.el:y(""),J=O.anchor=v?v.anchor:y("");let{patchFlag:q,dynamicChildren:ct,slotScopeIds:At}=O;At&&(ft=ft?ft.concat(At):At),v==null?(n(Z,W,rt),n(J,W,rt),F(O.children||[],W,J,K,ut,St,ft,_t)):q>0&&q&64&&ct&&v.dynamicChildren&&v.dynamicChildren.length===ct.length?(j(v.dynamicChildren,ct,W,K,ut,St,ft),(O.key!=null||K&&O===K.subTree)&&traverseStaticChildren(v,O,!0)):X(v,O,W,J,K,ut,St,ft,_t)},st=(v,O,W,rt,K,ut,St,ft,_t)=>{O.slotScopeIds=ft,v==null?O.shapeFlag&512?K.ctx.activate(O,W,rt,St,_t):U(O,W,rt,K,ut,St,_t):ot(v,O,_t)},U=(v,O,W,rt,K,ut,St)=>{const ft=v.component=createComponentInstance(v,rt,K);if(isKeepAlive(v)&&(ft.ctx.renderer=V),setupComponent(ft,!1,St),ft.asyncDep){if(K&&K.registerDep(ft,pt,St),!v.el){const _t=ft.subTree=createVNode(Comment);C(null,_t,O,W),v.placeholder=_t.el}}else pt(ft,v,O,W,K,ut,St)},ot=(v,O,W)=>{const rt=O.component=v.component;if(shouldUpdateComponent(v,O,W))if(rt.asyncDep&&!rt.asyncResolved){mt(rt,O,W);return}else rt.next=O,rt.update();else O.el=v.el,rt.vnode=O},pt=(v,O,W,rt,K,ut,St)=>{const ft=()=>{if(v.isMounted){let{next:q,bu:ct,u:At,parent:Et,vnode:Dt}=v;{const Wt=locateNonHydratedAsyncRoot(v);if(Wt){q&&(q.el=Dt.el,mt(v,q,St)),Wt.asyncDep.then(()=>{v.isUnmounted||ft()});return}}let Lt=q,Ut;toggleRecurse(v,!1),q?(q.el=Dt.el,mt(v,q,St)):q=Dt,ct&&invokeArrayFns(ct),(Ut=q.props&&q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ut,Et,q,Dt),toggleRecurse(v,!0);const $t=renderComponentRoot(v),Gt=v.subTree;v.subTree=$t,M(Gt,$t,w(Gt.el),_(Gt),v,K,ut),q.el=$t.el,Lt===null&&updateHOCHostEl(v,$t.el),At&&queuePostRenderEffect(At,K),(Ut=q.props&&q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ut,Et,q,Dt),K)}else{let q;const{el:ct,props:At}=O,{bm:Et,m:Dt,parent:Lt,root:Ut,type:$t}=v,Gt=isAsyncWrapper(O);if(toggleRecurse(v,!1),Et&&invokeArrayFns(Et),!Gt&&(q=At&&At.onVnodeBeforeMount)&&invokeVNodeHook(q,Lt,O),toggleRecurse(v,!0),ct&&dt){const Wt=()=>{v.subTree=renderComponentRoot(v),dt(ct,v.subTree,v,K,null)};Gt&&$t.__asyncHydrate?$t.__asyncHydrate(ct,v,Wt):Wt()}else{Ut.ce&&Ut.ce._def.shadowRoot!==!1&&Ut.ce._injectChildStyle($t);const Wt=v.subTree=renderComponentRoot(v);M(null,Wt,W,rt,v,K,ut),O.el=Wt.el}if(Dt&&queuePostRenderEffect(Dt,K),!Gt&&(q=At&&At.onVnodeMounted)){const Wt=O;queuePostRenderEffect(()=>invokeVNodeHook(q,Lt,Wt),K)}(O.shapeFlag&256||Lt&&isAsyncWrapper(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&v.a&&queuePostRenderEffect(v.a,K),v.isMounted=!0,O=W=rt=null}};v.scope.on();const _t=v.effect=new ReactiveEffect(ft);v.scope.off();const Z=v.update=_t.run.bind(_t),J=v.job=_t.runIfDirty.bind(_t);J.i=v,J.id=v.uid,_t.scheduler=()=>queueJob(J),toggleRecurse(v,!0),Z()},mt=(v,O,W)=>{O.component=v;const rt=v.vnode.props;v.vnode=O,v.next=null,updateProps(v,O.props,rt,W),updateSlots(v,O.children,W),pauseTracking(),flushPreFlushCbs(v),resetTracking()},X=(v,O,W,rt,K,ut,St,ft,_t=!1)=>{const Z=v&&v.children,J=v?v.shapeFlag:0,q=O.children,{patchFlag:ct,shapeFlag:At}=O;if(ct>0){if(ct&128){wt(Z,q,W,rt,K,ut,St,ft,_t);return}else if(ct&256){yt(Z,q,W,rt,K,ut,St,ft,_t);return}}At&8?(J&16&&u(Z,K,ut),q!==Z&&l(W,q)):J&16?At&16?wt(Z,q,W,rt,K,ut,St,ft,_t):u(Z,K,ut,!0):(J&8&&l(W,""),At&16&&F(q,W,rt,K,ut,St,ft,_t))},yt=(v,O,W,rt,K,ut,St,ft,_t)=>{v=v||EMPTY_ARR,O=O||EMPTY_ARR;const Z=v.length,J=O.length,q=Math.min(Z,J);let ct;for(ct=0;ct<q;ct++){const At=O[ct]=_t?cloneIfMounted(O[ct]):normalizeVNode(O[ct]);M(v[ct],At,W,null,K,ut,St,ft,_t)}Z>J?u(v,K,ut,!0,!1,q):F(O,W,rt,K,ut,St,ft,_t,q)},wt=(v,O,W,rt,K,ut,St,ft,_t)=>{let Z=0;const J=O.length;let q=v.length-1,ct=J-1;for(;Z<=q&&Z<=ct;){const At=v[Z],Et=O[Z]=_t?cloneIfMounted(O[Z]):normalizeVNode(O[Z]);if(isSameVNodeType(At,Et))M(At,Et,W,null,K,ut,St,ft,_t);else break;Z++}for(;Z<=q&&Z<=ct;){const At=v[q],Et=O[ct]=_t?cloneIfMounted(O[ct]):normalizeVNode(O[ct]);if(isSameVNodeType(At,Et))M(At,Et,W,null,K,ut,St,ft,_t);else break;q--,ct--}if(Z>q){if(Z<=ct){const At=ct+1,Et=At<J?O[At].el:rt;for(;Z<=ct;)M(null,O[Z]=_t?cloneIfMounted(O[Z]):normalizeVNode(O[Z]),W,Et,K,ut,St,ft,_t),Z++}}else if(Z>ct)for(;Z<=q;)kt(v[Z],K,ut,!0),Z++;else{const At=Z,Et=Z,Dt=new Map;for(Z=Et;Z<=ct;Z++){const at=O[Z]=_t?cloneIfMounted(O[Z]):normalizeVNode(O[Z]);at.key!=null&&Dt.set(at.key,Z)}let Lt,Ut=0;const $t=ct-Et+1;let Gt=!1,Wt=0;const Yt=new Array($t);for(Z=0;Z<$t;Z++)Yt[Z]=0;for(Z=At;Z<=q;Z++){const at=v[Z];if(Ut>=$t){kt(at,K,ut,!0);continue}let nt;if(at.key!=null)nt=Dt.get(at.key);else for(Lt=Et;Lt<=ct;Lt++)if(Yt[Lt-Et]===0&&isSameVNodeType(at,O[Lt])){nt=Lt;break}nt===void 0?kt(at,K,ut,!0):(Yt[nt-Et]=Z+1,nt>=Wt?Wt=nt:Gt=!0,M(at,O[nt],W,null,K,ut,St,ft,_t),Ut++)}const vt=Gt?getSequence(Yt):EMPTY_ARR;for(Lt=vt.length-1,Z=$t-1;Z>=0;Z--){const at=Et+Z,nt=O[at],xt=O[at+1],Tt=at+1<J?xt.el||resolveAsyncComponentPlaceholder(xt):rt;Yt[Z]===0?M(null,nt,W,Tt,K,ut,St,ft,_t):Gt&&(Lt<0||Z!==vt[Lt]?Rt(nt,W,Tt,2):Lt--)}}},Rt=(v,O,W,rt,K=null)=>{const{el:ut,type:St,transition:ft,children:_t,shapeFlag:Z}=v;if(Z&6){Rt(v.component.subTree,O,W,rt);return}if(Z&128){v.suspense.move(O,W,rt);return}if(Z&64){St.move(v,O,W,V);return}if(St===Fragment){n(ut,O,W);for(let q=0;q<_t.length;q++)Rt(_t[q],O,W,rt);n(v.anchor,O,W);return}if(St===Static){R(v,O,W);return}if(rt!==2&&Z&1&&ft)if(rt===0)ft.beforeEnter(ut),n(ut,O,W),queuePostRenderEffect(()=>ft.enter(ut),K);else{const{leave:q,delayLeave:ct,afterLeave:At}=ft,Et=()=>{v.ctx.isUnmounted?i(ut):n(ut,O,W)},Dt=()=>{ut._isLeaving&&ut[leaveCbKey](!0),q(ut,()=>{Et(),At&&At()})};ct?ct(ut,Et,Dt):Dt()}else n(ut,O,W)},kt=(v,O,W,rt=!1,K=!1)=>{const{type:ut,props:St,ref:ft,children:_t,dynamicChildren:Z,shapeFlag:J,patchFlag:q,dirs:ct,cacheIndex:At}=v;if(q===-2&&(K=!1),ft!=null&&(pauseTracking(),setRef(ft,null,W,v,!0),resetTracking()),At!=null&&(O.renderCache[At]=void 0),J&256){O.ctx.deactivate(v);return}const Et=J&1&&ct,Dt=!isAsyncWrapper(v);let Lt;if(Dt&&(Lt=St&&St.onVnodeBeforeUnmount)&&invokeVNodeHook(Lt,O,v),J&6)d(v.component,W,rt);else{if(J&128){v.suspense.unmount(W,rt);return}Et&&invokeDirectiveHook(v,null,O,"beforeUnmount"),J&64?v.type.remove(v,O,W,V,rt):Z&&!Z.hasOnce&&(ut!==Fragment||q>0&&q&64)?u(Z,O,W,!1,!0):(ut===Fragment&&q&384||!K&&J&16)&&u(_t,O,W),rt&&B(v)}(Dt&&(Lt=St&&St.onVnodeUnmounted)||Et)&&queuePostRenderEffect(()=>{Lt&&invokeVNodeHook(Lt,O,v),Et&&invokeDirectiveHook(v,null,O,"unmounted")},W)},B=v=>{const{type:O,el:W,anchor:rt,transition:K}=v;if(O===Fragment){h(W,rt);return}if(O===Static){x(v);return}const ut=()=>{i(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(v.shapeFlag&1&&K&&!K.persisted){const{leave:St,delayLeave:ft}=K,_t=()=>St(W,ut);ft?ft(v.el,ut,_t):_t()}else ut()},h=(v,O)=>{let W;for(;v!==O;)W=P(v),i(v),v=W;i(O)},d=(v,O,W)=>{const{bum:rt,scope:K,job:ut,subTree:St,um:ft,m:_t,a:Z}=v;invalidateMount(_t),invalidateMount(Z),rt&&invokeArrayFns(rt),K.stop(),ut&&(ut.flags|=8,kt(St,v,O,W)),ft&&queuePostRenderEffect(ft,O),queuePostRenderEffect(()=>{v.isUnmounted=!0},O)},u=(v,O,W,rt=!1,K=!1,ut=0)=>{for(let St=ut;St<v.length;St++)kt(v[St],O,W,rt,K)},_=v=>{if(v.shapeFlag&6)return _(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const O=P(v.anchor||v.el),W=O&&O[TeleportEndKey];return W?P(W):O};let S=!1;const N=(v,O,W)=>{let rt;v==null?O._vnode&&(kt(O._vnode,null,null,!0),rt=O._vnode.component):M(O._vnode||null,v,O,null,null,null,W),O._vnode=v,S||(S=!0,flushPreFlushCbs(rt),flushPostFlushCbs(),S=!1)},V={p:M,um:kt,m:Rt,r:B,mt:U,mc:F,pc:X,pbc:j,n:_,o:t};let Y,dt;return e&&([Y,dt]=e(V)),{render:N,hydrate:Y,createApp:createAppAPI(N,Y)}}function resolveChildrenNamespace({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function toggleRecurse({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let a=0;a<n.length;a++){const o=n[a];let y=i[a];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=i[a]=cloneIfMounted(i[a]),y.el=o.el),!s&&y.patchFlag!==-2&&traverseStaticChildren(o,y)),y.type===Text&&(y.patchFlag!==-1?y.el=o.el:y.__elIndex=a+(t.type===Fragment?1:0)),y.type===Comment&&!y.el&&(y.el=o.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,a,o,y;const f=t.length;for(n=0;n<f;n++){const m=t[n];if(m!==0){if(i=s[s.length-1],t[i]<m){e[n]=i,s.push(n);continue}for(a=0,o=s.length-1;a<o;)y=a+o>>1,t[s[y]]<m?a=y+1:o=y;m<t[s[a]]&&(a>0&&(e[n]=s[a-1]),s[a]=n)}}for(a=s.length,o=s[a-1];a-- >0;)s[a]=o,o=e[o];return s}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function resolveAsyncComponentPlaceholder(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?resolveAsyncComponentPlaceholder(e.subTree):null}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,a){return setupBlock(createBaseVNode(t,e,s,n,i,a,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,a=t===Fragment?0:1,o=!1,y=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return y?(normalizeChildren(f,s),a&128&&t.normalize(f)):s&&(f.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&currentBlock.push(f),f}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,a=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const y=cloneVNode(t,e,!0);return s&&normalizeChildren(y,s),isBlockTreeEnabled>0&&!a&&currentBlock&&(y.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=y:currentBlock.push(y)),y.patchFlag=-2,y}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:y,style:f}=e;y&&!isString(y)&&(e.class=normalizeClass(y)),isObject(f)&&(isProxy(f)&&!isArray(f)&&(f=extend({},f)),e.style=normalizeStyle(f))}const o=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,s,n,i,o,a,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,s=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:y,transition:f}=t,m=e?mergeProps(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&normalizeKey(m),ref:e&&e.ref?s&&a?isArray(a)?a.concat(normalizeRef(e)):[a,normalizeRef(e)]:normalizeRef(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&n&&setTransitionHooks(l,f.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!isInternalObject(e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const a=e[i],o=n[i];o&&a!==o&&!(isArray(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,a={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=emit.bind(null,a),t.ce&&t.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",s=>currentInstance=s),setInSSRSetupState=e("__VUE_SSR_SETTERS__",s=>isInSSRComponentSetup=s)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,s=!1){e&&setInSSRSetupState(e);const{props:n,children:i}=t.vnode,a=isStatefulComponent(t);initProps(t,n,a,e),initSlots(t,i,s||e);const o=a?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),o}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:n}=s;if(n){pauseTracking();const i=t.setupContext=n.length>1?createSetupContext(t):null,a=setCurrentInstance(t),o=callWithErrorHandling(n,t,0,[t.props,i]),y=isPromise(o);if(resetTracking(),a(),(y||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),y){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(f=>{handleSetupResult(t,f,e)}).catch(f=>{handleError(f,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:a,compilerOptions:o}=t.appContext.config,{delimiters:y,compilerOptions:f}=n,m=extend(extend({isCustomElement:a,delimiters:y},o),f);n.render=compile(i,m)}}t.render=n.render||NOOP}{const i=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,s=!1){let n=getComponentName(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t){const i=a=>{for(const o in a)if(a[o]===e)return o};n=i(t.components)||t.parent&&i(t.parent.type.components)||i(t.appContext.components)}return n?classify(n):s?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):s?doc.createElement(t,{is:s}):doc.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,a){const o=s?s.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===a||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const y=templateContainer.content;if(n==="svg"||n==="mathml"){const f=y.firstChild;for(;f.firstChild;)y.appendChild(f.firstChild);y.removeChild(f)}e.insertBefore(y,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,s){const n=t[vtcKey];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(t,{value:e},{transition:s}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(t,e,s){const n=t.style,i=isString(s);let a=!1;if(s&&!i){if(e)if(isString(e))for(const o of e.split(";")){const y=o.slice(0,o.indexOf(":")).trim();s[y]==null&&setStyle(n,y,"")}else for(const o in e)s[o]==null&&setStyle(n,o,"");for(const o in s)o==="display"&&(a=!0),setStyle(n,o,s[o])}else if(i){if(e!==s){const o=n[CSS_VAR_TEXT];o&&(s+=";"+o),n.cssText=s,a=displayRE.test(s)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=a?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const a=prefixes[i]+n;if(a in t)return prefixCache[e]=a}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i,a=isSpecialBooleanAttr(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s):s==null||a&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,a?"":isSymbol(s)?String(s):s)}function patchDOMProp(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(s):s);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const y=a==="OPTION"?t.getAttribute("value")||"":t.value,f=s==null?t.type==="checkbox"?"on":"":String(s);(y!==f||!("_value"in t))&&(t.value=f),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const y=typeof t[e];y==="boolean"?s=includeBooleanAttr(s):s==null&&y==="string"?(s="",o=!0):y==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(i||e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}const veiKey=Symbol("_vei");function patchEvent(t,e,s,n,i=null){const a=t[veiKey]||(t[veiKey]={}),o=a[e];if(n&&o)o.value=n;else{const[y,f]=parseName(e);if(n){const m=a[e]=createInvoker(n,i);addEventListener(t,y,m,f)}else o&&(removeEventListener(t,y,o,f),a[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,s,n,i,a)=>{const o=i==="svg";e==="class"?patchClass(t,n,o):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,o))?(patchDOMProp(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,n,o,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString(n))?patchDOMProp(t,camelize(e),n,a,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,o))};function shouldSetAsProp(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString(s)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?s=>invokeArrayFns(e,s):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(t,e,s){return e&&(t=t.trim()),s&&(t=looseToNumber(t)),t}const vModelText={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[assignKey]=getModelAssigner(i);const a=n||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",o=>{o.target.composing||t[assignKey](castValue(t.value,s,a))}),(s||a)&&addEventListener(t,"change",()=>{t.value=castValue(t.value,s,a)}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:a}},o){if(t[assignKey]=getModelAssigner(o),t.composing)return;const y=(a||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,f=e??"";y!==f&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===f)||(t.value=f))}},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const a=e._component;!isFunction$1(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString(t)?document.querySelector(t):t}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Yt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=yt,e.bytesToString=Y,e.createValidAbsoluteUrl=Rt,e.getModificationDate=Et,e.getUuid=Gt,e.getVerbosityLevel=ot,e.info=pt,e.isArrayBuffer=ct,e.isArrayEqual=At,e.isNodeJS=void 0,e.normalizeUnicode=$t,e.objectFromMap=W,e.objectSize=O,e.setVerbosityLevel=U,e.shadow=kt,e.string32=v,e.stringToBytes=dt,e.stringToPDFString=Z,e.stringToUTF8String=J,e.unreachable=X,e.utf8StringToString=q,e.warn=mt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const a=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=a;const o=1.35;e.LINE_FACTOR=o;const y=.35;e.LINE_DESCENT_FACTOR=y;const f=y/o;e.BASELINE_FACTOR=f;const m={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=m;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const w="pdfjs_internal_editor_";e.AnnotationEditorPrefix=w;const P={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=P;const T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=T;const k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=k;const M={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=M;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=E;const C={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=C;const I={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=I;const R={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=R;const x={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=x;const g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=g;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=A;const H={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=H;const F={O:"PageOpen",C:"PageClose"};e.PageActionEventType=F;const b={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=b;const j={NONE:0,BINARY:1};e.CMapCompressionType=j;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=L;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let st=b.WARNINGS;function U(vt){Number.isInteger(vt)&&(st=vt)}function ot(){return st}function pt(vt){st>=b.INFOS&&console.log(`Info: ${vt}`)}function mt(vt){st>=b.WARNINGS&&console.log(`Warning: ${vt}`)}function X(vt){throw new Error(vt)}function yt(vt,at){vt||X(at)}function wt(vt){switch(vt==null?void 0:vt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rt(vt,at=null,nt=null){if(!vt)return null;try{if(nt&&typeof vt=="string"){if(nt.addDefaultProtocol&&vt.startsWith("www.")){const Tt=vt.match(/\./g);(Tt==null?void 0:Tt.length)>=2&&(vt=`http://${vt}`)}if(nt.tryConvertEncoding)try{vt=J(vt)}catch{}}const xt=at?new URL(vt,at):new URL(vt);if(wt(xt))return xt}catch{}return null}function kt(vt,at,nt,xt=!1){return Object.defineProperty(vt,at,{value:nt,enumerable:!xt,configurable:!0,writable:!1}),nt}const B=function(){function at(nt,xt){this.constructor===at&&X("Cannot initialize BaseException."),this.message=nt,this.name=xt}return at.prototype=new Error,at.constructor=at,at}();e.BaseException=B;class h extends B{constructor(at,nt){super(at,"PasswordException"),this.code=nt}}e.PasswordException=h;class d extends B{constructor(at,nt){super(at,"UnknownErrorException"),this.details=nt}}e.UnknownErrorException=d;class u extends B{constructor(at){super(at,"InvalidPDFException")}}e.InvalidPDFException=u;class _ extends B{constructor(at){super(at,"MissingPDFException")}}e.MissingPDFException=_;class S extends B{constructor(at,nt){super(at,"UnexpectedResponseException"),this.status=nt}}e.UnexpectedResponseException=S;class N extends B{constructor(at){super(at,"FormatError")}}e.FormatError=N;class V extends B{constructor(at){super(at,"AbortException")}}e.AbortException=V;function Y(vt){(typeof vt!="object"||(vt==null?void 0:vt.length)===void 0)&&X("Invalid argument for bytesToString");const at=vt.length,nt=8192;if(at<nt)return String.fromCharCode.apply(null,vt);const xt=[];for(let Tt=0;Tt<at;Tt+=nt){const ne=Math.min(Tt+nt,at),ee=vt.subarray(Tt,ne);xt.push(String.fromCharCode.apply(null,ee))}return xt.join("")}function dt(vt){typeof vt!="string"&&X("Invalid argument for stringToBytes");const at=vt.length,nt=new Uint8Array(at);for(let xt=0;xt<at;++xt)nt[xt]=vt.charCodeAt(xt)&255;return nt}function v(vt){return String.fromCharCode(vt>>24&255,vt>>16&255,vt>>8&255,vt&255)}function O(vt){return Object.keys(vt).length}function W(vt){const at=Object.create(null);for(const[nt,xt]of vt)at[nt]=xt;return at}function rt(){const vt=new Uint8Array(4);return vt[0]=1,new Uint32Array(vt.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return kt(this,"isLittleEndian",rt())}static get isEvalSupported(){return kt(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?kt(this,"platform",{isWin:!1,isMac:!1}):kt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var at,nt;return kt(this,"isCSSRoundSupported",(nt=(at=globalThis.CSS)==null?void 0:at.supports)==null?void 0:nt.call(at,"width: round(1.5px, 1px)"))}}e.FeatureTest=ut;const St=[...Array(256).keys()].map(vt=>vt.toString(16).padStart(2,"0"));class ft{static makeHexColor(at,nt,xt){return`#${St[at]}${St[nt]}${St[xt]}`}static scaleMinMax(at,nt){let xt;at[0]?(at[0]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[0],nt[1]*=at[0],at[3]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[3],nt[3]*=at[3]):(xt=nt[0],nt[0]=nt[2],nt[2]=xt,xt=nt[1],nt[1]=nt[3],nt[3]=xt,at[1]<0&&(xt=nt[2],nt[2]=nt[3],nt[3]=xt),nt[2]*=at[1],nt[3]*=at[1],at[2]<0&&(xt=nt[0],nt[0]=nt[1],nt[1]=xt),nt[0]*=at[2],nt[1]*=at[2]),nt[0]+=at[4],nt[1]+=at[4],nt[2]+=at[5],nt[3]+=at[5]}static transform(at,nt){return[at[0]*nt[0]+at[2]*nt[1],at[1]*nt[0]+at[3]*nt[1],at[0]*nt[2]+at[2]*nt[3],at[1]*nt[2]+at[3]*nt[3],at[0]*nt[4]+at[2]*nt[5]+at[4],at[1]*nt[4]+at[3]*nt[5]+at[5]]}static applyTransform(at,nt){const xt=at[0]*nt[0]+at[1]*nt[2]+nt[4],Tt=at[0]*nt[1]+at[1]*nt[3]+nt[5];return[xt,Tt]}static applyInverseTransform(at,nt){const xt=nt[0]*nt[3]-nt[1]*nt[2],Tt=(at[0]*nt[3]-at[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/xt,ne=(-at[0]*nt[1]+at[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/xt;return[Tt,ne]}static getAxialAlignedBoundingBox(at,nt){const xt=this.applyTransform(at,nt),Tt=this.applyTransform(at.slice(2,4),nt),ne=this.applyTransform([at[0],at[3]],nt),ee=this.applyTransform([at[2],at[1]],nt);return[Math.min(xt[0],Tt[0],ne[0],ee[0]),Math.min(xt[1],Tt[1],ne[1],ee[1]),Math.max(xt[0],Tt[0],ne[0],ee[0]),Math.max(xt[1],Tt[1],ne[1],ee[1])]}static inverseTransform(at){const nt=at[0]*at[3]-at[1]*at[2];return[at[3]/nt,-at[1]/nt,-at[2]/nt,at[0]/nt,(at[2]*at[5]-at[4]*at[3])/nt,(at[4]*at[1]-at[5]*at[0])/nt]}static singularValueDecompose2dScale(at){const nt=[at[0],at[2],at[1],at[3]],xt=at[0]*nt[0]+at[1]*nt[2],Tt=at[0]*nt[1]+at[1]*nt[3],ne=at[2]*nt[0]+at[3]*nt[2],ee=at[2]*nt[1]+at[3]*nt[3],ht=(xt+ee)/2,Mt=Math.sqrt((xt+ee)**2-4*(xt*ee-ne*Tt))/2,Ht=ht+Mt||1,Ft=ht-Mt||1;return[Math.sqrt(Ht),Math.sqrt(Ft)]}static normalizeRect(at){const nt=at.slice(0);return at[0]>at[2]&&(nt[0]=at[2],nt[2]=at[0]),at[1]>at[3]&&(nt[1]=at[3],nt[3]=at[1]),nt}static intersect(at,nt){const xt=Math.max(Math.min(at[0],at[2]),Math.min(nt[0],nt[2])),Tt=Math.min(Math.max(at[0],at[2]),Math.max(nt[0],nt[2]));if(xt>Tt)return null;const ne=Math.max(Math.min(at[1],at[3]),Math.min(nt[1],nt[3])),ee=Math.min(Math.max(at[1],at[3]),Math.max(nt[1],nt[3]));return ne>ee?null:[xt,ne,Tt,ee]}static bezierBoundingBox(at,nt,xt,Tt,ne,ee,ht,Mt){const Ht=[],Ft=[[],[]];let Vt,zt,Zt,Pt,Jt,jt,$,c;for(let lt=0;lt<2;++lt){if(lt===0?(zt=6*at-12*xt+6*ne,Vt=-3*at+9*xt-9*ne+3*ht,Zt=3*xt-3*at):(zt=6*nt-12*Tt+6*ee,Vt=-3*nt+9*Tt-9*ee+3*Mt,Zt=3*Tt-3*nt),Math.abs(Vt)<1e-12){if(Math.abs(zt)<1e-12)continue;Pt=-Zt/zt,0<Pt&&Pt<1&&Ht.push(Pt);continue}$=zt*zt-4*Zt*Vt,c=Math.sqrt($),!($<0)&&(Jt=(-zt+c)/(2*Vt),0<Jt&&Jt<1&&Ht.push(Jt),jt=(-zt-c)/(2*Vt),0<jt&&jt<1&&Ht.push(jt))}let D=Ht.length,z;const et=D;for(;D--;)Pt=Ht[D],z=1-Pt,Ft[0][D]=z*z*z*at+3*z*z*Pt*xt+3*z*Pt*Pt*ne+Pt*Pt*Pt*ht,Ft[1][D]=z*z*z*nt+3*z*z*Pt*Tt+3*z*Pt*Pt*ee+Pt*Pt*Pt*Mt;return Ft[0][et]=at,Ft[1][et]=nt,Ft[0][et+1]=ht,Ft[1][et+1]=Mt,Ft[0].length=Ft[1].length=et+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}e.Util=ft;const _t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Z(vt){if(vt[0]>=""){let nt;if(vt[0]===""&&vt[1]===""?nt="utf-16be":vt[0]===""&&vt[1]===""?nt="utf-16le":vt[0]===""&&vt[1]===""&&vt[2]===""&&(nt="utf-8"),nt)try{const xt=new TextDecoder(nt,{fatal:!0}),Tt=dt(vt);return xt.decode(Tt)}catch(xt){mt(`stringToPDFString: "${xt}".`)}}const at=[];for(let nt=0,xt=vt.length;nt<xt;nt++){const Tt=_t[vt.charCodeAt(nt)];at.push(Tt?String.fromCharCode(Tt):vt.charAt(nt))}return at.join("")}function J(vt){return decodeURIComponent(escape(vt))}function q(vt){return unescape(encodeURIComponent(vt))}function ct(vt){return typeof vt=="object"&&(vt==null?void 0:vt.byteLength)!==void 0}function At(vt,at){if(vt.length!==at.length)return!1;for(let nt=0,xt=vt.length;nt<xt;nt++)if(vt[nt]!==at[nt])return!1;return!0}function Et(vt=new Date){return[vt.getUTCFullYear().toString(),(vt.getUTCMonth()+1).toString().padStart(2,"0"),vt.getUTCDate().toString().padStart(2,"0"),vt.getUTCHours().toString().padStart(2,"0"),vt.getUTCMinutes().toString().padStart(2,"0"),vt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){G(this,Yt,!1);this.promise=new Promise((at,nt)=>{this.resolve=xt=>{gt(this,Yt,!0),at(xt)},this.reject=xt=>{gt(this,Yt,!0),nt(xt)}})}get settled(){return r(this,Yt)}}Yt=new WeakMap,e.PromiseCapability=Dt;let Lt=null,Ut=null;function $t(vt){return Lt||(Lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ut=new Map([["","t"]])),vt.replaceAll(Lt,(at,nt,xt)=>nt?nt.normalize("NFKC"):Ut.get(xt))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const vt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(vt);else for(let at=0;at<32;at++)vt[at]=Math.floor(Math.random()*255);return Y(vt)}const Wt="pdfjs_internal_id_";e.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,de,o,xe,f,m,l,w,P,T,k,M,E,Ce,I,R,je,g,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(F){if(typeof F=="string"||F instanceof URL?F={url:F}:(0,_util.isArrayBuffer)(F)&&(F={data:F}),typeof F!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!F.url&&!F.data&&!F.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const b=new PDFDocumentLoadingTask,{docId:j}=b,L=F.url?getUrlProp(F.url):null,Q=F.data?getDataProp(F.data):null,st=F.httpHeaders||null,U=F.withCredentials===!0,ot=F.password??null,pt=F.range instanceof PDFDataRangeTransport?F.range:null,mt=Number.isInteger(F.rangeChunkSize)&&F.rangeChunkSize>0?F.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let X=F.worker instanceof PDFWorker?F.worker:null;const yt=F.verbosity,wt=typeof F.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(F.docBaseUrl)?F.docBaseUrl:null,Rt=typeof F.cMapUrl=="string"?F.cMapUrl:null,kt=F.cMapPacked!==!1,B=F.CMapReaderFactory||DefaultCMapReaderFactory,h=typeof F.standardFontDataUrl=="string"?F.standardFontDataUrl:null,d=F.StandardFontDataFactory||DefaultStandardFontDataFactory,u=F.stopAtErrors!==!0,_=Number.isInteger(F.maxImageSize)&&F.maxImageSize>-1?F.maxImageSize:-1,S=F.isEvalSupported!==!1,N=typeof F.isOffscreenCanvasSupported=="boolean"?F.isOffscreenCanvasSupported:!_util.isNodeJS,V=Number.isInteger(F.canvasMaxAreaInBytes)?F.canvasMaxAreaInBytes:-1,Y=typeof F.disableFontFace=="boolean"?F.disableFontFace:_util.isNodeJS,dt=F.fontExtraProperties===!0,v=F.enableXfa===!0,O=F.ownerDocument||globalThis.document,W=F.disableRange===!0,rt=F.disableStream===!0,K=F.disableAutoFetch===!0,ut=F.pdfBug===!0,St=pt?pt.length:F.length??NaN,ft=typeof F.useSystemFonts=="boolean"?F.useSystemFonts:!_util.isNodeJS&&!Y,_t=typeof F.useWorkerFetch=="boolean"?F.useWorkerFetch:B===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&Rt&&h&&(0,_display_utils.isValidFetchUrl)(Rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),Z=F.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),J=F.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:O}),q=null;(0,_util.setVerbosityLevel)(yt);const ct={canvasFactory:Z,filterFactory:J};if(_t||(ct.cMapReaderFactory=new B({baseUrl:Rt,isCompressed:kt}),ct.standardFontDataFactory=new d({baseUrl:h})),!X){const Dt={verbosity:yt,port:_worker_options.GlobalWorkerOptions.workerPort};X=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),b._worker=X}const At={docId:j,apiVersion:"3.11.174",data:Q,password:ot,disableAutoFetch:K,rangeChunkSize:mt,length:St,docBaseUrl:wt,enableXfa:v,evaluatorOptions:{maxImageSize:_,disableFontFace:Y,ignoreErrors:u,isEvalSupported:S,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:V,fontExtraProperties:dt,useSystemFonts:ft,cMapUrl:_t?Rt:null,standardFontDataUrl:_t?h:null}},Et={ignoreErrors:u,isEvalSupported:S,disableFontFace:Y,fontExtraProperties:dt,enableXfa:v,ownerDocument:O,disableAutoFetch:K,pdfBug:ut,styleElement:q};return X.promise.then(function(){if(b.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(X,At),Lt=new Promise(function(Ut){let $t;pt?$t=new _transport_stream.PDFDataTransportStream({length:St,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:W,disableStream:rt},pt):Q||($t=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:L,length:St,httpHeaders:st,withCredentials:U,rangeChunkSize:mt,disableRange:W,disableStream:rt})),Ut($t)});return Promise.all([Dt,Lt]).then(function([Ut,$t]){if(b.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(j,Ut,X.port),Wt=new WorkerTransport(Gt,b,$t,Et,ct);b._transport=Wt,Gt.send("Ready",null)})}).catch(b._capability.reject),b}async function _fetchDocument(F,b){if(F.destroyed)throw new Error("Worker was destroyed");const j=await F.messageHandler.sendWithPromise("GetDocRequest",b,b.data?[b.data.buffer]:null);if(F.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(F){if(F instanceof URL)return F.href;try{return new URL(F,window.location).href}catch{if(_util.isNodeJS&&typeof F=="string")return F}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(F){if(_util.isNodeJS&&typeof Buffer<"u"&&F instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(F instanceof Uint8Array&&F.byteLength===F.buffer.byteLength)return F;if(typeof F=="string")return(0,_util.stringToBytes)(F);if(typeof F=="object"&&!isNaN(F==null?void 0:F.length)||(0,_util.isArrayBuffer)(F))return new Uint8Array(F);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${be(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var b,j,L;this.destroyed=!0;try{(b=this._worker)!=null&&b.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(Q){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,Q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,G(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(b,j,L=!1,Q=null){this.length=b,this.initialData=j,this.progressiveDone=L,this.contentDispositionFilename=Q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(b){this._rangeListeners.push(b)}addProgressListener(b){this._progressListeners.push(b)}addProgressiveReadListener(b){this._progressiveReadListeners.push(b)}addProgressiveDoneListener(b){this._progressiveDoneListeners.push(b)}onDataRange(b,j){for(const L of this._rangeListeners)L(b,j)}onDataProgress(b,j){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(b,j)})}onDataProgressiveRead(b){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(b)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const b of this._progressiveDoneListeners)b()})}transportReady(){this._readyCapability.resolve()}requestDataRange(b,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(b,j){this._pdfInfo=b,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const Q=[];for(const st in L)Q.push(...L[st]);return Q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(b){return this._transport.getPage(b)}getPageIndex(b){return this._transport.getPageIndex(b)}getDestinations(){return this._transport.getDestinations()}getDestination(b){return this._transport.getDestination(b)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(b=!1){return this._transport.startCleanup(b||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(b,j,L,Q=!1){G(this,i);G(this,o);G(this,s,null);G(this,n,!1);this._pageIndex=b,this._pageInfo=j,this._transport=L,this._stats=Q?new _display_utils.StatTimer:null,this._pdfBug=Q,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:b,rotation:j=this.rotate,offsetX:L=0,offsetY:Q=0,dontFlip:st=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:b,rotation:j,offsetX:L,offsetY:Q,dontFlip:st})}getAnnotations({intent:b="display"}={}){const j=this._transport.getRenderingIntent(b);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var b;return((b=this._transport._htmlForXfa)==null?void 0:b.children[this._pageIndex])||null}render({canvasContext:b,viewport:j,intent:L="display",annotationMode:Q=_util.AnnotationMode.ENABLE,transform:st=null,background:U=null,optionalContentConfigPromise:ot=null,annotationCanvasMap:pt=null,pageColors:mt=null,printAnnotationStorage:X=null}){var d,u;(d=this._stats)==null||d.time("Overall");const yt=this._transport.getRenderingIntent(L,Q,X);gt(this,n,!1),it(this,o,xe).call(this),ot||(ot=this._transport.getOptionalContentConfig());let wt=this._intentStates.get(yt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(yt.cacheKey,wt)),wt.streamReaderCancelTimeout&&(clearTimeout(wt.streamReaderCancelTimeout),wt.streamReaderCancelTimeout=null);const Rt=!!(yt.renderingIntent&_util.RenderingIntentFlag.PRINT);wt.displayReadyCapability||(wt.displayReadyCapability=new _util.PromiseCapability,wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(yt));const kt=_=>{var S,N;wt.renderTasks.delete(B),(this._maybeCleanupAfterRender||Rt)&&gt(this,n,!0),it(this,i,de).call(this,!Rt),_?(B.capability.reject(_),this._abortOperatorList({intentState:wt,reason:_ instanceof Error?_:new Error(_)})):B.capability.resolve(),(S=this._stats)==null||S.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},B=new InternalRenderTask({callback:kt,params:{canvasContext:b,viewport:j,transform:st,background:U},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:wt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Rt,pdfBug:this._pdfBug,pageColors:mt});(wt.renderTasks||(wt.renderTasks=new Set)).add(B);const h=B.task;return Promise.all([wt.displayReadyCapability.promise,ot]).then(([_,S])=>{var N;if(this.destroyed){kt();return}(N=this._stats)==null||N.time("Rendering"),B.initializeGraphics({transparency:_,optionalContentConfig:S}),B.operatorListChanged()}).catch(kt),h}getOperatorList({intent:b="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var pt;function Q(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(ot))}const st=this._transport.getRenderingIntent(b,j,L,!0);let U=this._intentStates.get(st.cacheKey);U||(U=Object.create(null),this._intentStates.set(st.cacheKey,U));let ot;return U.opListReadCapability||(ot=Object.create(null),ot.operatorListChanged=Q,U.opListReadCapability=new _util.PromiseCapability,(U.renderTasks||(U.renderTasks=new Set)).add(ot),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(st)),U.opListReadCapability.promise}streamTextContent({includeMarkedContent:b=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:b===!0,disableNormalization:j===!0},{highWaterMark:100,size(Q){return Q.items.length}})}getTextContent(b={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const j=this.streamTextContent(b);return new Promise(function(L,Q){function st(){U.read().then(function({value:pt,done:mt}){if(mt){L(ot);return}Object.assign(ot.styles,pt.styles),ot.items.push(...pt.items),st()},Q)}const U=j.getReader(),ot={items:[],styles:Object.create(null)};st()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const b=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const L of j.renderTasks)b.push(L.completed),L.cancel();return this.objs.clear(),gt(this,n,!1),it(this,o,xe).call(this),Promise.all(b)}cleanup(b=!1){gt(this,n,!0);const j=it(this,i,de).call(this,!1);return b&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(b,j){var Q,st;const L=this._intentStates.get(j);L&&((Q=this._stats)==null||Q.timeEnd("Page Request"),(st=L.displayReadyCapability)==null||st.resolve(b))}_renderPageChunk(b,j){for(let L=0,Q=b.length;L<Q;L++)j.operatorList.fnArray.push(b.fnArray[L]),j.operatorList.argsArray.push(b.argsArray[L]);j.operatorList.lastChunk=b.lastChunk,j.operatorList.separateAnnots=b.separateAnnots;for(const L of j.renderTasks)L.operatorListChanged();b.lastChunk&&it(this,i,de).call(this,!0)}_pumpOperatorList({renderingIntent:b,cacheKey:j,annotationStorageSerializable:L}){const{map:Q,transfers:st}=L,ot=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:b,cacheKey:j,annotationStorage:Q},st).getReader(),pt=this._intentStates.get(j);pt.streamReader=ot;const mt=()=>{ot.read().then(({value:X,done:yt})=>{if(yt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,pt),mt())},X=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const yt of pt.renderTasks)yt.operatorListChanged();it(this,i,de).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject(X);else if(pt.opListReadCapability)pt.opListReadCapability.reject(X);else throw X}})};mt()}_abortOperatorList({intentState:b,reason:j,force:L=!1}){if(b.streamReader){if(b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null),!L){if(b.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let Q=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(Q+=j.extraDelay),b.streamReaderCancelTimeout=setTimeout(()=>{b.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:b,reason:j,force:!0})},Q);return}}if(b.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),b.streamReader=null,!this._transport.destroyed){for(const[Q,st]of this._intentStates)if(st===b){this._intentStates.delete(Q);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,de=function(b=!1){if(it(this,o,xe).call(this),!r(this,n)||this.destroyed)return!1;if(b)return gt(this,s,setTimeout(()=>{gt(this,s,null),it(this,i,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:L}of this._intentStates.values())if(j.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,n,!1),!0},o=new WeakSet,xe=function(){r(this,s)&&(clearTimeout(r(this,s)),gt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){G(this,f,new Set);G(this,m,Promise.resolve())}postMessage(b,j){const L={data:structuredClone(b,j?{transfer:j}:null)};r(this,m).then(()=>{for(const Q of r(this,f))Q.call(this,L)})}addEventListener(b,j){r(this,f).add(j)}removeEventListener(b,j){r(this,f).delete(j)}terminate(){r(this,f).clear()}}f=new WeakMap,m=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const F=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;F&&(PDFWorkerUtil.fallbackWorkerSrc=F.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(F,b){let j;try{if(j=new URL(F),!j.origin||j.origin==="null")return!1}catch{return!1}const L=new URL(b,j);return j.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(F){const b=`importScripts("${F}");`;return URL.createObjectURL(new Blob([b]))}}const _PDFWorker=class _PDFWorker{constructor({name:F=null,port:b=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=F,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,b){if((L=r(_PDFWorker,w))!=null&&L.has(b))throw new Error("Cannot use more than one PDFWorker per port.");(r(_PDFWorker,w)||gt(_PDFWorker,w,new WeakMap)).set(b,this),this._initializeFromPort(b);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(F){this._port=F,this._messageHandler=new _message_handler.MessageHandler("main","worker",F),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:F}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,F)||(F=PDFWorkerUtil.createCDNWrapper(new URL(F,window.location).href));const b=new Worker(F),j=new _message_handler.MessageHandler("main","worker",b),L=()=>{b.removeEventListener("error",Q),j.destroy(),b.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Q=()=>{this._webWorker||L()};b.addEventListener("error",Q),j.on("test",U=>{if(b.removeEventListener("error",Q),this.destroyed){L();return}U?(this._messageHandler=j,this._port=b,this._webWorker=b,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),b.terminate())}),j.on("ready",U=>{if(b.removeEventListener("error",Q),this.destroyed){L();return}try{st()}catch{this._setupFakeWorker()}});const st=()=>{const U=new Uint8Array;j.send("test",U,[U.buffer])};st();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(F=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const b=new LoopbackPort;this._port=b;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,L=new _message_handler.MessageHandler(j+"_worker",j,b);F.setup(L,b);const Q=new _message_handler.MessageHandler(j,j+"_worker",b);this._messageHandler=Q,this._readyCapability.resolve(),Q.send("configure",{verbosity:this.verbosity})}).catch(F=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${F.message}".`))})}destroy(){var F;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(F=r(_PDFWorker,w))==null||F.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(F){var j;if(!(F!=null&&F.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const b=(j=r(this,w))==null?void 0:j.get(F.port);if(b){if(b._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return b}return new _PDFWorker(F)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var F;try{return((F=globalThis.pdfjsWorker)==null?void 0:F.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};w=new WeakMap,G(_PDFWorker,w,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(b,j,L,Q,st){G(this,E);G(this,P,new Map);G(this,T,new Map);G(this,k,new Map);G(this,M,null);this.messageHandler=b,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Q.ownerDocument,styleElement:Q.styleElement}),this._params=Q,this.canvasFactory=st.canvasFactory,this.filterFactory=st.filterFactory,this.cMapReaderFactory=st.cMapReaderFactory,this.standardFontDataFactory=st.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(b,j=_util.AnnotationMode.ENABLE,L=null,Q=!1){let st=_util.RenderingIntentFlag.DISPLAY,U=_annotation_storage.SerializableEmpty;switch(b){case"any":st=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":st=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${b}`)}switch(j){case _util.AnnotationMode.DISABLE:st+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:st+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:st+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(st&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return Q&&(st+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:st,cacheKey:`${st}_${U.hash}`,annotationStorageSerializable:U}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=r(this,M))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const b=[];for(const Q of r(this,T).values())b.push(Q._destroy());r(this,T).clear(),r(this,k).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return b.push(j),Promise.all(b).then(()=>{var Q;this.commonObjs.clear(),this.fontLoader.clear(),r(this,P).clear(),this.filterFactory.destroy(),(Q=this._networkStream)==null||Q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:b,loadingTask:j}=this;b.on("GetReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=st=>{this._lastProgress={loaded:st.loaded,total:st.total}},Q.onPull=()=>{this._fullReader.read().then(function({value:st,done:U}){if(U){Q.close();return}(0,_util.assert)(st instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(st),1,[st])}).catch(st=>{Q.error(st)})},Q.onCancel=st=>{this._fullReader.cancel(st),Q.ready.catch(U=>{if(!this.destroyed)throw U})}}),b.on("ReaderHeadersReady",L=>{const Q=new _util.PromiseCapability,st=this._fullReader;return st.headersReady.then(()=>{var U;(!st.isStreamingSupported||!st.isRangeSupported)&&(this._lastProgress&&((U=j.onProgress)==null||U.call(j,this._lastProgress)),st.onProgress=ot=>{var pt;(pt=j.onProgress)==null||pt.call(j,{loaded:ot.loaded,total:ot.total})}),Q.resolve({isStreamingSupported:st.isStreamingSupported,isRangeSupported:st.isRangeSupported,contentLength:st.contentLength})},Q.reject),Q.promise}),b.on("GetRangeReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const st=this._networkStream.getRangeReader(L.begin,L.end);if(!st){Q.close();return}Q.onPull=()=>{st.read().then(function({value:U,done:ot}){if(ot){Q.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{Q.error(U)})},Q.onCancel=U=>{st.cancel(U),Q.ready.catch(ot=>{if(!this.destroyed)throw ot})}}),b.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(L,this))}),b.on("DocException",function(L){let Q;switch(L.name){case"PasswordException":Q=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":Q=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":Q=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":Q=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":Q=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(Q)}),b.on("PasswordRequest",L=>{if(gt(this,M,new _util.PromiseCapability),j.onPassword){const Q=st=>{st instanceof Error?r(this,M).reject(st):r(this,M).resolve({password:st})};try{j.onPassword(Q,L.code)}catch(st){r(this,M).reject(st)}}else r(this,M).reject(new _util.PasswordException(L.message,L.code));return r(this,M).promise}),b.on("DataLoaded",L=>{var Q;(Q=j.onProgress)==null||Q.call(j,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),b.on("StartRenderPage",L=>{if(this.destroyed)return;r(this,T).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),b.on("commonobj",([L,Q,st])=>{var U;if(!this.destroyed&&!this.commonObjs.has(L))switch(Q){case"Font":const ot=this._params;if("error"in st){const X=st.error;(0,_util.warn)(`Error during font loading: ${X}`),this.commonObjs.resolve(L,X);break}const pt=ot.pdfBug&&((U=globalThis.FontInspector)!=null&&U.enabled)?(X,yt)=>globalThis.FontInspector.fontAdded(X,yt):null,mt=new _font_loader.FontFaceObject(st,{isEvalSupported:ot.isEvalSupported,disableFontFace:ot.disableFontFace,ignoreErrors:ot.ignoreErrors,inspectFont:pt});this.fontLoader.bind(mt).catch(X=>b.sendWithPromise("FontFallback",{id:L})).finally(()=>{!ot.fontExtraProperties&&mt.data&&(mt.data=null),this.commonObjs.resolve(L,mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,st);break;default:throw new Error(`Got unknown common object type ${Q}`)}}),b.on("obj",([L,Q,st,U])=>{var pt;if(this.destroyed)return;const ot=r(this,T).get(Q);if(!ot.objs.has(L))switch(st){case"Image":if(ot.objs.resolve(L,U),U){let mt;if(U.bitmap){const{width:X,height:yt}=U;mt=X*yt*4}else mt=((pt=U.data)==null?void 0:pt.length)||0;mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ot._maybeCleanupAfterRender=!0)}break;case"Pattern":ot.objs.resolve(L,U);break;default:throw new Error(`Got unknown object type ${st}`)}}),b.on("DocProgress",L=>{var Q;this.destroyed||(Q=j.onProgress)==null||Q.call(j,{loaded:L.loaded,total:L.total})}),b.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),b.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:b,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:b,filename:((L=this._fullReader)==null?void 0:L.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(b){if(!Number.isInteger(b)||b<=0||b>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=b-1,L=r(this,k).get(j);if(L)return L;const Q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(st=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(j,st,this,this._params.pdfBug);return r(this,T).set(j,U),U});return r(this,k).set(j,Q),Q}getPageIndex(b){return typeof b!="object"||b===null||!Number.isInteger(b.num)||b.num<0||!Number.isInteger(b.gen)||b.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:b.num,gen:b.gen})}getAnnotations(b,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:b,intent:j})}getFieldObjects(){return it(this,E,Ce).call(this,"GetFieldObjects")}hasJSActions(){return it(this,E,Ce).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(b){return typeof b!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:b})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return it(this,E,Ce).call(this,"GetDocJSActions")}getPageJSActions(b){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:b})}getStructTree(b){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:b})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(b=>new _optional_content_config.OptionalContentConfig(b))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const b="GetMetadata",j=r(this,P).get(b);if(j)return j;const L=this.messageHandler.sendWithPromise(b,null).then(Q=>{var st,U;return{info:Q[0],metadata:Q[1]?new _metadata.Metadata(Q[1]):null,contentDispositionFilename:((st=this._fullReader)==null?void 0:st.filename)??null,contentLength:((U=this._fullReader)==null?void 0:U.contentLength)??null}});return r(this,P).set(b,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(b=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of r(this,T).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),b||this.fontLoader.clear(),r(this,P).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:b,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:b,enableXfa:j})}}P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakSet,Ce=function(b,j=null){const L=r(this,P).get(b);if(L)return L;const Q=this.messageHandler.sendWithPromise(b,j);return r(this,P).set(b,Q),Q};class PDFObjects{constructor(){G(this,R);G(this,I,Object.create(null))}get(b,j=null){if(j){const Q=it(this,R,je).call(this,b);return Q.capability.promise.then(()=>j(Q.data)),null}const L=r(this,I)[b];if(!(L!=null&&L.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${b}.`);return L.data}has(b){const j=r(this,I)[b];return(j==null?void 0:j.capability.settled)||!1}resolve(b,j=null){const L=it(this,R,je).call(this,b);L.data=j,L.capability.resolve()}clear(){var b;for(const j in r(this,I)){const{data:L}=r(this,I)[j];(b=L==null?void 0:L.bitmap)==null||b.close()}gt(this,I,Object.create(null))}}I=new WeakMap,R=new WeakSet,je=function(b){var j;return(j=r(this,I))[b]||(j[b]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(b){G(this,g,null);gt(this,g,b),this.onContinue=null}get promise(){return r(this,g).capability.promise}cancel(b=0){r(this,g).cancel(null,b)}get separateAnnots(){const{separateAnnots:b}=r(this,g).operatorList;if(!b)return!1;const{annotationCanvasMap:j}=r(this,g);return b.form||b.canvas&&(j==null?void 0:j.size)>0}}g=new WeakMap,exports.RenderTask=RenderTask;const H=class H{constructor({callback:b,params:j,objs:L,commonObjs:Q,annotationCanvasMap:st,operatorList:U,pageIndex:ot,canvasFactory:pt,filterFactory:mt,useRequestAnimationFrame:X=!1,pdfBug:yt=!1,pageColors:wt=null}){this.callback=b,this.params=j,this.objs=L,this.commonObjs=Q,this.annotationCanvasMap=st,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=ot,this.canvasFactory=pt,this.filterFactory=mt,this._pdfBug=yt,this.pageColors=wt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=X===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:b=!1,optionalContentConfig:j}){var ot,pt;if(this.cancelled)return;if(this._canvas){if(r(H,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(H,A).add(this._canvas)}this._pdfBug&&((ot=globalThis.StepperManager)!=null&&ot.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:Q,transform:st,background:U}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:st,viewport:Q,transparency:b,background:U}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(b=null,j=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),r(H,A).delete(this._canvas),this.callback(b||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var b;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(b=this.stepper)==null||b.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r(H,A).delete(this._canvas),this.callback())))}};A=new WeakMap,G(H,A,new WeakSet);let InternalRenderTask=H;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,s)=>{var m,l,w,Sn,T;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(4),a=s(8);const o=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=o;class y{constructor(){G(this,w);G(this,m,!1);G(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(M,E){const C=r(this,l).get(M);return C===void 0?E:Object.assign(E,C)}getRawValue(M){return r(this,l).get(M)}remove(M){if(r(this,l).delete(M),r(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of r(this,l).values())if(E instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(M,E){const C=r(this,l).get(M);let I=!1;if(C!==void 0)for(const[R,x]of Object.entries(E))C[R]!==x&&(I=!0,C[R]=x);else I=!0,r(this,l).set(M,E);I&&it(this,w,Sn).call(this),E instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(M){return r(this,l).has(M)}getAll(){return r(this,l).size>0?(0,n.objectFromMap)(r(this,l)):null}setAll(M){for(const[E,C]of Object.entries(M))this.setValue(E,C)}get size(){return r(this,l).size}resetModified(){r(this,m)&&(gt(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f(this)}get serializable(){if(r(this,l).size===0)return o;const M=new Map,E=new a.MurmurHash3_64,C=[],I=Object.create(null);let R=!1;for(const[x,g]of r(this,l)){const A=g instanceof i.AnnotationEditor?g.serialize(!1,I):g;A&&(M.set(x,A),E.update(`${x}:${JSON.stringify(A)}`),R||(R=!!A.bitmap))}if(R)for(const x of M.values())x.bitmap&&C.push(x.bitmap);return M.size>0?{map:M,hash:E.hexdigest(),transfers:C}:o}}m=new WeakMap,l=new WeakMap,w=new WeakSet,Sn=function(){r(this,m)||(gt(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=y;class f extends y{constructor(E){super();G(this,T,void 0);const{map:C,hash:I,transfers:R}=E.serializable,x=structuredClone(C,R?{transfer:R}:null);gt(this,T,{map:x,hash:I,transfers:R})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,T)}}T=new WeakMap,e.PrintAnnotationStorage=f},(t,e,s)=>{var f,m,l,w,P,T,k,M,E,C,I,R,x,g,A,He,F,Ve,j,We,Q,$e,U,En,pt,wn,X,xn,wt,ze,kt,Cn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),i=s(1),a=s(6);const h=class h{constructor(u){G(this,A);G(this,F);G(this,Q);G(this,U);G(this,pt);G(this,X);G(this,wt);G(this,kt);G(this,f,"");G(this,m,!1);G(this,l,null);G(this,w,null);G(this,P,null);G(this,T,!1);G(this,k,null);G(this,M,this.focusin.bind(this));G(this,E,this.focusout.bind(this));G(this,C,!1);G(this,I,!1);G(this,R,!1);se(this,"_initialOptions",Object.create(null));se(this,"_uiManager",null);se(this,"_focusEventsAllowed",!0);se(this,"_l10nPromise",null);G(this,x,!1);G(this,g,h._zIndex++);this.constructor===h&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:_,rawDims:{pageWidth:S,pageHeight:N,pageX:V,pageY:Y}}=this.parent.viewport;this.rotation=_,this.pageRotation=(360+_-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[S,N],this.pageTranslation=[V,Y];const[dt,v]=this.parentDimensions;this.x=u.x/dt,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const _=new y({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});_.annotationElementId=u.annotationElementId,_.deleted=!0,_._uiManager.addToAnnotationStorage(_)}static initialize(u,_=null){if(h._l10nPromise||(h._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,u.get(N)]))),_!=null&&_.strings)for(const N of _.strings)h._l10nPromise.set(N,u.get(N));if(h._borderLineWidth!==-1)return;const S=getComputedStyle(document.documentElement);h._borderLineWidth=parseFloat(S.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,_){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,_){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return r(this,x)}set _isDraggable(u){var _;gt(this,x,u),(_=this.div)==null||_.classList.toggle("draggable",u)}center(){const[u,_]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*_/(u*2),this.y+=this.width*u/(_*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*_/(u*2),this.y-=this.width*u/(_*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,g)}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(r(this,C)?gt(this,C,!1):this.parent.setSelected(this))}focusout(u){var S;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const _=u.relatedTarget;_!=null&&_.closest(`#${this.id}`)||(u.preventDefault(),(S=this.parent)!=null&&S.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,_,S,N){const[V,Y]=this.parentDimensions;[S,N]=this.screenToPageTranslation(S,N),this.x=(u+S)/V,this.y=(_+N)/Y,this.fixAndSetPosition()}translate(u,_){it(this,A,He).call(this,this.parentDimensions,u,_)}translateInPage(u,_){it(this,A,He).call(this,this.pageDimensions,u,_),this.div.scrollIntoView({block:"nearest"})}drag(u,_){const[S,N]=this.parentDimensions;if(this.x+=u/S,this.y+=_/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:O,y:W}=this.div.getBoundingClientRect();this.parent.findNewParent(this,O,W)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:V,y:Y}=this;const[dt,v]=it(this,F,Ve).call(this);V+=dt,Y+=v,this.div.style.left=`${(100*V).toFixed(2)}%`,this.div.style.top=`${(100*Y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[u,_]=this.pageDimensions;let{x:S,y:N,width:V,height:Y}=this;switch(V*=u,Y*=_,S*=u,N*=_,this.rotation){case 0:S=Math.max(0,Math.min(u-V,S)),N=Math.max(0,Math.min(_-Y,N));break;case 90:S=Math.max(0,Math.min(u-Y,S)),N=Math.min(_,Math.max(V,N));break;case 180:S=Math.min(u,Math.max(V,S)),N=Math.min(_,Math.max(Y,N));break;case 270:S=Math.min(u,Math.max(Y,S)),N=Math.max(0,Math.min(_-V,N));break}this.x=S/=u,this.y=N/=_;const[dt,v]=it(this,F,Ve).call(this);S+=dt,N+=v;const{style:O}=this.div;O.left=`${(100*S).toFixed(2)}%`,O.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(u,_){var S;return it(S=h,j,We).call(S,u,_,this.parentRotation)}pageTranslationToScreen(u,_){var S;return it(S=h,j,We).call(S,u,_,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[_,S]}=this,N=_*u,V=S*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(V)]:[N,V]}setDims(u,_){var V;const[S,N]=this.parentDimensions;this.div.style.width=`${(100*u/S).toFixed(2)}%`,r(this,T)||(this.div.style.height=`${(100*_/N).toFixed(2)}%`),(V=r(this,l))==null||V.classList.toggle("small",u<h.SMALL_EDITOR_SIZE||_<h.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:_,width:S}=u,N=S.endsWith("%"),V=!r(this,T)&&_.endsWith("%");if(N&&V)return;const[Y,dt]=this.parentDimensions;N||(u.width=`${(100*parseFloat(S)/Y).toFixed(2)}%`),!r(this,T)&&!V&&(u.height=`${(100*parseFloat(_)/dt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(r(this,l))return;const u=gt(this,l,document.createElement("button"));u.className="altText";const _=await h._l10nPromise.get("editor_alt_text_button_label");u.textContent=_,u.setAttribute("aria-label",_),u.tabIndex="0",u.addEventListener("contextmenu",a.noContextMenu),u.addEventListener("pointerdown",S=>S.stopPropagation()),u.addEventListener("click",S=>{S.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",S=>{S.target===u&&S.key==="Enter"&&(S.preventDefault(),this._uiManager.editAltText(this))}),it(this,wt,ze).call(this),this.div.append(u),h.SMALL_EDITOR_SIZE||(h.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:r(this,f),decorative:r(this,m)}}set altTextData({altText:u,decorative:_}){r(this,f)===u&&r(this,m)===_||(gt(this,f,u),gt(this,m,_),it(this,wt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,M)),this.div.addEventListener("focusout",r(this,E));const[u,_]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*_/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/_).toFixed(2)}%`);const[S,N]=this.getInitialTranslation();return this.translate(S,N),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:_}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&_){u.preventDefault();return}gt(this,C,!0),it(this,kt,Cn).call(this,u)}moveInDOM(){var u;(u=this.parent)==null||u.moveEditorInDOM(this)}_setParentAndPosition(u,_,S){u.changeParent(this),this.x=_,this.y=S,this.fixAndSetPosition()}getRect(u,_){const S=this.parentScale,[N,V]=this.pageDimensions,[Y,dt]=this.pageTranslation,v=u/S,O=_/S,W=this.x*N,rt=this.y*V,K=this.width*N,ut=this.height*V;switch(this.rotation){case 0:return[W+v+Y,V-rt-O-ut+dt,W+v+K+Y,V-rt-O+dt];case 90:return[W+O+Y,V-rt+v+dt,W+O+ut+Y,V-rt+v+K+dt];case 180:return[W-v-K+Y,V-rt+O+dt,W-v+Y,V-rt+O+ut+dt];case 270:return[W-O-ut+Y,V-rt-v-K+dt,W-O+Y,V-rt-v+dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,_){const[S,N,V,Y]=u,dt=V-S,v=Y-N;switch(this.rotation){case 0:return[S,_-Y,dt,v];case 90:return[S,_-N,v,dt];case 180:return[V,_-N,dt,v];case 270:return[V,_-Y,v,dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,R,!0)}disableEditMode(){gt(this,R,!1)}isInEditMode(){return r(this,R)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var u,_;(u=this.div)==null||u.addEventListener("focusin",r(this,M)),(_=this.div)==null||_.addEventListener("focusout",r(this,E))}serialize(u=!1,_=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,_,S){const N=new this.prototype.constructor({parent:_,id:_.getNextId(),uiManager:S});N.rotation=u.rotation;const[V,Y]=N.pageDimensions,[dt,v,O,W]=N.getRectInCurrentCoords(u.rect,Y);return N.x=dt/V,N.y=v/Y,N.width=O/V,N.height=W/Y,N}remove(){var u;this.div.removeEventListener("focusin",r(this,M)),this.div.removeEventListener("focusout",r(this,E)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(u=r(this,l))==null||u.remove(),gt(this,l,null),gt(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(it(this,U,En).call(this),r(this,k).classList.remove("hidden"))}select(){var u;this.makeResizable(),(u=this.div)==null||u.classList.add("selectedEditor")}unselect(){var u,_,S;(u=r(this,k))==null||u.classList.add("hidden"),(_=this.div)==null||_.classList.remove("selectedEditor"),(S=this.div)!=null&&S.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,_){}disableEditing(){r(this,l)&&(r(this,l).hidden=!0)}enableEditing(){r(this,l)&&(r(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,I)}set isEditing(u){gt(this,I,u),this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,_){gt(this,T,!0);const S=u/_,{style:N}=this.div;N.aspectRatio=S,N.height="auto"}static get MIN_SIZE(){return 16}};f=new WeakMap,m=new WeakMap,l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,I=new WeakMap,R=new WeakMap,x=new WeakMap,g=new WeakMap,A=new WeakSet,He=function([u,_],S,N){[S,N]=this.screenToPageTranslation(S,N),this.x+=S/u,this.y+=N/_,this.fixAndSetPosition()},F=new WeakSet,Ve=function(){const[u,_]=this.parentDimensions,{_borderLineWidth:S}=h,N=S/u,V=S/_;switch(this.rotation){case 90:return[-N,V];case 180:return[N,V];case 270:return[N,-V];default:return[-N,-V]}},j=new WeakSet,We=function(u,_,S){switch(S){case 90:return[_,-u];case 180:return[-u,-_];case 270:return[-_,u];default:return[u,_]}},Q=new WeakSet,$e=function(u){switch(u){case 90:{const[_,S]=this.pageDimensions;return[0,-_/S,S/_,0]}case 180:return[-1,0,0,-1];case 270:{const[_,S]=this.pageDimensions;return[0,_/S,-S/_,0]}default:return[1,0,0,1]}},U=new WeakSet,En=function(){if(r(this,k))return;gt(this,k,document.createElement("div")),r(this,k).classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const _ of u){const S=document.createElement("div");r(this,k).append(S),S.classList.add("resizer",_),S.addEventListener("pointerdown",it(this,pt,wn).bind(this,_)),S.addEventListener("contextmenu",a.noContextMenu)}this.div.prepend(r(this,k))},pt=new WeakSet,wn=function(u,_){_.preventDefault();const{isMac:S}=i.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&S)return;const N=it(this,X,xn).bind(this,u),V=this._isDraggable;this._isDraggable=!1;const Y={passive:!0,capture:!0};window.addEventListener("pointermove",N,Y);const dt=this.x,v=this.y,O=this.width,W=this.height,rt=this.parent.div.style.cursor,K=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(_.target).cursor;const ut=()=>{this._isDraggable=V,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",N,Y),this.parent.div.style.cursor=rt,this.div.style.cursor=K;const St=this.x,ft=this.y,_t=this.width,Z=this.height;St===dt&&ft===v&&_t===O&&Z===W||this.addCommands({cmd:()=>{this.width=_t,this.height=Z,this.x=St,this.y=ft;const[J,q]=this.parentDimensions;this.setDims(J*_t,q*Z),this.fixAndSetPosition()},undo:()=>{this.width=O,this.height=W,this.x=dt,this.y=v;const[J,q]=this.parentDimensions;this.setDims(J*O,q*W),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},X=new WeakSet,xn=function(u,_){const[S,N]=this.parentDimensions,V=this.x,Y=this.y,dt=this.width,v=this.height,O=h.MIN_SIZE/S,W=h.MIN_SIZE/N,rt=xt=>Math.round(xt*1e4)/1e4,K=it(this,Q,$e).call(this,this.rotation),ut=(xt,Tt)=>[K[0]*xt+K[2]*Tt,K[1]*xt+K[3]*Tt],St=it(this,Q,$e).call(this,360-this.rotation),ft=(xt,Tt)=>[St[0]*xt+St[2]*Tt,St[1]*xt+St[3]*Tt];let _t,Z,J=!1,q=!1;switch(u){case"topLeft":J=!0,_t=(xt,Tt)=>[0,0],Z=(xt,Tt)=>[xt,Tt];break;case"topMiddle":_t=(xt,Tt)=>[xt/2,0],Z=(xt,Tt)=>[xt/2,Tt];break;case"topRight":J=!0,_t=(xt,Tt)=>[xt,0],Z=(xt,Tt)=>[0,Tt];break;case"middleRight":q=!0,_t=(xt,Tt)=>[xt,Tt/2],Z=(xt,Tt)=>[0,Tt/2];break;case"bottomRight":J=!0,_t=(xt,Tt)=>[xt,Tt],Z=(xt,Tt)=>[0,0];break;case"bottomMiddle":_t=(xt,Tt)=>[xt/2,Tt],Z=(xt,Tt)=>[xt/2,0];break;case"bottomLeft":J=!0,_t=(xt,Tt)=>[0,Tt],Z=(xt,Tt)=>[xt,0];break;case"middleLeft":q=!0,_t=(xt,Tt)=>[0,Tt/2],Z=(xt,Tt)=>[xt,Tt/2];break}const ct=_t(dt,v),At=Z(dt,v);let Et=ut(...At);const Dt=rt(V+Et[0]),Lt=rt(Y+Et[1]);let Ut=1,$t=1,[Gt,Wt]=this.screenToPageTranslation(_.movementX,_.movementY);if([Gt,Wt]=ft(Gt/S,Wt/N),J){const xt=Math.hypot(dt,v);Ut=$t=Math.max(Math.min(Math.hypot(At[0]-ct[0]-Gt,At[1]-ct[1]-Wt)/xt,1/dt,1/v),O/dt,W/v)}else q?Ut=Math.max(O,Math.min(1,Math.abs(At[0]-ct[0]-Gt)))/dt:$t=Math.max(W,Math.min(1,Math.abs(At[1]-ct[1]-Wt)))/v;const Yt=rt(dt*Ut),vt=rt(v*$t);Et=ut(...Z(Yt,vt));const at=Dt-Et[0],nt=Lt-Et[1];this.width=Yt,this.height=vt,this.x=at,this.y=nt,this.setDims(S*Yt,N*vt),this.fixAndSetPosition()},wt=new WeakSet,ze=async function(){var S;const u=r(this,l);if(!u)return;if(!r(this,f)&&!r(this,m)){u.classList.remove("done"),(S=r(this,w))==null||S.remove();return}h._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{u.setAttribute("aria-label",N)});let _=r(this,w);if(!_){gt(this,w,_=document.createElement("span")),_.className="tooltip",_.setAttribute("role","tooltip");const N=_.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",N);const V=100;u.addEventListener("mouseenter",()=>{gt(this,P,setTimeout(()=>{gt(this,P,null),r(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},V))}),u.addEventListener("mouseleave",()=>{var Y;clearTimeout(r(this,P)),gt(this,P,null),(Y=r(this,w))==null||Y.classList.remove("show")})}u.classList.add("done"),_.innerText=r(this,m)?await h._l10nPromise.get("editor_alt_text_decorative_tooltip"):r(this,f),_.parentNode||u.append(_)},kt=new WeakSet,Cn=function(u){if(!this._isDraggable)return;const _=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let S,N;_&&(S={passive:!0,capture:!0},N=Y=>{const[dt,v]=this.screenToPageTranslation(Y.movementX,Y.movementY);this._uiManager.dragSelectedEditors(dt,v)},window.addEventListener("pointermove",N,S));const V=()=>{if(window.removeEventListener("pointerup",V),window.removeEventListener("blur",V),_&&window.removeEventListener("pointermove",N,S),gt(this,C,!1),!this._uiManager.endDragSession()){const{isMac:Y}=i.FeatureTest.platform;u.ctrlKey&&!Y||u.shiftKey||u.metaKey&&Y?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",V),window.addEventListener("blur",V)},G(h,j),se(h,"_borderLineWidth",-1),se(h,"_colorManager",new n.ColorManager),se(h,"_zIndex",1),se(h,"SMALL_EDITOR_SIZE",0);let o=h;e.AnnotationEditor=o;class y extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var T,k,M,E,C,Ge,x,g,A,H,F,Tn,L,Q,st,U,ot,pt,mt,X,yt,wt,Rt,kt,B,h,d,u,_,S,N,V,Y,dt,v,O,W,rt,K,ut,St,ft,_t,Z,J,q,ct,Pn,Et,qe,Lt,Xe,$t,Te,Wt,Ye,vt,Ke,nt,oe,Tt,_e,ee,Rn,Mt,kn,Ft,Je,zt,ye,Pt,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=a,e.opacityToHex=o;var n=s(1),i=s(6);function a($,c,D){for(const z of D)c.addEventListener(z,$[z].bind($))}function o($){return Math.round(Math.min(255,Math.max(1,255*$))).toString(16).padStart(2,"0")}class y{constructor(){G(this,T,0)}getId(){return`${n.AnnotationEditorPrefix}${be(this,T)._++}`}}T=new WeakMap;const R=class R{constructor(){G(this,C);G(this,k,(0,n.getUuid)());G(this,M,0);G(this,E,null)}static get _isSVGFittingCanvas(){const c='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',z=new OffscreenCanvas(1,3).getContext("2d"),et=new Image;et.src=c;const lt=et.decode().then(()=>(z.drawImage(et,0,0,1,1,0,0,1,3),new Uint32Array(z.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",lt)}async getFromFile(c){const{lastModified:D,name:z,size:et,type:lt}=c;return it(this,C,Ge).call(this,`${D}_${z}_${et}_${lt}`,c)}async getFromUrl(c){return it(this,C,Ge).call(this,c,c)}async getFromId(c){r(this,E)||gt(this,E,new Map);const D=r(this,E).get(c);return D?D.bitmap?(D.refCounter+=1,D):D.file?this.getFromFile(D.file):this.getFromUrl(D.url):null}getSvgUrl(c){const D=r(this,E).get(c);return D!=null&&D.isSvg?D.svgUrl:null}deleteId(c){r(this,E)||gt(this,E,new Map);const D=r(this,E).get(c);D&&(D.refCounter-=1,D.refCounter===0&&(D.bitmap=null))}isValidId(c){return c.startsWith(`image_${r(this,k)}_`)}};k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakSet,Ge=async function(c,D){r(this,E)||gt(this,E,new Map);let z=r(this,E).get(c);if(z===null)return null;if(z!=null&&z.bitmap)return z.refCounter+=1,z;try{z||(z={bitmap:null,id:`image_${r(this,k)}_${be(this,M)._++}`,refCounter:0,isSvg:!1});let et;if(typeof D=="string"){z.url=D;const lt=await fetch(D);if(!lt.ok)throw new Error(lt.statusText);et=await lt.blob()}else et=z.file=D;if(et.type==="image/svg+xml"){const lt=R._isSVGFittingCanvas,bt=new FileReader,Ct=new Image,Ot=new Promise((It,Xt)=>{Ct.onload=()=>{z.bitmap=Ct,z.isSvg=!0,It()},bt.onload=async()=>{const Nt=z.svgUrl=bt.result;Ct.src=await lt?`${Nt}#svgView(preserveAspectRatio(none))`:Nt},Ct.onerror=bt.onerror=Xt});bt.readAsDataURL(et),await Ot}else z.bitmap=await createImageBitmap(et);z.refCounter=1}catch(et){console.error(et),z=null}return r(this,E).set(c,z),z&&r(this,E).set(z.id,z),z};let f=R;class m{constructor(c=128){G(this,x,[]);G(this,g,!1);G(this,A,void 0);G(this,H,-1);gt(this,A,c)}add({cmd:c,undo:D,mustExec:z,type:et=NaN,overwriteIfSameType:lt=!1,keepUndo:bt=!1}){if(z&&c(),r(this,g))return;const Ct={cmd:c,undo:D,type:et};if(r(this,H)===-1){r(this,x).length>0&&(r(this,x).length=0),gt(this,H,0),r(this,x).push(Ct);return}if(lt&&r(this,x)[r(this,H)].type===et){bt&&(Ct.undo=r(this,x)[r(this,H)].undo),r(this,x)[r(this,H)]=Ct;return}const Ot=r(this,H)+1;Ot===r(this,A)?r(this,x).splice(0,1):(gt(this,H,Ot),Ot<r(this,x).length&&r(this,x).splice(Ot)),r(this,x).push(Ct)}undo(){r(this,H)!==-1&&(gt(this,g,!0),r(this,x)[r(this,H)].undo(),gt(this,g,!1),gt(this,H,r(this,H)-1))}redo(){r(this,H)<r(this,x).length-1&&(gt(this,H,r(this,H)+1),gt(this,g,!0),r(this,x)[r(this,H)].cmd(),gt(this,g,!1))}hasSomethingToUndo(){return r(this,H)!==-1}hasSomethingToRedo(){return r(this,H)<r(this,x).length-1}destroy(){gt(this,x,null)}}x=new WeakMap,g=new WeakMap,A=new WeakMap,H=new WeakMap,e.CommandManager=m;class l{constructor(c){G(this,F);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:D}=n.FeatureTest.platform;for(const[z,et,lt={}]of c)for(const bt of z){const Ct=bt.startsWith("mac+");D&&Ct?(this.callbacks.set(bt.slice(4),{callback:et,options:lt}),this.allKeys.add(bt.split("+").at(-1))):!D&&!Ct&&(this.callbacks.set(bt,{callback:et,options:lt}),this.allKeys.add(bt.split("+").at(-1)))}}exec(c,D){if(!this.allKeys.has(D.key))return;const z=this.callbacks.get(it(this,F,Tn).call(this,D));if(!z)return;const{callback:et,options:{bubbles:lt=!1,args:bt=[],checker:Ct=null}}=z;Ct&&!Ct(c,D)||(et.bind(c,...bt)(),lt||(D.stopPropagation(),D.preventDefault()))}}F=new WeakSet,Tn=function(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const D=this.buffer.join("+");return this.buffer.length=0,D},e.KeyboardManager=l;const j=class j{get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(c),(0,n.shadow)(this,"_colors",c)}convert(c){const D=(0,i.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[z,et]of this._colors)if(et.every((lt,bt)=>lt===D[bt]))return j._colorsMapping.get(z);return D}getHexCode(c){const D=this._colors.get(c);return D?n.Util.makeHexColor(...D):c}};se(j,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=j;e.ColorManager=w;const jt=class jt{constructor(c,D,z,et,lt,bt){G(this,ct);G(this,Et);G(this,Lt);G(this,$t);G(this,Wt);G(this,vt);G(this,nt);G(this,Tt);G(this,ee);G(this,Mt);G(this,Ft);G(this,zt);G(this,Pt);G(this,L,null);G(this,Q,new Map);G(this,st,new Map);G(this,U,null);G(this,ot,null);G(this,pt,new m);G(this,mt,0);G(this,X,new Set);G(this,yt,null);G(this,wt,null);G(this,Rt,new Set);G(this,kt,null);G(this,B,new y);G(this,h,!1);G(this,d,!1);G(this,u,null);G(this,_,n.AnnotationEditorType.NONE);G(this,S,new Set);G(this,N,null);G(this,V,this.blur.bind(this));G(this,Y,this.focus.bind(this));G(this,dt,this.copy.bind(this));G(this,v,this.cut.bind(this));G(this,O,this.paste.bind(this));G(this,W,this.keydown.bind(this));G(this,rt,this.onEditingAction.bind(this));G(this,K,this.onPageChanging.bind(this));G(this,ut,this.onScaleChanging.bind(this));G(this,St,this.onRotationChanging.bind(this));G(this,ft,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});G(this,_t,[0,0]);G(this,Z,null);G(this,J,null);G(this,q,null);gt(this,J,c),gt(this,q,D),gt(this,U,z),this._eventBus=et,this._eventBus._on("editingaction",r(this,rt)),this._eventBus._on("pagechanging",r(this,K)),this._eventBus._on("scalechanging",r(this,ut)),this._eventBus._on("rotationchanging",r(this,St)),gt(this,ot,lt.annotationStorage),gt(this,kt,lt.filterFactory),gt(this,N,bt),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const c=jt.prototype,D=lt=>{const{activeElement:bt}=document;return bt&&r(lt,J).contains(bt)&&lt.hasSomethingToControl()},z=this.TRANSLATE_SMALL,et=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],c.selectAll],[["ctrl+z","mac+meta+z"],c.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],c.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],c.delete],[["Escape","mac+Escape"],c.unselectAll],[["ArrowLeft","mac+ArrowLeft"],c.translateSelectedEditors,{args:[-z,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],c.translateSelectedEditors,{args:[-et,0],checker:D}],[["ArrowRight","mac+ArrowRight"],c.translateSelectedEditors,{args:[z,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],c.translateSelectedEditors,{args:[et,0],checker:D}],[["ArrowUp","mac+ArrowUp"],c.translateSelectedEditors,{args:[0,-z],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],c.translateSelectedEditors,{args:[0,-et],checker:D}],[["ArrowDown","mac+ArrowDown"],c.translateSelectedEditors,{args:[0,z],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],c.translateSelectedEditors,{args:[0,et],checker:D}]]))}destroy(){it(this,$t,Te).call(this),it(this,Et,qe).call(this),this._eventBus._off("editingaction",r(this,rt)),this._eventBus._off("pagechanging",r(this,K)),this._eventBus._off("scalechanging",r(this,ut)),this._eventBus._off("rotationchanging",r(this,St));for(const c of r(this,st).values())c.destroy();r(this,st).clear(),r(this,Q).clear(),r(this,Rt).clear(),gt(this,L,null),r(this,S).clear(),r(this,pt).destroy(),r(this,U).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",r(this,N)?r(this,kt).addHCMFilter(r(this,N).foreground,r(this,N).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(r(this,J)).direction)}editAltText(c){var D;(D=r(this,U))==null||D.editAltText(this,c)}onPageChanging({pageNumber:c}){gt(this,mt,c-1)}focusMainContainer(){r(this,J).focus()}findParent(c,D){for(const z of r(this,st).values()){const{x:et,y:lt,width:bt,height:Ct}=z.div.getBoundingClientRect();if(c>=et&&c<=et+bt&&D>=lt&&D<=lt+Ct)return z}return null}disableUserSelect(c=!1){r(this,q).classList.toggle("noUserSelect",c)}addShouldRescale(c){r(this,Rt).add(c)}removeShouldRescale(c){r(this,Rt).delete(c)}onScaleChanging({scale:c}){this.commitOrRemove(),this.viewParameters.realScale=c*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const D of r(this,Rt))D.onScaleChanging()}onRotationChanging({pagesRotation:c}){this.commitOrRemove(),this.viewParameters.rotation=c}addToAnnotationStorage(c){!c.isEmpty()&&r(this,ot)&&!r(this,ot).has(c.id)&&r(this,ot).setValue(c.id,c)}blur(){if(!this.hasSelection)return;const{activeElement:c}=document;for(const D of r(this,S))if(D.div.contains(c)){gt(this,u,[D,c]),D._focusEventsAllowed=!1;break}}focus(){if(!r(this,u))return;const[c,D]=r(this,u);gt(this,u,null),D.addEventListener("focusin",()=>{c._focusEventsAllowed=!0},{once:!0}),D.focus()}addEditListeners(){it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this)}removeEditListeners(){it(this,$t,Te).call(this),it(this,vt,Ke).call(this)}copy(c){var z;if(c.preventDefault(),(z=r(this,L))==null||z.commitOrRemove(),!this.hasSelection)return;const D=[];for(const et of r(this,S)){const lt=et.serialize(!0);lt&&D.push(lt)}D.length!==0&&c.clipboardData.setData("application/pdfjs",JSON.stringify(D))}cut(c){this.copy(c),this.delete()}paste(c){c.preventDefault();const{clipboardData:D}=c;for(const lt of D.items)for(const bt of r(this,wt))if(bt.isHandlingMimeForPasting(lt.type)){bt.paste(lt,this.currentLayer);return}let z=D.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(lt){(0,n.warn)(`paste: "${lt.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const et=this.currentLayer;try{const lt=[];for(const Ot of z){const It=et.deserialize(Ot);if(!It)return;lt.push(It)}const bt=()=>{for(const Ot of lt)it(this,Ft,Je).call(this,Ot);it(this,Pt,Qe).call(this,lt)},Ct=()=>{for(const Ot of lt)Ot.remove()};this.addCommands({cmd:bt,undo:Ct,mustExec:!0})}catch(lt){(0,n.warn)(`paste: "${lt.message}".`)}}keydown(c){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||jt._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","delete","selectAll"].includes(c.name)&&this[c.name]()}setEditingState(c){c?(it(this,ct,Pn).call(this),it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this),it(this,nt,oe).call(this,{isEditing:r(this,_)!==n.AnnotationEditorType.NONE,isEmpty:it(this,zt,ye).call(this),hasSomethingToUndo:r(this,pt).hasSomethingToUndo(),hasSomethingToRedo:r(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,Et,qe).call(this),it(this,$t,Te).call(this),it(this,vt,Ke).call(this),it(this,nt,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(c){if(!r(this,wt)){gt(this,wt,c);for(const D of r(this,wt))it(this,Tt,_e).call(this,D.defaultPropertiesToUpdate)}}getId(){return r(this,B).getId()}get currentLayer(){return r(this,st).get(r(this,mt))}getLayer(c){return r(this,st).get(c)}get currentPageIndex(){return r(this,mt)}addLayer(c){r(this,st).set(c.pageIndex,c),r(this,h)?c.enable():c.disable()}removeLayer(c){r(this,st).delete(c.pageIndex)}updateMode(c,D=null){if(r(this,_)!==c){if(gt(this,_,c),c===n.AnnotationEditorType.NONE){this.setEditingState(!1),it(this,Mt,kn).call(this);return}this.setEditingState(!0),it(this,ee,Rn).call(this),this.unselectAll();for(const z of r(this,st).values())z.updateMode(c);if(D){for(const z of r(this,Q).values())if(z.annotationElementId===D){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(c){c!==r(this,_)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,D){if(r(this,wt)){if(c===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(c);return}for(const z of r(this,S))z.updateParams(c,D);for(const z of r(this,wt))z.updateDefaultParams(c,D)}}enableWaiting(c=!1){if(r(this,d)!==c){gt(this,d,c);for(const D of r(this,st).values())c?D.disableClick():D.enableClick(),D.div.classList.toggle("waiting",c)}}getEditors(c){const D=[];for(const z of r(this,Q).values())z.pageIndex===c&&D.push(z);return D}getEditor(c){return r(this,Q).get(c)}addEditor(c){r(this,Q).set(c.id,c)}removeEditor(c){var D;r(this,Q).delete(c.id),this.unselect(c),(!c.annotationElementId||!r(this,X).has(c.annotationElementId))&&((D=r(this,ot))==null||D.remove(c.id))}addDeletedAnnotationElement(c){r(this,X).add(c.annotationElementId),c.deleted=!0}isDeletedAnnotationElement(c){return r(this,X).has(c)}removeDeletedAnnotationElement(c){r(this,X).delete(c.annotationElementId),c.deleted=!1}setActiveEditor(c){r(this,L)!==c&&(gt(this,L,c),c&&it(this,Tt,_e).call(this,c.propertiesToUpdate))}toggleSelected(c){if(r(this,S).has(c)){r(this,S).delete(c),c.unselect(),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,S).add(c),c.select(),it(this,Tt,_e).call(this,c.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}setSelected(c){for(const D of r(this,S))D!==c&&D.unselect();r(this,S).clear(),r(this,S).add(c),c.select(),it(this,Tt,_e).call(this,c.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}isSelected(c){return r(this,S).has(c)}unselect(c){c.unselect(),r(this,S).delete(c),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,S).size!==0}undo(){r(this,pt).undo(),it(this,nt,oe).call(this,{hasSomethingToUndo:r(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,zt,ye).call(this)})}redo(){r(this,pt).redo(),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,pt).hasSomethingToRedo(),isEmpty:it(this,zt,ye).call(this)})}addCommands(c){r(this,pt).add(c),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,zt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const c=[...r(this,S)],D=()=>{for(const et of c)et.remove()},z=()=>{for(const et of c)it(this,Ft,Je).call(this,et)};this.addCommands({cmd:D,undo:z,mustExec:!0})}commitOrRemove(){var c;(c=r(this,L))==null||c.commitOrRemove()}hasSomethingToControl(){return r(this,L)||this.hasSelection}selectAll(){for(const c of r(this,S))c.commit();it(this,Pt,Qe).call(this,r(this,Q).values())}unselectAll(){if(r(this,L)){r(this,L).commitOrRemove();return}if(this.hasSelection){for(const c of r(this,S))c.unselect();r(this,S).clear(),it(this,nt,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(c,D,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;r(this,_t)[0]+=c,r(this,_t)[1]+=D;const[et,lt]=r(this,_t),bt=[...r(this,S)],Ct=1e3;r(this,Z)&&clearTimeout(r(this,Z)),gt(this,Z,setTimeout(()=>{gt(this,Z,null),r(this,_t)[0]=r(this,_t)[1]=0,this.addCommands({cmd:()=>{for(const Ot of bt)r(this,Q).has(Ot.id)&&Ot.translateInPage(et,lt)},undo:()=>{for(const Ot of bt)r(this,Q).has(Ot.id)&&Ot.translateInPage(-et,-lt)},mustExec:!1})},Ct));for(const Ot of bt)Ot.translateInPage(c,D)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,yt,new Map);for(const c of r(this,S))r(this,yt).set(c,{savedX:c.x,savedY:c.y,savedPageIndex:c.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!r(this,yt))return!1;this.disableUserSelect(!1);const c=r(this,yt);gt(this,yt,null);let D=!1;for(const[{x:et,y:lt,pageIndex:bt},Ct]of c)Ct.newX=et,Ct.newY=lt,Ct.newPageIndex=bt,D||(D=et!==Ct.savedX||lt!==Ct.savedY||bt!==Ct.savedPageIndex);if(!D)return!1;const z=(et,lt,bt,Ct)=>{if(r(this,Q).has(et.id)){const Ot=r(this,st).get(Ct);Ot?et._setParentAndPosition(Ot,lt,bt):(et.pageIndex=Ct,et.x=lt,et.y=bt)}};return this.addCommands({cmd:()=>{for(const[et,{newX:lt,newY:bt,newPageIndex:Ct}]of c)z(et,lt,bt,Ct)},undo:()=>{for(const[et,{savedX:lt,savedY:bt,savedPageIndex:Ct}]of c)z(et,lt,bt,Ct)},mustExec:!0}),!0}dragSelectedEditors(c,D){if(r(this,yt))for(const z of r(this,yt).keys())z.drag(c,D)}rebuild(c){if(c.parent===null){const D=this.getLayer(c.pageIndex);D?(D.changeParent(c),D.addOrRebuild(c)):(this.addEditor(c),this.addToAnnotationStorage(c),c.rebuild())}else c.parent.addOrRebuild(c)}isActive(c){return r(this,L)===c}getActive(){return r(this,L)}getMode(){return r(this,_)}get imageManager(){return(0,n.shadow)(this,"imageManager",new f)}};L=new WeakMap,Q=new WeakMap,st=new WeakMap,U=new WeakMap,ot=new WeakMap,pt=new WeakMap,mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,B=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,_=new WeakMap,S=new WeakMap,N=new WeakMap,V=new WeakMap,Y=new WeakMap,dt=new WeakMap,v=new WeakMap,O=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,_t=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakSet,Pn=function(){window.addEventListener("focus",r(this,Y)),window.addEventListener("blur",r(this,V))},Et=new WeakSet,qe=function(){window.removeEventListener("focus",r(this,Y)),window.removeEventListener("blur",r(this,V))},Lt=new WeakSet,Xe=function(){window.addEventListener("keydown",r(this,W),{capture:!0})},$t=new WeakSet,Te=function(){window.removeEventListener("keydown",r(this,W),{capture:!0})},Wt=new WeakSet,Ye=function(){document.addEventListener("copy",r(this,dt)),document.addEventListener("cut",r(this,v)),document.addEventListener("paste",r(this,O))},vt=new WeakSet,Ke=function(){document.removeEventListener("copy",r(this,dt)),document.removeEventListener("cut",r(this,v)),document.removeEventListener("paste",r(this,O))},nt=new WeakSet,oe=function(c){Object.entries(c).some(([z,et])=>r(this,ft)[z]!==et)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,ft),c)})},Tt=new WeakSet,_e=function(c){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:c})},ee=new WeakSet,Rn=function(){if(!r(this,h)){gt(this,h,!0);for(const c of r(this,st).values())c.enable()}},Mt=new WeakSet,kn=function(){if(this.unselectAll(),r(this,h)){gt(this,h,!1);for(const c of r(this,st).values())c.disable()}},Ft=new WeakSet,Je=function(c){const D=r(this,st).get(c.pageIndex);D?D.addOrRebuild(c):this.addEditor(c)},zt=new WeakSet,ye=function(){if(r(this,Q).size===0)return!0;if(r(this,Q).size===1)for(const c of r(this,Q).values())return c.isEmpty();return!1},Pt=new WeakSet,Qe=function(c){r(this,S).clear();for(const D of c)D.isEmpty()||(r(this,S).add(D),D.select());it(this,nt,oe).call(this,{hasSelectedEditor:!0})},se(jt,"TRANSLATE_SMALL",1),se(jt,"TRANSLATE_BIG",10);let P=jt;e.AnnotationEditorUIManager=P},(t,e,s)=>{var mt,X,yt,wt,Rt,kt,B,h,d,u,_,S,fe,V,pe,dt,Ze,O,Pe,rt,Re,ut,ve,ft,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=H,e.getColorValues=Q,e.getCurrentTransform=st,e.getCurrentTransformInverse=U,e.getFilenameFromUrl=C,e.getPdfFilenameFromUrl=I,e.getRGB=L,e.getXfaPageViewport=j,e.isDataScheme=M,e.isPdfFile=E,e.isValidFetchUrl=x,e.loadScript=A,e.noContextMenu=g,e.setLayerDimensions=ot;var n=s(7),i=s(1);const a="http://www.w3.org/2000/svg",pt=class pt{};se(pt,"CSS",96),se(pt,"PDF",72),se(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let o=pt;e.PixelsPerInch=o;class y extends n.BaseFilterFactory{constructor({docId:q,ownerDocument:ct=globalThis.document}={}){super();G(this,S);G(this,V);G(this,dt);G(this,O);G(this,rt);G(this,ut);G(this,ft);G(this,mt,void 0);G(this,X,void 0);G(this,yt,void 0);G(this,wt,void 0);G(this,Rt,void 0);G(this,kt,void 0);G(this,B,void 0);G(this,h,void 0);G(this,d,void 0);G(this,u,void 0);G(this,_,0);gt(this,yt,q),gt(this,wt,ct)}addFilter(q){if(!q)return"none";let ct=r(this,S,fe).get(q);if(ct)return ct;let At,Et,Dt,Lt;if(q.length===1){const Wt=q[0],Yt=new Array(256);for(let vt=0;vt<256;vt++)Yt[vt]=Wt[vt]/255;Lt=At=Et=Dt=Yt.join(",")}else{const[Wt,Yt,vt]=q,at=new Array(256),nt=new Array(256),xt=new Array(256);for(let Tt=0;Tt<256;Tt++)at[Tt]=Wt[Tt]/255,nt[Tt]=Yt[Tt]/255,xt[Tt]=vt[Tt]/255;At=at.join(","),Et=nt.join(","),Dt=xt.join(","),Lt=`${At}${Et}${Dt}`}if(ct=r(this,S,fe).get(Lt),ct)return r(this,S,fe).set(q,ct),ct;const Ut=`g_${r(this,yt)}_transfer_map_${be(this,_)._++}`,$t=`url(#${Ut})`;r(this,S,fe).set(q,$t),r(this,S,fe).set(Lt,$t);const Gt=it(this,O,Pe).call(this,Ut);return it(this,ut,ve).call(this,At,Et,Dt,Gt),$t}addHCMFilter(q,ct){var Yt;const At=`${q}-${ct}`;if(r(this,kt)===At)return r(this,B);if(gt(this,kt,At),gt(this,B,"none"),(Yt=r(this,Rt))==null||Yt.remove(),!q||!ct)return r(this,B);const Et=it(this,ft,Ae).call(this,q);q=i.Util.makeHexColor(...Et);const Dt=it(this,ft,Ae).call(this,ct);if(ct=i.Util.makeHexColor(...Dt),r(this,V,pe).style.color="",q==="#000000"&&ct==="#ffffff"||q===ct)return r(this,B);const Lt=new Array(256);for(let vt=0;vt<=255;vt++){const at=vt/255;Lt[vt]=at<=.03928?at/12.92:((at+.055)/1.055)**2.4}const Ut=Lt.join(","),$t=`g_${r(this,yt)}_hcm_filter`,Gt=gt(this,h,it(this,O,Pe).call(this,$t));it(this,ut,ve).call(this,Ut,Ut,Ut,Gt),it(this,dt,Ze).call(this,Gt);const Wt=(vt,at)=>{const nt=Et[vt]/255,xt=Dt[vt]/255,Tt=new Array(at+1);for(let ne=0;ne<=at;ne++)Tt[ne]=nt+ne/at*(xt-nt);return Tt.join(",")};return it(this,ut,ve).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Gt),gt(this,B,`url(#${$t})`),r(this,B)}addHighlightHCMFilter(q,ct,At,Et){var xt;const Dt=`${q}-${ct}-${At}-${Et}`;if(r(this,d)===Dt)return r(this,u);if(gt(this,d,Dt),gt(this,u,"none"),(xt=r(this,h))==null||xt.remove(),!q||!ct)return r(this,u);const[Lt,Ut]=[q,ct].map(it(this,ft,Ae).bind(this));let $t=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),Gt=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),[Wt,Yt]=[At,Et].map(it(this,ft,Ae).bind(this));Gt<$t&&([$t,Gt,Wt,Yt]=[Gt,$t,Yt,Wt]),r(this,V,pe).style.color="";const vt=(Tt,ne,ee)=>{const ht=new Array(256),Mt=(Gt-$t)/ee,Ht=Tt/255,Ft=(ne-Tt)/(255*ee);let Vt=0;for(let zt=0;zt<=ee;zt++){const Zt=Math.round($t+zt*Mt),Pt=Ht+zt*Ft;for(let Jt=Vt;Jt<=Zt;Jt++)ht[Jt]=Pt;Vt=Zt+1}for(let zt=Vt;zt<256;zt++)ht[zt]=ht[Vt-1];return ht.join(",")},at=`g_${r(this,yt)}_hcm_highlight_filter`,nt=gt(this,h,it(this,O,Pe).call(this,at));return it(this,dt,Ze).call(this,nt),it(this,ut,ve).call(this,vt(Wt[0],Yt[0],5),vt(Wt[1],Yt[1],5),vt(Wt[2],Yt[2],5),nt),gt(this,u,`url(#${at})`),r(this,u)}destroy(q=!1){q&&(r(this,B)||r(this,u))||(r(this,X)&&(r(this,X).parentNode.parentNode.remove(),gt(this,X,null)),r(this,mt)&&(r(this,mt).clear(),gt(this,mt,null)),gt(this,_,0))}}mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,B=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,_=new WeakMap,S=new WeakSet,fe=function(){return r(this,mt)||gt(this,mt,new Map)},V=new WeakSet,pe=function(){if(!r(this,X)){const q=r(this,wt).createElement("div"),{style:ct}=q;ct.visibility="hidden",ct.contain="strict",ct.width=ct.height=0,ct.position="absolute",ct.top=ct.left=0,ct.zIndex=-1;const At=r(this,wt).createElementNS(a,"svg");At.setAttribute("width",0),At.setAttribute("height",0),gt(this,X,r(this,wt).createElementNS(a,"defs")),q.append(At),At.append(r(this,X)),r(this,wt).body.append(q)}return r(this,X)},dt=new WeakSet,Ze=function(q){const ct=r(this,wt).createElementNS(a,"feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(ct)},O=new WeakSet,Pe=function(q){const ct=r(this,wt).createElementNS(a,"filter");return ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("id",q),r(this,V,pe).append(ct),ct},rt=new WeakSet,Re=function(q,ct,At){const Et=r(this,wt).createElementNS(a,ct);Et.setAttribute("type","discrete"),Et.setAttribute("tableValues",At),q.append(Et)},ut=new WeakSet,ve=function(q,ct,At,Et){const Dt=r(this,wt).createElementNS(a,"feComponentTransfer");Et.append(Dt),it(this,rt,Re).call(this,Dt,"feFuncR",q),it(this,rt,Re).call(this,Dt,"feFuncG",ct),it(this,rt,Re).call(this,Dt,"feFuncB",At)},ft=new WeakSet,Ae=function(q){return r(this,V,pe).style.color=q,L(getComputedStyle(r(this,V,pe)).getPropertyValue("color"))},e.DOMFilterFactory=y;class f extends n.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,q){const ct=this._document.createElement("canvas");return ct.width=J,ct.height=q,ct}}e.DOMCanvasFactory=f;async function m(Z,J=!1){if(x(Z,document.baseURI)){const q=await fetch(Z);if(!q.ok)throw new Error(q.statusText);return J?new Uint8Array(await q.arrayBuffer()):(0,i.stringToBytes)(await q.text())}return new Promise((q,ct)=>{const At=new XMLHttpRequest;At.open("GET",Z,!0),J&&(At.responseType="arraybuffer"),At.onreadystatechange=()=>{if(At.readyState===XMLHttpRequest.DONE){if(At.status===200||At.status===0){let Et;if(J&&At.response?Et=new Uint8Array(At.response):!J&&At.responseText&&(Et=(0,i.stringToBytes)(At.responseText)),Et){q(Et);return}}ct(new Error(At.statusText))}},At.send(null)})}class l extends n.BaseCMapReaderFactory{_fetchData(J,q){return m(J,this.isCompressed).then(ct=>({cMapData:ct,compressionType:q}))}}e.DOMCMapReaderFactory=l;class w extends n.BaseStandardFontDataFactory{_fetchData(J){return m(J,!0)}}e.DOMStandardFontDataFactory=w;class P extends n.BaseSVGFactory{_createSVG(J){return document.createElementNS(a,J)}}e.DOMSVGFactory=P;class T{constructor({viewBox:J,scale:q,rotation:ct,offsetX:At=0,offsetY:Et=0,dontFlip:Dt=!1}){this.viewBox=J,this.scale=q,this.rotation=ct,this.offsetX=At,this.offsetY=Et;const Lt=(J[2]+J[0])/2,Ut=(J[3]+J[1])/2;let $t,Gt,Wt,Yt;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:$t=-1,Gt=0,Wt=0,Yt=1;break;case 90:$t=0,Gt=1,Wt=1,Yt=0;break;case 270:$t=0,Gt=-1,Wt=-1,Yt=0;break;case 0:$t=1,Gt=0,Wt=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Wt=-Wt,Yt=-Yt);let vt,at,nt,xt;$t===0?(vt=Math.abs(Ut-J[1])*q+At,at=Math.abs(Lt-J[0])*q+Et,nt=(J[3]-J[1])*q,xt=(J[2]-J[0])*q):(vt=Math.abs(Lt-J[0])*q+At,at=Math.abs(Ut-J[1])*q+Et,nt=(J[2]-J[0])*q,xt=(J[3]-J[1])*q),this.transform=[$t*q,Gt*q,Wt*q,Yt*q,vt-$t*q*Lt-Wt*q*Ut,at-Gt*q*Lt-Yt*q*Ut],this.width=nt,this.height=xt}get rawDims(){const{viewBox:J}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:q=this.rotation,offsetX:ct=this.offsetX,offsetY:At=this.offsetY,dontFlip:Et=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:J,rotation:q,offsetX:ct,offsetY:At,dontFlip:Et})}convertToViewportPoint(J,q){return i.Util.applyTransform([J,q],this.transform)}convertToViewportRectangle(J){const q=i.Util.applyTransform([J[0],J[1]],this.transform),ct=i.Util.applyTransform([J[2],J[3]],this.transform);return[q[0],q[1],ct[0],ct[1]]}convertToPdfPoint(J,q){return i.Util.applyInverseTransform([J,q],this.transform)}}e.PageViewport=T;class k extends i.BaseException{constructor(J,q=0){super(J,"RenderingCancelledException"),this.extraDelay=q}}e.RenderingCancelledException=k;function M(Z){const J=Z.length;let q=0;for(;q<J&&Z[q].trim()==="";)q++;return Z.substring(q,q+5).toLowerCase()==="data:"}function E(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function C(Z,J=!1){return J||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function I(Z,J="document.pdf"){if(typeof Z!="string")return J;if(M(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,At=q.exec(Z);let Et=ct.exec(At[1])||ct.exec(At[2])||ct.exec(At[3]);if(Et&&(Et=Et[0],Et.includes("%")))try{Et=ct.exec(decodeURIComponent(Et))[0]}catch{}return Et||J}class R{constructor(){se(this,"started",Object.create(null));se(this,"times",[])}time(J){J in this.started&&(0,i.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,i.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let q=0;for(const{name:ct}of this.times)q=Math.max(ct.length,q);for(const{name:ct,start:At,end:Et}of this.times)J.push(`${ct.padEnd(q)} ${Et-At}ms
`);return J.join("")}}e.StatTimer=R;function x(Z,J){try{const{protocol:q}=J?new URL(Z,J):new URL(Z);return q==="http:"||q==="https:"}catch{return!1}}function g(Z){Z.preventDefault()}function A(Z,J=!1){return new Promise((q,ct)=>{const At=document.createElement("script");At.src=Z,At.onload=function(Et){J&&At.remove(),q(Et)},At.onerror=function(){ct(new Error(`Cannot load script at: ${At.src}`))},(document.head||document.documentElement).append(At)})}function H(Z){console.log("Deprecated API usage: "+Z)}let F;class b{static toDateObject(J){if(!J||typeof J!="string")return null;F||(F=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=F.exec(J);if(!q)return null;const ct=parseInt(q[1],10);let At=parseInt(q[2],10);At=At>=1&&At<=12?At-1:0;let Et=parseInt(q[3],10);Et=Et>=1&&Et<=31?Et:1;let Dt=parseInt(q[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Lt=parseInt(q[5],10);Lt=Lt>=0&&Lt<=59?Lt:0;let Ut=parseInt(q[6],10);Ut=Ut>=0&&Ut<=59?Ut:0;const $t=q[7]||"Z";let Gt=parseInt(q[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Wt=parseInt(q[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,$t==="-"?(Dt+=Gt,Lt+=Wt):$t==="+"&&(Dt-=Gt,Lt-=Wt),new Date(Date.UTC(ct,At,Et,Dt,Lt,Ut))}}e.PDFDateString=b;function j(Z,{scale:J=1,rotation:q=0}){const{width:ct,height:At}=Z.attributes.style,Et=[0,0,parseInt(ct),parseInt(At)];return new T({viewBox:Et,scale:J,rotation:q})}function L(Z){if(Z.startsWith("#")){const J=parseInt(Z.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(J=>parseInt(J)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function Q(Z){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const q of Z.keys()){J.style.color=q;const ct=window.getComputedStyle(J).color;Z.set(q,L(ct))}J.remove()}function st(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform();return[J,q,ct,At,Et,Dt]}function U(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform().invertSelf();return[J,q,ct,At,Et,Dt]}function ot(Z,J,q=!1,ct=!0){if(J instanceof T){const{pageWidth:At,pageHeight:Et}=J.rawDims,{style:Dt}=Z,Lt=i.FeatureTest.isCSSRoundSupported,Ut=`var(--scale-factor) * ${At}px`,$t=`var(--scale-factor) * ${Et}px`,Gt=Lt?`round(${Ut}, 1px)`:`calc(${Ut})`,Wt=Lt?`round(${$t}, 1px)`:`calc(${$t})`;!q||J.rotation%180===0?(Dt.width=Gt,Dt.height=Wt):(Dt.width=Wt,Dt.height=Gt)}ct&&Z.setAttribute("data-main-rotation",J.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,w){return"none"}addHighlightHCMFilter(l,w,P,T){return"none"}destroy(l=!1){}}e.BaseFilterFactory=i;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,w){if(l<=0||w<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(l,w);return{canvas:P,context:P.getContext("2d")}}reset(l,w,P){if(!l.canvas)throw new Error("Canvas is not specified");if(w<=0||P<=0)throw new Error("Invalid canvas size");l.canvas.width=w,l.canvas.height=P}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,w){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=a;class o{constructor({baseUrl:l=null,isCompressed:w=!0}){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=w}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const w=this.baseUrl+l+(this.isCompressed?".bcmap":""),P=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(w,P).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(l,w){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class y{constructor({baseUrl:l=null}){this.constructor===y&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${l}`;return this._fetchData(w).catch(P=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(l){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=y;class f{constructor(){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,w,P=!1){if(l<=0||w<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),P||(T.setAttribute("width",`${l}px`),T.setAttribute("height",`${w}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${l} ${w}`),T}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=f},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,a=4294901760,o=65535;class y{constructor(m){this.h1=m?m&4294967295:i,this.h2=m?m&4294967295:i}update(m){let l,w;if(typeof m=="string"){l=new Uint8Array(m.length*2),w=0;for(let H=0,F=m.length;H<F;H++){const b=m.charCodeAt(H);b<=255?l[w++]=b:(l[w++]=b>>>8,l[w++]=b&255)}}else if((0,n.isArrayBuffer)(m))l=m.slice(),w=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=w>>2,T=w-P*4,k=new Uint32Array(l.buffer,0,P);let M=0,E=0,C=this.h1,I=this.h2;const R=3432918353,x=461845907,g=R&o,A=x&o;for(let H=0;H<P;H++)H&1?(M=k[H],M=M*R&a|M*g&o,M=M<<15|M>>>17,M=M*x&a|M*A&o,C^=M,C=C<<13|C>>>19,C=C*5+3864292196):(E=k[H],E=E*R&a|E*g&o,E=E<<15|E>>>17,E=E*x&a|E*A&o,I^=E,I=I<<13|I>>>19,I=I*5+3864292196);switch(M=0,T){case 3:M^=l[P*4+2]<<16;case 2:M^=l[P*4+1]<<8;case 1:M^=l[P*4],M=M*R&a|M*g&o,M=M<<15|M>>>17,M=M*x&a|M*A&o,P&1?C^=M:I^=M}this.h1=C,this.h2=I}hexdigest(){let m=this.h1,l=this.h2;return m^=l>>>1,m=m*3981806797&a|m*36045&o,l=l*4283543511&a|((l<<16|m>>>16)*2950163797&a)>>>16,m^=l>>>1,m=m*444984403&a|m*60499&o,l=l*3301882366&a|((l<<16|m>>>16)*3120437893&a)>>>16,m^=l>>>1,(m>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=y},(t,e,s)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:f=globalThis.document,styleElement:m=null}){G(this,o,new Set);this._document=f,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(f){this.nativeFontFaces.add(f),this._document.fonts.add(f)}removeNativeFontFace(f){this.nativeFontFaces.delete(f),this._document.fonts.delete(f)}insertRule(f){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(f,m.cssRules.length)}clear(){for(const f of this.nativeFontFaces)this._document.fonts.delete(f);this.nativeFontFaces.clear(),r(this,o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(f){if(!(!f||r(this,o).has(f.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:l,style:w}=f,P=new FontFace(m,l,w);this.addNativeFontFace(P);try{await P.load(),r(this,o).add(m)}catch{(0,n.warn)(`Cannot load system font: ${f.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(P)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(f){if(f.attached||f.missingFile&&!f.systemFontInfo)return;if(f.attached=!0,f.systemFontInfo){await this.loadSystemFont(f.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=f.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(w){throw(0,n.warn)(`Failed to load font '${l.family}': '${w}'.`),f.disableFontFace=!0,w}}return}const m=f.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const w=this._queueLoadingCallback(l);this._prepareFontLoadEvent(f,w)})}}get isFontLoadingAPISupported(){var m;const f=!!((m=this._document)!=null&&m.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",f)}get isSyncFontLoadingSupported(){let f=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(f=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",f)}_queueLoadingCallback(f){function m(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;l.length>0&&l[0].done;){const P=l.shift();setTimeout(P.callback,0)}}const{loadingRequests:l}=this,w={done:!1,complete:m,callback:f};return l.push(w),w}get _loadTestFont(){const f=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",f)}_prepareFontLoadEvent(f,m){function l(L,Q){return L.charCodeAt(Q)<<24|L.charCodeAt(Q+1)<<16|L.charCodeAt(Q+2)<<8|L.charCodeAt(Q+3)&255}function w(L,Q,st,U){const ot=L.substring(0,Q),pt=L.substring(Q+st);return ot+U+pt}let P,T;const k=this._document.createElement("canvas");k.width=1,k.height=1;const M=k.getContext("2d");let E=0;function C(L,Q){if(++E>30){(0,n.warn)("Load test font never loaded."),Q();return}if(M.font="30px "+L,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(C.bind(null,L,Q))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=w(R,976,I.length,I);const g=16,A=1482184792;let H=l(R,g);for(P=0,T=I.length-3;P<T;P+=4)H=H-A+l(I,P)|0;P<I.length&&(H=H-A+l(I+"XXX",P)|0),R=w(R,g,4,(0,n.string32)(H));const F=`url(data:font/opentype;base64,${btoa(R)});`,b=`@font-face {font-family:"${I}";src:${F}}`;this.insertRule(b);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const L of[f.loadedName,I]){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=L,j.append(Q)}this._document.body.append(j),C(I,()=>{j.remove(),m.complete()})}}o=new WeakMap,e.FontLoader=i;class a{constructor(f,{isEvalSupported:m=!0,disableFontFace:l=!1,ignoreErrors:w=!1,inspectFont:P=null}){this.compiledGlyphs=Object.create(null);for(const T in f)this[T]=f[T];this.isEvalSupported=m!==!1,this.disableFontFace=l===!0,this.ignoreErrors=w===!0,this._inspectFont=P}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let f;if(!this.cssFontInfo)f=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),f=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(m=this._inspectFont)==null||m.call(this,this),f}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const f=(0,n.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(f)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${m}}`}return(w=this._inspectFont)==null||w.call(this,this,m),l}getPathGenerator(f,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let l;try{l=f.get(this.loadedName+"_path_"+m)}catch(w){if(!this.ignoreErrors)throw w;return(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[m]=function(P,T){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const P of l){const T=P.args!==void 0?P.args.join(","):"";w.push("c.",P.cmd,"(",T,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",w.join(""))}return this.compiledGlyphs[m]=function(w,P){for(const T of l)T.cmd==="scale"&&(T.args=[P,-P]),w[T.cmd].apply(w,T.args)}}}e.FontFaceObject=a},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(m){return new Promise((l,w)=>{require$$5.readFile(m,(T,k)=>{if(T||!k){w(new Error(T));return}l(new Uint8Array(k))})})};class a extends n.BaseFilterFactory{}e.NodeFilterFactory=a;class o extends n.BaseCanvasFactory{_createCanvas(l,w){return require$$5.createCanvas(l,w)}}e.NodeCanvasFactory=o;class y extends n.BaseCMapReaderFactory{_fetchData(l,w){return i(l).then(P=>({cMapData:P,compressionType:w}))}}e.NodeCMapReaderFactory=y;class f extends n.BaseStandardFontDataFactory{_fetchData(l){return i(l)}}e.NodeStandardFontDataFactory=f},(t,e,s)=>{var X,tn,wt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),i=s(6),a=s(12),o=s(13);const y=16,f=100,m=4096,l=15,w=10,P=1e3,T=16;function k(B,h){if(B._removeMirroring)throw new Error("Context is already forwarding operations.");B.__originalSave=B.save,B.__originalRestore=B.restore,B.__originalRotate=B.rotate,B.__originalScale=B.scale,B.__originalTranslate=B.translate,B.__originalTransform=B.transform,B.__originalSetTransform=B.setTransform,B.__originalResetTransform=B.resetTransform,B.__originalClip=B.clip,B.__originalMoveTo=B.moveTo,B.__originalLineTo=B.lineTo,B.__originalBezierCurveTo=B.bezierCurveTo,B.__originalRect=B.rect,B.__originalClosePath=B.closePath,B.__originalBeginPath=B.beginPath,B._removeMirroring=()=>{B.save=B.__originalSave,B.restore=B.__originalRestore,B.rotate=B.__originalRotate,B.scale=B.__originalScale,B.translate=B.__originalTranslate,B.transform=B.__originalTransform,B.setTransform=B.__originalSetTransform,B.resetTransform=B.__originalResetTransform,B.clip=B.__originalClip,B.moveTo=B.__originalMoveTo,B.lineTo=B.__originalLineTo,B.bezierCurveTo=B.__originalBezierCurveTo,B.rect=B.__originalRect,B.closePath=B.__originalClosePath,B.beginPath=B.__originalBeginPath,delete B._removeMirroring},B.save=function(){h.save(),this.__originalSave()},B.restore=function(){h.restore(),this.__originalRestore()},B.translate=function(u,_){h.translate(u,_),this.__originalTranslate(u,_)},B.scale=function(u,_){h.scale(u,_),this.__originalScale(u,_)},B.transform=function(u,_,S,N,V,Y){h.transform(u,_,S,N,V,Y),this.__originalTransform(u,_,S,N,V,Y)},B.setTransform=function(u,_,S,N,V,Y){h.setTransform(u,_,S,N,V,Y),this.__originalSetTransform(u,_,S,N,V,Y)},B.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},B.rotate=function(u){h.rotate(u),this.__originalRotate(u)},B.clip=function(u){h.clip(u),this.__originalClip(u)},B.moveTo=function(d,u){h.moveTo(d,u),this.__originalMoveTo(d,u)},B.lineTo=function(d,u){h.lineTo(d,u),this.__originalLineTo(d,u)},B.bezierCurveTo=function(d,u,_,S,N,V){h.bezierCurveTo(d,u,_,S,N,V),this.__originalBezierCurveTo(d,u,_,S,N,V)},B.rect=function(d,u,_,S){h.rect(d,u,_,S),this.__originalRect(d,u,_,S)},B.closePath=function(){h.closePath(),this.__originalClosePath()},B.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class M{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,d,u){let _;return this.cache[h]!==void 0?(_=this.cache[h],this.canvasFactory.reset(_,d,u)):(_=this.canvasFactory.create(d,u),this.cache[h]=_),_}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const d=this.cache[h];this.canvasFactory.destroy(d),delete this.cache[h]}}}function E(B,h,d,u,_,S,N,V,Y,dt){const[v,O,W,rt,K,ut]=(0,i.getCurrentTransform)(B);if(O===0&&W===0){const _t=N*v+K,Z=Math.round(_t),J=V*rt+ut,q=Math.round(J),ct=(N+Y)*v+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(V+dt)*rt+ut,Dt=Math.abs(Math.round(Et)-q)||1;return B.setTransform(Math.sign(v),0,0,Math.sign(rt),Z,q),B.drawImage(h,d,u,_,S,0,0,At,Dt),B.setTransform(v,O,W,rt,K,ut),[At,Dt]}if(v===0&&rt===0){const _t=V*W+K,Z=Math.round(_t),J=N*O+ut,q=Math.round(J),ct=(V+dt)*W+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(N+Y)*O+ut,Dt=Math.abs(Math.round(Et)-q)||1;return B.setTransform(0,Math.sign(O),Math.sign(W),0,Z,q),B.drawImage(h,d,u,_,S,0,0,Dt,At),B.setTransform(v,O,W,rt,K,ut),[Dt,At]}B.drawImage(h,d,u,_,S,N,V,Y,dt);const St=Math.hypot(v,O),ft=Math.hypot(W,rt);return[St*Y,ft*dt]}function C(B){const{width:h,height:d}=B;if(h>P||d>P)return null;const u=1e3,_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),S=h+1;let N=new Uint8Array(S*(d+1)),V,Y,dt;const v=h+7&-8;let O=new Uint8Array(v*d),W=0;for(const ft of B.data){let _t=128;for(;_t>0;)O[W++]=ft&_t?0:255,_t>>=1}let rt=0;for(W=0,O[W]!==0&&(N[0]=1,++rt),Y=1;Y<h;Y++)O[W]!==O[W+1]&&(N[Y]=O[W]?2:1,++rt),W++;for(O[W]!==0&&(N[Y]=2,++rt),V=1;V<d;V++){W=V*v,dt=V*S,O[W-v]!==O[W]&&(N[dt]=O[W]?1:8,++rt);let ft=(O[W]?4:0)+(O[W-v]?8:0);for(Y=1;Y<h;Y++)ft=(ft>>2)+(O[W+1]?4:0)+(O[W-v+1]?8:0),_[ft]&&(N[dt+Y]=_[ft],++rt),W++;if(O[W-v]!==O[W]&&(N[dt+Y]=O[W]?2:4,++rt),rt>u)return null}for(W=v*(d-1),dt=V*S,O[W]!==0&&(N[dt]=8,++rt),Y=1;Y<h;Y++)O[W]!==O[W+1]&&(N[dt+Y]=O[W]?4:8,++rt),W++;if(O[W]!==0&&(N[dt+Y]=4,++rt),rt>u)return null;const K=new Int32Array([0,S,-1,0,-S,0,0,0,1]),ut=new Path2D;for(V=0;rt&&V<=d;V++){let ft=V*S;const _t=ft+h;for(;ft<_t&&!N[ft];)ft++;if(ft===_t)continue;ut.moveTo(ft%S,V);const Z=ft;let J=N[ft];do{const q=K[J];do ft+=q;while(!N[ft]);const ct=N[ft];ct!==5&&ct!==10?(J=ct,N[ft]=0):(J=ct&51*J>>4,N[ft]&=J>>2|J<<2),ut.lineTo(ft%S,ft/S|0),N[ft]||--rt}while(Z!==ft);--V}return O=null,N=null,function(ft){ft.save(),ft.scale(1/h,-1/d),ft.translate(0,-d),ft.fill(ut),ft.beginPath(),ft.restore()}}class I{constructor(h,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,d])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,d){this.x=h,this.y=d}updatePathMinMax(h,d,u){[d,u]=n.Util.applyTransform([d,u],h),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(h,d){const u=n.Util.applyTransform(d,h),_=n.Util.applyTransform(d.slice(2),h);this.minX=Math.min(this.minX,u[0],_[0]),this.minY=Math.min(this.minY,u[1],_[1]),this.maxX=Math.max(this.maxX,u[0],_[0]),this.maxY=Math.max(this.maxY,u[1],_[1])}updateScalingPathMinMax(h,d){n.Util.scaleMinMax(h,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(h,d,u,_,S,N,V,Y,dt,v){const O=n.Util.bezierBoundingBox(d,u,_,S,N,V,Y,dt);if(v){v[0]=Math.min(v[0],O[0],O[2]),v[1]=Math.max(v[1],O[0],O[2]),v[2]=Math.min(v[2],O[1],O[3]),v[3]=Math.max(v[3],O[1],O[3]);return}this.updateRectMinMax(h,O)}getPathBoundingBox(h=a.PathType.FILL,d=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(h===a.PathType.STROKE){d||(0,n.unreachable)("Stroke bounding box must include transform.");const _=n.Util.singularValueDecompose2dScale(d),S=_[0]*this.lineWidth/2,N=_[1]*this.lineWidth/2;u[0]-=S,u[1]-=N,u[2]+=S,u[3]+=N}return u}updateClipFromPath(){const h=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=a.PathType.FILL,d=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(h,d))}}function R(B,h){if(typeof ImageData<"u"&&h instanceof ImageData){B.putImageData(h,0,0);return}const d=h.height,u=h.width,_=d%T,S=(d-_)/T,N=_===0?S:S+1,V=B.createImageData(u,T);let Y=0,dt;const v=h.data,O=V.data;let W,rt,K,ut;if(h.kind===n.ImageKind.GRAYSCALE_1BPP){const St=v.byteLength,ft=new Uint32Array(O.buffer,0,O.byteLength>>2),_t=ft.length,Z=u+7>>3,J=4294967295,q=n.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<N;W++){for(K=W<S?T:_,dt=0,rt=0;rt<K;rt++){const ct=St-Y;let At=0;const Et=ct>Z?u:ct*8-7,Dt=Et&-8;let Lt=0,Ut=0;for(;At<Dt;At+=8)Ut=v[Y++],ft[dt++]=Ut&128?J:q,ft[dt++]=Ut&64?J:q,ft[dt++]=Ut&32?J:q,ft[dt++]=Ut&16?J:q,ft[dt++]=Ut&8?J:q,ft[dt++]=Ut&4?J:q,ft[dt++]=Ut&2?J:q,ft[dt++]=Ut&1?J:q;for(;At<Et;At++)Lt===0&&(Ut=v[Y++],Lt=128),ft[dt++]=Ut&Lt?J:q,Lt>>=1}for(;dt<_t;)ft[dt++]=0;B.putImageData(V,0,W*T)}}else if(h.kind===n.ImageKind.RGBA_32BPP){for(rt=0,ut=u*T*4,W=0;W<S;W++)O.set(v.subarray(Y,Y+ut)),Y+=ut,B.putImageData(V,0,rt),rt+=T;W<N&&(ut=u*_*4,O.set(v.subarray(Y,Y+ut)),B.putImageData(V,0,rt))}else if(h.kind===n.ImageKind.RGB_24BPP)for(K=T,ut=u*K,W=0;W<N;W++){for(W>=S&&(K=_,ut=u*K),dt=0,rt=ut;rt--;)O[dt++]=v[Y++],O[dt++]=v[Y++],O[dt++]=v[Y++],O[dt++]=255;B.putImageData(V,0,W*T)}else throw new Error(`bad image kind: ${h.kind}`)}function x(B,h){if(h.bitmap){B.drawImage(h.bitmap,0,0);return}const d=h.height,u=h.width,_=d%T,S=(d-_)/T,N=_===0?S:S+1,V=B.createImageData(u,T);let Y=0;const dt=h.data,v=V.data;for(let O=0;O<N;O++){const W=O<S?T:_;({srcPos:Y}=(0,o.convertBlackAndWhiteToRGBA)({src:dt,srcPos:Y,dest:v,width:u,height:W,nonBlackColor:0})),B.putImageData(V,0,O*T)}}function g(B,h){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of d)B[u]!==void 0&&(h[u]=B[u]);B.setLineDash!==void 0&&(h.setLineDash(B.getLineDash()),h.lineDashOffset=B.lineDashOffset)}function A(B){if(B.strokeStyle=B.fillStyle="#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0),!n.isNodeJS){const{filter:h}=B;h!=="none"&&h!==""&&(B.filter="none")}}function H(B,h,d,u){const _=B.length;for(let S=3;S<_;S+=4){const N=B[S];if(N===0)B[S-3]=h,B[S-2]=d,B[S-1]=u;else if(N<255){const V=255-N;B[S-3]=B[S-3]*N+h*V>>8,B[S-2]=B[S-2]*N+d*V>>8,B[S-1]=B[S-1]*N+u*V>>8}}}function F(B,h,d){const u=B.length,_=1/255;for(let S=3;S<u;S+=4){const N=d?d[B[S]]:B[S];h[S]=h[S]*N*_|0}}function b(B,h,d){const u=B.length;for(let _=3;_<u;_+=4){const S=B[_-3]*77+B[_-2]*152+B[_-1]*28;h[_]=d?h[_]*d[S>>8]>>8:h[_]*S>>16}}function j(B,h,d,u,_,S,N,V,Y,dt,v){const O=!!S,W=O?S[0]:0,rt=O?S[1]:0,K=O?S[2]:0,ut=_==="Luminosity"?b:F,ft=Math.min(u,Math.ceil(1048576/d));for(let _t=0;_t<u;_t+=ft){const Z=Math.min(ft,u-_t),J=B.getImageData(V-dt,_t+(Y-v),d,Z),q=h.getImageData(V,_t+Y,d,Z);O&&H(J.data,W,rt,K),ut(J.data,q.data,N),h.putImageData(q,V,_t+Y)}}function L(B,h,d,u){const _=u[0],S=u[1],N=u[2]-_,V=u[3]-S;N===0||V===0||(j(h.context,d,N,V,h.subtype,h.backdrop,h.transferMap,_,S,h.offsetX,h.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(d.canvas,0,0),B.restore())}function Q(B,h){const d=n.Util.singularValueDecompose2dScale(B);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:d[0]<=u||d[1]<=u}const st=["butt","round","square"],U=["miter","round","bevel"],ot={},pt={},kt=class kt{constructor(h,d,u,_,S,{optionalContentConfig:N,markedContentStack:V=null},Y,dt){G(this,X);G(this,wt);this.ctx=h,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=u,this.canvasFactory=_,this.filterFactory=S,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=V||[],this.optionalContentConfig=N,this.cachedCanvases=new M(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,d=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):d}beginDrawing({transform:h,viewport:d,transparency:u=!1,background:_=null}){const S=this.ctx.canvas.width,N=this.ctx.canvas.height,V=this.ctx.fillStyle;if(this.ctx.fillStyle=_||"#ffffff",this.ctx.fillRect(0,0,S,N),this.ctx.fillStyle=V,u){const Y=this.cachedCanvases.getCanvas("transparent",S,N);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(h,d,u,_){const S=h.argsArray,N=h.fnArray;let V=d||0;const Y=S.length;if(Y===V)return V;const dt=Y-V>w&&typeof u=="function",v=dt?Date.now()+l:0;let O=0;const W=this.commonObjs,rt=this.objs;let K;for(;;){if(_!==void 0&&V===_.nextBreakPoint)return _.breakIt(V,u),V;if(K=N[V],K!==n.OPS.dependency)this[K].apply(this,S[V]);else for(const ut of S[V]){const St=ut.startsWith("g_")?W:rt;if(!St.has(ut))return St.get(ut,u),V}if(V++,V===Y)return V;if(dt&&++O>w){if(Date.now()>v)return u(),V;O=0}}}endDrawing(){it(this,X,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const d of h.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);h.clear()}this._cachedBitmapsMap.clear(),it(this,wt,en).call(this)}_scaleImage(h,d){const u=h.width,_=h.height;let S=Math.max(Math.hypot(d[0],d[1]),1),N=Math.max(Math.hypot(d[2],d[3]),1),V=u,Y=_,dt="prescale1",v,O;for(;S>2&&V>1||N>2&&Y>1;){let W=V,rt=Y;S>2&&V>1&&(W=V>=16384?Math.floor(V/2)-1||1:Math.ceil(V/2),S/=V/W),N>2&&Y>1&&(rt=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,N/=Y/rt),v=this.cachedCanvases.getCanvas(dt,W,rt),O=v.context,O.clearRect(0,0,W,rt),O.drawImage(h,0,0,V,Y,0,0,W,rt),h=v.canvas,V=W,Y=rt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:V,paintHeight:Y}}_createMaskCanvas(h){const d=this.ctx,{width:u,height:_}=h,S=this.current.fillColor,N=this.current.patternFill,V=(0,i.getCurrentTransform)(d);let Y,dt,v,O;if((h.bitmap||h.data)&&h.count>1){const At=h.bitmap||h.data.buffer;dt=JSON.stringify(N?V:[V.slice(0,4),S]),Y=this._cachedBitmapsMap.get(At),Y||(Y=new Map,this._cachedBitmapsMap.set(At,Y));const Et=Y.get(dt);if(Et&&!N){const Dt=Math.round(Math.min(V[0],V[2])+V[4]),Lt=Math.round(Math.min(V[1],V[3])+V[5]);return{canvas:Et,offsetX:Dt,offsetY:Lt}}v=Et}v||(O=this.cachedCanvases.getCanvas("maskCanvas",u,_),x(O.context,h));let W=n.Util.transform(V,[1/u,0,0,-1/_,0,0]);W=n.Util.transform(W,[1,0,0,1,0,-_]);const rt=n.Util.applyTransform([0,0],W),K=n.Util.applyTransform([u,_],W),ut=n.Util.normalizeRect([rt[0],rt[1],K[0],K[1]]),St=Math.round(ut[2]-ut[0])||1,ft=Math.round(ut[3]-ut[1])||1,_t=this.cachedCanvases.getCanvas("fillCanvas",St,ft),Z=_t.context,J=Math.min(rt[0],K[0]),q=Math.min(rt[1],K[1]);Z.translate(-J,-q),Z.transform(...W),v||(v=this._scaleImage(O.canvas,(0,i.getCurrentTransformInverse)(Z)),v=v.img,Y&&N&&Y.set(dt,v)),Z.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(Z),h.interpolate),E(Z,v,0,0,v.width,v.height,0,0,u,_),Z.globalCompositeOperation="source-in";const ct=n.Util.transform((0,i.getCurrentTransformInverse)(Z),[1,0,0,1,-J,-q]);return Z.fillStyle=N?S.getPattern(d,this,ct,a.PathType.FILL):S,Z.fillRect(0,0,u,_),Y&&!N&&(this.cachedCanvases.delete("fillCanvas"),Y.set(dt,_t.canvas)),{canvas:_t.canvas,offsetX:Math.round(J),offsetY:Math.round(q)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=st[h]}setLineJoin(h){this.ctx.lineJoin=U[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,d){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(h),u.lineDashOffset=d)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[d,u]of h)switch(d){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,d=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,_=this.cachedCanvases.getCanvas(u,h,d);this.suspendedCtx=this.ctx,this.ctx=_.context;const S=this.ctx;S.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),g(this.suspendedCtx,S),k(S,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,u=this.suspendedCtx;L(u,d,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(g(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),g(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(h,d,u,_,S,N){this.ctx.transform(h,d,u,_,S,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(h,d,u){const _=this.ctx,S=this.current;let N=S.x,V=S.y,Y,dt;const v=(0,i.getCurrentTransform)(_),O=v[0]===0&&v[3]===0||v[1]===0&&v[2]===0,W=O?u.slice(0):null;for(let rt=0,K=0,ut=h.length;rt<ut;rt++)switch(h[rt]|0){case n.OPS.rectangle:N=d[K++],V=d[K++];const St=d[K++],ft=d[K++],_t=N+St,Z=V+ft;_.moveTo(N,V),St===0||ft===0?_.lineTo(_t,Z):(_.lineTo(_t,V),_.lineTo(_t,Z),_.lineTo(N,Z)),O||S.updateRectMinMax(v,[N,V,_t,Z]),_.closePath();break;case n.OPS.moveTo:N=d[K++],V=d[K++],_.moveTo(N,V),O||S.updatePathMinMax(v,N,V);break;case n.OPS.lineTo:N=d[K++],V=d[K++],_.lineTo(N,V),O||S.updatePathMinMax(v,N,V);break;case n.OPS.curveTo:Y=N,dt=V,N=d[K+4],V=d[K+5],_.bezierCurveTo(d[K],d[K+1],d[K+2],d[K+3],N,V),S.updateCurvePathMinMax(v,Y,dt,d[K],d[K+1],d[K+2],d[K+3],N,V,W),K+=6;break;case n.OPS.curveTo2:Y=N,dt=V,_.bezierCurveTo(N,V,d[K],d[K+1],d[K+2],d[K+3]),S.updateCurvePathMinMax(v,Y,dt,N,V,d[K],d[K+1],d[K+2],d[K+3],W),N=d[K+2],V=d[K+3],K+=4;break;case n.OPS.curveTo3:Y=N,dt=V,N=d[K+2],V=d[K+3],_.bezierCurveTo(d[K],d[K+1],N,V,N,V),S.updateCurvePathMinMax(v,Y,dt,d[K],d[K+1],N,V,N,V,W),K+=4;break;case n.OPS.closePath:_.closePath();break}O&&S.updateScalingPathMinMax(v,W),S.setCurrentPoint(N,V)}closePath(){this.ctx.closePath()}stroke(h=!0){const d=this.ctx,u=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(d.save(),d.strokeStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),a.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const d=this.ctx,u=this.current.fillColor,_=this.current.patternFill;let S=!1;_&&(d.save(),d.fillStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),a.PathType.FILL),S=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),S&&d.restore(),h&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ot}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,d=this.ctx;if(h===void 0){d.beginPath();return}d.save(),d.beginPath();for(const u of h)d.setTransform(...u.transform),d.translate(u.x,u.y),u.addToPath(d,u.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,d){var v;const u=this.commonObjs.get(h),_=this.current;if(!u)throw new Error(`Can't find font for ${h}`);if(_.fontMatrix=u.fontMatrix||n.FONT_IDENTITY_MATRIX,(_.fontMatrix[0]===0||_.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+h),d<0?(d=-d,_.fontDirection=-1):_.fontDirection=1,this.current.font=u,this.current.fontSize=d,u.isType3Font)return;const S=u.loadedName||"sans-serif",N=((v=u.systemFontInfo)==null?void 0:v.css)||`"${S}", ${u.fallbackName}`;let V="normal";u.black?V="900":u.bold&&(V="bold");const Y=u.italic?"italic":"normal";let dt=d;d<y?dt=y:d>f&&(dt=f),this.current.fontSizeScale=d/dt,this.ctx.font=`${Y} ${V} ${dt}px ${N}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,d){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=d}setLeadingMoveText(h,d){this.setLeading(-d),this.moveText(h,d)}setTextMatrix(h,d,u,_,S,N){this.current.textMatrix=[h,d,u,_,S,N],this.current.textMatrixScale=Math.hypot(h,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,d,u,_){const S=this.ctx,N=this.current,V=N.font,Y=N.textRenderingMode,dt=N.fontSize/N.fontSizeScale,v=Y&n.TextRenderingMode.FILL_STROKE_MASK,O=!!(Y&n.TextRenderingMode.ADD_TO_PATH_FLAG),W=N.patternFill&&!V.missingFile;let rt;(V.disableFontFace||O||W)&&(rt=V.getPathGenerator(this.commonObjs,h)),V.disableFontFace||W?(S.save(),S.translate(d,u),S.beginPath(),rt(S,dt),_&&S.setTransform(..._),(v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fill(),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.stroke(),S.restore()):((v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fillText(h,d,u),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.strokeText(h,d,u)),O&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(S),x:d,y:u,fontSize:dt,addToPath:rt})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const d=h.getImageData(0,0,10,10).data;let u=!1;for(let _=3;_<d.length;_+=4)if(d[_]>0&&d[_]<255){u=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(h){const d=this.current,u=d.font;if(u.isType3Font)return this.showType3Text(h);const _=d.fontSize;if(_===0)return;const S=this.ctx,N=d.fontSizeScale,V=d.charSpacing,Y=d.wordSpacing,dt=d.fontDirection,v=d.textHScale*dt,O=h.length,W=u.vertical,rt=W?1:-1,K=u.defaultVMetrics,ut=_*d.fontMatrix[0],St=d.textRenderingMode===n.TextRenderingMode.FILL&&!u.disableFontFace&&!d.patternFill;S.save(),S.transform(...d.textMatrix),S.translate(d.x,d.y+d.textRise),dt>0?S.scale(v,-1):S.scale(v,1);let ft;if(d.patternFill){S.save();const ct=d.fillColor.getPattern(S,this,(0,i.getCurrentTransformInverse)(S),a.PathType.FILL);ft=(0,i.getCurrentTransform)(S),S.restore(),S.fillStyle=ct}let _t=d.lineWidth;const Z=d.textMatrixScale;if(Z===0||_t===0){const ct=d.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(ct===n.TextRenderingMode.STROKE||ct===n.TextRenderingMode.FILL_STROKE)&&(_t=this.getSinglePixelWidth())}else _t/=Z;if(N!==1&&(S.scale(N,N),_t/=N),S.lineWidth=_t,u.isInvalidPDFjsFont){const ct=[];let At=0;for(const Et of h)ct.push(Et.unicode),At+=Et.width;S.fillText(ct.join(""),0,0),d.x+=At*ut*v,S.restore(),this.compose();return}let J=0,q;for(q=0;q<O;++q){const ct=h[q];if(typeof ct=="number"){J+=rt*ct*_/1e3;continue}let At=!1;const Et=(ct.isSpace?Y:0)+V,Dt=ct.fontChar,Lt=ct.accent;let Ut,$t,Gt=ct.width;if(W){const Yt=ct.vmetric||K,vt=-(ct.vmetric?Yt[1]:Gt*.5)*ut,at=Yt[2]*ut;Gt=Yt?-Yt[0]:Gt,Ut=vt/N,$t=(J+at)/N}else Ut=J/N,$t=0;if(u.remeasure&&Gt>0){const Yt=S.measureText(Dt).width*1e3/_*N;if(Gt<Yt&&this.isFontSubpixelAAEnabled){const vt=Gt/Yt;At=!0,S.save(),S.scale(vt,1),Ut/=vt}else Gt!==Yt&&(Ut+=(Gt-Yt)/2e3*_/N)}if(this.contentVisible&&(ct.isInFont||u.missingFile)){if(St&&!Lt)S.fillText(Dt,Ut,$t);else if(this.paintChar(Dt,Ut,$t,ft),Lt){const Yt=Ut+_*Lt.offset.x/N,vt=$t-_*Lt.offset.y/N;this.paintChar(Lt.fontChar,Yt,vt,ft)}}const Wt=W?Gt*ut-Et*dt:Gt*ut+Et*dt;J+=Wt,At&&S.restore()}W?d.y-=J:d.x+=J*v,S.restore(),this.compose()}showType3Text(h){const d=this.ctx,u=this.current,_=u.font,S=u.fontSize,N=u.fontDirection,V=_.vertical?1:-1,Y=u.charSpacing,dt=u.wordSpacing,v=u.textHScale*N,O=u.fontMatrix||n.FONT_IDENTITY_MATRIX,W=h.length,rt=u.textRenderingMode===n.TextRenderingMode.INVISIBLE;let K,ut,St,ft;if(!(rt||S===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...u.textMatrix),d.translate(u.x,u.y),d.scale(v,N),K=0;K<W;++K){if(ut=h[K],typeof ut=="number"){ft=V*ut*S/1e3,this.ctx.translate(ft,0),u.x+=ft*v;continue}const _t=(ut.isSpace?dt:0)+Y,Z=_.charProcOperatorList[ut.operatorListId];if(!Z){(0,n.warn)(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),d.scale(S,S),d.transform(...O),this.executeOperatorList(Z),this.restore()),St=n.Util.applyTransform([ut.width,0],O)[0]*S+_t,d.translate(St,0),u.x+=St*v}d.restore(),this.processingType3=null}}setCharWidth(h,d){}setCharWidthAndBounds(h,d,u,_,S,N){this.ctx.rect(u,_,S-u,N-_),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let d;if(h[0]==="TilingPattern"){const u=h[1],_=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),S={createCanvasGraphics:N=>new kt(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new a.TilingPattern(h,u,this.ctx,S,_)}else d=this._getPattern(h[1],h[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,d,u){const _=n.Util.makeHexColor(h,d,u);this.ctx.strokeStyle=_,this.current.strokeColor=_}setFillRGBColor(h,d,u){const _=n.Util.makeHexColor(h,d,u);this.ctx.fillStyle=_,this.current.fillColor=_,this.current.patternFill=!1}_getPattern(h,d=null){let u;return this.cachedPatterns.has(h)?u=this.cachedPatterns.get(h):(u=(0,a.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,u)),d&&(u.matrix=d),u}shadingFill(h){if(!this.contentVisible)return;const d=this.ctx;this.save();const u=this._getPattern(h);d.fillStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),a.PathType.SHADING);const _=(0,i.getCurrentTransformInverse)(d);if(_){const{width:S,height:N}=d.canvas,[V,Y,dt,v]=n.Util.getAxialAlignedBoundingBox([0,0,S,N],_);this.ctx.fillRect(V,Y,dt-V,v-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),d)){const u=d[2]-d[0],_=d[3]-d[1];this.ctx.rect(d[0],d[1],u,_),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;h.isolated||(0,n.info)("TODO: Support non-isolated groups."),h.knockout&&(0,n.warn)("Knockout groups not supported.");const u=(0,i.getCurrentTransform)(d);if(h.matrix&&d.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let _=n.Util.getAxialAlignedBoundingBox(h.bbox,(0,i.getCurrentTransform)(d));const S=[0,0,d.canvas.width,d.canvas.height];_=n.Util.intersect(_,S)||[0,0,0,0];const N=Math.floor(_[0]),V=Math.floor(_[1]);let Y=Math.max(Math.ceil(_[2])-N,1),dt=Math.max(Math.ceil(_[3])-V,1),v=1,O=1;Y>m&&(v=Y/m,Y=m),dt>m&&(O=dt/m,dt=m),this.current.startNewPathAndClipBox([0,0,Y,dt]);let W="groupAt"+this.groupLevel;h.smask&&(W+="_smask_"+this.smaskCounter++%2);const rt=this.cachedCanvases.getCanvas(W,Y,dt),K=rt.context;K.scale(1/v,1/O),K.translate(-N,-V),K.transform(...u),h.smask?this.smaskStack.push({canvas:rt.canvas,context:K,offsetX:N,offsetY:V,scaleX:v,scaleY:O,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(N,V),d.scale(v,O),d.save()),g(d,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const _=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(..._);const S=n.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],_);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(S)}}beginAnnotation(h,d,u,_,S){if(it(this,X,tn).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const N=d[2]-d[0],V=d[3]-d[1];if(S&&this.annotationCanvasMap){u=u.slice(),u[4]-=d[0],u[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=N,d[3]=V;const[Y,dt]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:v}=this,O=Math.ceil(N*this.outputScaleX*v),W=Math.ceil(V*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(O,W);const{canvas:rt,context:K}=this.annotationCanvas;this.annotationCanvasMap.set(h,rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=K,this.ctx.save(),this.ctx.setTransform(Y,0,0,-dt,0,V*dt),A(this.ctx)}else A(this.ctx),this.ctx.rect(d[0],d[1],N,V),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(..._)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,wt,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const d=h.count;h=this.getObject(h.data,h),h.count=d;const u=this.ctx,_=this.processingType3;if(_&&(_.compiled===void 0&&(_.compiled=C(h)),_.compiled)){_.compiled(u);return}const S=this._createMaskCanvas(h),N=S.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(N,S.offsetX,S.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(h,d,u=0,_=0,S,N){if(!this.contentVisible)return;h=this.getObject(h.data,h);const V=this.ctx;V.save();const Y=(0,i.getCurrentTransform)(V);V.transform(d,u,_,S,0,0);const dt=this._createMaskCanvas(h);V.setTransform(1,0,0,1,dt.offsetX-Y[4],dt.offsetY-Y[5]);for(let v=0,O=N.length;v<O;v+=2){const W=n.Util.transform(Y,[d,u,_,S,N[v],N[v+1]]),[rt,K]=n.Util.applyTransform([0,0],W);V.drawImage(dt.canvas,rt,K)}V.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const d=this.ctx,u=this.current.fillColor,_=this.current.patternFill;for(const S of h){const{data:N,width:V,height:Y,transform:dt}=S,v=this.cachedCanvases.getCanvas("maskCanvas",V,Y),O=v.context;O.save();const W=this.getObject(N,S);x(O,W),O.globalCompositeOperation="source-in",O.fillStyle=_?u.getPattern(O,this,(0,i.getCurrentTransformInverse)(d),a.PathType.FILL):u,O.fillRect(0,0,V,Y),O.restore(),d.save(),d.transform(...dt),d.scale(1,-1),E(d,v.canvas,0,0,V,Y,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const d=this.getObject(h);if(!d){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(h,d,u,_){if(!this.contentVisible)return;const S=this.getObject(h);if(!S){(0,n.warn)("Dependent image isn't ready yet");return}const N=S.width,V=S.height,Y=[];for(let dt=0,v=_.length;dt<v;dt+=2)Y.push({transform:[d,0,0,u,_[dt],_[dt+1]],x:0,y:0,w:N,h:V});this.paintInlineImageXObjectGroup(S,Y)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:d,width:u,height:_}=h,S=this.cachedCanvases.getCanvas("inlineImage",u,_),N=S.context;return N.filter=this.current.transferMaps,N.drawImage(d,0,0),N.filter="none",S.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const d=h.width,u=h.height,_=this.ctx;if(this.save(),!n.isNodeJS){const{filter:V}=_;V!=="none"&&V!==""&&(_.filter="none")}_.scale(1/d,-1/u);let S;if(h.bitmap)S=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)S=h;else{const Y=this.cachedCanvases.getCanvas("inlineImage",d,u).context;R(Y,h),S=this.applyTransferMapsToCanvas(Y)}const N=this._scaleImage(S,(0,i.getCurrentTransformInverse)(_));_.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(_),h.interpolate),E(_,N.img,0,0,N.paintWidth,N.paintHeight,0,-u,d,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,d){if(!this.contentVisible)return;const u=this.ctx;let _;if(h.bitmap)_=h.bitmap;else{const S=h.width,N=h.height,Y=this.cachedCanvases.getCanvas("inlineImage",S,N).context;R(Y,h),_=this.applyTransferMapsToCanvas(Y)}for(const S of d)u.save(),u.transform(...S.transform),u.scale(1,-1),E(u,_,S.x,S.y,S.w,S.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,d){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,d){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const u=this.ctx;this.pendingClip&&(d||(this.pendingClip===pt?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,i.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const d=Math.abs(h[0]*h[3]-h[2]*h[1]),u=Math.hypot(h[0],h[2]),_=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(u,_)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:h}=this.current,{a:d,b:u,c:_,d:S}=this.ctx.getTransform();let N,V;if(u===0&&_===0){const Y=Math.abs(d),dt=Math.abs(S);if(Y===dt)if(h===0)N=V=1/Y;else{const v=Y*h;N=V=v<1?1/v:1}else if(h===0)N=1/Y,V=1/dt;else{const v=Y*h,O=dt*h;N=v<1?1/v:1,V=O<1?1/O:1}}else{const Y=Math.abs(d*S-u*_),dt=Math.hypot(d,u),v=Math.hypot(_,S);if(h===0)N=v/Y,V=dt/Y;else{const O=h*Y;N=v>O?v/O:1,V=dt>O?dt/O:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=V}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:d}=this,{lineWidth:u}=this.current,[_,S]=this.getScaleForStroking();if(d.lineWidth=u||1,_===1&&S===1){d.stroke();return}const N=d.getLineDash();if(h&&d.save(),d.scale(_,S),N.length>0){const V=Math.max(_,S);d.setLineDash(N.map(Y=>Y/V)),d.lineDashOffset/=V}d.stroke(),h&&d.restore()}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};X=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wt=new WeakSet,en=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const d=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let mt=kt;e.CanvasGraphics=mt;for(const B in n.OPS)mt.prototype[B]!==void 0&&(mt.prototype[n.OPS[B]]=mt.prototype[B])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=T;var n=s(1),i=s(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=a;function o(C,I){if(!I)return;const R=I[2]-I[0],x=I[3]-I[1],g=new Path2D;g.rect(I[0],I[1],R,x),C.clip(g)}class y{constructor(){this.constructor===y&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class f extends y{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let R;this._type==="axial"?R=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(R=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)R.addColorStop(x[0],x[1]);return R}getPattern(I,R,x,g){let A;if(g===a.STROKE||g===a.FILL){const H=R.current.getClippedPathBoundingBox(g,(0,i.getCurrentTransform)(I))||[0,0,0,0],F=Math.ceil(H[2]-H[0])||1,b=Math.ceil(H[3]-H[1])||1,j=R.cachedCanvases.getCanvas("pattern",F,b,!0),L=j.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-H[0],-H[1]),x=n.Util.transform(x,[1,0,0,1,H[0],H[1]]),L.transform(...R.baseTransform),this.matrix&&L.transform(...this.matrix),o(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),A=I.createPattern(j.canvas,"no-repeat");const Q=new DOMMatrix(x);A.setTransform(Q)}else o(I,this._bbox),A=this._createGradient(I);return A}}function m(C,I,R,x,g,A,H,F){const b=I.coords,j=I.colors,L=C.data,Q=C.width*4;let st;b[R+1]>b[x+1]&&(st=R,R=x,x=st,st=A,A=H,H=st),b[x+1]>b[g+1]&&(st=x,x=g,g=st,st=H,H=F,F=st),b[R+1]>b[x+1]&&(st=R,R=x,x=st,st=A,A=H,H=st);const U=(b[R]+I.offsetX)*I.scaleX,ot=(b[R+1]+I.offsetY)*I.scaleY,pt=(b[x]+I.offsetX)*I.scaleX,mt=(b[x+1]+I.offsetY)*I.scaleY,X=(b[g]+I.offsetX)*I.scaleX,yt=(b[g+1]+I.offsetY)*I.scaleY;if(ot>=yt)return;const wt=j[A],Rt=j[A+1],kt=j[A+2],B=j[H],h=j[H+1],d=j[H+2],u=j[F],_=j[F+1],S=j[F+2],N=Math.round(ot),V=Math.round(yt);let Y,dt,v,O,W,rt,K,ut;for(let St=N;St<=V;St++){if(St<mt){const q=St<ot?0:(ot-St)/(ot-mt);Y=U-(U-pt)*q,dt=wt-(wt-B)*q,v=Rt-(Rt-h)*q,O=kt-(kt-d)*q}else{let q;St>yt?q=1:mt===yt?q=0:q=(mt-St)/(mt-yt),Y=pt-(pt-X)*q,dt=B-(B-u)*q,v=h-(h-_)*q,O=d-(d-S)*q}let ft;St<ot?ft=0:St>yt?ft=1:ft=(ot-St)/(ot-yt),W=U-(U-X)*ft,rt=wt-(wt-u)*ft,K=Rt-(Rt-_)*ft,ut=kt-(kt-S)*ft;const _t=Math.round(Math.min(Y,W)),Z=Math.round(Math.max(Y,W));let J=Q*St+_t*4;for(let q=_t;q<=Z;q++)ft=(Y-q)/(Y-W),ft<0?ft=0:ft>1&&(ft=1),L[J++]=dt-(dt-rt)*ft|0,L[J++]=v-(v-K)*ft|0,L[J++]=O-(O-ut)*ft|0,L[J++]=255}}function l(C,I,R){const x=I.coords,g=I.colors;let A,H;switch(I.type){case"lattice":const F=I.verticesPerRow,b=Math.floor(x.length/F)-1,j=F-1;for(A=0;A<b;A++){let L=A*F;for(let Q=0;Q<j;Q++,L++)m(C,R,x[L],x[L+1],x[L+F],g[L],g[L+1],g[L+F]),m(C,R,x[L+F+1],x[L+1],x[L+F],g[L+F+1],g[L+1],g[L+F])}break;case"triangles":for(A=0,H=x.length;A<H;A+=3)m(C,R,x[A],x[A+1],x[A+2],g[A],g[A+1],g[A+2]);break;default:throw new Error("illegal figure")}}class w extends y{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,R,x){const F=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-F,L=Math.ceil(this._bounds[3])-b,Q=Math.min(Math.ceil(Math.abs(j*I[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(L*I[1]*1.1)),3e3),U=j/Q,ot=L/st,pt={coords:this._coords,colors:this._colors,offsetX:-F,offsetY:-b,scaleX:1/U,scaleY:1/ot},mt=Q+2*2,X=st+2*2,yt=x.getCanvas("mesh",mt,X,!1),wt=yt.context,Rt=wt.createImageData(Q,st);if(R){const B=Rt.data;for(let h=0,d=B.length;h<d;h+=4)B[h]=R[0],B[h+1]=R[1],B[h+2]=R[2],B[h+3]=255}for(const B of this._figures)l(Rt,B,pt);return wt.putImageData(Rt,2,2),{canvas:yt.canvas,offsetX:F-2*U,offsetY:b-2*ot,scaleX:U,scaleY:ot}}getPattern(I,R,x,g){o(I,this._bbox);let A;if(g===a.SHADING)A=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(I));else if(A=n.Util.singularValueDecompose2dScale(R.baseTransform),this.matrix){const F=n.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*F[0],A[1]*F[1]]}const H=this._createMeshCanvas(A,g===a.SHADING?null:this._background,R.cachedCanvases);return g!==a.SHADING&&(I.setTransform(...R.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(H.offsetX,H.offsetY),I.scale(H.scaleX,H.scaleY),I.createPattern(H.canvas,"no-repeat")}}class P extends y{getPattern(){return"hotpink"}}function T(C){switch(C[0]){case"RadialAxial":return new f(C);case"Mesh":return new w(C);case"Dummy":return new P}throw new Error(`Unknown IR type: ${C[0]}`)}const k={COLORED:1,UNCOLORED:2},E=class E{constructor(I,R,x,g,A){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=R,this.ctx=x,this.canvasGraphicsFactory=g,this.baseTransform=A}createPatternCanvas(I){const R=this.operatorList,x=this.bbox,g=this.xstep,A=this.ystep,H=this.paintType,F=this.tilingType,b=this.color,j=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+F);const L=x[0],Q=x[1],st=x[2],U=x[3],ot=n.Util.singularValueDecompose2dScale(this.matrix),pt=n.Util.singularValueDecompose2dScale(this.baseTransform),mt=[ot[0]*pt[0],ot[1]*pt[1]],X=this.getSizeAndScale(g,this.ctx.canvas.width,mt[0]),yt=this.getSizeAndScale(A,this.ctx.canvas.height,mt[1]),wt=I.cachedCanvases.getCanvas("pattern",X.size,yt.size,!0),Rt=wt.context,kt=j.createCanvasGraphics(Rt);kt.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(kt,H,b);let B=L,h=Q,d=st,u=U;return L<0&&(B=0,d+=Math.abs(L)),Q<0&&(h=0,u+=Math.abs(Q)),Rt.translate(-(X.scale*B),-(yt.scale*h)),kt.transform(X.scale,0,0,yt.scale,0,0),Rt.save(),this.clipBbox(kt,B,h,d,u),kt.baseTransform=(0,i.getCurrentTransform)(kt.ctx),kt.executeOperatorList(R),kt.endDrawing(),{canvas:wt.canvas,scaleX:X.scale,scaleY:yt.scale,offsetX:B,offsetY:h}}getSizeAndScale(I,R,x){I=Math.abs(I);const g=Math.max(E.MAX_PATTERN_SIZE,R);let A=Math.ceil(I*x);return A>=g?A=g:x=A/I,{scale:x,size:A}}clipBbox(I,R,x,g,A){const H=g-R,F=A-x;I.ctx.rect(R,x,H,F),I.current.updateRectMinMax((0,i.getCurrentTransform)(I.ctx),[R,x,g,A]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,R,x){const g=I.ctx,A=I.current;switch(R){case k.COLORED:const H=this.ctx;g.fillStyle=H.fillStyle,g.strokeStyle=H.strokeStyle,A.fillColor=H.fillStyle,A.strokeColor=H.strokeStyle;break;case k.UNCOLORED:const F=n.Util.makeHexColor(x[0],x[1],x[2]);g.fillStyle=F,g.strokeStyle=F,A.fillColor=F,A.strokeColor=F;break;default:throw new n.FormatError(`Unsupported paint type: ${R}`)}}getPattern(I,R,x,g){let A=x;g!==a.SHADING&&(A=n.Util.transform(A,R.baseTransform),this.matrix&&(A=n.Util.transform(A,this.matrix)));const H=this.createPatternCanvas(R);let F=new DOMMatrix(A);F=F.translate(H.offsetX,H.offsetY),F=F.scale(1/H.scaleX,1/H.scaleY);const b=I.createPattern(H.canvas,"repeat");return b.setTransform(F),b}};se(E,"MAX_PATTERN_SIZE",3e3);let M=E;e.TilingPattern=M},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=a,e.convertToRGBA=i,e.grayToRGBA=y;var n=s(1);function i(f){switch(f.kind){case n.ImageKind.GRAYSCALE_1BPP:return a(f);case n.ImageKind.RGB_24BPP:return o(f)}return null}function a({src:f,srcPos:m=0,dest:l,width:w,height:P,nonBlackColor:T=4294967295,inverseDecode:k=!1}){const M=n.FeatureTest.isLittleEndian?4278190080:255,[E,C]=k?[T,M]:[M,T],I=w>>3,R=w&7,x=f.length;l=new Uint32Array(l.buffer);let g=0;for(let A=0;A<P;A++){for(const F=m+I;m<F;m++){const b=m<x?f[m]:255;l[g++]=b&128?C:E,l[g++]=b&64?C:E,l[g++]=b&32?C:E,l[g++]=b&16?C:E,l[g++]=b&8?C:E,l[g++]=b&4?C:E,l[g++]=b&2?C:E,l[g++]=b&1?C:E}if(R===0)continue;const H=m<x?f[m++]:255;for(let F=0;F<R;F++)l[g++]=H&1<<7-F?C:E}return{srcPos:m,destPos:g}}function o({src:f,srcPos:m=0,dest:l,destPos:w=0,width:P,height:T}){let k=0;const M=f.length>>2,E=new Uint32Array(f.buffer,m,M);if(n.FeatureTest.isLittleEndian){for(;k<M-2;k+=3,w+=4){const C=E[k],I=E[k+1],R=E[k+2];l[w]=C|4278190080,l[w+1]=C>>>24|I<<8|4278190080,l[w+2]=I>>>16|R<<16|4278190080,l[w+3]=R>>>8|4278190080}for(let C=k*4,I=f.length;C<I;C+=3)l[w++]=f[C]|f[C+1]<<8|f[C+2]<<16|4278190080}else{for(;k<M-2;k+=3,w+=4){const C=E[k],I=E[k+1],R=E[k+2];l[w]=C|255,l[w+1]=C<<24|I>>>8|255,l[w+2]=I<<16|R>>>16|255,l[w+3]=R<<8|255}for(let C=k*4,I=f.length;C<I;C+=3)l[w++]=f[C]<<24|f[C+1]<<16|f[C+2]<<8|255}return{srcPos:m,destPos:w}}function y(f,m){if(n.FeatureTest.isLittleEndian)for(let l=0,w=f.length;l<w;l++)m[l]=f[l]*65793|4278190080;else for(let l=0,w=f.length;l<w;l++)m[l]=f[l]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var f,Mn,l,Fn,P,ke;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(k){switch(k instanceof Error||typeof k=="object"&&k!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k.name){case"AbortException":return new n.AbortException(k.message);case"MissingPDFException":return new n.MissingPDFException(k.message);case"PasswordException":return new n.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new n.UnknownErrorException(k.message,k.details);default:return new n.UnknownErrorException(k.message,k.toString())}}class y{constructor(M,E,C){G(this,f);G(this,l);G(this,P);this.sourceName=M,this.targetName=E,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const R=I.data;if(R.targetName!==this.sourceName)return;if(R.stream){it(this,l,Fn).call(this,R);return}if(R.callback){const g=R.callbackId,A=this.callbackCapabilities[g];if(!A)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],R.callback===i.DATA)A.resolve(R.data);else if(R.callback===i.ERROR)A.reject(o(R.reason));else throw new Error("Unexpected callback case");return}const x=this.actionHandler[R.action];if(!x)throw new Error(`Unknown action from worker: ${R.action}`);if(R.callbackId){const g=this.sourceName,A=R.sourceName;new Promise(function(H){H(x(R.data))}).then(function(H){C.postMessage({sourceName:g,targetName:A,callback:i.DATA,callbackId:R.callbackId,data:H})},function(H){C.postMessage({sourceName:g,targetName:A,callback:i.ERROR,callbackId:R.callbackId,reason:o(H)})});return}if(R.streamId){it(this,f,Mn).call(this,R);return}x(R.data)},C.addEventListener("message",this._onComObjOnMessage)}on(M,E){const C=this.actionHandler;if(C[M])throw new Error(`There is already an actionName called "${M}"`);C[M]=E}send(M,E,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,data:E},C)}sendWithPromise(M,E,C){const I=this.callbackId++,R=new n.PromiseCapability;this.callbackCapabilities[I]=R;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,callbackId:I,data:E},C)}catch(x){R.reject(x)}return R.promise}sendWithStream(M,E,C,I){const R=this.streamId++,x=this.sourceName,g=this.targetName,A=this.comObj;return new ReadableStream({start:H=>{const F=new n.PromiseCapability;return this.streamControllers[R]={controller:H,startCall:F,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:x,targetName:g,action:M,streamId:R,data:E,desiredSize:H.desiredSize},I),F.promise},pull:H=>{const F=new n.PromiseCapability;return this.streamControllers[R].pullCall=F,A.postMessage({sourceName:x,targetName:g,stream:a.PULL,streamId:R,desiredSize:H.desiredSize}),F.promise},cancel:H=>{(0,n.assert)(H instanceof Error,"cancel must have a valid reason");const F=new n.PromiseCapability;return this.streamControllers[R].cancelCall=F,this.streamControllers[R].isClosed=!0,A.postMessage({sourceName:x,targetName:g,stream:a.CANCEL,streamId:R,reason:o(H)}),F.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f=new WeakSet,Mn=function(M){const E=M.streamId,C=this.sourceName,I=M.sourceName,R=this.comObj,x=this,g=this.actionHandler[M.action],A={enqueue(H,F=1,b){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=F,j>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),R.postMessage({sourceName:C,targetName:I,stream:a.ENQUEUE,streamId:E,chunk:H},b)},close(){this.isCancelled||(this.isCancelled=!0,R.postMessage({sourceName:C,targetName:I,stream:a.CLOSE,streamId:E}),delete x.streamSinks[E])},error(H){(0,n.assert)(H instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,R.postMessage({sourceName:C,targetName:I,stream:a.ERROR,streamId:E,reason:o(H)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:M.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[E]=A,new Promise(function(H){H(g(M.data,A))}).then(function(){R.postMessage({sourceName:C,targetName:I,stream:a.START_COMPLETE,streamId:E,success:!0})},function(H){R.postMessage({sourceName:C,targetName:I,stream:a.START_COMPLETE,streamId:E,reason:o(H)})})},l=new WeakSet,Fn=function(M){const E=M.streamId,C=this.sourceName,I=M.sourceName,R=this.comObj,x=this.streamControllers[E],g=this.streamSinks[E];switch(M.stream){case a.START_COMPLETE:M.success?x.startCall.resolve():x.startCall.reject(o(M.reason));break;case a.PULL_COMPLETE:M.success?x.pullCall.resolve():x.pullCall.reject(o(M.reason));break;case a.PULL:if(!g){R.postMessage({sourceName:C,targetName:I,stream:a.PULL_COMPLETE,streamId:E,success:!0});break}g.desiredSize<=0&&M.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=M.desiredSize,new Promise(function(A){var H;A((H=g.onPull)==null?void 0:H.call(g))}).then(function(){R.postMessage({sourceName:C,targetName:I,stream:a.PULL_COMPLETE,streamId:E,success:!0})},function(A){R.postMessage({sourceName:C,targetName:I,stream:a.PULL_COMPLETE,streamId:E,reason:o(A)})});break;case a.ENQUEUE:if((0,n.assert)(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(M.chunk);break;case a.CLOSE:if((0,n.assert)(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),it(this,P,ke).call(this,x,E);break;case a.ERROR:(0,n.assert)(x,"error should have stream controller"),x.controller.error(o(M.reason)),it(this,P,ke).call(this,x,E);break;case a.CANCEL_COMPLETE:M.success?x.cancelCall.resolve():x.cancelCall.reject(o(M.reason)),it(this,P,ke).call(this,x,E);break;case a.CANCEL:if(!g)break;new Promise(function(A){var H;A((H=g.onCancel)==null?void 0:H.call(g,o(M.reason)))}).then(function(){R.postMessage({sourceName:C,targetName:I,stream:a.CANCEL_COMPLETE,streamId:E,success:!0})},function(A){R.postMessage({sourceName:C,targetName:I,stream:a.CANCEL_COMPLETE,streamId:E,reason:o(A)})}),g.sinkCapability.reject(o(M.reason)),g.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}},P=new WeakSet,ke=async function(M,E){var C,I,R;await Promise.allSettled([(C=M.startCall)==null?void 0:C.promise,(I=M.pullCall)==null?void 0:I.promise,(R=M.cancelCall)==null?void 0:R.promise]),delete this.streamControllers[E]},e.MessageHandler=y},(t,e,s)=>{var a,o;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:f,rawData:m}){G(this,a,void 0);G(this,o,void 0);gt(this,a,f),gt(this,o,m)}getRaw(){return r(this,o)}get(f){return r(this,a).get(f)??null}getAll(){return(0,n.objectFromMap)(r(this,a))}has(f){return r(this,a).has(f)}}a=new WeakMap,o=new WeakMap,e.Metadata=i},(t,e,s)=>{var f,m,l,w,P,T,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),i=s(8);const a=Symbol("INTERNAL");class o{constructor(E,C){G(this,f,!0);this.name=E,this.intent=C}get visible(){return r(this,f)}_setVisible(E,C){E!==a&&(0,n.unreachable)("Internal method `_setVisible` called."),gt(this,f,C)}}f=new WeakMap;class y{constructor(E){G(this,T);G(this,m,null);G(this,l,new Map);G(this,w,null);G(this,P,null);if(this.name=null,this.creator=null,E!==null){this.name=E.name,this.creator=E.creator,gt(this,P,E.order);for(const C of E.groups)r(this,l).set(C.id,new o(C.name,C.intent));if(E.baseState==="OFF")for(const C of r(this,l).values())C._setVisible(a,!1);for(const C of E.on)r(this,l).get(C)._setVisible(a,!0);for(const C of E.off)r(this,l).get(C)._setVisible(a,!1);gt(this,w,this.getHash())}}isVisible(E){if(r(this,l).size===0)return!0;if(!E)return(0,n.warn)("Optional content group not defined."),!0;if(E.type==="OCG")return r(this,l).has(E.id)?r(this,l).get(E.id).visible:((0,n.warn)(`Optional content group not found: ${E.id}`),!0);if(E.type==="OCMD"){if(E.expression)return it(this,T,nn).call(this,E.expression);if(!E.policy||E.policy==="AnyOn"){for(const C of E.ids){if(!r(this,l).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(r(this,l).get(C).visible)return!0}return!1}else if(E.policy==="AllOn"){for(const C of E.ids){if(!r(this,l).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!r(this,l).get(C).visible)return!1}return!0}else if(E.policy==="AnyOff"){for(const C of E.ids){if(!r(this,l).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!r(this,l).get(C).visible)return!0}return!1}else if(E.policy==="AllOff"){for(const C of E.ids){if(!r(this,l).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(r(this,l).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,n.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,C=!0){if(!r(this,l).has(E)){(0,n.warn)(`Optional content group not found: ${E}`);return}r(this,l).get(E)._setVisible(a,!!C),gt(this,m,null)}get hasInitialVisibility(){return r(this,w)===null||this.getHash()===r(this,w)}getOrder(){return r(this,l).size?r(this,P)?r(this,P).slice():[...r(this,l).keys()]:null}getGroups(){return r(this,l).size>0?(0,n.objectFromMap)(r(this,l)):null}getGroup(E){return r(this,l).get(E)||null}getHash(){if(r(this,m)!==null)return r(this,m);const E=new i.MurmurHash3_64;for(const[C,I]of r(this,l))E.update(`${C}:${I.visible}`);return gt(this,m,E.hexdigest())}}m=new WeakMap,l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakSet,nn=function(E){const C=E.length;if(C<2)return!0;const I=E[0];for(let R=1;R<C;R++){const x=E[R];let g;if(Array.isArray(x))g=it(this,T,nn).call(this,x);else if(r(this,l).has(x))g=r(this,l).get(x).visible;else return(0,n.warn)(`Optional content group not found: ${x}`),!0;switch(I){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return I==="And"},e.OptionalContentConfig=y},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class a{constructor({length:m,initialData:l,progressiveDone:w=!1,contentDispositionFilename:P=null,disableRange:T=!1,disableStream:k=!1},M){if((0,n.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=P,(l==null?void 0:l.length)>0){const E=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!k,this._isRangeSupported=!T,this._contentLength=m,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,C)=>{this._onReceiveData({begin:E,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((E,C)=>{this._onProgress({loaded:E,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:m,chunk:l}){const w=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const P=this._rangeReaders.some(function(T){return T._begin!==m?!1:(T._enqueue(w),!0)});(0,n.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var l,w,P,T;m.total===void 0?(w=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||w.call(l,{loaded:m.loaded}):(T=(P=this._fullRequestReader)==null?void 0:P.onProgress)==null||T.call(P,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const l=this._rangeReaders.indexOf(m);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new o(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,l){if(l<=this._progressiveDataLength)return null;const w=new y(this,m,l);return this._pdfDataRangeTransport.requestDataRange(m,l),this._rangeReaders.push(w),w}cancelAllRequests(m){var l;(l=this._fullRequestReader)==null||l.cancel(m);for(const w of this._rangeReaders.slice(0))w.cancel(m);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=a;class o{constructor(m,l,w=!1,P=null){this._stream=m,this._done=w||!1,this._filename=(0,i.isPdfFile)(P)?P:null,this._queuedChunks=l||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new n.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class y{constructor(m,l,w){this._stream=m,this._begin=l,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new n.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(20);function a(w,P,T){return{method:"GET",headers:w,signal:T.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function o(w){const P=new Headers;for(const T in w){const k=w[T];k!==void 0&&P.append(T,k)}return P}function y(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class f{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(P,T){if(T<=this._progressiveDataLength)return null;const k=new l(this,P,T);return this._rangeRequestReaders.push(k),k}cancelAllRequests(P){var T;(T=this._fullRequestReader)==null||T.cancel(P);for(const k of this._rangeRequestReaders.slice(0))k.cancel(P)}}e.PDFFetchStream=f;class m{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const T=P.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new n.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=o(this._stream.httpHeaders);const k=T.url;fetch(k,a(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,i.validateResponseStatus)(M.status))throw(0,i.createResponseStatusError)(M.status,k);this._reader=M.body.getReader(),this._headersCapability.resolve();const E=R=>M.headers.get(R),{allowRangeRequests:C,suggestedLength:I}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=I||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._headersCapability.promise;const{value:P,done:T}=await this._reader.read();return T?{value:P,done:T}:(this._loaded+=P.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded,total:this._contentLength}),{value:y(P),done:!1})}cancel(P){var T;(T=this._reader)==null||T.cancel(P),this._abortController.abort()}}class l{constructor(P,T,k){this._stream=P,this._reader=null,this._loaded=0;const M=P.source;this._withCredentials=M.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${k-1}`);const E=M.url;fetch(E,a(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,i.validateResponseStatus)(C.status))throw(0,i.createResponseStatusError)(C.status,E);this._readCapability.resolve(),this._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._readCapability.promise;const{value:P,done:T}=await this._reader.read();return T?{value:P,done:T}:(this._loaded+=P.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded}),{value:y(P),done:!1})}cancel(P){var T;(T=this._reader)==null||T.cancel(P),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=f,e.extractFilenameFromHeader=y,e.validateRangeRequestCapabilities=o,e.validateResponseStatus=m;var n=s(1),i=s(21),a=s(6);function o({getResponseHeader:l,isHttp:w,rangeChunkSize:P,disableRange:T}){const k={allowRangeRequests:!1,suggestedLength:void 0},M=parseInt(l("Content-Length"),10);return!Number.isInteger(M)||(k.suggestedLength=M,M<=2*P)||T||!w||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(k.allowRangeRequests=!0),k}function y(l){const w=l("Content-Disposition");if(w){let P=(0,i.getFilenameFromContentDispositionHeader)(w);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,a.isPdfFile)(P))return P}return null}function f(l,w){return l===404||l===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${w}".`,l)}function m(l){return l===200||l===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(a){let o=!0,y=f("filename\\*","i").exec(a);if(y){y=y[1];let M=P(y);return M=unescape(M),M=T(M),M=k(M),l(M)}if(y=w(a),y){const M=k(y);return l(M)}if(y=f("filename","i").exec(a),y){y=y[1];let M=P(y);return M=k(M),l(M)}function f(M,E){return new RegExp("(?:^|;)\\s*"+M+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function m(M,E){if(M){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const C=new TextDecoder(M,{fatal:!0}),I=(0,n.stringToBytes)(E);E=C.decode(I),o=!1}catch{}}return E}function l(M){return o&&/[\x80-\xff]/.test(M)&&(M=m("utf-8",M),o&&(M=m("iso-8859-1",M))),M}function w(M){const E=[];let C;const I=f("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=I.exec(M))!==null;){let[,x,g,A]=C;if(x=parseInt(x,10),x in E){if(x===0)break;continue}E[x]=[g,A]}const R=[];for(let x=0;x<E.length&&x in E;++x){let[g,A]=E[x];A=P(A),g&&(A=unescape(A),x===0&&(A=T(A))),R.push(A)}return R.join("")}function P(M){if(M.startsWith('"')){const E=M.slice(1).split('\\"');for(let C=0;C<E.length;++C){const I=E[C].indexOf('"');I!==-1&&(E[C]=E[C].slice(0,I),E.length=C+1),E[C]=E[C].replaceAll(/\\(.)/g,"$1")}M=E.join('"')}return M}function T(M){const E=M.indexOf("'");if(E===-1)return M;const C=M.slice(0,E),R=M.slice(E+1).replace(/^[^']*'/,"");return m(C,R)}function k(M){return!M.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(M)?M:M.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,C,I,R){if(I==="q"||I==="Q")return R=R.replaceAll("_"," "),R=R.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,g){return String.fromCharCode(parseInt(g,16))}),m(C,R);try{R=atob(R)}catch{}return m(C,R)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(20);const a=200,o=206;function y(P){const T=P.response;return typeof T!="string"?T:(0,n.stringToBytes)(T).buffer}class f{constructor(T,k={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&k.httpHeaders||Object.create(null),this.withCredentials=k.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,k,M){const E={begin:T,end:k};for(const C in M)E[C]=M[C];return this.request(E)}requestFull(T){return this.request(T)}request(T){const k=new XMLHttpRequest,M=this.currXhrId++,E=this.pendingRequests[M]={xhr:k};k.open("GET",this.url),k.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const I=this.httpHeaders[C];I!==void 0&&k.setRequestHeader(C,I)}return this.isHttp&&"begin"in T&&"end"in T?(k.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),E.expectedStatus=o):E.expectedStatus=a,k.responseType="arraybuffer",T.onError&&(k.onerror=function(C){T.onError(k.status)}),k.onreadystatechange=this.onStateChange.bind(this,M),k.onprogress=this.onProgress.bind(this,M),E.onHeadersReceived=T.onHeadersReceived,E.onDone=T.onDone,E.onError=T.onError,E.onProgress=T.onProgress,k.send(null),M}onProgress(T,k){var E;const M=this.pendingRequests[T];M&&((E=M.onProgress)==null||E.call(M,k))}onStateChange(T,k){var x,g,A;const M=this.pendingRequests[T];if(!M)return;const E=M.xhr;if(E.readyState>=2&&M.onHeadersReceived&&(M.onHeadersReceived(),delete M.onHeadersReceived),E.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],E.status===0&&this.isHttp){(x=M.onError)==null||x.call(M,E.status);return}const C=E.status||a;if(!(C===a&&M.expectedStatus===o)&&C!==M.expectedStatus){(g=M.onError)==null||g.call(M,E.status);return}const R=y(E);if(C===o){const H=E.getResponseHeader("Content-Range"),F=/bytes (\d+)-(\d+)\/(\d+)/.exec(H);M.onDone({begin:parseInt(F[1],10),chunk:R})}else R?M.onDone({begin:0,chunk:R}):(A=M.onError)==null||A.call(M,E.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const k=this.pendingRequests[T].xhr;delete this.pendingRequests[T],k.abort()}}class m{constructor(T){this._source=T,this._manager=new f(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const k=this._rangeRequestReaders.indexOf(T);k>=0&&this._rangeRequestReaders.splice(k,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(T,k){const M=new w(this._manager,T,k);return M.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(M),M}cancelAllRequests(T){var k;(k=this._fullRequestReader)==null||k.cancel(T);for(const M of this._rangeRequestReaders.slice(0))M.cancel(T)}}e.PDFNetworkStream=m;class l{constructor(T,k){this._manager=T;const M={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._fullRequestId=T.requestFull(M),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=k.disableRange||!1,this._contentLength=k.length,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,k=this._manager.getRequestXhr(T),M=I=>k.getResponseHeader(I),{allowRangeRequests:E,suggestedLength:C}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(M),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,i.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var k;(k=this.onProgress)==null||k.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new n.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(T,k,M){this._manager=T;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(k,M,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const k=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunk=k,this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,i.createResponseStatusError)(T,this._url);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var k;this.isStreamingSupported||(k=this.onProgress)==null||k.call(this,{loaded:T.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const k=this._queuedChunk;return this._queuedChunk=null,{value:k,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new n.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(20);const a=/^file:\/\/\/[a-zA-Z]:\//;function o(M){const E=require$$5,C=E.parse(M);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(M)?E.parse(`file:///${M}`):(C.host||(C.protocol="file:"),C)}class y{constructor(E){this.source=E,this.url=o(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new w(this),this._fullRequestReader}getRangeReader(E,C){if(C<=this._progressiveDataLength)return null;const I=this.isFsUrl?new k(this,E,C):new P(this,E,C);return this._rangeRequestReaders.push(I),I}cancelAllRequests(E){var C;(C=this._fullRequestReader)==null||C.cancel(E);for(const I of this._rangeRequestReaders.slice(0))I.cancel(E)}}e.PDFNodeStream=y;class f{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const C=E.source;this._contentLength=C.length,this._loaded=0,this._filename=null,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=E.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",C=>{this._error(C)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const C=E.source;this._isStreamingSupported=!C.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=E.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",C=>{this._error(C)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(M,E){return{protocol:M.protocol,auth:M.auth,host:M.hostname,port:M.port,path:M.path,method:"GET",headers:E}}class w extends f{constructor(E){super(E);const C=I=>{if(I.statusCode===404){const A=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(I);const R=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:x,suggestedLength:g}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=g||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(R)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(l(this._url,E.httpHeaders),C)}else{const I=require$$5;this._request=I.request(l(this._url,E.httpHeaders),C)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class P extends m{constructor(E,C,I){super(E),this._httpHeaders={};for(const x in E.httpHeaders){const g=E.httpHeaders[x];g!==void 0&&(this._httpHeaders[x]=g)}this._httpHeaders.Range=`bytes=${C}-${I-1}`;const R=x=>{if(x.statusCode===404){const g=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g;return}this._setReadableStream(x)};if(this._request=null,this._url.protocol==="http:"){const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),R)}else{const x=require$$5;this._request=x.request(l(this._url,this._httpHeaders),R)}this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class T extends f{constructor(E){super(E);let C=decodeURIComponent(this._url.path);a.test(this._url.href)&&(C=C.replace(/^\//,""));const I=require$$5;I.lstat(C,(R,x)=>{if(R){R.code==="ENOENT"&&(R=new n.MissingPDFException(`Missing PDF "${C}".`)),this._storedError=R,this._headersCapability.reject(R);return}this._contentLength=x.size,this._setReadableStream(I.createReadStream(C)),this._headersCapability.resolve()})}}class k extends m{constructor(E,C,I){super(E);let R=decodeURIComponent(this._url.path);a.test(this._url.href)&&(R=R.replace(/^\//,""));const x=require$$5;this._setReadableStream(x.createReadStream(R,{start:C,end:I-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),i=s(1);const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",f=["butt","round","square"],m=["miter","round","bevel"],l=function(x,g="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([x],{type:g}));const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${g};base64,`;for(let b=0,j=x.length;b<j;b+=3){const L=x[b]&255,Q=x[b+1]&255,st=x[b+2]&255,U=L>>2,ot=(L&3)<<4|Q>>4,pt=b+1<j?(Q&15)<<2|st>>6:64,mt=b+2<j?st&63:64;F+=H[U]+H[ot]+H[pt]+H[mt]}return F},w=function(){const x=new Uint8Array([137,80,78,71,13,10,26,10]),g=12,A=new Int32Array(256);for(let st=0;st<256;st++){let U=st;for(let ot=0;ot<8;ot++)U=U&1?3988292384^U>>1&2147483647:U>>1&2147483647;A[st]=U}function H(st,U,ot){let pt=-1;for(let mt=U;mt<ot;mt++){const X=(pt^st[mt])&255,yt=A[X];pt=pt>>>8^yt}return pt^-1}function F(st,U,ot,pt){let mt=pt;const X=U.length;ot[mt]=X>>24&255,ot[mt+1]=X>>16&255,ot[mt+2]=X>>8&255,ot[mt+3]=X&255,mt+=4,ot[mt]=st.charCodeAt(0)&255,ot[mt+1]=st.charCodeAt(1)&255,ot[mt+2]=st.charCodeAt(2)&255,ot[mt+3]=st.charCodeAt(3)&255,mt+=4,ot.set(U,mt),mt+=U.length;const yt=H(ot,pt+4,mt);ot[mt]=yt>>24&255,ot[mt+1]=yt>>16&255,ot[mt+2]=yt>>8&255,ot[mt+3]=yt&255}function b(st,U,ot){let pt=1,mt=0;for(let X=U;X<ot;++X)pt=(pt+(st[X]&255))%65521,mt=(mt+pt)%65521;return mt<<16|pt}function j(st){if(!i.isNodeJS)return L(st);try{const U=parseInt(process.versions.node)>=8?st:Buffer.from(st),ot=require$$5.deflateSync(U,{level:9});return ot instanceof Uint8Array?ot:new Uint8Array(ot)}catch(U){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+U)}return L(st)}function L(st){let U=st.length;const ot=65535,pt=Math.ceil(U/ot),mt=new Uint8Array(2+U+pt*5+4);let X=0;mt[X++]=120,mt[X++]=156;let yt=0;for(;U>ot;)mt[X++]=0,mt[X++]=255,mt[X++]=255,mt[X++]=0,mt[X++]=0,mt.set(st.subarray(yt,yt+ot),X),X+=ot,yt+=ot,U-=ot;mt[X++]=1,mt[X++]=U&255,mt[X++]=U>>8&255,mt[X++]=~U&65535&255,mt[X++]=(~U&65535)>>8&255,mt.set(st.subarray(yt),X),X+=st.length-yt;const wt=b(st,0,st.length);return mt[X++]=wt>>24&255,mt[X++]=wt>>16&255,mt[X++]=wt>>8&255,mt[X++]=wt&255,mt}function Q(st,U,ot,pt){const mt=st.width,X=st.height;let yt,wt,Rt;const kt=st.data;switch(U){case i.ImageKind.GRAYSCALE_1BPP:wt=0,yt=1,Rt=mt+7>>3;break;case i.ImageKind.RGB_24BPP:wt=2,yt=8,Rt=mt*3;break;case i.ImageKind.RGBA_32BPP:wt=6,yt=8,Rt=mt*4;break;default:throw new Error("invalid format")}const B=new Uint8Array((1+Rt)*X);let h=0,d=0;for(let Y=0;Y<X;++Y)B[h++]=0,B.set(kt.subarray(d,d+Rt),h),d+=Rt,h+=Rt;if(U===i.ImageKind.GRAYSCALE_1BPP&&pt){h=0;for(let Y=0;Y<X;Y++){h++;for(let dt=0;dt<Rt;dt++)B[h++]^=255}}const u=new Uint8Array([mt>>24&255,mt>>16&255,mt>>8&255,mt&255,X>>24&255,X>>16&255,X>>8&255,X&255,yt,wt,0,0,0]),_=j(B),S=x.length+g*3+u.length+_.length,N=new Uint8Array(S);let V=0;return N.set(x,V),V+=x.length,F("IHDR",u,N,V),V+=g+u.length,F("IDATA",_,N,V),V+=g+_.length,F("IEND",new Uint8Array(0),N,V),l(N,"image/png",ot)}return function(U,ot,pt){const mt=U.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:U.kind;return Q(U,mt,ot,pt)}}();class P{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,A){this.x=g,this.y=A}}function T(x){let g=[];const A=[];for(const H of x){if(H.fn==="save"){g.push({fnId:92,fn:"group",items:[]}),A.push(g),g=g.at(-1).items;continue}H.fn==="restore"?g=A.pop():g.push(H)}return g}function k(x){if(Number.isInteger(x))return x.toString();const g=x.toFixed(10);let A=g.length-1;if(g[A]!=="0")return g;do A--;while(g[A]==="0");return g.substring(0,g[A]==="."?A:A+1)}function M(x){if(x[4]===0&&x[5]===0){if(x[1]===0&&x[2]===0)return x[0]===1&&x[3]===1?"":`scale(${k(x[0])} ${k(x[3])})`;if(x[0]===x[3]&&x[1]===-x[2]){const g=Math.acos(x[0])*180/Math.PI;return`rotate(${k(g)})`}}else if(x[0]===1&&x[1]===0&&x[2]===0&&x[3]===1)return`translate(${k(x[4])} ${k(x[5])})`;return`matrix(${k(x[0])} ${k(x[1])} ${k(x[2])} ${k(x[3])} ${k(x[4])} ${k(x[5])})`}let E=0,C=0,I=0;class R{constructor(g,A,H=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new P,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=g,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!H,this._operatorIdMapping=[];for(const F in i.OPS)this._operatorIdMapping[i.OPS[F]]=F}getObject(g,A=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):A}save(){this.transformStack.push(this.transformMatrix);const g=this.current;this.extraStack.push(g),this.current=g.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(g){this.save(),this.executeOpTree(g),this.restore()}loadDependencies(g){const A=g.fnArray,H=g.argsArray;for(let F=0,b=A.length;F<b;F++)if(A[F]===i.OPS.dependency)for(const j of H[F]){const L=j.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(st=>{L.get(j,st)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(g,A,H,F,b,j){const L=[g,A,H,F,b,j];this.transformMatrix=i.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(g,A){this.viewport=A;const H=this._initialize(A);return this.loadDependencies(g).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(g)),H))}convertOpList(g){const A=this._operatorIdMapping,H=g.argsArray,F=g.fnArray,b=[];for(let j=0,L=F.length;j<L;j++){const Q=F[j];b.push({fnId:Q,fn:A[Q],args:H[j]})}return T(b)}executeOpTree(g){for(const A of g){const H=A.fn,F=A.fnId,b=A.args;switch(F|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(b);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(b[0],b[1]);break;case i.OPS.setFont:this.setFont(b);break;case i.OPS.showText:this.showText(b[0]);break;case i.OPS.showSpacedText:this.showText(b[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(b[0],b[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(b[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(b[0]);break;case i.OPS.setHScale:this.setHScale(b[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(b[0],b[1],b[2],b[3],b[4],b[5]);break;case i.OPS.setTextRise:this.setTextRise(b[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(b[0]);break;case i.OPS.setLineWidth:this.setLineWidth(b[0]);break;case i.OPS.setLineJoin:this.setLineJoin(b[0]);break;case i.OPS.setLineCap:this.setLineCap(b[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(b[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(b[0],b[1],b[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(b[0],b[1],b[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(b);break;case i.OPS.setFillColorN:this.setFillColorN(b);break;case i.OPS.shadingFill:this.shadingFill(b[0]);break;case i.OPS.setDash:this.setDash(b[0],b[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(b[0]);break;case i.OPS.setFlatness:this.setFlatness(b[0]);break;case i.OPS.setGState:this.setGState(b[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(b[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(b[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(b[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(b[0],b[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(b[0],b[1],b[2],b[3],b[4],b[5]);break;case i.OPS.constructPath:this.constructPath(b[0],b[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,i.warn)(`Unimplemented operator ${H}`);break}}}setWordSpacing(g){this.current.wordSpacing=g}setCharSpacing(g){this.current.charSpacing=g}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(g,A,H,F,b,j){const L=this.current;L.textMatrix=L.lineMatrix=[g,A,H,F,b,j],L.textMatrixScale=Math.hypot(g,A),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${k(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",k(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const g=this.current;g.x=g.lineX=0,g.y=g.lineY=0,g.textMatrix=i.IDENTITY_MATRIX,g.lineMatrix=i.IDENTITY_MATRIX,g.textMatrixScale=1,g.tspan=this.svgFactory.createElement("svg:tspan"),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtgrp=this.svgFactory.createElement("svg:g"),g.xcoords=[],g.ycoords=[]}moveText(g,A){const H=this.current;H.x=H.lineX+=g,H.y=H.lineY+=A,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${k(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",k(-H.y))}showText(g){const A=this.current,H=A.font,F=A.fontSize;if(F===0)return;const b=A.fontSizeScale,j=A.charSpacing,L=A.wordSpacing,Q=A.fontDirection,st=A.textHScale*Q,U=H.vertical,ot=U?1:-1,pt=H.defaultVMetrics,mt=F*A.fontMatrix[0];let X=0;for(const Rt of g){if(Rt===null){X+=Q*L;continue}else if(typeof Rt=="number"){X+=ot*Rt*F/1e3;continue}const kt=(Rt.isSpace?L:0)+j,B=Rt.fontChar;let h,d,u=Rt.width;if(U){let S;const N=Rt.vmetric||pt;S=Rt.vmetric?N[1]:u*.5,S=-S*mt;const V=N[2]*mt;u=N?-N[0]:u,h=S/b,d=(X+V)/b}else h=X/b,d=0;(Rt.isInFont||H.missingFile)&&(A.xcoords.push(A.x+h),U&&A.ycoords.push(-A.y+d),A.tspan.textContent+=B);const _=U?u*mt-kt*Q:u*mt+kt*Q;X+=_}A.tspan.setAttributeNS(null,"x",A.xcoords.map(k).join(" ")),U?A.tspan.setAttributeNS(null,"y",A.ycoords.map(k).join(" ")):A.tspan.setAttributeNS(null,"y",k(-A.y)),U?A.y-=X:A.x+=X*st,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${k(A.fontSize)}px`),A.fontStyle!==a.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==a.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const yt=A.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(yt===i.TextRenderingMode.FILL||yt===i.TextRenderingMode.FILL_STROKE?(A.fillColor!==a.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),yt===i.TextRenderingMode.STROKE||yt===i.TextRenderingMode.FILL_STROKE){const Rt=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,Rt)}let wt=A.textMatrix;A.textRise!==0&&(wt=wt.slice(),wt[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${M(wt)} scale(${k(st)}, -1)`),A.txtElement.setAttributeNS(o,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(g,A){this.setLeading(-A),this.moveText(g,A)}addFontStyle(g){if(!g.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=l(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${g.loadedName}"; src: url(${A}); }
`}setFont(g){const A=this.current,H=this.commonObjs.get(g[0]);let F=g[1];A.font=H,this.embedFonts&&!H.missingFile&&!this.embeddedFonts[H.loadedName]&&(this.addFontStyle(H),this.embeddedFonts[H.loadedName]=H),A.fontMatrix=H.fontMatrix||i.FONT_IDENTITY_MATRIX;let b="normal";H.black?b="900":H.bold&&(b="bold");const j=H.italic?"italic":"normal";F<0?(F=-F,A.fontDirection=-1):A.fontDirection=1,A.fontSize=F,A.fontFamily=H.loadedName,A.fontWeight=b,A.fontStyle=j,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",k(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const g=this.current;g.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=g.txtElement)!=null&&A.hasChildNodes())&&(g.element=g.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(g){g>0&&(this.current.lineWidth=g)}setLineCap(g){this.current.lineCap=f[g]}setLineJoin(g){this.current.lineJoin=m[g]}setMiterLimit(g){this.current.miterLimit=g}setStrokeAlpha(g){this.current.strokeAlpha=g}setStrokeRGBColor(g,A,H){this.current.strokeColor=i.Util.makeHexColor(g,A,H)}setFillAlpha(g){this.current.fillAlpha=g}setFillRGBColor(g,A,H){this.current.fillColor=i.Util.makeHexColor(g,A,H),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(g){this.current.strokeColor=this._makeColorN_Pattern(g)}setFillColorN(g){this.current.fillColor=this._makeColorN_Pattern(g)}shadingFill(g){const{width:A,height:H}=this.viewport,F=i.Util.inverseTransform(this.transformMatrix),[b,j,L,Q]=i.Util.getAxialAlignedBoundingBox([0,0,A,H],F),st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x",b),st.setAttributeNS(null,"y",j),st.setAttributeNS(null,"width",L-b),st.setAttributeNS(null,"height",Q-j),st.setAttributeNS(null,"fill",this._makeShadingPattern(g)),this.current.fillAlpha<1&&st.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(st)}_makeColorN_Pattern(g){return g[0]==="TilingPattern"?this._makeTilingPattern(g):this._makeShadingPattern(g)}_makeTilingPattern(g){const A=g[1],H=g[2],F=g[3]||i.IDENTITY_MATRIX,[b,j,L,Q]=g[4],st=g[5],U=g[6],ot=g[7],pt=`shading${I++}`,[mt,X,yt,wt]=i.Util.normalizeRect([...i.Util.applyTransform([b,j],F),...i.Util.applyTransform([L,Q],F)]),[Rt,kt]=i.Util.singularValueDecompose2dScale(F),B=st*Rt,h=U*kt,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",pt),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",B),d.setAttributeNS(null,"height",h),d.setAttributeNS(null,"x",`${mt}`),d.setAttributeNS(null,"y",`${X}`);const u=this.svg,_=this.transformMatrix,S=this.current.fillColor,N=this.current.strokeColor,V=this.svgFactory.create(yt-mt,wt-X);if(this.svg=V,this.transformMatrix=F,ot===2){const Y=i.Util.makeHexColor(...A);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(H)),this.svg=u,this.transformMatrix=_,this.current.fillColor=S,this.current.strokeColor=N,d.append(V.childNodes[0]),this.defs.append(d),`url(#${pt})`}_makeShadingPattern(g){switch(typeof g=="string"&&(g=this.objs.get(g)),g[0]){case"RadialAxial":const A=`shading${I++}`,H=g[3];let F;switch(g[1]){case"axial":const b=g[4],j=g[5];F=this.svgFactory.createElement("svg:linearGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"x1",b[0]),F.setAttributeNS(null,"y1",b[1]),F.setAttributeNS(null,"x2",j[0]),F.setAttributeNS(null,"y2",j[1]);break;case"radial":const L=g[4],Q=g[5],st=g[6],U=g[7];F=this.svgFactory.createElement("svg:radialGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"cx",Q[0]),F.setAttributeNS(null,"cy",Q[1]),F.setAttributeNS(null,"r",U),F.setAttributeNS(null,"fx",L[0]),F.setAttributeNS(null,"fy",L[1]),F.setAttributeNS(null,"fr",st);break;default:throw new Error(`Unknown RadialAxial type: ${g[1]}`)}for(const b of H){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",b[0]),j.setAttributeNS(null,"stop-color",b[1]),F.append(j)}return this.defs.append(F),`url(#${A})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${g[0]}`)}}setDash(g,A){this.current.dashArray=g,this.current.dashPhase=A}constructPath(g,A){const H=this.current;let F=H.x,b=H.y,j=[],L=0;for(const Q of g)switch(Q|0){case i.OPS.rectangle:F=A[L++],b=A[L++];const st=A[L++],U=A[L++],ot=F+st,pt=b+U;j.push("M",k(F),k(b),"L",k(ot),k(b),"L",k(ot),k(pt),"L",k(F),k(pt),"Z");break;case i.OPS.moveTo:F=A[L++],b=A[L++],j.push("M",k(F),k(b));break;case i.OPS.lineTo:F=A[L++],b=A[L++],j.push("L",k(F),k(b));break;case i.OPS.curveTo:F=A[L+4],b=A[L+5],j.push("C",k(A[L]),k(A[L+1]),k(A[L+2]),k(A[L+3]),k(F),k(b)),L+=6;break;case i.OPS.curveTo2:j.push("C",k(F),k(b),k(A[L]),k(A[L+1]),k(A[L+2]),k(A[L+3])),F=A[L+2],b=A[L+3],L+=4;break;case i.OPS.curveTo3:F=A[L+2],b=A[L+3],j.push("C",k(A[L]),k(A[L+1]),k(F),k(b),k(F),k(b)),L+=4;break;case i.OPS.closePath:j.push("Z");break}j=j.join(" "),H.path&&g.length>0&&g[0]!==i.OPS.rectangle&&g[0]!==i.OPS.moveTo?j=H.path.getAttributeNS(null,"d")+j:(H.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(H.path)),H.path.setAttributeNS(null,"d",j),H.path.setAttributeNS(null,"fill","none"),H.element=H.path,H.setCurrentPoint(F,b)}endPath(){const g=this.current;if(g.path=null,!this.pendingClip)return;if(!g.element){this.pendingClip=null;return}const A=`clippath${E++}`,H=this.svgFactory.createElement("svg:clipPath");H.setAttributeNS(null,"id",A),H.setAttributeNS(null,"transform",M(this.transformMatrix));const F=g.element.cloneNode(!0);if(this.pendingClip==="evenodd"?F.setAttributeNS(null,"clip-rule","evenodd"):F.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,H.append(F),this.defs.append(H),g.activeClipUrl){g.clipGroup=null;for(const b of this.extraStack)b.clipGroup=null;H.setAttributeNS(null,"clip-path",g.activeClipUrl)}g.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(g){this.pendingClip=g}closePath(){const g=this.current;if(g.path){const A=`${g.path.getAttributeNS(null,"d")}Z`;g.path.setAttributeNS(null,"d",A)}}setLeading(g){this.current.leading=-g}setTextRise(g){this.current.textRise=g}setTextRenderingMode(g){this.current.textRenderingMode=g}setHScale(g){this.current.textHScale=g/100}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[A,H]of g)switch(A){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H);break;case"CA":this.setStrokeAlpha(H);break;case"ca":this.setFillAlpha(H);break;default:(0,i.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const g=this.current;g.element&&(g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha),this.endPath())}stroke(){const g=this.current;g.element&&(this._setStrokeAttributes(g.element),g.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(g,A=1){const H=this.current;let F=H.dashArray;A!==1&&F.length>0&&(F=F.map(function(b){return A*b})),g.setAttributeNS(null,"stroke",H.strokeColor),g.setAttributeNS(null,"stroke-opacity",H.strokeAlpha),g.setAttributeNS(null,"stroke-miterlimit",k(H.miterLimit)),g.setAttributeNS(null,"stroke-linecap",H.lineCap),g.setAttributeNS(null,"stroke-linejoin",H.lineJoin),g.setAttributeNS(null,"stroke-width",k(A*H.lineWidth)+"px"),g.setAttributeNS(null,"stroke-dasharray",F.map(k).join(" ")),g.setAttributeNS(null,"stroke-dashoffset",k(A*H.dashPhase)+"px")}eoFill(){var g;(g=this.current.element)==null||g.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var g;(g=this.current.element)==null||g.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width","1px"),g.setAttributeNS(null,"height","1px"),g.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(g)}paintImageXObject(g){const A=this.getObject(g);if(!A){(0,i.warn)(`Dependent image with object ID ${g} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(g,A){const H=g.width,F=g.height,b=w(g,this.forceDataSchema,!!A),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",k(H)),j.setAttributeNS(null,"height",k(F)),this.current.element=j,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(y,"xlink:href",b),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",k(-F)),L.setAttributeNS(null,"width",k(H)+"px"),L.setAttributeNS(null,"height",k(F)+"px"),L.setAttributeNS(null,"transform",`scale(${k(1/H)} ${k(-1/F)})`),A?A.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(g){const A=this.getObject(g.data,g);if(A.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const H=this.current,F=A.width,b=A.height,j=H.fillColor;H.maskId=`mask${C++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",H.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",k(F)),Q.setAttributeNS(null,"height",k(b)),Q.setAttributeNS(null,"fill",j),Q.setAttributeNS(null,"mask",`url(#${H.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(A,L)}paintFormXObjectBegin(g,A){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),A){const H=A[2]-A[0],F=A[3]-A[1],b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x",A[0]),b.setAttributeNS(null,"y",A[1]),b.setAttributeNS(null,"width",k(H)),b.setAttributeNS(null,"height",k(F)),this.current.element=b,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(g){const A=this.svgFactory.create(g.width,g.height),H=this.svgFactory.createElement("svg:defs");A.append(H),this.defs=H;const F=this.svgFactory.createElement("svg:g");return F.setAttributeNS(null,"transform",M(g.transform)),A.append(F),this.svg=F,A}_ensureClipGroup(){if(!this.current.clipGroup){const g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(g),this.current.clipGroup=g}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",M(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=R},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const a=[],o={items:a,styles:Object.create(null)};function y(f){var w;if(!f)return;let m=null;const l=f.name;if(l==="#text")m=f.value;else if(s.shouldBuildText(l))(w=f==null?void 0:f.attributes)!=null&&w.textContent?m=f.attributes.textContent:f.value&&(m=f.value);else return;if(m!==null&&a.push({str:m}),!!f.children)for(const P of f.children)y(P)}return y(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=M,e.updateTextLayer=E;var n=s(1),i=s(6);const a=1e5,o=30,y=.8,f=new Map;function m(C,I){let R;if(I&&n.FeatureTest.isOffscreenCanvasSupported)R=new OffscreenCanvas(C,C).getContext("2d",{alpha:!1});else{const x=document.createElement("canvas");x.width=x.height=C,R=x.getContext("2d",{alpha:!1})}return R}function l(C,I){const R=f.get(C);if(R)return R;const x=m(o,I);x.font=`${o}px ${C}`;const g=x.measureText("");let A=g.fontBoundingBoxAscent,H=Math.abs(g.fontBoundingBoxDescent);if(A){const b=A/(A+H);return f.set(C,b),x.canvas.width=x.canvas.height=0,b}x.strokeStyle="red",x.clearRect(0,0,o,o),x.strokeText("g",0,0);let F=x.getImageData(0,0,o,o).data;H=0;for(let b=F.length-1-3;b>=0;b-=4)if(F[b]>0){H=Math.ceil(b/4/o);break}x.clearRect(0,0,o,o),x.strokeText("A",0,o),F=x.getImageData(0,0,o,o).data,A=0;for(let b=0,j=F.length;b<j;b+=4)if(F[b]>0){A=o-Math.floor(b/4/o);break}if(x.canvas.width=x.canvas.height=0,A){const b=A/(A+H);return f.set(C,b),b}return f.set(C,y),y}function w(C,I,R){const x=document.createElement("span"),g={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};C._textDivs.push(x);const A=n.Util.transform(C._transform,I.transform);let H=Math.atan2(A[1],A[0]);const F=R[I.fontName];F.vertical&&(H+=Math.PI/2);const b=Math.hypot(A[2],A[3]),j=b*l(F.fontFamily,C._isOffscreenCanvasSupported);let L,Q;H===0?(L=A[4],Q=A[5]-j):(L=A[4]+j*Math.sin(H),Q=A[5]-j*Math.cos(H));const st="calc(var(--scale-factor)*",U=x.style;C._container===C._rootContainer?(U.left=`${(100*L/C._pageWidth).toFixed(2)}%`,U.top=`${(100*Q/C._pageHeight).toFixed(2)}%`):(U.left=`${st}${L.toFixed(2)}px)`,U.top=`${st}${Q.toFixed(2)}px)`),U.fontSize=`${st}${b.toFixed(2)}px)`,U.fontFamily=F.fontFamily,g.fontSize=b,x.setAttribute("role","presentation"),x.textContent=I.str,x.dir=I.dir,C._fontInspectorEnabled&&(x.dataset.fontName=I.fontName),H!==0&&(g.angle=H*(180/Math.PI));let ot=!1;if(I.str.length>1)ot=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const pt=Math.abs(I.transform[0]),mt=Math.abs(I.transform[3]);pt!==mt&&Math.max(pt,mt)/Math.min(pt,mt)>1.5&&(ot=!0)}ot&&(g.canvasWidth=F.vertical?I.height:I.width),C._textDivProperties.set(x,g),C._isReadableStream&&C._layoutText(x)}function P(C){const{div:I,scale:R,properties:x,ctx:g,prevFontSize:A,prevFontFamily:H}=C,{style:F}=I;let b="";if(x.canvasWidth!==0&&x.hasText){const{fontFamily:j}=F,{canvasWidth:L,fontSize:Q}=x;(A!==Q||H!==j)&&(g.font=`${Q*R}px ${j}`,C.prevFontSize=Q,C.prevFontFamily=j);const{width:st}=g.measureText(I.textContent);st>0&&(b=`scaleX(${L*R/st})`)}x.angle!==0&&(b=`rotate(${x.angle}deg) ${b}`),b.length>0&&(F.transform=b)}function T(C){if(C._canceled)return;const I=C._textDivs,R=C._capability;if(I.length>a){R.resolve();return}if(!C._isReadableStream)for(const g of I)C._layoutText(g);R.resolve()}class k{constructor({textContentSource:I,container:R,viewport:x,textDivs:g,textDivProperties:A,textContentItemsStr:H,isOffscreenCanvasSupported:F}){var st;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=R,this._textDivs=g||[],this._textContentItemsStr=H||[],this._isOffscreenCanvasSupported=F,this._fontInspectorEnabled=!!((st=globalThis.FontInspector)!=null&&st.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:x.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,F)};const{pageWidth:b,pageHeight:j,pageX:L,pageY:Q}=x.rawDims;this._transform=[1,0,0,-1,-L,Q+j],this._pageWidth=b,this._pageHeight=j,(0,i.setLayerDimensions)(R,x),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(I,R){for(const x of I){if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const g=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x.id!==null&&this._container.setAttribute("id",`${x.id}`),g.append(this._container)}else x.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x.str),w(this,x,R)}}_layoutText(I){const R=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,P(this._layoutTextParams),R.hasText&&this._container.append(I),R.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this._container.append(x)}}_render(){const I=new n.PromiseCapability;let R=Object.create(null);if(this._isReadableStream){const x=()=>{this._reader.read().then(({value:g,done:A})=>{if(A){I.resolve();return}Object.assign(R,g.styles),this._processItems(g.items,R),x()},I.reject)};this._reader=this._textContentSource.getReader(),x()}else if(this._textContentSource){const{items:x,styles:g}=this._textContentSource;this._processItems(x,g),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{R=null,T(this)},this._capability.reject)}}e.TextLayerRenderTask=k;function M(C){!C.textContentSource&&(C.textContent||C.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),C.textContentSource=C.textContent||C.textContentStream);const{container:I,viewport:R}=C,x=getComputedStyle(I),g=x.getPropertyValue("visibility"),A=parseFloat(x.getPropertyValue("--scale-factor"));g==="visible"&&(!A||Math.abs(A-R.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const H=new k(C);return H._render(),H}function E({container:C,viewport:I,textDivs:R,textDivProperties:x,isOffscreenCanvasSupported:g,mustRotate:A=!0,mustRescale:H=!0}){if(A&&(0,i.setLayerDimensions)(C,{rotation:I.rotation}),H){const F=m(0,g),j={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F};for(const L of R)j.properties=x.get(L),j.div=L,P(j)}}},(t,e,s)=>{var l,w,P,T,k,M,E,C,I,R,x,sn,A,Me,F,rn,j,an;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),a=s(28),o=s(33),y=s(6),f=s(34);const Q=class Q{constructor({uiManager:U,pageIndex:ot,div:pt,accessibilityManager:mt,annotationLayer:X,viewport:yt,l10n:wt}){G(this,x);G(this,A);G(this,F);G(this,j);G(this,l,void 0);G(this,w,!1);G(this,P,null);G(this,T,this.pointerup.bind(this));G(this,k,this.pointerdown.bind(this));G(this,M,new Map);G(this,E,!1);G(this,C,!1);G(this,I,!1);G(this,R,void 0);const Rt=[a.FreeTextEditor,o.InkEditor,f.StampEditor];if(!Q._initialized){Q._initialized=!0;for(const kt of Rt)kt.initialize(wt)}U.registerEditorTypes(Rt),gt(this,R,U),this.pageIndex=ot,this.div=pt,gt(this,l,mt),gt(this,P,X),this.viewport=yt,r(this,R).addLayer(this)}get isEmpty(){return r(this,M).size===0}updateToolbar(U){r(this,R).updateToolbar(U)}updateMode(U=r(this,R).getMode()){it(this,j,an).call(this),U===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),U!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",U===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",U===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",U===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(U){if(!U&&r(this,R).getMode()!==n.AnnotationEditorType.INK)return;if(!U){for(const pt of r(this,M).values())if(pt.isEmpty()){pt.setInBackground();return}}it(this,A,Me).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(U){r(this,R).setEditingState(U)}addCommands(U){r(this,R).addCommands(U)}enable(){this.div.style.pointerEvents="auto";const U=new Set;for(const pt of r(this,M).values())pt.enableEditing(),pt.annotationElementId&&U.add(pt.annotationElementId);if(!r(this,P))return;const ot=r(this,P).getEditableAnnotations();for(const pt of ot){if(pt.hide(),r(this,R).isDeletedAnnotationElement(pt.data.id)||U.has(pt.data.id))continue;const mt=this.deserialize(pt);mt&&(this.addOrRebuild(mt),mt.enableEditing())}}disable(){var ot;gt(this,I,!0),this.div.style.pointerEvents="none";const U=new Set;for(const pt of r(this,M).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){U.add(pt.annotationElementId);continue}(ot=this.getEditableAnnotation(pt.annotationElementId))==null||ot.show(),pt.remove()}if(r(this,P)){const pt=r(this,P).getEditableAnnotations();for(const mt of pt){const{id:X}=mt.data;U.has(X)||r(this,R).isDeletedAnnotationElement(X)||mt.show()}}it(this,j,an).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,I,!1)}getEditableAnnotation(U){var ot;return((ot=r(this,P))==null?void 0:ot.getEditableAnnotation(U))||null}setActiveEditor(U){r(this,R).getActive()!==U&&r(this,R).setActiveEditor(U)}enableClick(){this.div.addEventListener("pointerdown",r(this,k)),this.div.addEventListener("pointerup",r(this,T))}disableClick(){this.div.removeEventListener("pointerdown",r(this,k)),this.div.removeEventListener("pointerup",r(this,T))}attach(U){r(this,M).set(U.id,U);const{annotationElementId:ot}=U;ot&&r(this,R).isDeletedAnnotationElement(ot)&&r(this,R).removeDeletedAnnotationElement(U)}detach(U){var ot;r(this,M).delete(U.id),(ot=r(this,l))==null||ot.removePointerInTextLayer(U.contentDiv),!r(this,I)&&U.annotationElementId&&r(this,R).addDeletedAnnotationElement(U)}remove(U){this.detach(U),r(this,R).removeEditor(U),U.div.contains(document.activeElement)&&setTimeout(()=>{r(this,R).focusMainContainer()},0),U.div.remove(),U.isAttachedToDOM=!1,r(this,C)||this.addInkEditorIfNeeded(!1)}changeParent(U){var ot;U.parent!==this&&(U.annotationElementId&&(r(this,R).addDeletedAnnotationElement(U.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(U),U.annotationElementId=null),this.attach(U),(ot=U.parent)==null||ot.detach(U),U.setParent(this),U.div&&U.isAttachedToDOM&&(U.div.remove(),this.div.append(U.div)))}add(U){if(this.changeParent(U),r(this,R).addEditor(U),this.attach(U),!U.isAttachedToDOM){const ot=U.render();this.div.append(ot),U.isAttachedToDOM=!0}U.fixAndSetPosition(),U.onceAdded(),r(this,R).addToAnnotationStorage(U)}moveEditorInDOM(U){var pt;if(!U.isAttachedToDOM)return;const{activeElement:ot}=document;U.div.contains(ot)&&(U._focusEventsAllowed=!1,setTimeout(()=>{U.div.contains(document.activeElement)?U._focusEventsAllowed=!0:(U.div.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),ot.focus())},0)),U._structTreeParentId=(pt=r(this,l))==null?void 0:pt.moveElementInDOM(this.div,U.div,U.contentDiv,!0)}addOrRebuild(U){U.needsToBeRebuilt()?U.rebuild():this.add(U)}addUndoableEditor(U){const ot=()=>U._uiManager.rebuild(U),pt=()=>{U.remove()};this.addCommands({cmd:ot,undo:pt,mustExec:!1})}getNextId(){return r(this,R).getId()}pasteEditor(U,ot){r(this,R).updateToolbar(U),r(this,R).updateMode(U);const{offsetX:pt,offsetY:mt}=it(this,F,rn).call(this),X=this.getNextId(),yt=it(this,x,sn).call(this,{parent:this,id:X,x:pt,y:mt,uiManager:r(this,R),isCentered:!0,...ot});yt&&this.add(yt)}deserialize(U){switch(U.annotationType??U.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(U,this,r(this,R));case n.AnnotationEditorType.INK:return o.InkEditor.deserialize(U,this,r(this,R));case n.AnnotationEditorType.STAMP:return f.StampEditor.deserialize(U,this,r(this,R))}return null}addNewEditor(){it(this,A,Me).call(this,it(this,F,rn).call(this),!0)}setSelected(U){r(this,R).setSelected(U)}toggleSelected(U){r(this,R).toggleSelected(U)}isSelected(U){return r(this,R).isSelected(U)}unselect(U){r(this,R).unselect(U)}pointerup(U){const{isMac:ot}=n.FeatureTest.platform;if(!(U.button!==0||U.ctrlKey&&ot)&&U.target===this.div&&r(this,E)){if(gt(this,E,!1),!r(this,w)){gt(this,w,!0);return}if(r(this,R).getMode()===n.AnnotationEditorType.STAMP){r(this,R).unselectAll();return}it(this,A,Me).call(this,U,!1)}}pointerdown(U){if(r(this,E)){gt(this,E,!1);return}const{isMac:ot}=n.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&ot||U.target!==this.div)return;gt(this,E,!0);const pt=r(this,R).getActive();gt(this,w,!pt||pt.isEmpty())}findNewParent(U,ot,pt){const mt=r(this,R).findParent(ot,pt);return mt===null||mt===this?!1:(mt.changeParent(U),!0)}destroy(){var U,ot;((U=r(this,R).getActive())==null?void 0:U.parent)===this&&(r(this,R).commitOrRemove(),r(this,R).setActiveEditor(null));for(const pt of r(this,M).values())(ot=r(this,l))==null||ot.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,r(this,M).clear(),r(this,R).removeLayer(this)}render({viewport:U}){this.viewport=U,(0,y.setLayerDimensions)(this.div,U);for(const ot of r(this,R).getEditors(this.pageIndex))this.add(ot);this.updateMode()}update({viewport:U}){r(this,R).commitOrRemove(),this.viewport=U,(0,y.setLayerDimensions)(this.div,{rotation:U.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:U,pageHeight:ot}=this.viewport.rawDims;return[U,ot]}};l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,I=new WeakMap,R=new WeakMap,x=new WeakSet,sn=function(U){switch(r(this,R).getMode()){case n.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(U);case n.AnnotationEditorType.INK:return new o.InkEditor(U);case n.AnnotationEditorType.STAMP:return new f.StampEditor(U)}return null},A=new WeakSet,Me=function(U,ot){const pt=this.getNextId(),mt=it(this,x,sn).call(this,{parent:this,id:pt,x:U.offsetX,y:U.offsetY,uiManager:r(this,R),isCentered:ot});return mt&&this.add(mt),mt},F=new WeakSet,rn=function(){const{x:U,y:ot,width:pt,height:mt}=this.div.getBoundingClientRect(),X=Math.max(0,U),yt=Math.max(0,ot),wt=Math.min(window.innerWidth,U+pt),Rt=Math.min(window.innerHeight,ot+mt),kt=(X+wt)/2-U,B=(yt+Rt)/2-ot,[h,d]=this.viewport.rotation%180===0?[kt,B]:[B,kt];return{offsetX:h,offsetY:d}},j=new WeakSet,an=function(){gt(this,C,!0);for(const U of r(this,M).values())U.isEmpty()&&U.remove();gt(this,C,!1)},se(Q,"_initialized",!1);let m=Q;e.AnnotationEditorLayer=m},(t,e,s)=>{var f,m,l,w,P,T,k,M,E,C,In,R,On,g,Dn,H,Se,b,on,L,Ln,st,ln;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(5),a=s(4),o=s(29);const ot=class ot extends a.AnnotationEditor{constructor(X){super({...X,name:"freeTextEditor"});G(this,C);G(this,R);G(this,g);G(this,H);G(this,b);G(this,L);G(this,st);G(this,f,this.editorDivBlur.bind(this));G(this,m,this.editorDivFocus.bind(this));G(this,l,this.editorDivInput.bind(this));G(this,w,this.editorDivKeydown.bind(this));G(this,P,void 0);G(this,T,"");G(this,k,`${this.id}-editor`);G(this,M,void 0);G(this,E,null);gt(this,P,X.color||ot._defaultColor||a.AnnotationEditor._defaultLineColor),gt(this,M,X.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const X=ot.prototype,yt=kt=>kt.isEmpty(),wt=i.AnnotationEditorUIManager.TRANSLATE_SMALL,Rt=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],X.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],X.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],X._translateEmpty,{args:[-wt,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X._translateEmpty,{args:[-Rt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],X._translateEmpty,{args:[wt,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X._translateEmpty,{args:[Rt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],X._translateEmpty,{args:[0,-wt],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X._translateEmpty,{args:[0,-Rt],checker:yt}],[["ArrowDown","mac+ArrowDown"],X._translateEmpty,{args:[0,wt],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X._translateEmpty,{args:[0,Rt],checker:yt}]]))}static initialize(X){a.AnnotationEditor.initialize(X,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ot._defaultFontSize=yt;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ot._defaultColor=yt;break}}updateParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,C,In).call(this,yt);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,R,On).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,ot._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,ot._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,M)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,P)]]}_translateEmpty(X,yt){this._uiManager.translateSelectedEditors(X,yt,!0)}getInitialTranslation(){const X=this.parentScale;return[-ot._internalPadding*X,-(ot._internalPadding+r(this,M))*X]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,w)),this.editorDiv.addEventListener("focus",r(this,m)),this.editorDiv.addEventListener("blur",r(this,f)),this.editorDiv.addEventListener("input",r(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,k)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",r(this,w)),this.editorDiv.removeEventListener("focus",r(this,m)),this.editorDiv.removeEventListener("blur",r(this,f)),this.editorDiv.removeEventListener("input",r(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),X.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var X;if(this.width){it(this,st,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(X=this._initialOptions)!=null&&X.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const X=r(this,T),yt=gt(this,T,it(this,g,Dn).call(this).trimEnd());if(X===yt)return;const wt=Rt=>{if(gt(this,T,Rt),!Rt){this.remove();return}it(this,b,on).call(this),this._uiManager.rebuild(this),it(this,H,Se).call(this)};this.addCommands({cmd:()=>{wt(yt)},undo:()=>{wt(X)},mustExec:!1}),it(this,H,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(X){this.enterInEditMode()}keydown(X){X.target===this.div&&X.key==="Enter"&&(this.enterInEditMode(),X.preventDefault())}editorDivKeydown(X){ot._keyboardManager.exec(this,X)}editorDivFocus(X){this.isEditing=!0}editorDivBlur(X){this.isEditing=!1}editorDivInput(X){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let X,yt;this.width&&(X=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,k)),this.enableEditing(),a.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("aria-label",Rt)}),a.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("default-content",Rt)}),this.editorDiv.contentEditable=!0;const{style:wt}=this.editorDiv;if(wt.fontSize=`calc(${r(this,M)}px * var(--scale-factor))`,wt.color=r(this,P),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Rt,kt]=this.parentDimensions;if(this.annotationElementId){const{position:B}=r(this,E);let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[u,_]=this.pageDimensions,[S,N]=this.pageTranslation;let V,Y;switch(this.rotation){case 0:V=X+(B[0]-S)/u,Y=yt+this.height-(B[1]-N)/_;break;case 90:V=X+(B[0]-S)/u,Y=yt-(B[1]-N)/_,[h,d]=[d,-h];break;case 180:V=X-this.width+(B[0]-S)/u,Y=yt-(B[1]-N)/_,[h,d]=[-h,-d];break;case 270:V=X+(B[0]-S-this.height*_)/u,Y=yt+(B[1]-N-this.width*u)/_,[h,d]=[-d,h];break}this.setAt(V*Rt,Y*kt,h,d)}else this.setAt(X*Rt,yt*kt,this.width*Rt,this.height*kt);it(this,b,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(X,yt,wt){let Rt=null;if(X instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:B,fontColor:h},rect:d,rotation:u,id:_},textContent:S,textPosition:N,parent:{page:{pageNumber:V}}}=X;if(!S||S.length===0)return null;Rt=X={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(h),fontSize:B,value:S.join(`
`),position:N,pageIndex:V-1,rect:d,rotation:u,id:_,deleted:!1}}const kt=super.deserialize(X,yt,wt);return gt(kt,M,X.fontSize),gt(kt,P,n.Util.makeHexColor(...X.color)),gt(kt,T,X.value),kt.annotationElementId=X.id||null,gt(kt,E,Rt),kt}serialize(X=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=ot._internalPadding*this.parentScale,wt=this.getRect(yt,yt),Rt=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,P)),kt={annotationType:n.AnnotationEditorType.FREETEXT,color:Rt,fontSize:r(this,M),value:r(this,T),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return X?kt:this.annotationElementId&&!it(this,L,Ln).call(this,kt)?null:(kt.id=this.annotationElementId,kt)}};f=new WeakMap,m=new WeakMap,l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakSet,In=function(X){const yt=Rt=>{this.editorDiv.style.fontSize=`calc(${Rt}px * var(--scale-factor))`,this.translate(0,-(Rt-r(this,M))*this.parentScale),gt(this,M,Rt),it(this,H,Se).call(this)},wt=r(this,M);this.addCommands({cmd:()=>{yt(X)},undo:()=>{yt(wt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,On=function(X){const yt=r(this,P);this.addCommands({cmd:()=>{gt(this,P,this.editorDiv.style.color=X)},undo:()=>{gt(this,P,this.editorDiv.style.color=yt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Dn=function(){const X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;const yt=[];for(const wt of X)yt.push(wt.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},H=new WeakSet,Se=function(){const[X,yt]=this.parentDimensions;let wt;if(this.isAttachedToDOM)wt=this.div.getBoundingClientRect();else{const{currentLayer:Rt,div:kt}=this,B=kt.style.display;kt.style.display="hidden",Rt.div.append(this.div),wt=kt.getBoundingClientRect(),kt.remove(),kt.style.display=B}this.rotation%180===this.parentRotation%180?(this.width=wt.width/X,this.height=wt.height/yt):(this.width=wt.height/X,this.height=wt.width/yt),this.fixAndSetPosition()},b=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!r(this,T))for(const X of r(this,T).split(`
`)){const yt=document.createElement("div");yt.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(yt)}},L=new WeakSet,Ln=function(X){const{value:yt,fontSize:wt,color:Rt,rect:kt,pageIndex:B}=r(this,E);return X.value!==yt||X.fontSize!==wt||X.rect.some((h,d)=>Math.abs(h-kt[d])>=1)||X.color.some((h,d)=>h!==Rt[d])||X.pageIndex!==B},st=new WeakSet,ln=function(X=!1){if(!this.annotationElementId)return;if(it(this,H,Se).call(this),!X&&(this.width===0||this.height===0)){setTimeout(()=>it(this,st,ln).call(this,!0),0);return}const yt=ot._internalPadding*this.parentScale;r(this,E).rect=this.getRect(yt,yt)},se(ot,"_freeTextDefaultContent",""),se(ot,"_internalPadding",0),se(ot,"_defaultColor",null),se(ot,"_defaultFontSize",10),se(ot,"_type","freetext");let y=ot;e.FreeTextEditor=y},(t,e,s)=>{var d,_,ue,N,Nn,Y,dt,v,O,W,rt,K,ut,St,ft,_t,Z,J,q,ct,At,Et,Dt,Bn,Ut,Fe,Gt,cn,Yt,hn,at,nt,xt,Tt,ne,ee,ht,un,Ht,Ft,Vt,zt,Un,Pt,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),i=s(6),a=s(3),o=s(30),y=s(31),f=s(32);const m=1e3,l=9,w=new WeakSet;function P(jt){return{width:jt[2]-jt[0],height:jt[3]-jt[1]}}class T{static create($){switch($.data.annotationType){case n.AnnotationType.LINK:return new M($);case n.AnnotationType.TEXT:return new E($);case n.AnnotationType.WIDGET:switch($.data.fieldType){case"Tx":return new I($);case"Btn":return $.data.radioButton?new g($):$.data.checkBox?new x($):new A($);case"Ch":return new H($);case"Sig":return new R($)}return new C($);case n.AnnotationType.POPUP:return new F($);case n.AnnotationType.FREETEXT:return new j($);case n.AnnotationType.LINE:return new L($);case n.AnnotationType.SQUARE:return new Q($);case n.AnnotationType.CIRCLE:return new st($);case n.AnnotationType.POLYLINE:return new U($);case n.AnnotationType.CARET:return new pt($);case n.AnnotationType.INK:return new mt($);case n.AnnotationType.POLYGON:return new ot($);case n.AnnotationType.HIGHLIGHT:return new X($);case n.AnnotationType.UNDERLINE:return new yt($);case n.AnnotationType.SQUIGGLY:return new wt($);case n.AnnotationType.STRIKEOUT:return new Rt($);case n.AnnotationType.STAMP:return new kt($);case n.AnnotationType.FILEATTACHMENT:return new B($);default:return new k($)}}}const u=class u{constructor($,{isRenderable:c=!1,ignoreBorder:D=!1,createQuadrilaterals:z=!1}={}){G(this,d,!1);this.isRenderable=c,this.data=$.data,this.layer=$.layer,this.linkService=$.linkService,this.downloadManager=$.downloadManager,this.imageResourcesPath=$.imageResourcesPath,this.renderForms=$.renderForms,this.svgFactory=$.svgFactory,this.annotationStorage=$.annotationStorage,this.enableScripting=$.enableScripting,this.hasJSActions=$.hasJSActions,this._fieldObjects=$.fieldObjects,this.parent=$.parent,c&&(this.container=this._createContainer(D)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:$,contentsObj:c,richText:D}){return!!($!=null&&$.str||c!=null&&c.str||D!=null&&D.str)}get hasPopupData(){return u._hasPopupData(this.data)}_createContainer($){const{data:c,parent:{page:D,viewport:z}}=this,et=document.createElement("section");et.setAttribute("data-annotation-id",c.id),this instanceof C||(et.tabIndex=m),et.style.zIndex=this.parent.zIndex++,this.data.popupRef&&et.setAttribute("aria-haspopup","dialog"),c.noRotate&&et.classList.add("norotate");const{pageWidth:lt,pageHeight:bt,pageX:Ct,pageY:Ot}=z.rawDims;if(!c.rect||this instanceof F){const{rotation:qt}=c;return!c.hasOwnCanvas&&qt!==0&&this.setRotation(qt,et),et}const{width:It,height:Xt}=P(c.rect),Nt=n.Util.normalizeRect([c.rect[0],D.view[3]-c.rect[1]+D.view[1],c.rect[2],D.view[3]-c.rect[3]+D.view[1]]);if(!$&&c.borderStyle.width>0){et.style.borderWidth=`${c.borderStyle.width}px`;const qt=c.borderStyle.horizontalCornerRadius,Kt=c.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const te=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;et.style.borderRadius=te}else if(this instanceof g){const te=`calc(${It}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;et.style.borderRadius=te}switch(c.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:et.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:et.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:et.style.borderBottomStyle="solid";break}const Qt=c.borderColor||null;Qt?(gt(this,d,!0),et.style.borderColor=n.Util.makeHexColor(Qt[0]|0,Qt[1]|0,Qt[2]|0)):et.style.borderWidth=0}et.style.left=`${100*(Nt[0]-Ct)/lt}%`,et.style.top=`${100*(Nt[1]-Ot)/bt}%`;const{rotation:Bt}=c;return c.hasOwnCanvas||Bt===0?(et.style.width=`${100*It/lt}%`,et.style.height=`${100*Xt/bt}%`):this.setRotation(Bt,et),et}setRotation($,c=this.container){if(!this.data.rect)return;const{pageWidth:D,pageHeight:z}=this.parent.viewport.rawDims,{width:et,height:lt}=P(this.data.rect);let bt,Ct;$%180===0?(bt=100*et/D,Ct=100*lt/z):(bt=100*lt/D,Ct=100*et/z),c.style.width=`${bt}%`,c.style.height=`${Ct}%`,c.setAttribute("data-main-rotation",(360-$)%360)}get _commonActions(){const $=(c,D,z)=>{const et=z.detail[c],lt=et[0],bt=et.slice(1);z.target.style[D]=o.ColorConverters[`${lt}_HTML`](bt),this.annotationStorage.setValue(this.data.id,{[D]:o.ColorConverters[`${lt}_rgb`](bt)})};return(0,n.shadow)(this,"_commonActions",{display:c=>{const{display:D}=c.detail,z=D%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:D===1||D===2})},print:c=>{this.annotationStorage.setValue(this.data.id,{noPrint:!c.detail.print})},hidden:c=>{const{hidden:D}=c.detail;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:D,noView:D})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.target.disabled=c.detail.readonly},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{$("bgColor","backgroundColor",c)},fillColor:c=>{$("fillColor","backgroundColor",c)},fgColor:c=>{$("fgColor","color",c)},textColor:c=>{$("textColor","color",c)},borderColor:c=>{$("borderColor","borderColor",c)},strokeColor:c=>{$("strokeColor","borderColor",c)},rotation:c=>{const D=c.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox($,c){const D=this._commonActions;for(const z of Object.keys(c.detail)){const et=$[z]||D[z];et==null||et(c)}}_setDefaultPropertiesFromJS($){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const D=this._commonActions;for(const[z,et]of Object.entries(c)){const lt=D[z];if(lt){const bt={detail:{[z]:et},target:$};lt(bt),delete c[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:$}=this.data;if(!$)return;const[c,D,z,et]=this.data.rect;if($.length===1){const[,{x:Kt,y:Qt},{x:te,y:re}]=$[0];if(z===Kt&&et===Qt&&c===te&&D===re)return}const{style:lt}=this.container;let bt;if(r(this,d)){const{borderColor:Kt,borderWidth:Qt}=lt;lt.borderWidth=0,bt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Qt}">`],this.container.classList.add("hasBorder")}const Ct=z-c,Ot=et-D,{svgFactory:It}=this,Xt=It.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Nt=It.createElement("defs");Xt.append(Nt);const Bt=It.createElement("clipPath"),qt=`clippath_${this.data.id}`;Bt.setAttribute("id",qt),Bt.setAttribute("clipPathUnits","objectBoundingBox"),Nt.append(Bt);for(const[,{x:Kt,y:Qt},{x:te,y:re}]of $){const ie=It.createElement("rect"),ae=(te-c)/Ct,ce=(et-Qt)/Ot,he=(Kt-te)/Ct,An=(Qt-re)/Ot;ie.setAttribute("x",ae),ie.setAttribute("y",ce),ie.setAttribute("width",he),ie.setAttribute("height",An),Bt.append(ie),bt==null||bt.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${An}"/>`)}r(this,d)&&(bt.push("</g></svg>')"),lt.backgroundImage=bt.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:$,data:c}=this;$.setAttribute("aria-haspopup","dialog");const D=new F({data:{color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,parentRect:c.rect,borderStyle:0,id:`popup_${c.id}`,rotation:c.rotation},parent:this.parent,elements:[this]});this.parent.div.append(D.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName($,c=null){const D=[];if(this._fieldObjects){const z=this._fieldObjects[$];if(z)for(const{page:et,id:lt,exportValues:bt}of z){if(et===-1||lt===c)continue;const Ct=typeof bt=="string"?bt:null,Ot=document.querySelector(`[data-element-id="${lt}"]`);if(Ot&&!w.has(Ot)){(0,n.warn)(`_getElementsByName - element not allowed: ${lt}`);continue}D.push({id:lt,exportValue:Ct,domElement:Ot})}return D}for(const z of document.getElementsByName($)){const{exportValue:et}=z,lt=z.getAttribute("data-element-id");lt!==c&&w.has(z)&&D.push({id:lt,exportValue:et,domElement:z})}return D}show(){var $;this.container&&(this.container.hidden=!1),($=this.popup)==null||$.maybeShow()}hide(){var $;this.container&&(this.container.hidden=!0),($=this.popup)==null||$.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const $=this.getElementsToTriggerPopup();if(Array.isArray($))for(const c of $)c.classList.add("highlightArea");else $.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:$,data:{id:c}}=this;this.container.addEventListener("dblclick",()=>{var D;(D=this.linkService.eventBus)==null||D.dispatch("switchannotationeditormode",{source:this,mode:$,editId:c})})}};d=new WeakMap;let k=u;class M extends k{constructor(c,D=null){super(c,{isRenderable:!0,ignoreBorder:!!(D!=null&&D.ignoreBorder),createQuadrilaterals:!0});G(this,_);G(this,N);this.isTooltipOnly=c.data.isTooltipOnly}render(){const{data:c,linkService:D}=this,z=document.createElement("a");z.setAttribute("data-element-id",c.id);let et=!1;return c.url?(D.addLinkAttributes(z,c.url,c.newWindow),et=!0):c.action?(this._bindNamedAction(z,c.action),et=!0):c.attachment?(this._bindAttachment(z,c.attachment),et=!0):c.setOCGState?(it(this,N,Nn).call(this,z,c.setOCGState),et=!0):c.dest?(this._bindLink(z,c.dest),et=!0):(c.actions&&(c.actions.Action||c.actions["Mouse Up"]||c.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,c),et=!0),c.resetForm?(this._bindResetFormAction(z,c.resetForm),et=!0):this.isTooltipOnly&&!et&&(this._bindLink(z,""),et=!0)),this.container.classList.add("linkAnnotation"),et&&this.container.append(z),this.container}_bindLink(c,D){c.href=this.linkService.getDestinationHash(D),c.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&it(this,_,ue).call(this)}_bindNamedAction(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeNamedAction(D),!1),it(this,_,ue).call(this)}_bindAttachment(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,D.content,D.filename),!1},it(this,_,ue).call(this)}_bindJSAction(c,D){c.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const et of Object.keys(D.actions)){const lt=z.get(et);lt&&(c[lt]=()=>{var bt;return(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:et}}),!1})}c.onclick||(c.onclick=()=>!1),it(this,_,ue).call(this)}_bindResetFormAction(c,D){const z=c.onclick;if(z||(c.href=this.linkService.getAnchorUrl("")),it(this,_,ue).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(c.onclick=()=>!1);return}c.onclick=()=>{var Xt;z==null||z();const{fields:et,refs:lt,include:bt}=D,Ct=[];if(et.length!==0||lt.length!==0){const Nt=new Set(lt);for(const Bt of et){const qt=this._fieldObjects[Bt]||[];for(const{id:Kt}of qt)Nt.add(Kt)}for(const Bt of Object.values(this._fieldObjects))for(const qt of Bt)Nt.has(qt.id)===bt&&Ct.push(qt)}else for(const Nt of Object.values(this._fieldObjects))Ct.push(...Nt);const Ot=this.annotationStorage,It=[];for(const Nt of Ct){const{id:Bt}=Nt;switch(It.push(Bt),Nt.type){case"text":{const Kt=Nt.defaultValue||"";Ot.setValue(Bt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Nt.defaultValue===Nt.exportValues;Ot.setValue(Bt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Nt.defaultValue||"";Ot.setValue(Bt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${Bt}"]`);if(qt){if(!w.has(qt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:It,name:"ResetForm"}})),!1}}}_=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,Nn=function(c,D){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeSetOCGState(D),!1),it(this,_,ue).call(this)};class E extends k{constructor($){super($,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const $=document.createElement("img");return $.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",$.alt="[{{type}} Annotation]",$.dataset.l10nId="text_annotation_type",$.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append($),this.container}}class C extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas($){var c;this.data.hasOwnCanvas&&(((c=$.previousSibling)==null?void 0:c.nodeName)==="CANVAS"&&($.previousSibling.hidden=!0),$.hidden=!1)}_getKeyModifier($){const{isWin:c,isMac:D}=n.FeatureTest.platform;return c&&$.ctrlKey||D&&$.metaKey}_setEventListener($,c,D,z,et){D.includes("mouse")?$.addEventListener(D,lt=>{var bt;(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt),shift:lt.shiftKey,modifier:this._getKeyModifier(lt)}})}):$.addEventListener(D,lt=>{var bt;if(D==="blur"){if(!c.focused||!lt.relatedTarget)return;c.focused=!1}else if(D==="focus"){if(c.focused)return;c.focused=!0}et&&((bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt)}}))})}_setEventListeners($,c,D,z){var et,lt,bt;for(const[Ct,Ot]of D)(Ot==="Action"||(et=this.data.actions)!=null&&et[Ot])&&((Ot==="Focus"||Ot==="Blur")&&(c||(c={focused:!1})),this._setEventListener($,c,Ct,Ot,z),Ot==="Focus"&&!((lt=this.data.actions)!=null&&lt.Blur)?this._setEventListener($,c,"blur","Blur",null):Ot==="Blur"&&!((bt=this.data.actions)!=null&&bt.Focus)&&this._setEventListener($,c,"focus","Focus",null))}_setBackgroundColor($){const c=this.data.backgroundColor||null;$.style.backgroundColor=c===null?"transparent":n.Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle($){const c=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||l,et=$.style;let lt;const bt=2,Ct=Ot=>Math.round(10*Ot)/10;if(this.data.multiLine){const Ot=Math.abs(this.data.rect[3]-this.data.rect[1]-bt),It=Math.round(Ot/(n.LINE_FACTOR*z))||1,Xt=Ot/It;lt=Math.min(z,Ct(Xt/n.LINE_FACTOR))}else{const Ot=Math.abs(this.data.rect[3]-this.data.rect[1]-bt);lt=Math.min(z,Ct(Ot/n.LINE_FACTOR))}et.fontSize=`calc(${lt}px * var(--scale-factor))`,et.color=n.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(et.textAlign=c[this.data.textAlignment])}_setRequired($,c){c?$.setAttribute("required",!0):$.removeAttribute("required"),$.setAttribute("aria-required",c)}}class I extends C{constructor($){const c=$.renderForms||!$.data.hasAppearance&&!!$.data.fieldValue;super($,{isRenderable:c})}setPropertyOnSiblings($,c,D,z){const et=this.annotationStorage;for(const lt of this._getElementsByName($.name,$.id))lt.domElement&&(lt.domElement[c]=D),et.setValue(lt.id,{[z]:D})}render(){var z,et;const $=this.annotationStorage,c=this.data.id;this.container.classList.add("textWidgetAnnotation");let D=null;if(this.renderForms){const lt=$.getValue(c,{value:this.data.fieldValue});let bt=lt.value||"";const Ct=$.getValue(c,{charLimit:this.data.maxLen}).charLimit;Ct&&bt.length>Ct&&(bt=bt.slice(0,Ct));let Ot=lt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;Ot&&this.data.comb&&(Ot=Ot.replaceAll(/\s+/g,""));const It={userValue:bt,formattedValue:Ot,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=Ot??bt,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",Ot??bt),this.data.doNotScroll&&(D.style.overflowX="hidden")),this.data.hasOwnCanvas&&(D.hidden=!0),w.add(D),D.setAttribute("data-element-id",c),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=m,this._setRequired(D,this.data.required),Ct&&(D.maxLength=Ct),D.addEventListener("input",Nt=>{$.setValue(c,{value:Nt.target.value}),this.setPropertyOnSiblings(D,"value",Nt.target.value,"value"),It.formattedValue=null}),D.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue??"";D.value=It.userValue=Bt,It.formattedValue=null});let Xt=Nt=>{const{formattedValue:Bt}=It;Bt!=null&&(Nt.target.value=Bt),Nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Bt=>{if(It.focused)return;const{target:qt}=Bt;It.userValue&&(qt.value=It.userValue),It.lastCommittedValue=qt.value,It.commitKey=1,It.focused=!0}),D.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const qt={value(Kt){It.userValue=Kt.detail.value??"",$.setValue(c,{value:It.userValue.toString()}),Kt.target.value=It.userValue},formattedValue(Kt){const{formattedValue:Qt}=Kt.detail;It.formattedValue=Qt,Qt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Qt),$.setValue(c,{formattedValue:Qt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ie;const{charLimit:Qt}=Kt.detail,{target:te}=Kt;if(Qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Qt);let re=It.userValue;!re||re.length<=Qt||(re=re.slice(0,Qt),te.value=It.userValue=re,$.setValue(c,{value:re}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,Bt)}),D.addEventListener("keydown",Bt=>{var Qt;It.commitKey=1;let qt=-1;if(Bt.key==="Escape"?qt=0:Bt.key==="Enter"&&!this.data.multiLine?qt=2:Bt.key==="Tab"&&(It.commitKey=3),qt===-1)return;const{value:Kt}=Bt.target;It.lastCommittedValue!==Kt&&(It.lastCommittedValue=Kt,It.userValue=Kt,(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Nt=Xt;Xt=null,D.addEventListener("blur",Bt=>{var Kt;if(!It.focused||!Bt.relatedTarget)return;It.focused=!1;const{value:qt}=Bt.target;It.userValue=qt,It.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:qt,willCommit:!0,commitKey:It.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Nt(Bt)}),(et=this.data.actions)!=null&&et.Keystroke&&D.addEventListener("beforeinput",Bt=>{var ce;It.lastCommittedValue=null;const{data:qt,target:Kt}=Bt,{value:Qt,selectionStart:te,selectionEnd:re}=Kt;let ie=te,ae=re;switch(Bt.inputType){case"deleteWordBackward":{const he=Qt.substring(0,te).match(/\w*[^\w]*$/);he&&(ie-=he[0].length);break}case"deleteWordForward":{const he=Qt.substring(te).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":te===re&&(ie-=1);break;case"deleteContentForward":te===re&&(ae+=1);break}Bt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Qt,change:qt||"",willCommit:!1,selStart:ie,selEnd:ae}})}),this._setEventListeners(D,It,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Xt&&D.addEventListener("blur",Xt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Ct;D.classList.add("comb"),D.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class R extends C{constructor($){super($,{isRenderable:!!$.data.hasOwnCanvas})}}class x extends C{constructor($){super($,{isRenderable:$.renderForms})}render(){const $=this.annotationStorage,c=this.data,D=c.id;let z=$.getValue(D,{value:c.exportValue===c.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",$.setValue(D,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const et=document.createElement("input");return w.add(et),et.setAttribute("data-element-id",D),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="checkbox",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.setAttribute("exportValue",c.exportValue),et.tabIndex=m,et.addEventListener("change",lt=>{const{name:bt,checked:Ct}=lt.target;for(const Ot of this._getElementsByName(bt,D)){const It=Ct&&Ot.exportValue===c.exportValue;Ot.domElement&&(Ot.domElement.checked=It),$.setValue(Ot.id,{value:It})}$.setValue(D,{value:Ct})}),et.addEventListener("resetform",lt=>{const bt=c.defaultFieldValue||"Off";lt.target.checked=bt===c.exportValue}),this.enableScripting&&this.hasJSActions&&(et.addEventListener("updatefromsandbox",lt=>{const bt={value(Ct){Ct.target.checked=Ct.detail.value!=="Off",$.setValue(D,{value:Ct.target.checked})}};this._dispatchEventFromSandbox(bt,lt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)),this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class g extends C{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const $=this.annotationStorage,c=this.data,D=c.id;let z=$.getValue(D,{value:c.fieldValue===c.buttonValue}).value;typeof z=="string"&&(z=z!==c.buttonValue,$.setValue(D,{value:z}));const et=document.createElement("input");if(w.add(et),et.setAttribute("data-element-id",D),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="radio",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.tabIndex=m,et.addEventListener("change",lt=>{const{name:bt,checked:Ct}=lt.target;for(const Ot of this._getElementsByName(bt,D))$.setValue(Ot.id,{value:!1});$.setValue(D,{value:Ct})}),et.addEventListener("resetform",lt=>{const bt=c.defaultFieldValue;lt.target.checked=bt!=null&&bt===c.buttonValue}),this.enableScripting&&this.hasJSActions){const lt=c.buttonValue;et.addEventListener("updatefromsandbox",bt=>{const Ct={value:Ot=>{const It=lt===Ot.detail.value;for(const Xt of this._getElementsByName(Ot.target.name)){const Nt=It&&Xt.id===D;Xt.domElement&&(Xt.domElement.checked=Nt),$.setValue(Xt.id,{value:Nt})}}};this._dispatchEventFromSandbox(Ct,bt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bt=>bt.target.checked)}return this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class A extends M{constructor($){super($,{ignoreBorder:$.data.hasAppearance})}render(){const $=super.render();$.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&($.title=this.data.alternativeText);const c=$.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),$}}class H extends C{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const $=this.annotationStorage,c=this.data.id,D=$.getValue(c,{value:this.data.fieldValue}),z=document.createElement("select");w.add(z),z.setAttribute("data-element-id",c),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=m;let et=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",It=>{const Xt=this.data.defaultFieldValue;for(const Nt of z.options)Nt.selected=Nt.value===Xt});for(const It of this.data.options){const Xt=document.createElement("option");Xt.textContent=It.displayValue,Xt.value=It.exportValue,D.value.includes(It.exportValue)&&(Xt.setAttribute("selected",!0),et=!1),z.append(Xt)}let lt=null;if(et){const It=document.createElement("option");It.value=" ",It.setAttribute("hidden",!0),It.setAttribute("selected",!0),z.prepend(It),lt=()=>{It.remove(),z.removeEventListener("input",lt),lt=null},z.addEventListener("input",lt)}const bt=It=>{const Xt=It?"value":"textContent",{options:Nt,multiple:Bt}=z;return Bt?Array.prototype.filter.call(Nt,qt=>qt.selected).map(qt=>qt[Xt]):Nt.selectedIndex===-1?null:Nt[Nt.selectedIndex][Xt]};let Ct=bt(!1);const Ot=It=>{const Xt=It.target.options;return Array.prototype.map.call(Xt,Nt=>({displayValue:Nt.textContent,exportValue:Nt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",It=>{const Xt={value(Nt){lt==null||lt();const Bt=Nt.detail.value,qt=new Set(Array.isArray(Bt)?Bt:[Bt]);for(const Kt of z.options)Kt.selected=qt.has(Kt.value);$.setValue(c,{value:bt(!0)}),Ct=bt(!1)},multipleSelection(Nt){z.multiple=!0},remove(Nt){const Bt=z.options,qt=Nt.detail.remove;Bt[qt].selected=!1,z.remove(qt),Bt.length>0&&Array.prototype.findIndex.call(Bt,Qt=>Qt.selected)===-1&&(Bt[0].selected=!0),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Ct=bt(!1)},clear(Nt){for(;z.length!==0;)z.remove(0);$.setValue(c,{value:null,items:[]}),Ct=bt(!1)},insert(Nt){const{index:Bt,displayValue:qt,exportValue:Kt}=Nt.detail.insert,Qt=z.children[Bt],te=document.createElement("option");te.textContent=qt,te.value=Kt,Qt?Qt.before(te):z.append(te),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Ct=bt(!1)},items(Nt){const{items:Bt}=Nt.detail;for(;z.length!==0;)z.remove(0);for(const qt of Bt){const{displayValue:Kt,exportValue:Qt}=qt,te=document.createElement("option");te.textContent=Kt,te.value=Qt,z.append(te)}z.options.length>0&&(z.options[0].selected=!0),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Ct=bt(!1)},indices(Nt){const Bt=new Set(Nt.detail.indices);for(const qt of Nt.target.options)qt.selected=Bt.has(qt.index);$.setValue(c,{value:bt(!0)}),Ct=bt(!1)},editable(Nt){Nt.target.disabled=!Nt.detail.editable}};this._dispatchEventFromSandbox(Xt,It)}),z.addEventListener("input",It=>{var Nt;const Xt=bt(!0);$.setValue(c,{value:Xt}),It.preventDefault(),(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Ct,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],It=>It.target.value)):z.addEventListener("input",function(It){$.setValue(c,{value:bt(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class F extends k{constructor($){const{data:c,elements:D}=$;super($,{isRenderable:k._hasPopupData(c)}),this.elements=D}render(){this.container.classList.add("popupAnnotation");const $=new b({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),c=[];for(const D of this.elements)D.popup=$,c.push(D.data.id),D.addHighlightArea();return this.container.setAttribute("aria-controls",c.map(D=>`${n.AnnotationPrefix}${D}`).join(",")),this.container}}class b{constructor({container:$,color:c,elements:D,titleObj:z,modificationDate:et,contentsObj:lt,richText:bt,parent:Ct,rect:Ot,parentRect:It,open:Xt}){G(this,Dt);G(this,Ut);G(this,Gt);G(this,Yt);G(this,Y,null);G(this,dt,it(this,Dt,Bn).bind(this));G(this,v,it(this,Yt,hn).bind(this));G(this,O,it(this,Gt,cn).bind(this));G(this,W,it(this,Ut,Fe).bind(this));G(this,rt,null);G(this,K,null);G(this,ut,null);G(this,St,null);G(this,ft,null);G(this,_t,null);G(this,Z,!1);G(this,J,null);G(this,q,null);G(this,ct,null);G(this,At,null);G(this,Et,!1);var Bt;gt(this,K,$),gt(this,At,z),gt(this,ut,lt),gt(this,ct,bt),gt(this,ft,Ct),gt(this,rt,c),gt(this,q,Ot),gt(this,_t,It),gt(this,St,D);const Nt=i.PDFDateString.toDateObject(et);Nt&&gt(this,Y,Ct.l10n.get("annotation_date_string",{date:Nt.toLocaleDateString(),time:Nt.toLocaleTimeString()})),this.trigger=D.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",r(this,W)),qt.addEventListener("mouseenter",r(this,O)),qt.addEventListener("mouseleave",r(this,v)),qt.classList.add("popupTriggerArea");for(const qt of D)(Bt=qt.container)==null||Bt.addEventListener("keydown",r(this,dt));r(this,K).hidden=!0,Xt&&it(this,Ut,Fe).call(this)}render(){if(r(this,J))return;const{page:{view:$},viewport:{rawDims:{pageWidth:c,pageHeight:D,pageX:z,pageY:et}}}=r(this,ft),lt=gt(this,J,document.createElement("div"));if(lt.className="popup",r(this,rt)){const ie=lt.style.outlineColor=n.Util.makeHexColor(...r(this,rt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?lt.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:lt.style.backgroundColor=n.Util.makeHexColor(...r(this,rt).map(ce=>Math.floor(.7*(255-ce)+ce)))}const bt=document.createElement("span");bt.className="header";const Ct=document.createElement("h1");if(bt.append(Ct),{dir:Ct.dir,str:Ct.textContent}=r(this,At),lt.append(bt),r(this,Y)){const ie=document.createElement("span");ie.classList.add("popupDate"),r(this,Y).then(ae=>{ie.textContent=ae}),bt.append(ie)}const Ot=r(this,ut),It=r(this,ct);if(It!=null&&It.str&&(!(Ot!=null&&Ot.str)||Ot.str===It.str))f.XfaLayer.render({xfaHtml:It.html,intent:"richText",div:lt}),lt.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(Ot);lt.append(ie)}let Xt=!!r(this,_t),Nt=Xt?r(this,_t):r(this,q);for(const ie of r(this,St))if(!Nt||n.Util.intersect(ie.data.rect,Nt)!==null){Nt=ie.data.rect,Xt=!0;break}const Bt=n.Util.normalizeRect([Nt[0],$[3]-Nt[1]+$[1],Nt[2],$[3]-Nt[3]+$[1]]),qt=5,Kt=Xt?Nt[2]-Nt[0]+qt:0,Qt=Bt[0]+Kt,te=Bt[1],{style:re}=r(this,K);re.left=`${100*(Qt-z)/c}%`,re.top=`${100*(te-et)/D}%`,r(this,K).append(lt)}_formatContents({str:$,dir:c}){const D=document.createElement("p");D.classList.add("popupContent"),D.dir=c;const z=$.split(/(?:\r\n?|\n)/);for(let et=0,lt=z.length;et<lt;++et){const bt=z[et];D.append(document.createTextNode(bt)),et<lt-1&&D.append(document.createElement("br"))}return D}forceHide(){gt(this,Et,this.isVisible),r(this,Et)&&(r(this,K).hidden=!0)}maybeShow(){r(this,Et)&&(gt(this,Et,!1),r(this,K).hidden=!1)}get isVisible(){return r(this,K).hidden===!1}}Y=new WeakMap,dt=new WeakMap,v=new WeakMap,O=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,_t=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakMap,At=new WeakMap,Et=new WeakMap,Dt=new WeakSet,Bn=function($){$.altKey||$.shiftKey||$.ctrlKey||$.metaKey||($.key==="Enter"||$.key==="Escape"&&r(this,Z))&&it(this,Ut,Fe).call(this)},Ut=new WeakSet,Fe=function(){gt(this,Z,!r(this,Z)),r(this,Z)?(it(this,Gt,cn).call(this),r(this,K).addEventListener("click",r(this,W)),r(this,K).addEventListener("keydown",r(this,dt))):(it(this,Yt,hn).call(this),r(this,K).removeEventListener("click",r(this,W)),r(this,K).removeEventListener("keydown",r(this,dt)))},Gt=new WeakSet,cn=function(){r(this,J)||this.render(),this.isVisible?r(this,Z)&&r(this,K).classList.add("focused"):(r(this,K).hidden=!1,r(this,K).style.zIndex=parseInt(r(this,K).style.zIndex)+1e3)},Yt=new WeakSet,hn=function(){r(this,K).classList.remove("focused"),!(r(this,Z)||!this.isVisible)&&(r(this,K).hidden=!0,r(this,K).style.zIndex=parseInt(r(this,K).style.zIndex)-1e3)};class j extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0}),this.textContent=$.data.textContent,this.textPosition=$.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const $=document.createElement("div");$.classList.add("annotationTextContent"),$.setAttribute("role","comment");for(const c of this.textContent){const D=document.createElement("span");D.textContent=c,$.append(D)}this.container.append($)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=j;class L extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,at,null)}render(){this.container.classList.add("lineAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=gt(this,at,this.svgFactory.createElement("svg:line"));return lt.setAttribute("x1",c.rect[2]-c.lineCoordinates[0]),lt.setAttribute("y1",c.rect[3]-c.lineCoordinates[1]),lt.setAttribute("x2",c.rect[2]-c.lineCoordinates[2]),lt.setAttribute("y2",c.rect[3]-c.lineCoordinates[3]),lt.setAttribute("stroke-width",c.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),et.append(lt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap;class Q extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,nt,null)}render(){this.container.classList.add("squareAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=c.borderStyle.width,bt=gt(this,nt,this.svgFactory.createElement("svg:rect"));return bt.setAttribute("x",lt/2),bt.setAttribute("y",lt/2),bt.setAttribute("width",D-lt),bt.setAttribute("height",z-lt),bt.setAttribute("stroke-width",lt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}nt=new WeakMap;class st extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,xt,null)}render(){this.container.classList.add("circleAnnotation");const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0),lt=c.borderStyle.width,bt=gt(this,xt,this.svgFactory.createElement("svg:ellipse"));return bt.setAttribute("cx",D/2),bt.setAttribute("cy",z/2),bt.setAttribute("rx",D/2-lt/2),bt.setAttribute("ry",z/2-lt/2),bt.setAttribute("stroke-width",lt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class U extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,Tt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0);let lt=[];for(const Ct of c.vertices){const Ot=Ct.x-c.rect[0],It=c.rect[3]-Ct.y;lt.push(Ot+","+It)}lt=lt.join(" ");const bt=gt(this,Tt,this.svgFactory.createElement(this.svgElementName));return bt.setAttribute("points",lt),bt.setAttribute("stroke-width",c.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap;class ot extends U{constructor($){super($),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class mt extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,ne,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:D,height:z}=P(c.rect),et=this.svgFactory.create(D,z,!0);for(const lt of c.inkLists){let bt=[];for(const Ot of lt){const It=Ot.x-c.rect[0],Xt=c.rect[3]-Ot.y;bt.push(`${It},${Xt}`)}bt=bt.join(" ");const Ct=this.svgFactory.createElement(this.svgElementName);r(this,ne).push(Ct),Ct.setAttribute("points",bt),Ct.setAttribute("stroke-width",c.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),!c.popupRef&&this.hasPopupData&&this._createPopup(),et.append(Ct)}return this.container.append(et),this.container}getElementsToTriggerPopup(){return r(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,e.InkAnnotationElement=mt;class X extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class wt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Rt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=kt;class B extends k{constructor(c){var et;super(c,{isRenderable:!0});G(this,ht);G(this,ee,null);const{filename:D,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=z,(et=this.linkService.eventBus)==null||et.dispatch("fileattachmentannotation",{source:this,filename:D,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:c,data:D}=this;let z;D.hasAppearance||D.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),z.addEventListener("dblclick",it(this,ht,un).bind(this)),gt(this,ee,z);const{isMac:et}=n.FeatureTest.platform;return c.addEventListener("keydown",lt=>{lt.key==="Enter"&&(et?lt.metaKey:lt.ctrlKey)&&it(this,ht,un).call(this)}),!D.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),c.append(z),c}getElementsToTriggerPopup(){return r(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,ht=new WeakSet,un=function(){var c;(c=this.downloadManager)==null||c.openOrDownloadData(this.container,this.content,this.filename)};class h{constructor({div:$,accessibilityManager:c,annotationCanvasMap:D,l10n:z,page:et,viewport:lt}){G(this,zt);G(this,Pt);G(this,Ht,null);G(this,Ft,null);G(this,Vt,new Map);this.div=$,gt(this,Ht,c),gt(this,Ft,D),this.l10n=z,this.page=et,this.viewport=lt,this.zIndex=0,this.l10n||(this.l10n=y.NullL10n)}async render($){const{annotations:c}=$,D=this.div;(0,i.setLayerDimensions)(D,this.viewport);const z=new Map,et={data:null,layer:D,linkService:$.linkService,downloadManager:$.downloadManager,imageResourcesPath:$.imageResourcesPath||"",renderForms:$.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:$.annotationStorage||new a.AnnotationStorage,enableScripting:$.enableScripting===!0,hasJSActions:$.hasJSActions,fieldObjects:$.fieldObjects,parent:this,elements:null};for(const lt of c){if(lt.noHTML)continue;const bt=lt.annotationType===n.AnnotationType.POPUP;if(bt){const It=z.get(lt.id);if(!It)continue;et.elements=It}else{const{width:It,height:Xt}=P(lt.rect);if(It<=0||Xt<=0)continue}et.data=lt;const Ct=T.create(et);if(!Ct.isRenderable)continue;if(!bt&&lt.popupRef){const It=z.get(lt.popupRef);It?It.push(Ct):z.set(lt.popupRef,[Ct])}Ct.annotationEditorType>0&&r(this,Vt).set(Ct.data.id,Ct);const Ot=Ct.render();lt.hidden&&(Ot.style.visibility="hidden"),it(this,zt,Un).call(this,Ot,lt.id)}it(this,Pt,dn).call(this),await this.l10n.translate(D)}update({viewport:$}){const c=this.div;this.viewport=$,(0,i.setLayerDimensions)(c,{rotation:$.rotation}),it(this,Pt,dn).call(this),c.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Vt).values())}getEditableAnnotation($){return r(this,Vt).get($)}}Ht=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,zt=new WeakSet,Un=function($,c){var z;const D=$.firstChild||$;D.id=`${n.AnnotationPrefix}${c}`,this.div.append($),(z=r(this,Ht))==null||z.moveElementInDOM(this.div,$,D,!1)},Pt=new WeakSet,dn=function(){if(!r(this,Ft))return;const $=this.div;for(const[c,D]of r(this,Ft)){const z=$.querySelector(`[data-annotation-id="${c}"]`);if(!z)continue;const{firstChild:et}=z;et?et.nodeName==="CANVAS"?et.replaceWith(D):et.before(D):z.append(D)}r(this,Ft).clear()},e.AnnotationLayer=h},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function n(a){return Math.max(0,Math.min(255,255*a))}class i{static CMYK_G([o,y,f,m]){return["G",1-Math.min(1,.3*o+.59*f+.11*y+m)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=n(o),[o,o,o]}static G_HTML([o]){const y=s(o);return`#${y}${y}${y}`}static RGB_G([o,y,f]){return["G",.3*o+.59*y+.11*f]}static RGB_rgb(o){return o.map(n)}static RGB_HTML(o){return`#${o.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,y,f,m]){return["RGB",1-Math.min(1,o+m),1-Math.min(1,f+m),1-Math.min(1,y+m)]}static CMYK_rgb([o,y,f,m]){return[n(1-Math.min(1,o+m)),n(1-Math.min(1,f+m)),n(1-Math.min(1,y+m))]}static CMYK_HTML(o){const y=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(y)}static RGB_CMYK([o,y,f]){const m=1-o,l=1-y,w=1-f,P=Math.min(m,l,w);return["CMYK",m,l,w,P]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(o,y){switch(o){case"find_match_count":o=`find_match_count[${y.total===1?"one":"other"}]`;break;case"find_match_count_limit":o=`find_match_count_limit[${y.limit===1?"one":"other"}]`;break}return s[o]||""}function i(o,y){return y?o.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(f,m)=>m in y?y[m]:"{{"+m+"}}"):o}const a={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(o,y=null,f=n(o,y)){return i(f,y)},async translate(o){}};e.NullL10n=a},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class i{static setupStorage(o,y,f,m,l){const w=m.getValue(y,{value:null});switch(f.name){case"textarea":if(w.value!==null&&(o.textContent=w.value),l==="print")break;o.addEventListener("input",P=>{m.setValue(y,{value:P.target.value})});break;case"input":if(f.attributes.type==="radio"||f.attributes.type==="checkbox"){if(w.value===f.attributes.xfaOn?o.setAttribute("checked",!0):w.value===f.attributes.xfaOff&&o.removeAttribute("checked"),l==="print")break;o.addEventListener("change",P=>{m.setValue(y,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&o.setAttribute("value",w.value),l==="print")break;o.addEventListener("input",P=>{m.setValue(y,{value:P.target.value})})}break;case"select":if(w.value!==null){o.setAttribute("value",w.value);for(const P of f.children)P.attributes.value===w.value?P.attributes.selected=!0:P.attributes.hasOwnProperty("selected")&&delete P.attributes.selected}o.addEventListener("input",P=>{const T=P.target.options,k=T.selectedIndex===-1?"":T[T.selectedIndex].value;m.setValue(y,{value:k})});break}}static setAttributes({html:o,element:y,storage:f=null,intent:m,linkService:l}){const{attributes:w}=y,P=o instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${m}`);for(const[T,k]of Object.entries(w))if(k!=null)switch(T){case"class":k.length&&o.setAttribute(T,k.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",k);break;case"style":Object.assign(o.style,k);break;case"textContent":o.textContent=k;break;default:(!P||T!=="href"&&T!=="newWindow")&&o.setAttribute(T,k)}P&&l.addLinkAttributes(o,w.href,w.newWindow),f&&w.dataId&&this.setupStorage(o,w.dataId,y,f)}static render(o){var M;const y=o.annotationStorage,f=o.linkService,m=o.xfaHtml,l=o.intent||"display",w=document.createElement(m.name);m.attributes&&this.setAttributes({html:w,element:m,intent:l,linkService:f});const P=[[m,-1,w]],T=o.div;if(T.append(w),o.viewport){const E=`matrix(${o.viewport.transform.join(",")})`;T.style.transform=E}l!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const k=[];for(;P.length>0;){const[E,C,I]=P.at(-1);if(C+1===E.children.length){P.pop();continue}const R=E.children[++P.at(-1)[1]];if(R===null)continue;const{name:x}=R;if(x==="#text"){const A=document.createTextNode(R.value);k.push(A),I.append(A);continue}const g=(M=R==null?void 0:R.attributes)!=null&&M.xmlns?document.createElementNS(R.attributes.xmlns,x):document.createElement(x);if(I.append(g),R.attributes&&this.setAttributes({html:g,element:R,storage:y,intent:l,linkService:f}),R.children&&R.children.length>0)P.push([R,-1,g]);else if(R.value){const A=document.createTextNode(R.value);n.XfaText.shouldBuildText(x)&&k.push(A),g.append(A)}}for(const E of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:k}}static update(o){const y=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=y,o.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{var m,l,w,P,T,k,M,E,C,I,R,x,g,A,H,jn,b,Hn,L,Vn,st,Wn,ot,fn,mt,$n,yt,pn,Rt,zn,B,Gn,d,qn,_,Xn,N,Yn,Y,le,v,gn,W,Ie,K,Oe,St,ge,_t,mn,J,De,ct,Kn,Et,bn,Lt,Jn,$t,Qn,Wt,_n,vt,Le,nt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),i=s(4),a=s(29),o=s(6),y=s(5);const Tt=class Tt extends i.AnnotationEditor{constructor(ht){super({...ht,name:"inkEditor"});G(this,H);G(this,b);G(this,L);G(this,st);G(this,ot);G(this,mt);G(this,yt);G(this,Rt);G(this,B);G(this,d);G(this,_);G(this,N);G(this,Y);G(this,v);G(this,W);G(this,K);G(this,St);G(this,_t);G(this,J);G(this,$t);G(this,Wt);G(this,vt);G(this,nt);G(this,m,0);G(this,l,0);G(this,w,this.canvasPointermove.bind(this));G(this,P,this.canvasPointerleave.bind(this));G(this,T,this.canvasPointerup.bind(this));G(this,k,this.canvasPointerdown.bind(this));G(this,M,new Path2D);G(this,E,!1);G(this,C,!1);G(this,I,!1);G(this,R,null);G(this,x,0);G(this,g,0);G(this,A,null);this.color=ht.color||null,this.thickness=ht.thickness||null,this.opacity=ht.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ht){i.AnnotationEditor.initialize(ht,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:Tt._defaultThickness=Mt;break;case n.AnnotationEditorParamsType.INK_COLOR:Tt._defaultColor=Mt;break;case n.AnnotationEditorParamsType.INK_OPACITY:Tt._defaultOpacity=Mt/100;break}}updateParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:it(this,H,jn).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_COLOR:it(this,b,Hn).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_OPACITY:it(this,L,Vn).call(this,Mt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Tt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Tt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(it(this,W,Ie).call(this),it(this,K,Oe).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,St,ge).call(this)),it(this,nt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,R).disconnect(),gt(this,R,null),super.remove())}setParent(ht){!this.parent&&ht?this._uiManager.removeShouldRescale(this):this.parent&&ht===null&&this._uiManager.addShouldRescale(this),super.setParent(ht)}onScaleChanging(){const[ht,Mt]=this.parentDimensions,Ht=this.width*ht,Ft=this.height*Mt;this.setDimensions(Ht,Ft)}enableEditMode(){r(this,E)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",r(this,k)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,k)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,E)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,E,!0),this.div.classList.add("disabled"),it(this,nt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),this.enableEditMode())}canvasPointerdown(ht){ht.button!==0||!this.isInEditMode()||r(this,E)||(this.setInForeground(),ht.preventDefault(),ht.type!=="mouse"&&this.div.focus(),it(this,mt,$n).call(this,ht.offsetX,ht.offsetY))}canvasPointermove(ht){ht.preventDefault(),it(this,yt,pn).call(this,ht.offsetX,ht.offsetY)}canvasPointerup(ht){ht.preventDefault(),it(this,v,gn).call(this,ht)}canvasPointerleave(ht){it(this,v,gn).call(this,ht)}get isResizable(){return!this.isEmpty()&&r(this,E)}render(){if(this.div)return this.div;let ht,Mt;this.width&&(ht=this.x,Mt=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var Pt;return(Pt=this.div)==null?void 0:Pt.setAttribute("aria-label",Zt)});const[Ht,Ft,Vt,zt]=it(this,st,Wn).call(this);if(this.setAt(Ht,Ft,0,0),this.setDims(Vt,zt),it(this,W,Ie).call(this),this.width){const[Zt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*Pt),this.setAt(ht*Zt,Mt*Pt,this.width*Zt,this.height*Pt),gt(this,I,!0),it(this,St,ge).call(this),this.setDims(this.width*Zt,this.height*Pt),it(this,Y,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,K,Oe).call(this),this.div}setDimensions(ht,Mt){const Ht=Math.round(ht),Ft=Math.round(Mt);if(r(this,x)===Ht&&r(this,g)===Ft)return;gt(this,x,Ht),gt(this,g,Ft),this.canvas.style.visibility="hidden";const[Vt,zt]=this.parentDimensions;this.width=ht/Vt,this.height=Mt/zt,this.fixAndSetPosition(),r(this,E)&&it(this,_t,mn).call(this,ht,Mt),it(this,St,ge).call(this),it(this,Y,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ht,Mt,Ht){var et,lt,bt;if(ht instanceof a.InkAnnotationElement)return null;const Ft=super.deserialize(ht,Mt,Ht);Ft.thickness=ht.thickness,Ft.color=n.Util.makeHexColor(...ht.color),Ft.opacity=ht.opacity;const[Vt,zt]=Ft.pageDimensions,Zt=Ft.width*Vt,Pt=Ft.height*zt,Jt=Ft.parentScale,jt=ht.thickness/2;gt(Ft,E,!0),gt(Ft,x,Math.round(Zt)),gt(Ft,g,Math.round(Pt));const{paths:$,rect:c,rotation:D}=ht;for(let{bezier:Ct}of $){Ct=it(et=Tt,Lt,Jn).call(et,Ct,c,D);const Ot=[];Ft.paths.push(Ot);let It=Jt*(Ct[0]-jt),Xt=Jt*(Ct[1]-jt);for(let Bt=2,qt=Ct.length;Bt<qt;Bt+=6){const Kt=Jt*(Ct[Bt]-jt),Qt=Jt*(Ct[Bt+1]-jt),te=Jt*(Ct[Bt+2]-jt),re=Jt*(Ct[Bt+3]-jt),ie=Jt*(Ct[Bt+4]-jt),ae=Jt*(Ct[Bt+5]-jt);Ot.push([[It,Xt],[Kt,Qt],[te,re],[ie,ae]]),It=ie,Xt=ae}const Nt=it(this,ct,Kn).call(this,Ot);Ft.bezierPath2D.push(Nt)}const z=it(lt=Ft,Wt,_n).call(lt);return gt(Ft,l,Math.max(i.AnnotationEditor.MIN_SIZE,z[2]-z[0])),gt(Ft,m,Math.max(i.AnnotationEditor.MIN_SIZE,z[3]-z[1])),it(bt=Ft,_t,mn).call(bt,Zt,Pt),Ft}serialize(){if(this.isEmpty())return null;const ht=this.getRect(0,0),Mt=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:Mt,thickness:this.thickness,opacity:this.opacity,paths:it(this,$t,Qn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ht),pageIndex:this.pageIndex,rect:ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};m=new WeakMap,l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,I=new WeakMap,R=new WeakMap,x=new WeakMap,g=new WeakMap,A=new WeakMap,H=new WeakSet,jn=function(ht){const Mt=this.thickness;this.addCommands({cmd:()=>{this.thickness=ht,it(this,nt,me).call(this)},undo:()=>{this.thickness=Mt,it(this,nt,me).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,Hn=function(ht){const Mt=this.color;this.addCommands({cmd:()=>{this.color=ht,it(this,Y,le).call(this)},undo:()=>{this.color=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,Vn=function(ht){ht/=100;const Mt=this.opacity;this.addCommands({cmd:()=>{this.opacity=ht,it(this,Y,le).call(this)},undo:()=>{this.opacity=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},st=new WeakSet,Wn=function(){const{parentRotation:ht,parentDimensions:[Mt,Ht]}=this;switch(ht){case 90:return[0,Ht,Ht,Mt];case 180:return[Mt,Ht,Mt,Ht];case 270:return[Mt,0,Ht,Mt];default:return[0,0,Mt,Ht]}},ot=new WeakSet,fn=function(){const{ctx:ht,color:Mt,opacity:Ht,thickness:Ft,parentScale:Vt,scaleFactor:zt}=this;ht.lineWidth=Ft*Vt/zt,ht.lineCap="round",ht.lineJoin="round",ht.miterLimit=10,ht.strokeStyle=`${Mt}${(0,y.opacityToHex)(Ht)}`},mt=new WeakSet,$n=function(ht,Mt){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",r(this,P)),this.canvas.addEventListener("pointermove",r(this,w)),this.canvas.addEventListener("pointerup",r(this,T)),this.canvas.removeEventListener("pointerdown",r(this,k)),this.isEditing=!0,r(this,I)||(gt(this,I,!0),it(this,St,ge).call(this),this.thickness||(this.thickness=Tt._defaultThickness),this.color||(this.color=Tt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Tt._defaultOpacity)),this.currentPath.push([ht,Mt]),gt(this,C,!1),it(this,ot,fn).call(this),gt(this,A,()=>{it(this,d,qn).call(this),r(this,A)&&window.requestAnimationFrame(r(this,A))}),window.requestAnimationFrame(r(this,A))},yt=new WeakSet,pn=function(ht,Mt){const[Ht,Ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&ht===Ht&&Mt===Ft)return;const Vt=this.currentPath;let zt=r(this,M);if(Vt.push([ht,Mt]),gt(this,C,!0),Vt.length<=2){zt.moveTo(...Vt[0]),zt.lineTo(ht,Mt);return}Vt.length===3&&(gt(this,M,zt=new Path2D),zt.moveTo(...Vt[0])),it(this,_,Xn).call(this,zt,...Vt.at(-3),...Vt.at(-2),ht,Mt)},Rt=new WeakSet,zn=function(){if(this.currentPath.length===0)return;const ht=this.currentPath.at(-1);r(this,M).lineTo(...ht)},B=new WeakSet,Gn=function(ht,Mt){gt(this,A,null),ht=Math.min(Math.max(ht,0),this.canvas.width),Mt=Math.min(Math.max(Mt,0),this.canvas.height),it(this,yt,pn).call(this,ht,Mt),it(this,Rt,zn).call(this);let Ht;if(this.currentPath.length!==1)Ht=it(this,N,Yn).call(this);else{const Pt=[ht,Mt];Ht=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const Ft=r(this,M),Vt=this.currentPath;this.currentPath=[],gt(this,M,new Path2D);const zt=()=>{this.allRawPaths.push(Vt),this.paths.push(Ht),this.bezierPath2D.push(Ft),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,W,Ie).call(this),it(this,K,Oe).call(this)),it(this,nt,me).call(this))};this.addCommands({cmd:zt,undo:Zt,mustExec:!0})},d=new WeakSet,qn=function(){if(!r(this,C))return;gt(this,C,!1);const ht=Math.ceil(this.thickness*this.parentScale),Mt=this.currentPath.slice(-3),Ht=Mt.map(zt=>zt[0]),Ft=Mt.map(zt=>zt[1]);Math.min(...Ht)-ht,Math.max(...Ht)+ht,Math.min(...Ft)-ht,Math.max(...Ft)+ht;const{ctx:Vt}=this;Vt.save(),Vt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zt of this.bezierPath2D)Vt.stroke(zt);Vt.stroke(r(this,M)),Vt.restore()},_=new WeakSet,Xn=function(ht,Mt,Ht,Ft,Vt,zt,Zt){const Pt=(Mt+Ft)/2,Jt=(Ht+Vt)/2,jt=(Ft+zt)/2,$=(Vt+Zt)/2;ht.bezierCurveTo(Pt+2*(Ft-Pt)/3,Jt+2*(Vt-Jt)/3,jt+2*(Ft-jt)/3,$+2*(Vt-$)/3,jt,$)},N=new WeakSet,Yn=function(){const ht=this.currentPath;if(ht.length<=2)return[[ht[0],ht[0],ht.at(-1),ht.at(-1)]];const Mt=[];let Ht,[Ft,Vt]=ht[0];for(Ht=1;Ht<ht.length-2;Ht++){const[c,D]=ht[Ht],[z,et]=ht[Ht+1],lt=(c+z)/2,bt=(D+et)/2,Ct=[Ft+2*(c-Ft)/3,Vt+2*(D-Vt)/3],Ot=[lt+2*(c-lt)/3,bt+2*(D-bt)/3];Mt.push([[Ft,Vt],Ct,Ot,[lt,bt]]),[Ft,Vt]=[lt,bt]}const[zt,Zt]=ht[Ht],[Pt,Jt]=ht[Ht+1],jt=[Ft+2*(zt-Ft)/3,Vt+2*(Zt-Vt)/3],$=[Pt+2*(zt-Pt)/3,Jt+2*(Zt-Jt)/3];return Mt.push([[Ft,Vt],jt,$,[Pt,Jt]]),Mt},Y=new WeakSet,le=function(){if(this.isEmpty()){it(this,J,De).call(this);return}it(this,ot,fn).call(this);const{canvas:ht,ctx:Mt}=this;Mt.setTransform(1,0,0,1,0,0),Mt.clearRect(0,0,ht.width,ht.height),it(this,J,De).call(this);for(const Ht of this.bezierPath2D)Mt.stroke(Ht)},v=new WeakSet,gn=function(ht){this.canvas.removeEventListener("pointerleave",r(this,P)),this.canvas.removeEventListener("pointermove",r(this,w)),this.canvas.removeEventListener("pointerup",r(this,T)),this.canvas.addEventListener("pointerdown",r(this,k)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),it(this,B,Gn).call(this,ht.offsetX,ht.offsetY),this.addToAnnotationStorage(),this.setInBackground()},W=new WeakSet,Ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ht=>{var Mt;return(Mt=this.canvas)==null?void 0:Mt.setAttribute("aria-label",ht)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,Oe=function(){gt(this,R,new ResizeObserver(ht=>{const Mt=ht[0].contentRect;Mt.width&&Mt.height&&this.setDimensions(Mt.width,Mt.height)})),r(this,R).observe(this.div)},St=new WeakSet,ge=function(){if(!r(this,I))return;const[ht,Mt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ht),this.canvas.height=Math.ceil(this.height*Mt),it(this,J,De).call(this)},_t=new WeakSet,mn=function(ht,Mt){const Ht=it(this,vt,Le).call(this),Ft=(ht-Ht)/r(this,l),Vt=(Mt-Ht)/r(this,m);this.scaleFactor=Math.min(Ft,Vt)},J=new WeakSet,De=function(){const ht=it(this,vt,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ht,this.translationY*this.scaleFactor+ht)},ct=new WeakSet,Kn=function(ht){const Mt=new Path2D;for(let Ht=0,Ft=ht.length;Ht<Ft;Ht++){const[Vt,zt,Zt,Pt]=ht[Ht];Ht===0&&Mt.moveTo(...Vt),Mt.bezierCurveTo(zt[0],zt[1],Zt[0],Zt[1],Pt[0],Pt[1])}return Mt},Et=new WeakSet,bn=function(ht,Mt,Ht){const[Ft,Vt,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]+=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const jt=ht[Pt];ht[Pt]=ht[Pt+1]+Ft,ht[Pt+1]=jt+Vt}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]+=Vt;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const jt=ht[Pt];ht[Pt]=zt-ht[Pt+1],ht[Pt+1]=Zt-jt}break;default:throw new Error("Invalid rotation")}return ht},Lt=new WeakSet,Jn=function(ht,Mt,Ht){const[Ft,Vt,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]-=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const jt=ht[Pt];ht[Pt]=ht[Pt+1]-Vt,ht[Pt+1]=jt-Ft}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]-=Vt;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const jt=ht[Pt];ht[Pt]=Zt-ht[Pt+1],ht[Pt+1]=zt-jt}break;default:throw new Error("Invalid rotation")}return ht},$t=new WeakSet,Qn=function(ht,Mt,Ht,Ft){var Jt,jt;const Vt=[],zt=this.thickness/2,Zt=ht*Mt+zt,Pt=ht*Ht+zt;for(const $ of this.paths){const c=[],D=[];for(let z=0,et=$.length;z<et;z++){const[lt,bt,Ct,Ot]=$[z],It=ht*lt[0]+Zt,Xt=ht*lt[1]+Pt,Nt=ht*bt[0]+Zt,Bt=ht*bt[1]+Pt,qt=ht*Ct[0]+Zt,Kt=ht*Ct[1]+Pt,Qt=ht*Ot[0]+Zt,te=ht*Ot[1]+Pt;z===0&&(c.push(It,Xt),D.push(It,Xt)),c.push(Nt,Bt,qt,Kt,Qt,te),D.push(Nt,Bt),z===et-1&&D.push(Qt,te)}Vt.push({bezier:it(Jt=Tt,Et,bn).call(Jt,c,Ft,this.rotation),points:it(jt=Tt,Et,bn).call(jt,D,Ft,this.rotation)})}return Vt},Wt=new WeakSet,_n=function(){let ht=1/0,Mt=-1/0,Ht=1/0,Ft=-1/0;for(const Vt of this.paths)for(const[zt,Zt,Pt,Jt]of Vt){const jt=n.Util.bezierBoundingBox(...zt,...Zt,...Pt,...Jt);ht=Math.min(ht,jt[0]),Ht=Math.min(Ht,jt[1]),Mt=Math.max(Mt,jt[2]),Ft=Math.max(Ft,jt[3])}return[ht,Ht,Mt,Ft]},vt=new WeakSet,Le=function(){return r(this,E)?Math.ceil(this.thickness*this.parentScale):0},nt=new WeakSet,me=function(ht=!1){if(this.isEmpty())return;if(!r(this,E)){it(this,Y,le).call(this);return}const Mt=it(this,Wt,_n).call(this),Ht=it(this,vt,Le).call(this);gt(this,l,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),gt(this,m,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1]));const Ft=Math.ceil(Ht+r(this,l)*this.scaleFactor),Vt=Math.ceil(Ht+r(this,m)*this.scaleFactor),[zt,Zt]=this.parentDimensions;this.width=Ft/zt,this.height=Vt/Zt,this.setAspectRatio(Ft,Vt);const Pt=this.translationX,Jt=this.translationY;this.translationX=-Mt[0],this.translationY=-Mt[1],it(this,St,ge).call(this),it(this,Y,le).call(this),gt(this,x,Ft),gt(this,g,Vt),this.setDims(Ft,Vt);const jt=ht?Ht/this.scaleFactor/2:0;this.translate(Pt-this.translationX-jt,Jt-this.translationY-jt)},G(Tt,ct),G(Tt,Et),G(Tt,Lt),se(Tt,"_defaultColor",null),se(Tt,"_defaultOpacity",1),se(Tt,"_defaultThickness",1),se(Tt,"_type","ink");let f=Tt;e.InkEditor=f},(t,e,s)=>{var f,m,l,w,P,T,k,M,E,C,I,Ee,x,we,A,Ne,F,yn,j,Zn,Q,ts,U,vn,pt,Be,X,es;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),i=s(4),a=s(6),o=s(29);const wt=class wt extends i.AnnotationEditor{constructor(B){super({...B,name:"stampEditor"});G(this,I);G(this,x);G(this,A);G(this,F);G(this,j);G(this,Q);G(this,U);G(this,pt);G(this,X);G(this,f,null);G(this,m,null);G(this,l,null);G(this,w,null);G(this,P,null);G(this,T,null);G(this,k,null);G(this,M,null);G(this,E,!1);G(this,C,!1);gt(this,w,B.bitmapUrl),gt(this,P,B.bitmapFile)}static initialize(B){i.AnnotationEditor.initialize(B)}static get supportedTypes(){const B=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",B.map(h=>`image/${h}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(B){return this.supportedTypes.includes(B)}static paste(B,h){h.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:B.getAsFile()})}remove(){var B,h;r(this,m)&&(gt(this,f,null),this._uiManager.imageManager.deleteId(r(this,m)),(B=r(this,T))==null||B.remove(),gt(this,T,null),(h=r(this,k))==null||h.disconnect(),gt(this,k,null)),super.remove()}rebuild(){if(!this.parent){r(this,m)&&it(this,A,Ne).call(this);return}super.rebuild(),this.div!==null&&(r(this,m)&&it(this,A,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(r(this,l)||r(this,f)||r(this,w)||r(this,P))}get isResizable(){return!0}render(){if(this.div)return this.div;let B,h;if(this.width&&(B=this.x,h=this.y),super.render(),this.div.hidden=!0,r(this,f)?it(this,F,yn).call(this):it(this,A,Ne).call(this),this.width){const[d,u]=this.parentDimensions;this.setAt(B*d,h*u,this.width*d,this.height*u)}return this.div}static deserialize(B,h,d){if(B instanceof o.StampAnnotationElement)return null;const u=super.deserialize(B,h,d),{rect:_,bitmapUrl:S,bitmapId:N,isSvg:V,accessibilityData:Y}=B;N&&d.imageManager.isValidId(N)?gt(u,m,N):gt(u,w,S),gt(u,E,V);const[dt,v]=u.pageDimensions;return u.width=(_[2]-_[0])/dt,u.height=(_[3]-_[1])/v,Y&&(u.altTextData=Y),u}serialize(B=!1,h=null){if(this.isEmpty())return null;const d={annotationType:n.AnnotationEditorType.STAMP,bitmapId:r(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,E),structTreeParentId:this._structTreeParentId};if(B)return d.bitmapUrl=it(this,pt,Be).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:u,altText:_}=this.altTextData;if(!u&&_&&(d.accessibilityData={type:"Figure",alt:_}),h===null)return d;h.stamps||(h.stamps=new Map);const S=r(this,E)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!h.stamps.has(r(this,m)))h.stamps.set(r(this,m),{area:S,serialized:d}),d.bitmap=it(this,pt,Be).call(this,!1);else if(r(this,E)){const N=h.stamps.get(r(this,m));S>N.area&&(N.area=S,N.serialized.bitmap.close(),N.serialized.bitmap=it(this,pt,Be).call(this,!1))}return d}};f=new WeakMap,m=new WeakMap,l=new WeakMap,w=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,I=new WeakSet,Ee=function(B,h=!1){if(!B){this.remove();return}gt(this,f,B.bitmap),h||(gt(this,m,B.id),gt(this,E,B.isSvg)),it(this,F,yn).call(this)},x=new WeakSet,we=function(){gt(this,l,null),this._uiManager.enableWaiting(!1),r(this,T)&&this.div.focus()},A=new WeakSet,Ne=function(){if(r(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(r(this,m)).then(h=>it(this,I,Ee).call(this,h,!0)).finally(()=>it(this,x,we).call(this));return}if(r(this,w)){const h=r(this,w);gt(this,w,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromUrl(h).then(d=>it(this,I,Ee).call(this,d)).finally(()=>it(this,x,we).call(this)));return}if(r(this,P)){const h=r(this,P);gt(this,P,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromFile(h).then(d=>it(this,I,Ee).call(this,d)).finally(()=>it(this,x,we).call(this)));return}const B=document.createElement("input");B.type="file",B.accept=wt.supportedTypesStr,gt(this,l,new Promise(h=>{B.addEventListener("change",async()=>{if(!B.files||B.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(B.files[0]);it(this,I,Ee).call(this,d)}h()}),B.addEventListener("cancel",()=>{this.remove(),h()})}).finally(()=>it(this,x,we).call(this))),B.click()},F=new WeakSet,yn=function(){const{div:B}=this;let{width:h,height:d}=r(this,f);const[u,_]=this.pageDimensions,S=.75;if(this.width)h=this.width*u,d=this.height*_;else if(h>S*u||d>S*_){const dt=Math.min(S*u/h,S*_/d);h*=dt,d*=dt}const[N,V]=this.parentDimensions;this.setDims(h*N/u,d*V/_),this._uiManager.enableWaiting(!1);const Y=gt(this,T,document.createElement("canvas"));B.append(Y),B.hidden=!1,it(this,U,vn).call(this,h,d),it(this,X,es).call(this),r(this,C)||(this.parent.addUndoableEditor(this),gt(this,C,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},j=new WeakSet,Zn=function(B,h){var S;const[d,u]=this.parentDimensions;this.width=B/d,this.height=h/u,this.setDims(B,h),(S=this._initialOptions)!=null&&S.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,r(this,M)!==null&&clearTimeout(r(this,M)),gt(this,M,setTimeout(()=>{gt(this,M,null),it(this,U,vn).call(this,B,h)},200))},Q=new WeakSet,ts=function(B,h){const{width:d,height:u}=r(this,f);let _=d,S=u,N=r(this,f);for(;_>2*B||S>2*h;){const V=_,Y=S;_>2*B&&(_=_>=16384?Math.floor(_/2)-1:Math.ceil(_/2)),S>2*h&&(S=S>=16384?Math.floor(S/2)-1:Math.ceil(S/2));const dt=new OffscreenCanvas(_,S);dt.getContext("2d").drawImage(N,0,0,V,Y,0,0,_,S),N=dt.transferToImageBitmap()}return N},U=new WeakSet,vn=function(B,h){B=Math.ceil(B),h=Math.ceil(h);const d=r(this,T);if(!d||d.width===B&&d.height===h)return;d.width=B,d.height=h;const u=r(this,E)?r(this,f):it(this,Q,ts).call(this,B,h),_=d.getContext("2d");_.filter=this._uiManager.hcmFilter,_.drawImage(u,0,0,u.width,u.height,0,0,B,h)},pt=new WeakSet,Be=function(B){if(B){if(r(this,E)){const u=this._uiManager.imageManager.getSvgUrl(r(this,m));if(u)return u}const h=document.createElement("canvas");return{width:h.width,height:h.height}=r(this,f),h.getContext("2d").drawImage(r(this,f),0,0),h.toDataURL()}if(r(this,E)){const[h,d]=this.pageDimensions,u=Math.round(this.width*h*a.PixelsPerInch.PDF_TO_CSS_UNITS),_=Math.round(this.height*d*a.PixelsPerInch.PDF_TO_CSS_UNITS),S=new OffscreenCanvas(u,_);return S.getContext("2d").drawImage(r(this,f),0,0,r(this,f).width,r(this,f).height,0,0,u,_),S.transferToImageBitmap()}return structuredClone(r(this,f))},X=new WeakSet,es=function(){gt(this,k,new ResizeObserver(B=>{const h=B[0].contentRect;h.width&&h.height&&it(this,j,Zn).call(this,h.width,h.height)})),r(this,k).observe(this.div)},se(wt,"_type","stamp");let y=wt;e.StampEditor=y}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return y.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),y=__w_pdfjs_require__(29),f=__w_pdfjs_require__(14),m=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(s,n){n()})(commonjsGlobal,function(){function s(m,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function n(m,l,w){var P=new XMLHttpRequest;P.open("GET",m),P.responseType="blob",P.onload=function(){f(P.response,l,w)},P.onerror=function(){console.error("could not download file")},P.send()}function i(m){var l=new XMLHttpRequest;l.open("HEAD",m,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,y=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(m,l,w){var P=o.URL||o.webkitURL,T=document.createElement("a");l=l||m.name||"download",T.download=l,T.rel="noopener",typeof m=="string"?(T.href=m,T.origin===location.origin?a(T):i(T.href)?n(m,l,w):a(T,T.target="_blank")):(T.href=P.createObjectURL(m),setTimeout(function(){P.revokeObjectURL(T.href)},4e4),setTimeout(function(){a(T)},0))}:"msSaveOrOpenBlob"in navigator?function(m,l,w){if(l=l||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(s(m,w),l);else if(i(m))n(m,l,w);else{var P=document.createElement("a");P.href=m,P.target="_blank",setTimeout(function(){a(P)})}}:function(m,l,w,P){if(P=P||open("","_blank"),P&&(P.document.title=P.document.body.innerText="downloading..."),typeof m=="string")return n(m,l,w);var T=m.type==="application/octet-stream",k=/constructor/i.test(o.HTMLElement)||o.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||T&&k||y)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var R=E.result;R=M?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),P?P.location.href=R:location=R,P=null},E.readAsDataURL(m)}else{var C=o.URL||o.webkitURL,I=C.createObjectURL(m);P?P.location=I:location.href=I,P=null,setTimeout(function(){C.revokeObjectURL(I)},4e4)}});o.saveAs=f.saveAs=f,t.exports=f})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function hexToRgba(t,e){const s=t.replace("#",""),n=parseInt(s.substring(0,2),16),i=parseInt(s.substring(2,4),16),a=parseInt(s.substring(4,6),16);return`rgba(${n}, ${i}, ${a}, ${e/100})`}function generateCanvas(t,e,s){const{width:n,height:i,words:a,compression:o}=t,y=document.createElement("canvas"),f=y.getContext("2d"),m=s?e.width:n,l=s?e.height:i;return y.width=m,y.height=l,f.drawImage(e,0,0,y.width,y.height),a.trim().length>0&&addWaterMark(t,f,m,l),{src:y.toDataURL("image/jpeg",o),newCanvas:y}}function addWaterMark(t,e,s,n){const i=s??t.width,a=n??t.height,{words:o,fontSize:y,color:f,opacity:m,rotate:l}=t;let{row:w,col:P,startX:T,startY:k,offsetX:M,offsetY:E}=t;const C=o.length*y*.6,I=y*1.3;M===48&&E===48&&(M=Math.max(30,Math.min(80,i/10)),E=Math.max(30,Math.min(80,a/10)));const R=C+M,x=I+E,g=Math.sqrt(i*i+a*a),A=Math.ceil(g/R)+3,H=Math.ceil(g/x)+3;w===7&&P===7&&(w=Math.max(H,8),P=Math.max(A,8)),T===-100&&k===0&&(T=-Math.abs(g*.3),k=-Math.abs(g*.1)),e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,i,a),e.rotate(parseInt(String(l))*Math.PI/180),e.fillStyle=hexToRgba(f,m),e.font=`normal ${y}px Arial`,Array.from({length:w}).forEach((F,b)=>{Array.from({length:P}).forEach((j,L)=>{if(o.includes(`
`))multipleWords(e,b,L,o,y,T,k,M,E);else{const Q=T+L*(o.length*y+M),st=k+b*(E+y);e.fillText(o,Q,st)}})})}function multipleWords(t,e,s,n,i,a,o,y,f){const m=n.split(`
`),l=m.length,w=Math.max(...m.map(P=>P.length));for(let P=0;P<l;P++){const T=+a+s*(w*i+y)+(w-m[P].length)/2*i,k=+o+e*f+i*1.3*(P+l*e);t.fillText(m[P],T,k)}}function downloadImage(t,e,s){const n=new Image;n.src=t,n.onload=()=>{const i=document.createElement("canvas");i.width=+e.width,i.height=+e.height;const a=i.getContext("2d");a==null||a.drawImage(n,0,0);const o=i.toDataURL("image/png"),y=dataURLToBlob(o),f=document.createElement("a");f.href=URL.createObjectURL(y),f.download=s,f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)}}function dataURLToBlob(t){const e=t.split(";base64,"),s=e[0].split(":")[1],n=window.atob(e[1]),i=n.length,a=new Uint8Array(i);for(let o=0;o<i;++o)a[o]=n.charCodeAt(o);return new Blob([a],{type:s})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(t,e,s,n,i){const a=pdfExports.getDocument({url:t,disableRange:!0});imgData.length=0,a.promise.then(o=>{s.value&&(s.value.innerHTML="");const y=o.numPages;for(let f=1;f<=y;f++)o.getPage(f).then(m=>{const l=document.createElement("canvas"),w=l.getContext("2d"),P=m.getViewport({scale:1});l.width=P.width,l.height=P.height,i&&(e.width=l.width,e.height=l.height);const T={canvasContext:w,viewport:P};m.render(T).promise.then(function(){const{newCanvas:M,src:E}=generateCanvas(e,l,i);s.value.appendChild(M),imgData.push({src:E,width:l.width,height:l.height}),imgData.length===y&&(n.value=!1)})})})}function img2Pdf(t,e){const s={autoFirstPage:!1,compress:!1},n=new PDFDocument(s),i=n.pipe(blobStream());for(let a=0;a<imgData.length;a++){const{src:o,width:y,height:f}=imgData[a];n.addPage({size:[y,f]}),n.image(o,0,0)}n.end(),i.on("finish",function(){var a=i.toBlob("application/pdf");FileSaver_minExports.saveAs(a,t),e.value=!1})}const _hoisted_1$5={class:"flex gap-2 mb-4"},_hoisted_2$4={class:"inline-flex items-center gap-1.5 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors"},_hoisted_3$3=["disabled"],_hoisted_4$3={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-3 min-h-[150px] sm:min-h-[200px] lg:min-h-[250px] flex items-center justify-center"},_hoisted_5$2={key:0,class:"flex items-center justify-center"},_hoisted_6$1=["src"],_hoisted_7$1={key:1,class:"overflow-auto w-full"},_hoisted_8$1={key:2,class:"flex flex-col items-center justify-center cursor-pointer group"},_hoisted_9$1={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm"},_sfc_main$6=defineComponent({__name:"TheMain",props:{config:null},setup(t){let e;const s=ref(),n=ref(),i=ref(""),a=ref(""),o=ref(!1),y=ref();let f=!1;watch(t.config,m),watch(o,I=>{!I&&f&&(f=!1)});function m(){l=!1,e&&(n.value.src=generateCanvas(t.config,e,l).src),a.value&&!f&&loadPdf(a.value,t.config,y,o,l)}let l=!1,w="",P="";function T(I){l=!0,k();const R=I.target.files;if(R&&R.length>0){const x=R[0];w=x.type,P=x.name,w.startsWith("image/")&&M(x),w==="application/pdf"&&(o.value=!0,f=!0,E(x))}}function k(){e&&(e=null),i.value&&(i.value=""),a.value&&(a.value=""),y.value&&(y.value.innerHTML="")}function M(I){const R=new FileReader;R.readAsDataURL(I),R.onload=()=>{const x=new Image;x.src=R.result,e=x,x.onload=()=>{t.config.width=x.width,t.config.height=x.height,n.value.src=generateCanvas(t.config,x,l).src}},R.onloadend=()=>{i.value=R.result}}function E(I){const R=new FileReader;R.readAsDataURL(I),R.onloadend=()=>{a.value=R.result,loadPdf(a.value,t.config,y,o,l)}}function C(){if(!(i.value===""&&a.value==="")){if(w.startsWith("image/")&&e){const I=generateCanvas(t.config,e,l).src;downloadImage(I,t.config,P)}w==="application/pdf"&&img2Pdf(P,o)}}return(I,R)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("label",_hoisted_2$4,[R[0]||(R[0]=createBaseVNode("span",{"i-carbon-upload":"",class:"text-base"},null,-1)),R[1]||(R[1]=createBaseVNode("span",null,"Upload",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:T},null,32)]),createBaseVNode("button",{class:"inline-flex items-center gap-1.5 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:unref(i)===""&&unref(a)==="",onClick:C},[...R[2]||(R[2]=[createBaseVNode("span",{"i-carbon-download":"",class:"text-base"},null,-1),createBaseVNode("span",null,"Download",-1)])],8,_hoisted_3$3)]),createBaseVNode("div",_hoisted_4$3,[unref(i)?(openBlock(),createElementBlock("div",_hoisted_5$2,[createBaseVNode("img",{ref_key:"preview",ref:n,src:unref(i),class:"max-w-full h-auto rounded-lg shadow-xl",style:{"max-height":"70vh"}},null,8,_hoisted_6$1),createBaseVNode("canvas",{ref_key:"canvas",ref:s,class:"hidden"},null,512)])):unref(a)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",{ref_key:"wrap",ref:y,class:"flex flex-wrap gap-3 justify-center [&>canvas]:rounded-lg [&>canvas]:shadow-xl [&>canvas]:max-w-full [&>canvas]:h-auto"},null,512)])):(openBlock(),createElementBlock("label",_hoisted_8$1,[R[3]||(R[3]=createBaseVNode("div",{class:"p-3 rounded-full bg-slate-700/50 mb-2 group-hover:bg-violet-600/20 transition-colors"},[createBaseVNode("div",{"i-carbon-document-add":"",class:"text-2xl text-violet-400"})],-1)),R[4]||(R[4]=createBaseVNode("p",{class:"text-xs text-gray-300 font-medium"},"Drop file here or click to browse",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:T},null,32)]))]),unref(o)?(openBlock(),createElementBlock("div",_hoisted_9$1,[...R[5]||(R[5]=[createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"w-10 h-10 border-3 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),createBaseVNode("p",{class:"text-sm text-gray-300"},"Processing...")],-1)])])):createCommentVNode("",!0)]))}}),_export_sfc=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},_sfc_main$5={},_hoisted_1$4={class:"flex items-center justify-center gap-2"};function _sfc_render(t,e){return openBlock(),createElementBlock("div",_hoisted_1$4,[...e[0]||(e[0]=[createBaseVNode("a",{href:"https://hamradio.my",target:"_blank",class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",title:"Visit hamradio.my"},[createBaseVNode("div",{"i-carbon-home":"",class:"text-sm"})],-1),createBaseVNode("a",{href:"https://github.com/9M2PJU/9M2PJU-PDF-Watermark",target:"_blank",class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",title:"View on GitHub"},[createBaseVNode("div",{"i-carbon-logo-github":"",class:"text-sm"})],-1)])])}const __unplugin_components_1=_export_sfc(_sfc_main$5,[["render",_sfc_render]]),_sfc_main$4=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const s=e;return(n,i)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["relative w-9 h-5 rounded-full transition-colors",t.value?"bg-violet-600":"bg-slate-600"]),onClick:i[0]||(i[0]=a=>s("update:value",!t.value))},[createBaseVNode("span",{class:normalizeClass(["absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform",t.value?"left-[18px]":"left-0.5"])},null,2)],2))}});var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function";isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function identity(t){return t}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,s)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues=(t,e)=>{for(var s in e||(e={}))__hasOwnProp.call(e,s)&&__defNormalProp(t,s,e[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))__propIsEnum.call(e,s)&&__defNormalProp(t,s,e[s]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,s,n={}){var i,a,o;const{clone:y=!1,passive:f=!1,eventName:m,deep:l=!1,defaultValue:w}=n,P=getCurrentInstance(),T=s||(P==null?void 0:P.emit)||((i=P==null?void 0:P.$emit)==null?void 0:i.bind(P))||((o=(a=P==null?void 0:P.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(P==null?void 0:P.proxy));let k=m;e||(e="modelValue"),k=m||k||`update:${e.toString()}`;const M=C=>y?isFunction(y)?y(C):cloneFnJSON(C):C,E=()=>isDef(t[e])?M(t[e]):w;if(f){const C=E(),I=ref(C);return watch(()=>t[e],R=>I.value=M(R)),watch(I,R=>{(R!==t[e]||l)&&T(k,R)},{deep:l}),I}else return computed({get(){return E()},set(C){T(k,C)}})}const __MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,s=Object.create(null);for(const n of t)if(typeof n=="string")s[n]=useVModel(e,n,void 0,{eventName:`update:${n}`,passive:!0});else{const[i,a=i,o=`update:${i}`,y={}]=n;s[i]=useVModel(e,a,void 0,{eventName:o,passive:!0,...y})}return s},WATERMWRK_KEY="watermark-config",defaultConfig={words:"CONFIDENTIAL",width:0,height:0,fontSize:24,color:"#000000",opacity:20,rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},rotatePresets=[{label:" Diagonal",value:-15},{label:" Horizontal",value:0},{label:" Vertical",value:-90}],tooltips={words:"Text to display as watermark",width:"Image width (auto-detected)",height:"Image height (auto-detected)",fontSize:"Size of the watermark text",color:"Watermark color",opacity:"Watermark transparency (0-100%)",rotate:"Rotation angle of watermark",row:"Number of watermark rows",col:"Number of watermark columns",startX:"Horizontal starting position",startY:"Vertical starting position",offsetX:"Horizontal spacing between watermarks",offsetY:"Vertical spacing between watermarks",compression:"Output quality (higher = better)",saveConfig:"Remember settings for next time"},basicSettings=["words","color","opacity","fontSize","rotate"],advancedSettings=["row","col","startX","startY","offsetX","offsetY","compression"],_hoisted_1$3={class:"flex items-center justify-between py-1.5"},_hoisted_2$3=["for","title"],_hoisted_3$2=["id"],_hoisted_4$2={key:2,class:"flex items-center gap-2"},_hoisted_5$1=["id"],_hoisted_6={class:"text-[10px] text-gray-500 font-mono"},_hoisted_7={key:3,class:"flex items-center gap-2"},_hoisted_8={class:"text-[10px] text-gray-500 w-8"},_hoisted_9={key:4,class:"flex items-center gap-2"},_hoisted_10={class:"text-[10px] text-gray-500 w-6"},_hoisted_11={key:5,class:"flex items-center gap-1"},_hoisted_12=["onClick"],_hoisted_13={key:6,class:"flex items-center gap-2"},_hoisted_14={class:"text-[10px] text-gray-500 w-6"},_hoisted_15={key:7,class:"flex items-center gap-2"},_hoisted_16={class:"text-[10px] text-gray-500 w-6"},_hoisted_17={key:8,class:"flex items-center gap-2"},_hoisted_18={class:"text-[10px] text-gray-500 w-6"},_hoisted_19={key:9,class:"flex items-center gap-2"},_hoisted_20={class:"text-[10px] text-gray-500 w-8"},_hoisted_21={key:10,class:"flex items-center gap-2"},_hoisted_22={class:"text-[10px] text-gray-500 w-8"},_hoisted_23={key:11,class:"flex items-center gap-2"},_hoisted_24={class:"text-[10px] text-gray-500 w-6"},_hoisted_25={key:12,class:"flex items-center gap-2"},_hoisted_26={class:"text-[10px] text-gray-500 w-6"},_hoisted_27=["id"],_hoisted_28=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),s={words:"Watermark Text",color:"Color",opacity:"Opacity",fontSize:"Font Size",rotate:"Rotation",row:"Rows",col:"Columns",startX:"Start X",startY:"Start Y",offsetX:"Spacing X",offsetY:"Spacing Y",compression:"Quality",saveConfig:"Remember Settings"};return(n,i)=>{const a=_sfc_main$4;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("label",{for:t.property,class:"text-xs text-gray-400",title:unref(tooltips)[t.property]},toDisplayString(s[t.property]||t.property),9,_hoisted_2$3),t.property==="saveConfig"?(openBlock(),createBlock(a,{key:0,value:unref(e),"onUpdate:value":i[0]||(i[0]=o=>n.$emit("update:value",o))},null,8,["value"])):t.property==="words"?withDirectives((openBlock(),createElementBlock("input",{key:1,id:t.property,"onUpdate:modelValue":i[1]||(i[1]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-32 sm:w-36 px-2 py-1 text-xs bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none",placeholder:"Enter text..."},null,8,_hoisted_3$2)),[[vModelText,unref(e)]]):t.property==="color"?(openBlock(),createElementBlock("div",_hoisted_4$2,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":i[2]||(i[2]=o=>isRef(e)?e.value=o:null),type:"color",class:"w-8 h-8 rounded cursor-pointer border border-slate-600 bg-transparent"},null,8,_hoisted_5$1),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_6,toDisplayString(unref(e)),1)])):t.property==="opacity"?(openBlock(),createElementBlock("div",_hoisted_7,[withDirectives(createBaseVNode("input",{type:"range",min:"5",max:"100",step:"5","onUpdate:modelValue":i[3]||(i[3]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_8,toDisplayString(unref(e))+"%",1)])):t.property==="fontSize"?(openBlock(),createElementBlock("div",_hoisted_9,[withDirectives(createBaseVNode("input",{type:"range",min:"12",max:"48",step:"2","onUpdate:modelValue":i[4]||(i[4]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_10,toDisplayString(unref(e)),1)])):t.property==="rotate"?(openBlock(),createElementBlock("div",_hoisted_11,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(rotatePresets),o=>(openBlock(),createElementBlock("button",{key:o.value,onClick:y=>n.$emit("update:value",o.value),class:normalizeClass(["px-2 py-0.5 text-[10px] rounded transition-colors",unref(e)===o.value?"bg-violet-600 text-white":"bg-slate-700/50 text-gray-400 hover:bg-slate-600"])},toDisplayString(o.label),11,_hoisted_12))),128))])):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_13,[withDirectives(createBaseVNode("input",{type:"range",min:"0.1",max:"1",step:"0.1","onUpdate:modelValue":i[5]||(i[5]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_14,toDisplayString(Math.round(Number(unref(e))*100))+"%",1)])):t.property==="row"?(openBlock(),createElementBlock("div",_hoisted_15,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[6]||(i[6]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_16,toDisplayString(unref(e)),1)])):t.property==="col"?(openBlock(),createElementBlock("div",_hoisted_17,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[7]||(i[7]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_18,toDisplayString(unref(e)),1)])):t.property==="startX"?(openBlock(),createElementBlock("div",_hoisted_19,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[8]||(i[8]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_20,toDisplayString(unref(e)),1)])):t.property==="startY"?(openBlock(),createElementBlock("div",_hoisted_21,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[9]||(i[9]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_22,toDisplayString(unref(e)),1)])):t.property==="offsetX"?(openBlock(),createElementBlock("div",_hoisted_23,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[10]||(i[10]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_24,toDisplayString(unref(e)),1)])):t.property==="offsetY"?(openBlock(),createElementBlock("div",_hoisted_25,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[11]||(i[11]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_26,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?withDirectives((openBlock(),createElementBlock("input",{key:13,id:t.property,"onUpdate:modelValue":i[12]||(i[12]=o=>isRef(e)?e.value=o:null),type:"number",class:"w-24 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_27)),[[vModelText,unref(e)]]):withDirectives((openBlock(),createElementBlock("input",{key:14,id:t.property,"onUpdate:modelValue":i[13]||(i[13]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-24 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_28)),[[vModelText,unref(e)]])])}}}),_hoisted_1$2={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4 lg:sticky lg:top-4"},_hoisted_2$2={class:"space-y-2"},_hoisted_3$1={class:"mt-2 pt-2 border-t border-slate-700/30 space-y-2"},_hoisted_4$1={class:"mt-3 pt-3 border-t border-slate-700/50"},_hoisted_5={class:"mt-3 pt-3 border-t border-slate-700/50"},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){const e=ref(!1);return(s,n)=>{const i=_sfc_main$3,a=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$2,[n[3]||(n[3]=createBaseVNode("div",{class:"text-center pb-3 mb-3 border-b border-slate-700/50"},[createBaseVNode("div",{class:"flex items-center justify-center gap-2 mb-2"},[createBaseVNode("span",{"i-material-symbols-add-photo-alternate-rounded":"",class:"text-xl text-violet-400"}),createBaseVNode("span",{"i-material-symbols:picture-as-pdf":"",class:"text-xl text-cyan-400"})]),createBaseVNode("h1",{class:"text-base font-bold text-white"},"9M2PJU PDF Watermark"),createBaseVNode("p",{class:"text-xs text-gray-400"},"Add watermark to image/pdf")],-1)),createBaseVNode("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(basicSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":y=>s.$emit("update",o,y)},null,8,["property","value","onUpdate:value"]))),128))]),createBaseVNode("button",{onClick:n[0]||(n[0]=o=>e.value=!unref(e)),class:"w-full mt-3 py-2 flex items-center justify-center gap-2 text-xs text-gray-400 hover:text-white transition-colors"},[createBaseVNode("span",null,toDisplayString(unref(e)?"Hide":"Show")+" Advanced Settings",1),createBaseVNode("span",{class:normalizeClass([unref(e)?"rotate-180":"","transition-transform duration-200"]),"i-carbon-chevron-down":""},null,2)]),withDirectives(createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(advancedSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":y=>s.$emit("update",o,y)},null,8,["property","value","onUpdate:value"]))),128))],512),[[vShow,unref(e)]]),createBaseVNode("div",_hoisted_4$1,[createVNode(i,{property:"saveConfig",value:t.config.saveConfig,"onUpdate:value":n[1]||(n[1]=o=>s.$emit("update","saveConfig",o))},null,8,["value"])]),createBaseVNode("div",_hoisted_5,[n[2]||(n[2]=createBaseVNode("p",{class:"text-[10px] text-gray-500 text-center mb-2"},[createTextVNode(" Remake by "),createBaseVNode("a",{href:"https://hamradio.my",target:"_blank",class:"text-violet-400 hover:text-violet-300 underline"},"9M2PJU")],-1)),createVNode(a)])])}}}),_hoisted_1$1={class:"max-w-6xl mx-auto"},_hoisted_2$1={class:"flex flex-col lg:flex-row lg:items-start gap-4"},_hoisted_3={class:"w-full lg:w-72 lg:flex-shrink-0 order-2 lg:order-1"},_hoisted_4={class:"flex-1 order-1 lg:order-2"},_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),s=e&&JSON.parse(e),n=reactive(i(s)||defaultConfig);function i(y){if(!y)return;const{rotate:f,startX:m,startY:l}=y;return{...y,rotate:Number(f),startX:Number(m),startY:Number(l)}}const a=["words","color","rotate","startX","startY"];function o(y,f){y==="saveConfig"?n[y]=!!f:a.includes(y)?n[y]=f:n[y]=+f,y==="saveConfig"&&f===!1?localStorage.setItem(WATERMWRK_KEY,""):n.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(n))}return(y,f)=>{const m=_sfc_main$2,l=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3,[createVNode(m,{config:unref(n),onUpdate:o},null,8,["config"])]),createBaseVNode("div",_hoisted_4,[createVNode(l,{config:unref(n)},null,8,["config"])])])])}}}),_hoisted_1={class:"min-h-screen bg-slate-900 text-gray-200 font-sans"},_hoisted_2={class:"relative z-10 p-3 sm:p-4 lg:p-6"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,s)=>(openBlock(),createElementBlock("main",_hoisted_1,[s[0]||(s[0]=createBaseVNode("div",{class:"fixed inset-0 bg-gradient-to-br from-slate-900 via-violet-950/30 to-slate-900 pointer-events-none"},null,-1)),createBaseVNode("div",_hoisted_2,[createVNode(_sfc_main$1)])]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
