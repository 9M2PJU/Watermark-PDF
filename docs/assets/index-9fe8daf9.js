var ns=Object.defineProperty;var ss=(t,e,s)=>e in t?ns(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var se=(t,e,s)=>(ss(t,typeof e!="symbol"?e+"":e,s),s),je=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var a=(t,e,s)=>(je(t,e,"read from private field"),s?s.call(t):e.get(t)),G=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},gt=(t,e,s,n)=>(je(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var _e=(t,e,s,n)=>({set _(i){gt(t,e,i,s)},get _(){return a(t,e,n)}}),it=(t,e,s)=>(je(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction$1=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-\w/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,e=>e.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},def=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString$1(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(isString$1(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$1(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString$1(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],r)=>(s[stringifySymbol(n,r)+" =>"]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>stringifySymbol(s))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var s;return isSymbol(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(t)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,s=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),removeSub(n),removeDep(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,s=activeSub,n=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const i=t.fn(t._value);(e.version===0||hasChanged(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{activeSub=s,shouldTrack=n,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function removeDep(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=activeSub;activeSub=void 0;try{e()}finally{activeSub=s}}}let globalVersion=0;class Link{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==activeSub)s=this.activeLink=new Link(activeSub,this),activeSub.deps?(s.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=s,activeSub.depsTail=s):activeSub.deps=activeSub.depsTail=s,addSub(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=activeSub.depsTail,s.nextDep=void 0,activeSub.depsTail.nextDep=s,activeSub.depsTail=s,activeSub.deps===s&&(activeSub.deps=n)}return s}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)addSub(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,s){if(shouldTrack&&activeSub){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new Dep),i.map=n,i.key=s),i.track()}}function trigger(t,e,s,n,i,r){const c=targetMap.get(t);if(!c){globalVersion++;return}const b=f=>{f&&f.trigger()};if(startBatch(),e==="clear")c.forEach(b);else{const f=isArray(t),g=f&&isIntegerKey(s);if(f&&s==="length"){const o=Number(n);c.forEach((w,T)=>{(T==="length"||T===ARRAY_ITERATE_KEY||!isSymbol(T)&&T>=o)&&b(w)})}else switch((s!==void 0||c.has(void 0))&&b(c.get(s)),g&&b(c.get(ARRAY_ITERATE_KEY)),e){case"add":f?g&&b(c.get("length")):(b(c.get(ITERATE_KEY)),isMap(t)&&b(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":f||(b(c.get(ITERATE_KEY)),isMap(t)&&b(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&b(c.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}function toWrapped(t,e){return isReadonly(t)?isReactive(t)?toReadonly(toReactive(e)):toReadonly(e):toReactive(e)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,t=>toWrapped(this,t))},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toWrapped(this,t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,s=>s.map(n=>toWrapped(this,n)),arguments)},find(t,e){return apply(this,"find",t,e,s=>toWrapped(this,s),arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,s=>toWrapped(this,s),arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",t=>toWrapped(this,t))}};function iterator(t,e,s){const n=shallowReadArray(t),i=n[e]();return n!==t&&!isShallow(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const arrayProto=Array.prototype;function apply(t,e,s,n,i,r){const c=shallowReadArray(t),b=c!==t&&!isShallow(t),f=c[e];if(f!==arrayProto[e]){const w=f.apply(t,r);return b?toReactive(w):w}let g=s;c!==t&&(b?g=function(w,T){return s.call(this,toWrapped(t,w),T,t)}:s.length>2&&(g=function(w,T){return s.call(this,w,T,t)}));const o=f.call(c,g,n);return b&&i?i(o):o}function reduce(t,e,s,n){const i=shallowReadArray(t);let r=s;return i!==t&&(isShallow(t)?s.length>3&&(r=function(c,b,f){return s.call(this,c,b,f,t)}):r=function(c,b,f){return s.call(this,c,toWrapped(t,b),f,t)}),i[e](r,...n)}function searchProxy(t,e,s){const n=toRaw(t);track(n,"iterate",ARRAY_ITERATE_KEY);const i=n[e](...s);return(i===-1||i===!1)&&isProxy(s[0])?(s[0]=toRaw(s[0]),n[e](...s)):i}function noTracking(t,e,s=[]){pauseTracking(),startBatch();const n=toRaw(t)[e].apply(t,s);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const c=isArray(e);if(!i){let f;if(c&&(f=arrayInstrumentations[s]))return f;if(s==="hasOwnProperty")return hasOwnProperty}const b=Reflect.get(e,s,isRef(e)?e:n);if((isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(i||track(e,"get",s),r))return b;if(isRef(b)){const f=c&&isIntegerKey(s)?b:b.value;return i&&isObject(f)?readonly(f):f}return isObject(b)?i?readonly(b):reactive(b):b}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,s,n,i){let r=e[s];const c=isArray(e)&&isIntegerKey(s);if(!this._isShallow){const g=isReadonly(r);if(!isShallow(n)&&!isReadonly(n)&&(r=toRaw(r),n=toRaw(n)),!c&&isRef(r)&&!isRef(n))return g||(r.value=n),!0}const b=c?Number(s)<e.length:hasOwn(e,s),f=Reflect.set(e,s,n,isRef(e)?e:i);return e===toRaw(i)&&(b?hasChanged(n,r)&&trigger(e,"set",s,n):trigger(e,"add",s,n)),f}deleteProperty(e,s){const n=hasOwn(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&trigger(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!isSymbol(s)||!builtInSymbols.has(s))&&track(e,"has",s),n}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,r=toRaw(i),c=isMap(r),b=t==="entries"||t===Symbol.iterator&&c,f=t==="keys"&&c,g=i[t](...n),o=s?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",f?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:w,done:T}=g.next();return T?{value:w,done:T}:{value:b?[o(w[0]),o(w[1])]:o(w),done:T}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const s={get(i){const r=this.__v_raw,c=toRaw(r),b=toRaw(i);t||(hasChanged(i,b)&&track(c,"get",i),track(c,"get",b));const{has:f}=getProto(c),g=e?toShallow:t?toReadonly:toReactive;if(f.call(c,i))return g(r.get(i));if(f.call(c,b))return g(r.get(b));r!==c&&r.get(i)},get size(){const i=this.__v_raw;return!t&&track(toRaw(i),"iterate",ITERATE_KEY),i.size},has(i){const r=this.__v_raw,c=toRaw(r),b=toRaw(i);return t||(hasChanged(i,b)&&track(c,"has",i),track(c,"has",b)),i===b?r.has(i):r.has(i)||r.has(b)},forEach(i,r){const c=this,b=c.__v_raw,f=toRaw(b),g=e?toShallow:t?toReadonly:toReactive;return!t&&track(f,"iterate",ITERATE_KEY),b.forEach((o,w)=>i.call(r,g(o),g(w),c))}};return extend(s,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!e&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const r=toRaw(this);return getProto(r).has.call(r,i)||(r.add(i),trigger(r,"add",i,i)),this},set(i,r){!e&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const c=toRaw(this),{has:b,get:f}=getProto(c);let g=b.call(c,i);g||(i=toRaw(i),g=b.call(c,i));const o=f.call(c,i);return c.set(i,r),g?hasChanged(r,o)&&trigger(c,"set",i,r):trigger(c,"add",i,r),this},delete(i){const r=toRaw(this),{has:c,get:b}=getProto(r);let f=c.call(r,i);f||(i=toRaw(i),f=c.call(r,i)),b&&b.call(r,i);const g=r.delete(i);return f&&trigger(r,"delete",i,void 0),g},clear(){const i=toRaw(this),r=i.size!==0,c=i.clear();return r&&trigger(i,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=createIterableMethod(i,t,e)}),s}function createInstrumentationGetter(t,e){const s=createInstrumentations(t,e);return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=getTargetType(t);if(r===0)return t;const c=i.get(t);if(c)return c;const b=new Proxy(t,r===2?n:s);return i.set(t,b),b}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,s)&&(this._rawValue=e,this._value=n?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>e==="__v_raw"?t:unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,s=!1){let n,i;return isFunction$1(t)?n=t:(n=t.get,i=t.set),new ComputedRefImpl(n,i,s)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,s=activeWatcher){if(s){let n=cleanupMap.get(s);n||cleanupMap.set(s,n=[]),n.push(t)}}function watch$1(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,once:r,scheduler:c,augmentJob:b,call:f}=s,g=F=>i?F:isShallow(F)||i===!1||i===0?traverse(F,1):traverse(F);let o,w,T,x,R=!1,M=!1;if(isRef(t)?(w=()=>t.value,R=isShallow(t)):isReactive(t)?(w=()=>g(t),R=!0):isArray(t)?(M=!0,R=t.some(F=>isReactive(F)||isShallow(F)),w=()=>t.map(F=>{if(isRef(F))return F.value;if(isReactive(F))return g(F);if(isFunction$1(F))return f?f(F,2):F()})):isFunction$1(t)?e?w=f?()=>f(t,2):t:w=()=>{if(T){pauseTracking();try{T()}finally{resetTracking()}}const F=activeWatcher;activeWatcher=o;try{return f?f(t,3,[x]):t(x)}finally{activeWatcher=F}}:w=NOOP,e&&i){const F=w,m=i===!0?1/0:i;w=()=>traverse(F(),m)}const E=getCurrentScope(),C=()=>{o.stop(),E&&E.active&&remove(E.effects,o)};if(r&&e){const F=e;e=(...m)=>{F(...m),C()}}let P=M?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const O=F=>{if(!(!(o.flags&1)||!o.dirty&&!F))if(e){const m=o.run();if(i||R||(M?m.some((A,H)=>hasChanged(A,P[H])):hasChanged(m,P))){T&&T();const A=activeWatcher;activeWatcher=o;try{const H=[m,P===INITIAL_WATCHER_VALUE?void 0:M&&P[0]===INITIAL_WATCHER_VALUE?[]:P,x];P=m,f?f(e,3,H):e(...H)}finally{activeWatcher=A}}}else o.run()};return b&&b(O),o=new ReactiveEffect(w),o.scheduler=c?()=>c(O,!1):O,x=F=>onWatcherCleanup(F,!1,o),T=o.onStop=()=>{const F=cleanupMap.get(o);if(F){if(f)f(F,4);else for(const m of F)m();cleanupMap.delete(o)}},e?n?O(!0):P=o.run():c?c(O.bind(null,!0),!0):o.run(),C.pause=o.pause.bind(o),C.resume=o.resume.bind(o),C.stop=C,C}function traverse(t,e=1/0,s){if(e<=0||!isObject(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,isRef(t))traverse(t.value,e,s);else if(isArray(t))for(let n=0;n<t.length;n++)traverse(t[n],e,s);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e,s)});else if(isPlainObject(t)){for(const n in t)traverse(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&traverse(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const s=stack.length?stack[stack.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=getComponentTrace();if(n)callWithErrorHandling(n,s,11,[t+e.map(r=>{var c,b;return(b=(c=r.toString)==null?void 0:c.call(r))!=null?b:JSON.stringify(r)}).join(""),s&&s.proxy,i.map(({vnode:r})=>`at <${formatComponentName(s,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...formatTrace(i)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function formatTrace(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...formatTraceEntry(s))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${formatComponentName(t.component,t.type,n)}`,r=">"+s;return t.props?[i,...formatProps(t.props),r]:[i+r]}function formatProps(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...formatProp(n,t[n]))}),s.length>3&&e.push(" ..."),e}function formatProp(t,e,s){return isString$1(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),s?e:[`${t}=`,e])}function callWithErrorHandling(t,e,s,n){try{return n?t(...n):t()}catch(i){handleError(i,e,s)}}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction$1(t)){const i=callWithErrorHandling(t,e,s,n);return i&&isPromise(i)&&i.catch(r=>{handleError(r,e,s)}),i}if(isArray(t)){const i=[];for(let r=0;r<t.length;r++)i.push(callWithAsyncErrorHandling(t[r],e,s,n));return i}}function handleError(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:c}=e&&e.appContext.config||EMPTY_OBJ;if(e){let b=e.parent;const f=e.proxy,g=`https://vuejs.org/error-reference/#runtime-${s}`;for(;b;){const o=b.ec;if(o){for(let w=0;w<o.length;w++)if(o[w](t,f,g)===!1)return}b=b.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[t,f,g]),resetTracking();return}}logError(t,s,i,n,c)}function logError(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1,i=queue[n],r=getId(i);r<t||r===t&&i.flags&2?e=n+1:s=n}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),s=queue[queue.length-1];!s||!(t.flags&2)&&e>=getId(s)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,s=flushIndex+1){for(;s<queue.length;s++){const n=queue[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;queue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((s,n)=>getId(s)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const s=activePostFlushCbs[postFlushIndex];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),callWithErrorHandling(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&(s.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let c;try{c=t(...i)}finally{setCurrentRenderingInstance(r),n._d&&setBlockTracking(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const s=getComponentPublicInstance(currentRenderingInstance),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,c,b,f=EMPTY_OBJ]=e[i];r&&(isFunction$1(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(c),n.push({dir:r,instance:s,value:c,oldValue:void 0,arg:b,modifiers:f}))}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let c=0;c<i.length;c++){const b=i[c];r&&(b.oldValue=r[c].value);let f=b.dir[n];f&&(pauseTracking(),callWithAsyncErrorHandling(f,s,8,[t.el,b,t,e]),resetTracking())}}function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=getCurrentInstance();if(n||currentApp){let i=currentApp?currentApp._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction$1(e)?e.call(n&&n.proxy):e}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,e){return doWatch(t,null,e)}function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,flush:r,once:c}=s,b=extend({},s),f=e&&n||!e&&r!=="post";let g;if(isInSSRComponentSetup){if(r==="sync"){const x=useSSRContext();g=x.__watcherHandles||(x.__watcherHandles=[])}else if(!f){const x=()=>{};return x.stop=NOOP,x.resume=NOOP,x.pause=NOOP,x}}const o=currentInstance;b.call=(x,R,M)=>callWithAsyncErrorHandling(x,o,R,M);let w=!1;r==="post"?b.scheduler=x=>{queuePostRenderEffect(x,o&&o.suspense)}:r!=="sync"&&(w=!0,b.scheduler=(x,R)=>{R?x():queueJob(x)}),b.augmentJob=x=>{e&&(x.flags|=4),w&&(x.flags|=2,o&&(x.id=o.uid,x.i=o))};const T=watch$1(t,e,b);return isInSSRComponentSetup&&(g?g.push(T):f&&T()),T}function instanceWatch(t,e,s){const n=this.proxy,i=isString$1(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let r;isFunction$1(e)?r=e:(r=e.handler,s=e);const c=setCurrentInstance(this),b=doWatch(i,r.bind(n),s);return c(),b}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport,leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((R,M)=>setRef(R,e&&(isArray(e)?e[M]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(t,e,s,n.component.subTree);return}const r=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,c=i?null:r,{i:b,r:f}=t,g=e&&e.r,o=b.refs===EMPTY_OBJ?b.refs={}:b.refs,w=b.setupState,T=toRaw(w),x=w===EMPTY_OBJ?NO:R=>hasOwn(T,R);if(g!=null&&g!==f){if(invalidatePendingSetRef(e),isString$1(g))o[g]=null,x(g)&&(w[g]=null);else if(isRef(g)){g.value=null;const R=e;R.k&&(o[R.k]=null)}}if(isFunction$1(f))callWithErrorHandling(f,b,12,[c,o]);else{const R=isString$1(f),M=isRef(f);if(R||M){const E=()=>{if(t.f){const C=R?x(f)?w[f]:o[f]:f.value;if(i)isArray(C)&&remove(C,r);else if(isArray(C))C.includes(r)||C.push(r);else if(R)o[f]=[r],x(f)&&(w[f]=o[f]);else{const P=[r];f.value=P,t.k&&(o[t.k]=P)}}else R?(o[f]=c,x(f)&&(w[f]=c)):M&&(f.value=c,t.k&&(o[t.k]=c))};if(c){const C=()=>{E(),pendingSetRefMap.delete(t)};C.id=-1,pendingSetRefMap.set(t,C),queuePostRenderEffect(C,s)}else invalidatePendingSetRef(t),E()}}}function invalidatePendingSetRef(t){const e=pendingSetRefMap.get(t);e&&(e.flags|=8,pendingSetRefMap.delete(t))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...c)=>{pauseTracking();const b=setCurrentInstance(s),f=callWithAsyncErrorHandling(e,s,t,c);return b(),resetTracking(),f});return n?i.unshift(r):i.push(r),r}}const createHook=t=>(e,s=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const r=s&&s[n],c=isArray(t);if(c||isString$1(t)){const b=c&&isReactive(t);let f=!1,g=!1;b&&(f=!isShallow(t),g=isReadonly(t),t=shallowReadArray(t)),i=new Array(t.length);for(let o=0,w=t.length;o<w;o++)i[o]=e(f?g?toReadonly(toReactive(t[o])):toReactive(t[o]):t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let b=0;b<t;b++)i[b]=e(b+1,b,void 0,r&&r[b])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(b,f)=>e(b,f,void 0,r&&r[f]));else{const b=Object.keys(t);i=new Array(b.length);for(let f=0,g=b.length;f<g;f++){const o=b[f];i[f]=e(t[o],o,f,r&&r[f])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:c,type:b,appContext:f}=t;if(e[0]!=="$"){const T=c[e];if(T!==void 0)switch(T){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(hasSetupBinding(n,e))return c[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return c[e]=2,i[e];if(hasOwn(r,e))return c[e]=3,r[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return c[e]=4,s[e];shouldCacheAccess&&(c[e]=0)}}const g=publicPropertiesMap[e];let o,w;if(g)return e==="$attrs"&&track(t.attrs,"get",""),g(t);if((o=b.__cssModules)&&(o=o[e]))return o;if(s!==EMPTY_OBJ&&hasOwn(s,e))return c[e]=4,s[e];if(w=f.config.globalProperties,hasOwn(w,e))return w[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,props:r,type:c}},b){let f;return!!(s[b]||t!==EMPTY_OBJ&&b[0]!=="$"&&hasOwn(t,b)||hasSetupBinding(e,b)||hasOwn(r,b)||hasOwn(n,b)||hasOwn(publicPropertiesMap,b)||hasOwn(i.config.globalProperties,b)||(f=c.__cssModules)&&f[b])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:c,watch:b,provide:f,inject:g,created:o,beforeMount:w,mounted:T,beforeUpdate:x,updated:R,activated:M,deactivated:E,beforeDestroy:C,beforeUnmount:P,destroyed:O,unmounted:F,render:m,renderTracked:A,renderTriggered:H,errorCaptured:k,serverPrefetch:_,expose:B,inheritAttrs:L,components:Q,directives:st,filters:$}=e;if(g&&resolveInjections(g,n,null),c)for(const mt in c){const X=c[mt];isFunction$1(X)&&(n[mt]=X.bind(s))}if(i){const mt=i.call(s,s);isObject(mt)&&(t.data=reactive(mt))}if(shouldCacheAccess=!0,r)for(const mt in r){const X=r[mt],yt=isFunction$1(X)?X.bind(s,s):isFunction$1(X.get)?X.get.bind(s,s):NOOP,wt=!isFunction$1(X)&&isFunction$1(X.set)?X.set.bind(s):NOOP,Rt=computed({get:yt,set:wt});Object.defineProperty(n,mt,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:kt=>Rt.value=kt})}if(b)for(const mt in b)createWatcher(b[mt],n,s,mt);if(f){const mt=isFunction$1(f)?f.call(s):f;Reflect.ownKeys(mt).forEach(X=>{provide(X,mt[X])})}o&&callHook(o,t,"c");function pt(mt,X){isArray(X)?X.forEach(yt=>mt(yt.bind(s))):X&&mt(X.bind(s))}if(pt(onBeforeMount,w),pt(onMounted,T),pt(onBeforeUpdate,x),pt(onUpdated,R),pt(onActivated,M),pt(onDeactivated,E),pt(onErrorCaptured,k),pt(onRenderTracked,A),pt(onRenderTriggered,H),pt(onBeforeUnmount,P),pt(onUnmounted,F),pt(onServerPrefetch,_),isArray(B))if(B.length){const mt=t.exposed||(t.exposed={});B.forEach(X=>{Object.defineProperty(mt,X,{get:()=>s[X],set:yt=>s[X]=yt,enumerable:!0})})}else t.exposed||(t.exposed={});m&&t.render===NOOP&&(t.render=m),L!=null&&(t.inheritAttrs=L),Q&&(t.components=Q),st&&(t.directives=st),_&&markAsyncBoundary(t)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let r;isObject(i)?"default"in i?r=inject(i.from||n,i.default,!0):r=inject(i.from||n):r=inject(i),isRef(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:c=>r.value=c}):e[n]=r}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){let i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString$1(t)){const r=e[t];isFunction$1(r)&&watch(i,r)}else if(isFunction$1(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(r=>createWatcher(r,e,s,n));else{const r=isFunction$1(t.handler)?t.handler.bind(s):e[t.handler];isFunction$1(r)&&watch(i,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:c}}=t.appContext,b=r.get(e);let f;return b?f=b:!i.length&&!s&&!n?f=e:(f={},i.length&&i.forEach(g=>mergeOptions(f,g,c,!0)),mergeOptions(f,e,c)),isObject(e)&&r.set(e,f),f}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&mergeOptions(t,r,s,!0),i&&i.forEach(c=>mergeOptions(t,c,s,!0));for(const c in e)if(!(n&&c==="expose")){const b=internalOptionMergeStrats[c]||s&&s[c];t[c]=b?b(t[c],e[c]):e[c]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction$1(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const r=createAppContext(),c=new WeakSet,b=[];let f=!1;const g=r.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(o){},use(o,...w){return c.has(o)||(o&&isFunction$1(o.install)?(c.add(o),o.install(g,...w)):isFunction$1(o)&&(c.add(o),o(g,...w))),g},mixin(o){return r.mixins.includes(o)||r.mixins.push(o),g},component(o,w){return w?(r.components[o]=w,g):r.components[o]},directive(o,w){return w?(r.directives[o]=w,g):r.directives[o]},mount(o,w,T){if(!f){const x=g._ceVNode||createVNode(n,i);return x.appContext=r,T===!0?T="svg":T===!1&&(T=void 0),w&&e?e(x,o):t(x,o,T),f=!0,g._container=o,o.__vue_app__=g,getComponentPublicInstance(x.component)}},onUnmount(o){b.push(o)},unmount(){f&&(callWithAsyncErrorHandling(b,g._instance,16),t(null,g._container),delete g._container.__vue_app__)},provide(o,w){return r.provides[o]=w,g},runWithContext(o){const w=currentApp;currentApp=g;try{return o()}finally{currentApp=w}}};return g}}let currentApp=null;const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const r=e.startsWith("update:"),c=r&&getModelModifiers(n,e.slice(7));c&&(c.trim&&(i=s.map(o=>isString$1(o)?o.trim():o)),c.number&&(i=s.map(looseToNumber)));let b,f=n[b=toHandlerKey(e)]||n[b=toHandlerKey(camelize(e))];!f&&r&&(f=n[b=toHandlerKey(hyphenate(e))]),f&&callWithAsyncErrorHandling(f,t,6,i);const g=n[b+"Once"];if(g){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,callWithAsyncErrorHandling(g,t,6,i)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(t,e,s=!1){const n=s?mixinEmitsCache:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let c={},b=!1;if(!isFunction$1(t)){const f=g=>{const o=normalizeEmitsOptions(g,e,!0);o&&(b=!0,extend(c,o))};!s&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}return!r&&!b?(isObject(t)&&n.set(t,null),null):(isArray(r)?r.forEach(f=>c[f]=null):extend(c,r),isObject(t)&&n.set(t,c),c)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:c,attrs:b,emit:f,render:g,renderCache:o,props:w,data:T,setupState:x,ctx:R,inheritAttrs:M}=t,E=setCurrentRenderingInstance(t);let C,P;try{if(s.shapeFlag&4){const F=i||n,m=F;C=normalizeVNode(g.call(m,F,o,w,x,T,R)),P=b}else{const F=e;C=normalizeVNode(F.length>1?F(w,{attrs:b,slots:c,emit:f}):F(w,null)),P=e.props?b:getFunctionalFallthrough(b)}}catch(F){blockStack.length=0,handleError(F,t,1),C=createVNode(Comment)}let O=C;if(P&&M!==!1){const F=Object.keys(P),{shapeFlag:m}=O;F.length&&m&7&&(r&&F.some(isModelListener)&&(P=filterModelListeners(P,r)),O=cloneVNode(O,P,!1,!0))}return s.dirs&&(O=cloneVNode(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(s.dirs):s.dirs),s.transition&&setTransitionHooks(O,s.transition),C=O,setCurrentRenderingInstance(E),C}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:r}=t,{props:c,children:b,patchFlag:f}=e,g=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&f>=0){if(f&1024)return!0;if(f&16)return n?hasPropsChanged(n,c,g):!!c;if(f&8){const o=e.dynamicProps;for(let w=0;w<o.length;w++){const T=o[w];if(c[T]!==n[T]&&!isEmitListener(g,T))return!0}}}else return(i||b)&&(!b||!b.$stable)?!0:n===c?!1:n?c?hasPropsChanged(n,c,g):!0:!!c;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!isEmitListener(s,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,s,n=!1){const i={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,i,r);for(const c in t.propsOptions[0])c in i||(i[c]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function updateProps(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:c}}=t,b=toRaw(i),[f]=t.propsOptions;let g=!1;if((n||c>0)&&!(c&16)){if(c&8){const o=t.vnode.dynamicProps;for(let w=0;w<o.length;w++){let T=o[w];if(isEmitListener(t.emitsOptions,T))continue;const x=e[T];if(f)if(hasOwn(r,T))x!==r[T]&&(r[T]=x,g=!0);else{const R=camelize(T);i[R]=resolvePropValue(f,b,R,x,t,!1)}else x!==r[T]&&(r[T]=x,g=!0)}}}else{setFullProps(t,e,i,r)&&(g=!0);let o;for(const w in b)(!e||!hasOwn(e,w)&&((o=hyphenate(w))===w||!hasOwn(e,o)))&&(f?s&&(s[w]!==void 0||s[o]!==void 0)&&(i[w]=resolvePropValue(f,b,w,void 0,t,!0)):delete i[w]);if(r!==b)for(const w in r)(!e||!hasOwn(e,w))&&(delete r[w],g=!0)}g&&trigger(t.attrs,"set","")}function setFullProps(t,e,s,n){const[i,r]=t.propsOptions;let c=!1,b;if(e)for(let f in e){if(isReservedProp(f))continue;const g=e[f];let o;i&&hasOwn(i,o=camelize(f))?!r||!r.includes(o)?s[o]=g:(b||(b={}))[o]=g:isEmitListener(t.emitsOptions,f)||(!(f in n)||g!==n[f])&&(n[f]=g,c=!0)}if(r){const f=toRaw(s),g=b||EMPTY_OBJ;for(let o=0;o<r.length;o++){const w=r[o];s[w]=resolvePropValue(i,f,w,g[w],t,!hasOwn(g,w))}}return c}function resolvePropValue(t,e,s,n,i,r){const c=t[s];if(c!=null){const b=hasOwn(c,"default");if(b&&n===void 0){const f=c.default;if(c.type!==Function&&!c.skipFactory&&isFunction$1(f)){const{propsDefaults:g}=i;if(s in g)n=g[s];else{const o=setCurrentInstance(i);n=g[s]=f.call(null,e),o()}}else n=f;i.ce&&i.ce._setProp(s,n)}c[0]&&(r&&!b?n=!1:c[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,s=!1){const n=s?mixinPropsCache:e.propsCache,i=n.get(t);if(i)return i;const r=t.props,c={},b=[];let f=!1;if(!isFunction$1(t)){const o=w=>{f=!0;const[T,x]=normalizePropsOptions(w,e,!0);extend(c,T),x&&b.push(...x)};!s&&e.mixins.length&&e.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}if(!r&&!f)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(r))for(let o=0;o<r.length;o++){const w=camelize(r[o]);validatePropName(w)&&(c[w]=EMPTY_OBJ)}else if(r)for(const o in r){const w=camelize(o);if(validatePropName(w)){const T=r[o],x=c[w]=isArray(T)||isFunction$1(T)?{type:T}:extend({},T),R=x.type;let M=!1,E=!0;if(isArray(R))for(let C=0;C<R.length;++C){const P=R[C],O=isFunction$1(P)&&P.name;if(O==="Boolean"){M=!0;break}else O==="String"&&(E=!1)}else M=isFunction$1(R)&&R.name==="Boolean";x[0]=M,x[1]=E,(M||hasOwn(x,"default"))&&b.push(w)}}const g=[c,b];return isObject(t)&&n.set(t,g),g}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const r=t[i];if(isFunction$1(r))e[i]=normalizeSlot(i,r,n);else if(r!=null){const c=normalizeSlotValue(r);e[i]=()=>c}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},assignSlots=(t,e,s)=>{for(const n in e)(s||!isInternalKey(n))&&(t[n]=e[n])},initSlots=(t,e,s)=>{const n=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const i=e._;i?(assignSlots(n,e,s),s&&def(n,"_",i,!0)):normalizeObjectSlots(e,n)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,c=EMPTY_OBJ;if(n.shapeFlag&32){const b=e._;b?s&&b===1?r=!1:assignSlots(i,e,s):(r=!e.$stable,normalizeObjectSlots(e,i)),c=e}else e&&(normalizeVNodeSlots(t,e),c={default:1});if(r)for(const b in i)!isInternalKey(b)&&c[b]==null&&delete i[b]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:c,createText:b,createComment:f,setText:g,setElementText:o,parentNode:w,nextSibling:T,setScopeId:x=NOOP,insertStaticContent:R}=t,M=(v,I,W,rt=null,K=null,ut=null,St=void 0,ft=null,bt=!!I.dynamicChildren)=>{if(v===I)return;v&&!isSameVNodeType(v,I)&&(rt=y(v),kt(v,K,ut,!0),v=null),I.patchFlag===-2&&(bt=!1,I.dynamicChildren=null);const{type:Z,ref:J,shapeFlag:q}=I;switch(Z){case Text:E(v,I,W,rt);break;case Comment:C(v,I,W,rt);break;case Static:v==null&&P(I,W,rt,St);break;case Fragment:Q(v,I,W,rt,K,ut,St,ft,bt);break;default:q&1?m(v,I,W,rt,K,ut,St,ft,bt):q&6?st(v,I,W,rt,K,ut,St,ft,bt):(q&64||q&128)&&Z.process(v,I,W,rt,K,ut,St,ft,bt,U)}J!=null&&K?setRef(J,v&&v.ref,ut,I||v,!I):J==null&&v&&v.ref!=null&&setRef(v.ref,null,ut,v,!0)},E=(v,I,W,rt)=>{if(v==null)n(I.el=b(I.children),W,rt);else{const K=I.el=v.el;I.children!==v.children&&g(K,I.children)}},C=(v,I,W,rt)=>{v==null?n(I.el=f(I.children||""),W,rt):I.el=v.el},P=(v,I,W,rt)=>{[v.el,v.anchor]=R(v.children,I,W,rt,v.el,v.anchor)},O=({el:v,anchor:I},W,rt)=>{let K;for(;v&&v!==I;)K=T(v),n(v,W,rt),v=K;n(I,W,rt)},F=({el:v,anchor:I})=>{let W;for(;v&&v!==I;)W=T(v),i(v),v=W;i(I)},m=(v,I,W,rt,K,ut,St,ft,bt)=>{if(I.type==="svg"?St="svg":I.type==="math"&&(St="mathml"),v==null)A(I,W,rt,K,ut,St,ft,bt);else{const Z=v.el&&v.el._isVueCE?v.el:null;try{Z&&Z._beginPatch(),_(v,I,K,ut,St,ft,bt)}finally{Z&&Z._endPatch()}}},A=(v,I,W,rt,K,ut,St,ft)=>{let bt,Z;const{props:J,shapeFlag:q,transition:ct,dirs:At}=v;if(bt=v.el=c(v.type,ut,J&&J.is,J),q&8?o(bt,v.children):q&16&&k(v.children,bt,null,rt,K,resolveChildrenNamespace(v,ut),St,ft),At&&invokeDirectiveHook(v,null,rt,"created"),H(bt,v,v.scopeId,St,rt),J){for(const Dt in J)Dt!=="value"&&!isReservedProp(Dt)&&r(bt,Dt,null,J[Dt],ut,rt);"value"in J&&r(bt,"value",null,J.value,ut),(Z=J.onVnodeBeforeMount)&&invokeVNodeHook(Z,rt,v)}At&&invokeDirectiveHook(v,null,rt,"beforeMount");const Et=needTransition(K,ct);Et&&ct.beforeEnter(bt),n(bt,I,W),((Z=J&&J.onVnodeMounted)||Et||At)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,rt,v),Et&&ct.enter(bt),At&&invokeDirectiveHook(v,null,rt,"mounted")},K)},H=(v,I,W,rt,K)=>{if(W&&x(v,W),rt)for(let ut=0;ut<rt.length;ut++)x(v,rt[ut]);if(K){let ut=K.subTree;if(I===ut||isSuspense(ut.type)&&(ut.ssContent===I||ut.ssFallback===I)){const St=K.vnode;H(v,St,St.scopeId,St.slotScopeIds,K.parent)}}},k=(v,I,W,rt,K,ut,St,ft,bt=0)=>{for(let Z=bt;Z<v.length;Z++){const J=v[Z]=ft?cloneIfMounted(v[Z]):normalizeVNode(v[Z]);M(null,J,I,W,rt,K,ut,St,ft)}},_=(v,I,W,rt,K,ut,St)=>{const ft=I.el=v.el;let{patchFlag:bt,dynamicChildren:Z,dirs:J}=I;bt|=v.patchFlag&16;const q=v.props||EMPTY_OBJ,ct=I.props||EMPTY_OBJ;let At;if(W&&toggleRecurse(W,!1),(At=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(At,W,I,v),J&&invokeDirectiveHook(I,v,W,"beforeUpdate"),W&&toggleRecurse(W,!0),(q.innerHTML&&ct.innerHTML==null||q.textContent&&ct.textContent==null)&&o(ft,""),Z?B(v.dynamicChildren,Z,ft,W,rt,resolveChildrenNamespace(I,K),ut):St||X(v,I,ft,null,W,rt,resolveChildrenNamespace(I,K),ut,!1),bt>0){if(bt&16)L(ft,q,ct,W,K);else if(bt&2&&q.class!==ct.class&&r(ft,"class",null,ct.class,K),bt&4&&r(ft,"style",q.style,ct.style,K),bt&8){const Et=I.dynamicProps;for(let Dt=0;Dt<Et.length;Dt++){const Lt=Et[Dt],jt=q[Lt],Vt=ct[Lt];(Vt!==jt||Lt==="value")&&r(ft,Lt,jt,Vt,K,W)}}bt&1&&v.children!==I.children&&o(ft,I.children)}else!St&&Z==null&&L(ft,q,ct,W,K);((At=ct.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{At&&invokeVNodeHook(At,W,I,v),J&&invokeDirectiveHook(I,v,W,"updated")},rt)},B=(v,I,W,rt,K,ut,St)=>{for(let ft=0;ft<I.length;ft++){const bt=v[ft],Z=I[ft],J=bt.el&&(bt.type===Fragment||!isSameVNodeType(bt,Z)||bt.shapeFlag&198)?w(bt.el):W;M(bt,Z,J,null,rt,K,ut,St,!0)}},L=(v,I,W,rt,K)=>{if(I!==W){if(I!==EMPTY_OBJ)for(const ut in I)!isReservedProp(ut)&&!(ut in W)&&r(v,ut,I[ut],null,K,rt);for(const ut in W){if(isReservedProp(ut))continue;const St=W[ut],ft=I[ut];St!==ft&&ut!=="value"&&r(v,ut,ft,St,K,rt)}"value"in W&&r(v,"value",I.value,W.value,K)}},Q=(v,I,W,rt,K,ut,St,ft,bt)=>{const Z=I.el=v?v.el:b(""),J=I.anchor=v?v.anchor:b("");let{patchFlag:q,dynamicChildren:ct,slotScopeIds:At}=I;At&&(ft=ft?ft.concat(At):At),v==null?(n(Z,W,rt),n(J,W,rt),k(I.children||[],W,J,K,ut,St,ft,bt)):q>0&&q&64&&ct&&v.dynamicChildren&&v.dynamicChildren.length===ct.length?(B(v.dynamicChildren,ct,W,K,ut,St,ft),(I.key!=null||K&&I===K.subTree)&&traverseStaticChildren(v,I,!0)):X(v,I,W,J,K,ut,St,ft,bt)},st=(v,I,W,rt,K,ut,St,ft,bt)=>{I.slotScopeIds=ft,v==null?I.shapeFlag&512?K.ctx.activate(I,W,rt,St,bt):$(I,W,rt,K,ut,St,bt):ot(v,I,bt)},$=(v,I,W,rt,K,ut,St)=>{const ft=v.component=createComponentInstance(v,rt,K);if(isKeepAlive(v)&&(ft.ctx.renderer=U),setupComponent(ft,!1,St),ft.asyncDep){if(K&&K.registerDep(ft,pt,St),!v.el){const bt=ft.subTree=createVNode(Comment);C(null,bt,I,W),v.placeholder=bt.el}}else pt(ft,v,I,W,K,ut,St)},ot=(v,I,W)=>{const rt=I.component=v.component;if(shouldUpdateComponent(v,I,W))if(rt.asyncDep&&!rt.asyncResolved){mt(rt,I,W);return}else rt.next=I,rt.update();else I.el=v.el,rt.vnode=I},pt=(v,I,W,rt,K,ut,St)=>{const ft=()=>{if(v.isMounted){let{next:q,bu:ct,u:At,parent:Et,vnode:Dt}=v;{const Wt=locateNonHydratedAsyncRoot(v);if(Wt){q&&(q.el=Dt.el,mt(v,q,St)),Wt.asyncDep.then(()=>{v.isUnmounted||ft()});return}}let Lt=q,jt;toggleRecurse(v,!1),q?(q.el=Dt.el,mt(v,q,St)):q=Dt,ct&&invokeArrayFns(ct),(jt=q.props&&q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(jt,Et,q,Dt),toggleRecurse(v,!0);const Vt=renderComponentRoot(v),Gt=v.subTree;v.subTree=Vt,M(Gt,Vt,w(Gt.el),y(Gt),v,K,ut),q.el=Vt.el,Lt===null&&updateHOCHostEl(v,Vt.el),At&&queuePostRenderEffect(At,K),(jt=q.props&&q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(jt,Et,q,Dt),K)}else{let q;const{el:ct,props:At}=I,{bm:Et,m:Dt,parent:Lt,root:jt,type:Vt}=v,Gt=isAsyncWrapper(I);if(toggleRecurse(v,!1),Et&&invokeArrayFns(Et),!Gt&&(q=At&&At.onVnodeBeforeMount)&&invokeVNodeHook(q,Lt,I),toggleRecurse(v,!0),ct&&dt){const Wt=()=>{v.subTree=renderComponentRoot(v),dt(ct,v.subTree,v,K,null)};Gt&&Vt.__asyncHydrate?Vt.__asyncHydrate(ct,v,Wt):Wt()}else{jt.ce&&jt.ce._def.shadowRoot!==!1&&jt.ce._injectChildStyle(Vt);const Wt=v.subTree=renderComponentRoot(v);M(null,Wt,W,rt,v,K,ut),I.el=Wt.el}if(Dt&&queuePostRenderEffect(Dt,K),!Gt&&(q=At&&At.onVnodeMounted)){const Wt=I;queuePostRenderEffect(()=>invokeVNodeHook(q,Lt,Wt),K)}(I.shapeFlag&256||Lt&&isAsyncWrapper(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&v.a&&queuePostRenderEffect(v.a,K),v.isMounted=!0,I=W=rt=null}};v.scope.on();const bt=v.effect=new ReactiveEffect(ft);v.scope.off();const Z=v.update=bt.run.bind(bt),J=v.job=bt.runIfDirty.bind(bt);J.i=v,J.id=v.uid,bt.scheduler=()=>queueJob(J),toggleRecurse(v,!0),Z()},mt=(v,I,W)=>{I.component=v;const rt=v.vnode.props;v.vnode=I,v.next=null,updateProps(v,I.props,rt,W),updateSlots(v,I.children,W),pauseTracking(),flushPreFlushCbs(v),resetTracking()},X=(v,I,W,rt,K,ut,St,ft,bt=!1)=>{const Z=v&&v.children,J=v?v.shapeFlag:0,q=I.children,{patchFlag:ct,shapeFlag:At}=I;if(ct>0){if(ct&128){wt(Z,q,W,rt,K,ut,St,ft,bt);return}else if(ct&256){yt(Z,q,W,rt,K,ut,St,ft,bt);return}}At&8?(J&16&&u(Z,K,ut),q!==Z&&o(W,q)):J&16?At&16?wt(Z,q,W,rt,K,ut,St,ft,bt):u(Z,K,ut,!0):(J&8&&o(W,""),At&16&&k(q,W,rt,K,ut,St,ft,bt))},yt=(v,I,W,rt,K,ut,St,ft,bt)=>{v=v||EMPTY_ARR,I=I||EMPTY_ARR;const Z=v.length,J=I.length,q=Math.min(Z,J);let ct;for(ct=0;ct<q;ct++){const At=I[ct]=bt?cloneIfMounted(I[ct]):normalizeVNode(I[ct]);M(v[ct],At,W,null,K,ut,St,ft,bt)}Z>J?u(v,K,ut,!0,!1,q):k(I,W,rt,K,ut,St,ft,bt,q)},wt=(v,I,W,rt,K,ut,St,ft,bt)=>{let Z=0;const J=I.length;let q=v.length-1,ct=J-1;for(;Z<=q&&Z<=ct;){const At=v[Z],Et=I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]);if(isSameVNodeType(At,Et))M(At,Et,W,null,K,ut,St,ft,bt);else break;Z++}for(;Z<=q&&Z<=ct;){const At=v[q],Et=I[ct]=bt?cloneIfMounted(I[ct]):normalizeVNode(I[ct]);if(isSameVNodeType(At,Et))M(At,Et,W,null,K,ut,St,ft,bt);else break;q--,ct--}if(Z>q){if(Z<=ct){const At=ct+1,Et=At<J?I[At].el:rt;for(;Z<=ct;)M(null,I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]),W,Et,K,ut,St,ft,bt),Z++}}else if(Z>ct)for(;Z<=q;)kt(v[Z],K,ut,!0),Z++;else{const At=Z,Et=Z,Dt=new Map;for(Z=Et;Z<=ct;Z++){const at=I[Z]=bt?cloneIfMounted(I[Z]):normalizeVNode(I[Z]);at.key!=null&&Dt.set(at.key,Z)}let Lt,jt=0;const Vt=ct-Et+1;let Gt=!1,Wt=0;const Yt=new Array(Vt);for(Z=0;Z<Vt;Z++)Yt[Z]=0;for(Z=At;Z<=q;Z++){const at=v[Z];if(jt>=Vt){kt(at,K,ut,!0);continue}let nt;if(at.key!=null)nt=Dt.get(at.key);else for(Lt=Et;Lt<=ct;Lt++)if(Yt[Lt-Et]===0&&isSameVNodeType(at,I[Lt])){nt=Lt;break}nt===void 0?kt(at,K,ut,!0):(Yt[nt-Et]=Z+1,nt>=Wt?Wt=nt:Gt=!0,M(at,I[nt],W,null,K,ut,St,ft,bt),jt++)}const vt=Gt?getSequence(Yt):EMPTY_ARR;for(Lt=vt.length-1,Z=Vt-1;Z>=0;Z--){const at=Et+Z,nt=I[at],Ct=I[at+1],xt=at+1<J?Ct.el||resolveAsyncComponentPlaceholder(Ct):rt;Yt[Z]===0?M(null,nt,W,xt,K,ut,St,ft,bt):Gt&&(Lt<0||Z!==vt[Lt]?Rt(nt,W,xt,2):Lt--)}}},Rt=(v,I,W,rt,K=null)=>{const{el:ut,type:St,transition:ft,children:bt,shapeFlag:Z}=v;if(Z&6){Rt(v.component.subTree,I,W,rt);return}if(Z&128){v.suspense.move(I,W,rt);return}if(Z&64){St.move(v,I,W,U);return}if(St===Fragment){n(ut,I,W);for(let q=0;q<bt.length;q++)Rt(bt[q],I,W,rt);n(v.anchor,I,W);return}if(St===Static){O(v,I,W);return}if(rt!==2&&Z&1&&ft)if(rt===0)ft.beforeEnter(ut),n(ut,I,W),queuePostRenderEffect(()=>ft.enter(ut),K);else{const{leave:q,delayLeave:ct,afterLeave:At}=ft,Et=()=>{v.ctx.isUnmounted?i(ut):n(ut,I,W)},Dt=()=>{ut._isLeaving&&ut[leaveCbKey](!0),q(ut,()=>{Et(),At&&At()})};ct?ct(ut,Et,Dt):Dt()}else n(ut,I,W)},kt=(v,I,W,rt=!1,K=!1)=>{const{type:ut,props:St,ref:ft,children:bt,dynamicChildren:Z,shapeFlag:J,patchFlag:q,dirs:ct,cacheIndex:At}=v;if(q===-2&&(K=!1),ft!=null&&(pauseTracking(),setRef(ft,null,W,v,!0),resetTracking()),At!=null&&(I.renderCache[At]=void 0),J&256){I.ctx.deactivate(v);return}const Et=J&1&&ct,Dt=!isAsyncWrapper(v);let Lt;if(Dt&&(Lt=St&&St.onVnodeBeforeUnmount)&&invokeVNodeHook(Lt,I,v),J&6)d(v.component,W,rt);else{if(J&128){v.suspense.unmount(W,rt);return}Et&&invokeDirectiveHook(v,null,I,"beforeUnmount"),J&64?v.type.remove(v,I,W,U,rt):Z&&!Z.hasOnce&&(ut!==Fragment||q>0&&q&64)?u(Z,I,W,!1,!0):(ut===Fragment&&q&384||!K&&J&16)&&u(bt,I,W),rt&&j(v)}(Dt&&(Lt=St&&St.onVnodeUnmounted)||Et)&&queuePostRenderEffect(()=>{Lt&&invokeVNodeHook(Lt,I,v),Et&&invokeDirectiveHook(v,null,I,"unmounted")},W)},j=v=>{const{type:I,el:W,anchor:rt,transition:K}=v;if(I===Fragment){h(W,rt);return}if(I===Static){F(v);return}const ut=()=>{i(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(v.shapeFlag&1&&K&&!K.persisted){const{leave:St,delayLeave:ft}=K,bt=()=>St(W,ut);ft?ft(v.el,ut,bt):bt()}else ut()},h=(v,I)=>{let W;for(;v!==I;)W=T(v),i(v),v=W;i(I)},d=(v,I,W)=>{const{bum:rt,scope:K,job:ut,subTree:St,um:ft,m:bt,a:Z}=v;invalidateMount(bt),invalidateMount(Z),rt&&invokeArrayFns(rt),K.stop(),ut&&(ut.flags|=8,kt(St,v,I,W)),ft&&queuePostRenderEffect(ft,I),queuePostRenderEffect(()=>{v.isUnmounted=!0},I)},u=(v,I,W,rt=!1,K=!1,ut=0)=>{for(let St=ut;St<v.length;St++)kt(v[St],I,W,rt,K)},y=v=>{if(v.shapeFlag&6)return y(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const I=T(v.anchor||v.el),W=I&&I[TeleportEndKey];return W?T(W):I};let S=!1;const N=(v,I,W)=>{let rt;v==null?I._vnode&&(kt(I._vnode,null,null,!0),rt=I._vnode.component):M(I._vnode||null,v,I,null,null,null,W),I._vnode=v,S||(S=!0,flushPreFlushCbs(rt),flushPostFlushCbs(),S=!1)},U={p:M,um:kt,m:Rt,r:j,mt:$,mc:k,pc:X,pbc:B,n:y,o:t};let Y,dt;return e&&([Y,dt]=e(U)),{render:N,hydrate:Y,createApp:createAppAPI(N,Y)}}function resolveChildrenNamespace({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function toggleRecurse({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let r=0;r<n.length;r++){const c=n[r];let b=i[r];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=i[r]=cloneIfMounted(i[r]),b.el=c.el),!s&&b.patchFlag!==-2&&traverseStaticChildren(c,b)),b.type===Text&&(b.patchFlag!==-1?b.el=c.el:b.__elIndex=r+(t.type===Fragment?1:0)),b.type===Comment&&!b.el&&(b.el=c.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,r,c,b;const f=t.length;for(n=0;n<f;n++){const g=t[n];if(g!==0){if(i=s[s.length-1],t[i]<g){e[n]=i,s.push(n);continue}for(r=0,c=s.length-1;r<c;)b=r+c>>1,t[s[b]]<g?r=b+1:c=b;g<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,c=s[r-1];r-- >0;)s[r]=c,c=e[c];return s}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function resolveAsyncComponentPlaceholder(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?resolveAsyncComponentPlaceholder(e.subTree):null}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,r){return setupBlock(createBaseVNode(t,e,s,n,i,r,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString$1(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,r=t===Fragment?0:1,c=!1,b=!1){const f={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return b?(normalizeChildren(f,s),r&128&&t.normalize(f)):s&&(f.shapeFlag|=isString$1(s)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(f.patchFlag>0||r&6)&&f.patchFlag!==32&&currentBlock.push(f),f}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const b=cloneVNode(t,e,!0);return s&&normalizeChildren(b,s),isBlockTreeEnabled>0&&!r&&currentBlock&&(b.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=b:currentBlock.push(b)),b.patchFlag=-2,b}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:b,style:f}=e;b&&!isString$1(b)&&(e.class=normalizeClass(b)),isObject(f)&&(isProxy(f)&&!isArray(f)&&(f=extend({},f)),e.style=normalizeStyle(f))}const c=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,s,n,i,c,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,s=!1,n=!1){const{props:i,ref:r,patchFlag:c,children:b,transition:f}=t,g=e?mergeProps(i||{},e):i,o={__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&normalizeKey(g),ref:e&&e.ref?s&&r?isArray(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:b,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?c===-1?16:c|16:c,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:f,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return f&&n&&setTransitionHooks(o,f.clone(o)),o}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!isInternalObject(e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const r=e[i],c=n[i];c&&r!==c&&!(isArray(r)&&r.includes(c))&&(e[i]=r?[].concat(r,c):c)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),r=>{i.length>1?i.forEach(c=>c(r)):i[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",s=>currentInstance=s),setInSSRSetupState=e("__VUE_SSR_SETTERS__",s=>isInSSRComponentSetup=s)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,s=!1){e&&setInSSRSetupState(e);const{props:n,children:i}=t.vnode,r=isStatefulComponent(t);initProps(t,n,r,e),initSlots(t,i,s||e);const c=r?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),c}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:n}=s;if(n){pauseTracking();const i=t.setupContext=n.length>1?createSetupContext(t):null,r=setCurrentInstance(t),c=callWithErrorHandling(n,t,0,[t.props,i]),b=isPromise(c);if(resetTracking(),r(),(b||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),b){if(c.then(unsetCurrentInstance,unsetCurrentInstance),e)return c.then(f=>{handleSetupResult(t,f,e)}).catch(f=>{handleError(f,t,0)});t.asyncDep=c}else handleSetupResult(t,c,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:r,compilerOptions:c}=t.appContext.config,{delimiters:b,compilerOptions:f}=n,g=extend(extend({isCustomElement:r,delimiters:b},c),f);n.render=compile(i,g)}}t.render=n.render||NOOP}{const i=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,s=!1){let n=getComponentName(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t){const i=r=>{for(const c in r)if(r[c]===e)return c};n=i(t.components)||t.parent&&i(t.parent.type.components)||i(t.appContext.components)}return n?classify(n):s?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):s?doc.createElement(t,{is:s}):doc.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const c=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const b=templateContainer.content;if(n==="svg"||n==="mathml"){const f=b.firstChild;for(;f.firstChild;)b.appendChild(f.firstChild);b.removeChild(f)}e.insertBefore(b,s)}return[c?c.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,s){const n=t[vtcKey];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(t,e,s){const n=t.style,i=isString$1(s);let r=!1;if(s&&!i){if(e)if(isString$1(e))for(const c of e.split(";")){const b=c.slice(0,c.indexOf(":")).trim();s[b]==null&&setStyle(n,b,"")}else for(const c in e)s[c]==null&&setStyle(n,c,"");for(const c in s)c==="display"&&(r=!0),setStyle(n,c,s[c])}else if(i){if(e!==s){const c=n[CSS_VAR_TEXT];c&&(s+=";"+c),n.cssText=s,r=displayRE.test(s)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const r=prefixes[i]+n;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i,r=isSpecialBooleanAttr(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s):s==null||r&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,r?"":isSymbol(s)?String(s):s)}function patchDOMProp(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const b=r==="OPTION"?t.getAttribute("value")||"":t.value,f=s==null?t.type==="checkbox"?"on":"":String(s);(b!==f||!("_value"in t))&&(t.value=f),s==null&&t.removeAttribute(e),t._value=s;return}let c=!1;if(s===""||s==null){const b=typeof t[e];b==="boolean"?s=includeBooleanAttr(s):s==null&&b==="string"?(s="",c=!0):b==="number"&&(s=0,c=!0)}try{t[e]=s}catch{}c&&t.removeAttribute(i||e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}const veiKey=Symbol("_vei");function patchEvent(t,e,s,n,i=null){const r=t[veiKey]||(t[veiKey]={}),c=r[e];if(n&&c)c.value=n;else{const[b,f]=parseName(e);if(n){const g=r[e]=createInvoker(n,i);addEventListener(t,b,g,f)}else c&&(removeEventListener(t,b,c,f),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,s,n,i,r)=>{const c=i==="svg";e==="class"?patchClass(t,n,c):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,c))?(patchDOMProp(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,n,c,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString$1(n))?patchDOMProp(t,camelize(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,c))};function shouldSetAsProp(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString$1(s)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?s=>invokeArrayFns(e,s):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(t,e,s){return e&&(t=t.trim()),s&&(t=looseToNumber(t)),t}const vModelText={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[assignKey]=getModelAssigner(i);const r=n||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",c=>{c.target.composing||t[assignKey](castValue(t.value,s,r))}),(s||r)&&addEventListener(t,"change",()=>{t.value=castValue(t.value,s,r)}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},c){if(t[assignKey]=getModelAssigner(c),t.composing)return;const b=(r||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,f=e??"";b!==f&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===f)||(t.value=f))}},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const r=e._component;!isFunction$1(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const c=s(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),c},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Yt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=yt,e.bytesToString=Y,e.createValidAbsoluteUrl=Rt,e.getModificationDate=Et,e.getUuid=Gt,e.getVerbosityLevel=ot,e.info=pt,e.isArrayBuffer=ct,e.isArrayEqual=At,e.isNodeJS=void 0,e.normalizeUnicode=Vt,e.objectFromMap=W,e.objectSize=I,e.setVerbosityLevel=$,e.shadow=kt,e.string32=v,e.stringToBytes=dt,e.stringToPDFString=Z,e.stringToUTF8String=J,e.unreachable=X,e.utf8StringToString=q,e.warn=mt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const r=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=r;const c=1.35;e.LINE_FACTOR=c;const b=.35;e.LINE_DESCENT_FACTOR=b;const f=b/c;e.BASELINE_FACTOR=f;const g={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=g;const o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=o;const w="pdfjs_internal_editor_";e.AnnotationEditorPrefix=w;const T={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=T;const x={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=x;const R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=R;const M={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=M;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=E;const C={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=C;const P={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=P;const O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=O;const F={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=F;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=m;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=A;const H={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=H;const k={O:"PageOpen",C:"PageClose"};e.PageActionEventType=k;const _={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=_;const B={NONE:0,BINARY:1};e.CMapCompressionType=B;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=L;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let st=_.WARNINGS;function $(vt){Number.isInteger(vt)&&(st=vt)}function ot(){return st}function pt(vt){st>=_.INFOS&&console.log(`Info: ${vt}`)}function mt(vt){st>=_.WARNINGS&&console.log(`Warning: ${vt}`)}function X(vt){throw new Error(vt)}function yt(vt,at){vt||X(at)}function wt(vt){switch(vt==null?void 0:vt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rt(vt,at=null,nt=null){if(!vt)return null;try{if(nt&&typeof vt=="string"){if(nt.addDefaultProtocol&&vt.startsWith("www.")){const xt=vt.match(/\./g);(xt==null?void 0:xt.length)>=2&&(vt=`http://${vt}`)}if(nt.tryConvertEncoding)try{vt=J(vt)}catch{}}const Ct=at?new URL(vt,at):new URL(vt);if(wt(Ct))return Ct}catch{}return null}function kt(vt,at,nt,Ct=!1){return Object.defineProperty(vt,at,{value:nt,enumerable:!Ct,configurable:!0,writable:!1}),nt}const j=function(){function at(nt,Ct){this.constructor===at&&X("Cannot initialize BaseException."),this.message=nt,this.name=Ct}return at.prototype=new Error,at.constructor=at,at}();e.BaseException=j;class h extends j{constructor(at,nt){super(at,"PasswordException"),this.code=nt}}e.PasswordException=h;class d extends j{constructor(at,nt){super(at,"UnknownErrorException"),this.details=nt}}e.UnknownErrorException=d;class u extends j{constructor(at){super(at,"InvalidPDFException")}}e.InvalidPDFException=u;class y extends j{constructor(at){super(at,"MissingPDFException")}}e.MissingPDFException=y;class S extends j{constructor(at,nt){super(at,"UnexpectedResponseException"),this.status=nt}}e.UnexpectedResponseException=S;class N extends j{constructor(at){super(at,"FormatError")}}e.FormatError=N;class U extends j{constructor(at){super(at,"AbortException")}}e.AbortException=U;function Y(vt){(typeof vt!="object"||(vt==null?void 0:vt.length)===void 0)&&X("Invalid argument for bytesToString");const at=vt.length,nt=8192;if(at<nt)return String.fromCharCode.apply(null,vt);const Ct=[];for(let xt=0;xt<at;xt+=nt){const ne=Math.min(xt+nt,at),ee=vt.subarray(xt,ne);Ct.push(String.fromCharCode.apply(null,ee))}return Ct.join("")}function dt(vt){typeof vt!="string"&&X("Invalid argument for stringToBytes");const at=vt.length,nt=new Uint8Array(at);for(let Ct=0;Ct<at;++Ct)nt[Ct]=vt.charCodeAt(Ct)&255;return nt}function v(vt){return String.fromCharCode(vt>>24&255,vt>>16&255,vt>>8&255,vt&255)}function I(vt){return Object.keys(vt).length}function W(vt){const at=Object.create(null);for(const[nt,Ct]of vt)at[nt]=Ct;return at}function rt(){const vt=new Uint8Array(4);return vt[0]=1,new Uint32Array(vt.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return kt(this,"isLittleEndian",rt())}static get isEvalSupported(){return kt(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?kt(this,"platform",{isWin:!1,isMac:!1}):kt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var at,nt;return kt(this,"isCSSRoundSupported",(nt=(at=globalThis.CSS)==null?void 0:at.supports)==null?void 0:nt.call(at,"width: round(1.5px, 1px)"))}}e.FeatureTest=ut;const St=[...Array(256).keys()].map(vt=>vt.toString(16).padStart(2,"0"));class ft{static makeHexColor(at,nt,Ct){return`#${St[at]}${St[nt]}${St[Ct]}`}static scaleMinMax(at,nt){let Ct;at[0]?(at[0]<0&&(Ct=nt[0],nt[0]=nt[1],nt[1]=Ct),nt[0]*=at[0],nt[1]*=at[0],at[3]<0&&(Ct=nt[2],nt[2]=nt[3],nt[3]=Ct),nt[2]*=at[3],nt[3]*=at[3]):(Ct=nt[0],nt[0]=nt[2],nt[2]=Ct,Ct=nt[1],nt[1]=nt[3],nt[3]=Ct,at[1]<0&&(Ct=nt[2],nt[2]=nt[3],nt[3]=Ct),nt[2]*=at[1],nt[3]*=at[1],at[2]<0&&(Ct=nt[0],nt[0]=nt[1],nt[1]=Ct),nt[0]*=at[2],nt[1]*=at[2]),nt[0]+=at[4],nt[1]+=at[4],nt[2]+=at[5],nt[3]+=at[5]}static transform(at,nt){return[at[0]*nt[0]+at[2]*nt[1],at[1]*nt[0]+at[3]*nt[1],at[0]*nt[2]+at[2]*nt[3],at[1]*nt[2]+at[3]*nt[3],at[0]*nt[4]+at[2]*nt[5]+at[4],at[1]*nt[4]+at[3]*nt[5]+at[5]]}static applyTransform(at,nt){const Ct=at[0]*nt[0]+at[1]*nt[2]+nt[4],xt=at[0]*nt[1]+at[1]*nt[3]+nt[5];return[Ct,xt]}static applyInverseTransform(at,nt){const Ct=nt[0]*nt[3]-nt[1]*nt[2],xt=(at[0]*nt[3]-at[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/Ct,ne=(-at[0]*nt[1]+at[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/Ct;return[xt,ne]}static getAxialAlignedBoundingBox(at,nt){const Ct=this.applyTransform(at,nt),xt=this.applyTransform(at.slice(2,4),nt),ne=this.applyTransform([at[0],at[3]],nt),ee=this.applyTransform([at[2],at[1]],nt);return[Math.min(Ct[0],xt[0],ne[0],ee[0]),Math.min(Ct[1],xt[1],ne[1],ee[1]),Math.max(Ct[0],xt[0],ne[0],ee[0]),Math.max(Ct[1],xt[1],ne[1],ee[1])]}static inverseTransform(at){const nt=at[0]*at[3]-at[1]*at[2];return[at[3]/nt,-at[1]/nt,-at[2]/nt,at[0]/nt,(at[2]*at[5]-at[4]*at[3])/nt,(at[4]*at[1]-at[5]*at[0])/nt]}static singularValueDecompose2dScale(at){const nt=[at[0],at[2],at[1],at[3]],Ct=at[0]*nt[0]+at[1]*nt[2],xt=at[0]*nt[1]+at[1]*nt[3],ne=at[2]*nt[0]+at[3]*nt[2],ee=at[2]*nt[1]+at[3]*nt[3],ht=(Ct+ee)/2,Mt=Math.sqrt((Ct+ee)**2-4*(Ct*ee-ne*xt))/2,Ht=ht+Mt||1,Ft=ht-Mt||1;return[Math.sqrt(Ht),Math.sqrt(Ft)]}static normalizeRect(at){const nt=at.slice(0);return at[0]>at[2]&&(nt[0]=at[2],nt[2]=at[0]),at[1]>at[3]&&(nt[1]=at[3],nt[3]=at[1]),nt}static intersect(at,nt){const Ct=Math.max(Math.min(at[0],at[2]),Math.min(nt[0],nt[2])),xt=Math.min(Math.max(at[0],at[2]),Math.max(nt[0],nt[2]));if(Ct>xt)return null;const ne=Math.max(Math.min(at[1],at[3]),Math.min(nt[1],nt[3])),ee=Math.min(Math.max(at[1],at[3]),Math.max(nt[1],nt[3]));return ne>ee?null:[Ct,ne,xt,ee]}static bezierBoundingBox(at,nt,Ct,xt,ne,ee,ht,Mt){const Ht=[],Ft=[[],[]];let Ut,zt,Zt,Pt,Jt,$t,V,l;for(let lt=0;lt<2;++lt){if(lt===0?(zt=6*at-12*Ct+6*ne,Ut=-3*at+9*Ct-9*ne+3*ht,Zt=3*Ct-3*at):(zt=6*nt-12*xt+6*ee,Ut=-3*nt+9*xt-9*ee+3*Mt,Zt=3*xt-3*nt),Math.abs(Ut)<1e-12){if(Math.abs(zt)<1e-12)continue;Pt=-Zt/zt,0<Pt&&Pt<1&&Ht.push(Pt);continue}V=zt*zt-4*Zt*Ut,l=Math.sqrt(V),!(V<0)&&(Jt=(-zt+l)/(2*Ut),0<Jt&&Jt<1&&Ht.push(Jt),$t=(-zt-l)/(2*Ut),0<$t&&$t<1&&Ht.push($t))}let D=Ht.length,z;const et=D;for(;D--;)Pt=Ht[D],z=1-Pt,Ft[0][D]=z*z*z*at+3*z*z*Pt*Ct+3*z*Pt*Pt*ne+Pt*Pt*Pt*ht,Ft[1][D]=z*z*z*nt+3*z*z*Pt*xt+3*z*Pt*Pt*ee+Pt*Pt*Pt*Mt;return Ft[0][et]=at,Ft[1][et]=nt,Ft[0][et+1]=ht,Ft[1][et+1]=Mt,Ft[0].length=Ft[1].length=et+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}e.Util=ft;const bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Z(vt){if(vt[0]>=""){let nt;if(vt[0]===""&&vt[1]===""?nt="utf-16be":vt[0]===""&&vt[1]===""?nt="utf-16le":vt[0]===""&&vt[1]===""&&vt[2]===""&&(nt="utf-8"),nt)try{const Ct=new TextDecoder(nt,{fatal:!0}),xt=dt(vt);return Ct.decode(xt)}catch(Ct){mt(`stringToPDFString: "${Ct}".`)}}const at=[];for(let nt=0,Ct=vt.length;nt<Ct;nt++){const xt=bt[vt.charCodeAt(nt)];at.push(xt?String.fromCharCode(xt):vt.charAt(nt))}return at.join("")}function J(vt){return decodeURIComponent(escape(vt))}function q(vt){return unescape(encodeURIComponent(vt))}function ct(vt){return typeof vt=="object"&&(vt==null?void 0:vt.byteLength)!==void 0}function At(vt,at){if(vt.length!==at.length)return!1;for(let nt=0,Ct=vt.length;nt<Ct;nt++)if(vt[nt]!==at[nt])return!1;return!0}function Et(vt=new Date){return[vt.getUTCFullYear().toString(),(vt.getUTCMonth()+1).toString().padStart(2,"0"),vt.getUTCDate().toString().padStart(2,"0"),vt.getUTCHours().toString().padStart(2,"0"),vt.getUTCMinutes().toString().padStart(2,"0"),vt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){G(this,Yt,!1);this.promise=new Promise((at,nt)=>{this.resolve=Ct=>{gt(this,Yt,!0),at(Ct)},this.reject=Ct=>{gt(this,Yt,!0),nt(Ct)}})}get settled(){return a(this,Yt)}}Yt=new WeakMap,e.PromiseCapability=Dt;let Lt=null,jt=null;function Vt(vt){return Lt||(Lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jt=new Map([["","t"]])),vt.replaceAll(Lt,(at,nt,Ct)=>nt?nt.normalize("NFKC"):jt.get(Ct))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const vt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(vt);else for(let at=0;at<32;at++)vt[at]=Math.floor(Math.random()*255);return Y(vt)}const Wt="pdfjs_internal_id_";e.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,de,c,Ce,f,g,o,w,T,x,R,M,E,Te,P,O,$e,m,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(k){if(typeof k=="string"||k instanceof URL?k={url:k}:(0,_util.isArrayBuffer)(k)&&(k={data:k}),typeof k!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!k.url&&!k.data&&!k.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const _=new PDFDocumentLoadingTask,{docId:B}=_,L=k.url?getUrlProp(k.url):null,Q=k.data?getDataProp(k.data):null,st=k.httpHeaders||null,$=k.withCredentials===!0,ot=k.password??null,pt=k.range instanceof PDFDataRangeTransport?k.range:null,mt=Number.isInteger(k.rangeChunkSize)&&k.rangeChunkSize>0?k.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let X=k.worker instanceof PDFWorker?k.worker:null;const yt=k.verbosity,wt=typeof k.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(k.docBaseUrl)?k.docBaseUrl:null,Rt=typeof k.cMapUrl=="string"?k.cMapUrl:null,kt=k.cMapPacked!==!1,j=k.CMapReaderFactory||DefaultCMapReaderFactory,h=typeof k.standardFontDataUrl=="string"?k.standardFontDataUrl:null,d=k.StandardFontDataFactory||DefaultStandardFontDataFactory,u=k.stopAtErrors!==!0,y=Number.isInteger(k.maxImageSize)&&k.maxImageSize>-1?k.maxImageSize:-1,S=k.isEvalSupported!==!1,N=typeof k.isOffscreenCanvasSupported=="boolean"?k.isOffscreenCanvasSupported:!_util.isNodeJS,U=Number.isInteger(k.canvasMaxAreaInBytes)?k.canvasMaxAreaInBytes:-1,Y=typeof k.disableFontFace=="boolean"?k.disableFontFace:_util.isNodeJS,dt=k.fontExtraProperties===!0,v=k.enableXfa===!0,I=k.ownerDocument||globalThis.document,W=k.disableRange===!0,rt=k.disableStream===!0,K=k.disableAutoFetch===!0,ut=k.pdfBug===!0,St=pt?pt.length:k.length??NaN,ft=typeof k.useSystemFonts=="boolean"?k.useSystemFonts:!_util.isNodeJS&&!Y,bt=typeof k.useWorkerFetch=="boolean"?k.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&d===_display_utils.DOMStandardFontDataFactory&&Rt&&h&&(0,_display_utils.isValidFetchUrl)(Rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),Z=k.canvasFactory||new DefaultCanvasFactory({ownerDocument:I}),J=k.filterFactory||new DefaultFilterFactory({docId:B,ownerDocument:I}),q=null;(0,_util.setVerbosityLevel)(yt);const ct={canvasFactory:Z,filterFactory:J};if(bt||(ct.cMapReaderFactory=new j({baseUrl:Rt,isCompressed:kt}),ct.standardFontDataFactory=new d({baseUrl:h})),!X){const Dt={verbosity:yt,port:_worker_options.GlobalWorkerOptions.workerPort};X=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),_._worker=X}const At={docId:B,apiVersion:"3.11.174",data:Q,password:ot,disableAutoFetch:K,rangeChunkSize:mt,length:St,docBaseUrl:wt,enableXfa:v,evaluatorOptions:{maxImageSize:y,disableFontFace:Y,ignoreErrors:u,isEvalSupported:S,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:U,fontExtraProperties:dt,useSystemFonts:ft,cMapUrl:bt?Rt:null,standardFontDataUrl:bt?h:null}},Et={ignoreErrors:u,isEvalSupported:S,disableFontFace:Y,fontExtraProperties:dt,enableXfa:v,ownerDocument:I,disableAutoFetch:K,pdfBug:ut,styleElement:q};return X.promise.then(function(){if(_.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(X,At),Lt=new Promise(function(jt){let Vt;pt?Vt=new _transport_stream.PDFDataTransportStream({length:St,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:W,disableStream:rt},pt):Q||(Vt=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:L,length:St,httpHeaders:st,withCredentials:$,rangeChunkSize:mt,disableRange:W,disableStream:rt})),jt(Vt)});return Promise.all([Dt,Lt]).then(function([jt,Vt]){if(_.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(B,jt,X.port),Wt=new WorkerTransport(Gt,_,Vt,Et,ct);_._transport=Wt,Gt.send("Ready",null)})}).catch(_._capability.reject),_}async function _fetchDocument(k,_){if(k.destroyed)throw new Error("Worker was destroyed");const B=await k.messageHandler.sendWithPromise("GetDocRequest",_,_.data?[_.data.buffer]:null);if(k.destroyed)throw new Error("Worker was destroyed");return B}function getUrlProp(k){if(k instanceof URL)return k.href;try{return new URL(k,window.location).href}catch{if(_util.isNodeJS&&typeof k=="string")return k}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(k){if(_util.isNodeJS&&typeof Buffer<"u"&&k instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(k instanceof Uint8Array&&k.byteLength===k.buffer.byteLength)return k;if(typeof k=="string")return(0,_util.stringToBytes)(k);if(typeof k=="object"&&!isNaN(k==null?void 0:k.length)||(0,_util.isArrayBuffer)(k))return new Uint8Array(k);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${_e(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var _,B,L;this.destroyed=!0;try{(_=this._worker)!=null&&_.port&&(this._worker._pendingDestroy=!0),await((B=this._transport)==null?void 0:B.destroy())}catch(Q){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,Q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,G(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(_,B,L=!1,Q=null){this.length=_,this.initialData=B,this.progressiveDone=L,this.contentDispositionFilename=Q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(_){this._rangeListeners.push(_)}addProgressListener(_){this._progressListeners.push(_)}addProgressiveReadListener(_){this._progressiveReadListeners.push(_)}addProgressiveDoneListener(_){this._progressiveDoneListeners.push(_)}onDataRange(_,B){for(const L of this._rangeListeners)L(_,B)}onDataProgress(_,B){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(_,B)})}onDataProgressiveRead(_){this._readyCapability.promise.then(()=>{for(const B of this._progressiveReadListeners)B(_)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveDoneListeners)_()})}transportReady(){this._readyCapability.resolve()}requestDataRange(_,B){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(_,B){this._pdfInfo=_,this._transport=B,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const Q=[];for(const st in L)Q.push(...L[st]);return Q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(_){return this._transport.getPage(_)}getPageIndex(_){return this._transport.getPageIndex(_)}getDestinations(){return this._transport.getDestinations()}getDestination(_){return this._transport.getDestination(_)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(_=!1){return this._transport.startCleanup(_||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(_,B,L,Q=!1){G(this,i);G(this,c);G(this,s,null);G(this,n,!1);this._pageIndex=_,this._pageInfo=B,this._transport=L,this._stats=Q?new _display_utils.StatTimer:null,this._pdfBug=Q,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:_,rotation:B=this.rotate,offsetX:L=0,offsetY:Q=0,dontFlip:st=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:_,rotation:B,offsetX:L,offsetY:Q,dontFlip:st})}getAnnotations({intent:_="display"}={}){const B=this._transport.getRenderingIntent(_);return this._transport.getAnnotations(this._pageIndex,B.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var _;return((_=this._transport._htmlForXfa)==null?void 0:_.children[this._pageIndex])||null}render({canvasContext:_,viewport:B,intent:L="display",annotationMode:Q=_util.AnnotationMode.ENABLE,transform:st=null,background:$=null,optionalContentConfigPromise:ot=null,annotationCanvasMap:pt=null,pageColors:mt=null,printAnnotationStorage:X=null}){var d,u;(d=this._stats)==null||d.time("Overall");const yt=this._transport.getRenderingIntent(L,Q,X);gt(this,n,!1),it(this,c,Ce).call(this),ot||(ot=this._transport.getOptionalContentConfig());let wt=this._intentStates.get(yt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(yt.cacheKey,wt)),wt.streamReaderCancelTimeout&&(clearTimeout(wt.streamReaderCancelTimeout),wt.streamReaderCancelTimeout=null);const Rt=!!(yt.renderingIntent&_util.RenderingIntentFlag.PRINT);wt.displayReadyCapability||(wt.displayReadyCapability=new _util.PromiseCapability,wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(yt));const kt=y=>{var S,N;wt.renderTasks.delete(j),(this._maybeCleanupAfterRender||Rt)&&gt(this,n,!0),it(this,i,de).call(this,!Rt),y?(j.capability.reject(y),this._abortOperatorList({intentState:wt,reason:y instanceof Error?y:new Error(y)})):j.capability.resolve(),(S=this._stats)==null||S.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},j=new InternalRenderTask({callback:kt,params:{canvasContext:_,viewport:B,transform:st,background:$},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:wt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Rt,pdfBug:this._pdfBug,pageColors:mt});(wt.renderTasks||(wt.renderTasks=new Set)).add(j);const h=j.task;return Promise.all([wt.displayReadyCapability.promise,ot]).then(([y,S])=>{var N;if(this.destroyed){kt();return}(N=this._stats)==null||N.time("Rendering"),j.initializeGraphics({transparency:y,optionalContentConfig:S}),j.operatorListChanged()}).catch(kt),h}getOperatorList({intent:_="display",annotationMode:B=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var pt;function Q(){$.operatorList.lastChunk&&($.opListReadCapability.resolve($.operatorList),$.renderTasks.delete(ot))}const st=this._transport.getRenderingIntent(_,B,L,!0);let $=this._intentStates.get(st.cacheKey);$||($=Object.create(null),this._intentStates.set(st.cacheKey,$));let ot;return $.opListReadCapability||(ot=Object.create(null),ot.operatorListChanged=Q,$.opListReadCapability=new _util.PromiseCapability,($.renderTasks||($.renderTasks=new Set)).add(ot),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(st)),$.opListReadCapability.promise}streamTextContent({includeMarkedContent:_=!1,disableNormalization:B=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:_===!0,disableNormalization:B===!0},{highWaterMark:100,size(Q){return Q.items.length}})}getTextContent(_={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const B=this.streamTextContent(_);return new Promise(function(L,Q){function st(){$.read().then(function({value:pt,done:mt}){if(mt){L(ot);return}Object.assign(ot.styles,pt.styles),ot.items.push(...pt.items),st()},Q)}const $=B.getReader(),ot={items:[],styles:Object.create(null)};st()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const _=[];for(const B of this._intentStates.values())if(this._abortOperatorList({intentState:B,reason:new Error("Page was destroyed."),force:!0}),!B.opListReadCapability)for(const L of B.renderTasks)_.push(L.completed),L.cancel();return this.objs.clear(),gt(this,n,!1),it(this,c,Ce).call(this),Promise.all(_)}cleanup(_=!1){gt(this,n,!0);const B=it(this,i,de).call(this,!1);return _&&B&&this._stats&&(this._stats=new _display_utils.StatTimer),B}_startRenderPage(_,B){var Q,st;const L=this._intentStates.get(B);L&&((Q=this._stats)==null||Q.timeEnd("Page Request"),(st=L.displayReadyCapability)==null||st.resolve(_))}_renderPageChunk(_,B){for(let L=0,Q=_.length;L<Q;L++)B.operatorList.fnArray.push(_.fnArray[L]),B.operatorList.argsArray.push(_.argsArray[L]);B.operatorList.lastChunk=_.lastChunk,B.operatorList.separateAnnots=_.separateAnnots;for(const L of B.renderTasks)L.operatorListChanged();_.lastChunk&&it(this,i,de).call(this,!0)}_pumpOperatorList({renderingIntent:_,cacheKey:B,annotationStorageSerializable:L}){const{map:Q,transfers:st}=L,ot=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:_,cacheKey:B,annotationStorage:Q},st).getReader(),pt=this._intentStates.get(B);pt.streamReader=ot;const mt=()=>{ot.read().then(({value:X,done:yt})=>{if(yt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,pt),mt())},X=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const yt of pt.renderTasks)yt.operatorListChanged();it(this,i,de).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject(X);else if(pt.opListReadCapability)pt.opListReadCapability.reject(X);else throw X}})};mt()}_abortOperatorList({intentState:_,reason:B,force:L=!1}){if(_.streamReader){if(_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null),!L){if(_.renderTasks.size>0)return;if(B instanceof _display_utils.RenderingCancelledException){let Q=RENDERING_CANCELLED_TIMEOUT;B.extraDelay>0&&B.extraDelay<1e3&&(Q+=B.extraDelay),_.streamReaderCancelTimeout=setTimeout(()=>{_.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:_,reason:B,force:!0})},Q);return}}if(_.streamReader.cancel(new _util.AbortException(B.message)).catch(()=>{}),_.streamReader=null,!this._transport.destroyed){for(const[Q,st]of this._intentStates)if(st===_){this._intentStates.delete(Q);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,de=function(_=!1){if(it(this,c,Ce).call(this),!a(this,n)||this.destroyed)return!1;if(_)return gt(this,s,setTimeout(()=>{gt(this,s,null),it(this,i,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:B,operatorList:L}of this._intentStates.values())if(B.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,n,!1),!0},c=new WeakSet,Ce=function(){a(this,s)&&(clearTimeout(a(this,s)),gt(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){G(this,f,new Set);G(this,g,Promise.resolve())}postMessage(_,B){const L={data:structuredClone(_,B?{transfer:B}:null)};a(this,g).then(()=>{for(const Q of a(this,f))Q.call(this,L)})}addEventListener(_,B){a(this,f).add(B)}removeEventListener(_,B){a(this,f).delete(B)}terminate(){a(this,f).clear()}}f=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const k=(o=document==null?void 0:document.currentScript)==null?void 0:o.src;k&&(PDFWorkerUtil.fallbackWorkerSrc=k.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(k,_){let B;try{if(B=new URL(k),!B.origin||B.origin==="null")return!1}catch{return!1}const L=new URL(_,B);return B.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(k){const _=`importScripts("${k}");`;return URL.createObjectURL(new Blob([_]))}}const _PDFWorker=class _PDFWorker{constructor({name:k=null,port:_=null,verbosity:B=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=k,this.destroyed=!1,this.verbosity=B,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,_){if((L=a(_PDFWorker,w))!=null&&L.has(_))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,w)||gt(_PDFWorker,w,new WeakMap)).set(_,this),this._initializeFromPort(_);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(k){this._port=k,this._messageHandler=new _message_handler.MessageHandler("main","worker",k),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:k}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,k)||(k=PDFWorkerUtil.createCDNWrapper(new URL(k,window.location).href));const _=new Worker(k),B=new _message_handler.MessageHandler("main","worker",_),L=()=>{_.removeEventListener("error",Q),B.destroy(),_.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Q=()=>{this._webWorker||L()};_.addEventListener("error",Q),B.on("test",$=>{if(_.removeEventListener("error",Q),this.destroyed){L();return}$?(this._messageHandler=B,this._port=_,this._webWorker=_,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),B.destroy(),_.terminate())}),B.on("ready",$=>{if(_.removeEventListener("error",Q),this.destroyed){L();return}try{st()}catch{this._setupFakeWorker()}});const st=()=>{const $=new Uint8Array;B.send("test",$,[$.buffer])};st();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(k=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const _=new LoopbackPort;this._port=_;const B=`fake${PDFWorkerUtil.fakeWorkerId++}`,L=new _message_handler.MessageHandler(B+"_worker",B,_);k.setup(L,_);const Q=new _message_handler.MessageHandler(B,B+"_worker",_);this._messageHandler=Q,this._readyCapability.resolve(),Q.send("configure",{verbosity:this.verbosity})}).catch(k=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${k.message}".`))})}destroy(){var k;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(k=a(_PDFWorker,w))==null||k.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(k){var B;if(!(k!=null&&k.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const _=(B=a(this,w))==null?void 0:B.get(k.port);if(_){if(_._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return _}return new _PDFWorker(k)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var k;try{return((k=globalThis.pdfjsWorker)==null?void 0:k.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};w=new WeakMap,G(_PDFWorker,w,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(_,B,L,Q,st){G(this,E);G(this,T,new Map);G(this,x,new Map);G(this,R,new Map);G(this,M,null);this.messageHandler=_,this.loadingTask=B,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Q.ownerDocument,styleElement:Q.styleElement}),this._params=Q,this.canvasFactory=st.canvasFactory,this.filterFactory=st.filterFactory,this.cMapReaderFactory=st.cMapReaderFactory,this.standardFontDataFactory=st.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(_,B=_util.AnnotationMode.ENABLE,L=null,Q=!1){let st=_util.RenderingIntentFlag.DISPLAY,$=_annotation_storage.SerializableEmpty;switch(_){case"any":st=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":st=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${_}`)}switch(B){case _util.AnnotationMode.DISABLE:st+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:st+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:st+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$=(st&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${B}`)}return Q&&(st+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:st,cacheKey:`${st}_${$.hash}`,annotationStorageSerializable:$}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=a(this,M))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const _=[];for(const Q of a(this,x).values())_.push(Q._destroy());a(this,x).clear(),a(this,R).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const B=this.messageHandler.sendWithPromise("Terminate",null);return _.push(B),Promise.all(_).then(()=>{var Q;this.commonObjs.clear(),this.fontLoader.clear(),a(this,T).clear(),this.filterFactory.destroy(),(Q=this._networkStream)==null||Q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:_,loadingTask:B}=this;_.on("GetReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=st=>{this._lastProgress={loaded:st.loaded,total:st.total}},Q.onPull=()=>{this._fullReader.read().then(function({value:st,done:$}){if($){Q.close();return}(0,_util.assert)(st instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(st),1,[st])}).catch(st=>{Q.error(st)})},Q.onCancel=st=>{this._fullReader.cancel(st),Q.ready.catch($=>{if(!this.destroyed)throw $})}}),_.on("ReaderHeadersReady",L=>{const Q=new _util.PromiseCapability,st=this._fullReader;return st.headersReady.then(()=>{var $;(!st.isStreamingSupported||!st.isRangeSupported)&&(this._lastProgress&&(($=B.onProgress)==null||$.call(B,this._lastProgress)),st.onProgress=ot=>{var pt;(pt=B.onProgress)==null||pt.call(B,{loaded:ot.loaded,total:ot.total})}),Q.resolve({isStreamingSupported:st.isStreamingSupported,isRangeSupported:st.isRangeSupported,contentLength:st.contentLength})},Q.reject),Q.promise}),_.on("GetRangeReader",(L,Q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const st=this._networkStream.getRangeReader(L.begin,L.end);if(!st){Q.close();return}Q.onPull=()=>{st.read().then(function({value:$,done:ot}){if(ot){Q.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array($),1,[$])}).catch($=>{Q.error($)})},Q.onCancel=$=>{st.cancel($),Q.ready.catch(ot=>{if(!this.destroyed)throw ot})}}),_.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,B._capability.resolve(new PDFDocumentProxy(L,this))}),_.on("DocException",function(L){let Q;switch(L.name){case"PasswordException":Q=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":Q=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":Q=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":Q=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":Q=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}B._capability.reject(Q)}),_.on("PasswordRequest",L=>{if(gt(this,M,new _util.PromiseCapability),B.onPassword){const Q=st=>{st instanceof Error?a(this,M).reject(st):a(this,M).resolve({password:st})};try{B.onPassword(Q,L.code)}catch(st){a(this,M).reject(st)}}else a(this,M).reject(new _util.PasswordException(L.message,L.code));return a(this,M).promise}),_.on("DataLoaded",L=>{var Q;(Q=B.onProgress)==null||Q.call(B,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),_.on("StartRenderPage",L=>{if(this.destroyed)return;a(this,x).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),_.on("commonobj",([L,Q,st])=>{var $;if(!this.destroyed&&!this.commonObjs.has(L))switch(Q){case"Font":const ot=this._params;if("error"in st){const X=st.error;(0,_util.warn)(`Error during font loading: ${X}`),this.commonObjs.resolve(L,X);break}const pt=ot.pdfBug&&(($=globalThis.FontInspector)!=null&&$.enabled)?(X,yt)=>globalThis.FontInspector.fontAdded(X,yt):null,mt=new _font_loader.FontFaceObject(st,{isEvalSupported:ot.isEvalSupported,disableFontFace:ot.disableFontFace,ignoreErrors:ot.ignoreErrors,inspectFont:pt});this.fontLoader.bind(mt).catch(X=>_.sendWithPromise("FontFallback",{id:L})).finally(()=>{!ot.fontExtraProperties&&mt.data&&(mt.data=null),this.commonObjs.resolve(L,mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,st);break;default:throw new Error(`Got unknown common object type ${Q}`)}}),_.on("obj",([L,Q,st,$])=>{var pt;if(this.destroyed)return;const ot=a(this,x).get(Q);if(!ot.objs.has(L))switch(st){case"Image":if(ot.objs.resolve(L,$),$){let mt;if($.bitmap){const{width:X,height:yt}=$;mt=X*yt*4}else mt=((pt=$.data)==null?void 0:pt.length)||0;mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ot._maybeCleanupAfterRender=!0)}break;case"Pattern":ot.objs.resolve(L,$);break;default:throw new Error(`Got unknown object type ${st}`)}}),_.on("DocProgress",L=>{var Q;this.destroyed||(Q=B.onProgress)==null||Q.call(B,{loaded:L.loaded,total:L.total})}),_.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),_.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:_,transfers:B}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:_,filename:((L=this._fullReader)==null?void 0:L.filename)??null},B).finally(()=>{this.annotationStorage.resetModified()})}getPage(_){if(!Number.isInteger(_)||_<=0||_>this._numPages)return Promise.reject(new Error("Invalid page request."));const B=_-1,L=a(this,R).get(B);if(L)return L;const Q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:B}).then(st=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(B,st,this,this._params.pdfBug);return a(this,x).set(B,$),$});return a(this,R).set(B,Q),Q}getPageIndex(_){return typeof _!="object"||_===null||!Number.isInteger(_.num)||_.num<0||!Number.isInteger(_.gen)||_.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:_.num,gen:_.gen})}getAnnotations(_,B){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:_,intent:B})}getFieldObjects(){return it(this,E,Te).call(this,"GetFieldObjects")}hasJSActions(){return it(this,E,Te).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(_){return typeof _!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:_})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return it(this,E,Te).call(this,"GetDocJSActions")}getPageJSActions(_){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:_})}getStructTree(_){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:_})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(_=>new _optional_content_config.OptionalContentConfig(_))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const _="GetMetadata",B=a(this,T).get(_);if(B)return B;const L=this.messageHandler.sendWithPromise(_,null).then(Q=>{var st,$;return{info:Q[0],metadata:Q[1]?new _metadata.Metadata(Q[1]):null,contentDispositionFilename:((st=this._fullReader)==null?void 0:st.filename)??null,contentLength:(($=this._fullReader)==null?void 0:$.contentLength)??null}});return a(this,T).set(_,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(_=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const B of a(this,x).values())if(!B.cleanup())throw new Error(`startCleanup: Page ${B.pageNumber} is currently rendering.`);this.commonObjs.clear(),_||this.fontLoader.clear(),a(this,T).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:_,enableXfa:B}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:_,enableXfa:B})}}T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakSet,Te=function(_,B=null){const L=a(this,T).get(_);if(L)return L;const Q=this.messageHandler.sendWithPromise(_,B);return a(this,T).set(_,Q),Q};class PDFObjects{constructor(){G(this,O);G(this,P,Object.create(null))}get(_,B=null){if(B){const Q=it(this,O,$e).call(this,_);return Q.capability.promise.then(()=>B(Q.data)),null}const L=a(this,P)[_];if(!(L!=null&&L.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${_}.`);return L.data}has(_){const B=a(this,P)[_];return(B==null?void 0:B.capability.settled)||!1}resolve(_,B=null){const L=it(this,O,$e).call(this,_);L.data=B,L.capability.resolve()}clear(){var _;for(const B in a(this,P)){const{data:L}=a(this,P)[B];(_=L==null?void 0:L.bitmap)==null||_.close()}gt(this,P,Object.create(null))}}P=new WeakMap,O=new WeakSet,$e=function(_){var B;return(B=a(this,P))[_]||(B[_]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(_){G(this,m,null);gt(this,m,_),this.onContinue=null}get promise(){return a(this,m).capability.promise}cancel(_=0){a(this,m).cancel(null,_)}get separateAnnots(){const{separateAnnots:_}=a(this,m).operatorList;if(!_)return!1;const{annotationCanvasMap:B}=a(this,m);return _.form||_.canvas&&(B==null?void 0:B.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const H=class H{constructor({callback:_,params:B,objs:L,commonObjs:Q,annotationCanvasMap:st,operatorList:$,pageIndex:ot,canvasFactory:pt,filterFactory:mt,useRequestAnimationFrame:X=!1,pdfBug:yt=!1,pageColors:wt=null}){this.callback=_,this.params=B,this.objs=L,this.commonObjs=Q,this.annotationCanvasMap=st,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=ot,this.canvasFactory=pt,this.filterFactory=mt,this._pdfBug=yt,this.pageColors=wt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=X===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=B.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:_=!1,optionalContentConfig:B}){var ot,pt;if(this.cancelled)return;if(this._canvas){if(a(H,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(H,A).add(this._canvas)}this._pdfBug&&((ot=globalThis.StepperManager)!=null&&ot.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:Q,transform:st,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:B},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:st,viewport:Q,transparency:_,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(_=null,B=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),a(H,A).delete(this._canvas),this.callback(_||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,B))}operatorListChanged(){var _;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(_=this.stepper)==null||_.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(H,A).delete(this._canvas),this.callback())))}};A=new WeakMap,G(H,A,new WeakSet);let InternalRenderTask=H;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,s)=>{var g,o,w,Sn,x;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(4),r=s(8);const c=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=c;class b{constructor(){G(this,w);G(this,g,!1);G(this,o,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(M,E){const C=a(this,o).get(M);return C===void 0?E:Object.assign(E,C)}getRawValue(M){return a(this,o).get(M)}remove(M){if(a(this,o).delete(M),a(this,o).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of a(this,o).values())if(E instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(M,E){const C=a(this,o).get(M);let P=!1;if(C!==void 0)for(const[O,F]of Object.entries(E))C[O]!==F&&(P=!0,C[O]=F);else P=!0,a(this,o).set(M,E);P&&it(this,w,Sn).call(this),E instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(M){return a(this,o).has(M)}getAll(){return a(this,o).size>0?(0,n.objectFromMap)(a(this,o)):null}setAll(M){for(const[E,C]of Object.entries(M))this.setValue(E,C)}get size(){return a(this,o).size}resetModified(){a(this,g)&&(gt(this,g,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f(this)}get serializable(){if(a(this,o).size===0)return c;const M=new Map,E=new r.MurmurHash3_64,C=[],P=Object.create(null);let O=!1;for(const[F,m]of a(this,o)){const A=m instanceof i.AnnotationEditor?m.serialize(!1,P):m;A&&(M.set(F,A),E.update(`${F}:${JSON.stringify(A)}`),O||(O=!!A.bitmap))}if(O)for(const F of M.values())F.bitmap&&C.push(F.bitmap);return M.size>0?{map:M,hash:E.hexdigest(),transfers:C}:c}}g=new WeakMap,o=new WeakMap,w=new WeakSet,Sn=function(){a(this,g)||(gt(this,g,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=b;class f extends b{constructor(E){super();G(this,x,void 0);const{map:C,hash:P,transfers:O}=E.serializable,F=structuredClone(C,O?{transfer:O}:null);gt(this,x,{map:F,hash:P,transfers:O})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,x)}}x=new WeakMap,e.PrintAnnotationStorage=f},(t,e,s)=>{var f,g,o,w,T,x,R,M,E,C,P,O,F,m,A,He,k,Ue,B,We,Q,Ve,$,En,pt,wn,X,Cn,wt,ze,kt,Tn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(5),i=s(1),r=s(6);const h=class h{constructor(u){G(this,A);G(this,k);G(this,Q);G(this,$);G(this,pt);G(this,X);G(this,wt);G(this,kt);G(this,f,"");G(this,g,!1);G(this,o,null);G(this,w,null);G(this,T,null);G(this,x,!1);G(this,R,null);G(this,M,this.focusin.bind(this));G(this,E,this.focusout.bind(this));G(this,C,!1);G(this,P,!1);G(this,O,!1);se(this,"_initialOptions",Object.create(null));se(this,"_uiManager",null);se(this,"_focusEventsAllowed",!0);se(this,"_l10nPromise",null);G(this,F,!1);G(this,m,h._zIndex++);this.constructor===h&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:y,rawDims:{pageWidth:S,pageHeight:N,pageX:U,pageY:Y}}=this.parent.viewport;this.rotation=y,this.pageRotation=(360+y-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[S,N],this.pageTranslation=[U,Y];const[dt,v]=this.parentDimensions;this.x=u.x/dt,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const y=new b({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});y.annotationElementId=u.annotationElementId,y.deleted=!0,y._uiManager.addToAnnotationStorage(y)}static initialize(u,y=null){if(h._l10nPromise||(h._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,u.get(N)]))),y!=null&&y.strings)for(const N of y.strings)h._l10nPromise.set(N,u.get(N));if(h._borderLineWidth!==-1)return;const S=getComputedStyle(document.documentElement);h._borderLineWidth=parseFloat(S.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,y){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,y){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,F)}set _isDraggable(u){var y;gt(this,F,u),(y=this.div)==null||y.classList.toggle("draggable",u)}center(){const[u,y]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*y/(u*2),this.y+=this.width*u/(y*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*y/(u*2),this.y-=this.width*u/(y*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,m)}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(a(this,C)?gt(this,C,!1):this.parent.setSelected(this))}focusout(u){var S;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const y=u.relatedTarget;y!=null&&y.closest(`#${this.id}`)||(u.preventDefault(),(S=this.parent)!=null&&S.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,y,S,N){const[U,Y]=this.parentDimensions;[S,N]=this.screenToPageTranslation(S,N),this.x=(u+S)/U,this.y=(y+N)/Y,this.fixAndSetPosition()}translate(u,y){it(this,A,He).call(this,this.parentDimensions,u,y)}translateInPage(u,y){it(this,A,He).call(this,this.pageDimensions,u,y),this.div.scrollIntoView({block:"nearest"})}drag(u,y){const[S,N]=this.parentDimensions;if(this.x+=u/S,this.y+=y/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:I,y:W}=this.div.getBoundingClientRect();this.parent.findNewParent(this,I,W)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:U,y:Y}=this;const[dt,v]=it(this,k,Ue).call(this);U+=dt,Y+=v,this.div.style.left=`${(100*U).toFixed(2)}%`,this.div.style.top=`${(100*Y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[u,y]=this.pageDimensions;let{x:S,y:N,width:U,height:Y}=this;switch(U*=u,Y*=y,S*=u,N*=y,this.rotation){case 0:S=Math.max(0,Math.min(u-U,S)),N=Math.max(0,Math.min(y-Y,N));break;case 90:S=Math.max(0,Math.min(u-Y,S)),N=Math.min(y,Math.max(U,N));break;case 180:S=Math.min(u,Math.max(U,S)),N=Math.min(y,Math.max(Y,N));break;case 270:S=Math.min(u,Math.max(Y,S)),N=Math.max(0,Math.min(y-U,N));break}this.x=S/=u,this.y=N/=y;const[dt,v]=it(this,k,Ue).call(this);S+=dt,N+=v;const{style:I}=this.div;I.left=`${(100*S).toFixed(2)}%`,I.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(u,y){var S;return it(S=h,B,We).call(S,u,y,this.parentRotation)}pageTranslationToScreen(u,y){var S;return it(S=h,B,We).call(S,u,y,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[y,S]}=this,N=y*u,U=S*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(U)]:[N,U]}setDims(u,y){var U;const[S,N]=this.parentDimensions;this.div.style.width=`${(100*u/S).toFixed(2)}%`,a(this,x)||(this.div.style.height=`${(100*y/N).toFixed(2)}%`),(U=a(this,o))==null||U.classList.toggle("small",u<h.SMALL_EDITOR_SIZE||y<h.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:y,width:S}=u,N=S.endsWith("%"),U=!a(this,x)&&y.endsWith("%");if(N&&U)return;const[Y,dt]=this.parentDimensions;N||(u.width=`${(100*parseFloat(S)/Y).toFixed(2)}%`),!a(this,x)&&!U&&(u.height=`${(100*parseFloat(y)/dt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,o))return;const u=gt(this,o,document.createElement("button"));u.className="altText";const y=await h._l10nPromise.get("editor_alt_text_button_label");u.textContent=y,u.setAttribute("aria-label",y),u.tabIndex="0",u.addEventListener("contextmenu",r.noContextMenu),u.addEventListener("pointerdown",S=>S.stopPropagation()),u.addEventListener("click",S=>{S.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",S=>{S.target===u&&S.key==="Enter"&&(S.preventDefault(),this._uiManager.editAltText(this))}),it(this,wt,ze).call(this),this.div.append(u),h.SMALL_EDITOR_SIZE||(h.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,f),decorative:a(this,g)}}set altTextData({altText:u,decorative:y}){a(this,f)===u&&a(this,g)===y||(gt(this,f,u),gt(this,g,y),it(this,wt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,M)),this.div.addEventListener("focusout",a(this,E));const[u,y]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*y/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/y).toFixed(2)}%`);const[S,N]=this.getInitialTranslation();return this.translate(S,N),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:y}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&y){u.preventDefault();return}gt(this,C,!0),it(this,kt,Tn).call(this,u)}moveInDOM(){var u;(u=this.parent)==null||u.moveEditorInDOM(this)}_setParentAndPosition(u,y,S){u.changeParent(this),this.x=y,this.y=S,this.fixAndSetPosition()}getRect(u,y){const S=this.parentScale,[N,U]=this.pageDimensions,[Y,dt]=this.pageTranslation,v=u/S,I=y/S,W=this.x*N,rt=this.y*U,K=this.width*N,ut=this.height*U;switch(this.rotation){case 0:return[W+v+Y,U-rt-I-ut+dt,W+v+K+Y,U-rt-I+dt];case 90:return[W+I+Y,U-rt+v+dt,W+I+ut+Y,U-rt+v+K+dt];case 180:return[W-v-K+Y,U-rt+I+dt,W-v+Y,U-rt+I+ut+dt];case 270:return[W-I-ut+Y,U-rt-v-K+dt,W-I+Y,U-rt-v+dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,y){const[S,N,U,Y]=u,dt=U-S,v=Y-N;switch(this.rotation){case 0:return[S,y-Y,dt,v];case 90:return[S,y-N,v,dt];case 180:return[U,y-N,dt,v];case 270:return[U,y-Y,v,dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,O,!0)}disableEditMode(){gt(this,O,!1)}isInEditMode(){return a(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var u,y;(u=this.div)==null||u.addEventListener("focusin",a(this,M)),(y=this.div)==null||y.addEventListener("focusout",a(this,E))}serialize(u=!1,y=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,y,S){const N=new this.prototype.constructor({parent:y,id:y.getNextId(),uiManager:S});N.rotation=u.rotation;const[U,Y]=N.pageDimensions,[dt,v,I,W]=N.getRectInCurrentCoords(u.rect,Y);return N.x=dt/U,N.y=v/Y,N.width=I/U,N.height=W/Y,N}remove(){var u;this.div.removeEventListener("focusin",a(this,M)),this.div.removeEventListener("focusout",a(this,E)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(u=a(this,o))==null||u.remove(),gt(this,o,null),gt(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(it(this,$,En).call(this),a(this,R).classList.remove("hidden"))}select(){var u;this.makeResizable(),(u=this.div)==null||u.classList.add("selectedEditor")}unselect(){var u,y,S;(u=a(this,R))==null||u.classList.add("hidden"),(y=this.div)==null||y.classList.remove("selectedEditor"),(S=this.div)!=null&&S.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,y){}disableEditing(){a(this,o)&&(a(this,o).hidden=!0)}enableEditing(){a(this,o)&&(a(this,o).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,P)}set isEditing(u){gt(this,P,u),this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,y){gt(this,x,!0);const S=u/y,{style:N}=this.div;N.aspectRatio=S,N.height="auto"}static get MIN_SIZE(){return 16}};f=new WeakMap,g=new WeakMap,o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,P=new WeakMap,O=new WeakMap,F=new WeakMap,m=new WeakMap,A=new WeakSet,He=function([u,y],S,N){[S,N]=this.screenToPageTranslation(S,N),this.x+=S/u,this.y+=N/y,this.fixAndSetPosition()},k=new WeakSet,Ue=function(){const[u,y]=this.parentDimensions,{_borderLineWidth:S}=h,N=S/u,U=S/y;switch(this.rotation){case 90:return[-N,U];case 180:return[N,U];case 270:return[N,-U];default:return[-N,-U]}},B=new WeakSet,We=function(u,y,S){switch(S){case 90:return[y,-u];case 180:return[-u,-y];case 270:return[-y,u];default:return[u,y]}},Q=new WeakSet,Ve=function(u){switch(u){case 90:{const[y,S]=this.pageDimensions;return[0,-y/S,S/y,0]}case 180:return[-1,0,0,-1];case 270:{const[y,S]=this.pageDimensions;return[0,y/S,-S/y,0]}default:return[1,0,0,1]}},$=new WeakSet,En=function(){if(a(this,R))return;gt(this,R,document.createElement("div")),a(this,R).classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const y of u){const S=document.createElement("div");a(this,R).append(S),S.classList.add("resizer",y),S.addEventListener("pointerdown",it(this,pt,wn).bind(this,y)),S.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(a(this,R))},pt=new WeakSet,wn=function(u,y){y.preventDefault();const{isMac:S}=i.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&S)return;const N=it(this,X,Cn).bind(this,u),U=this._isDraggable;this._isDraggable=!1;const Y={passive:!0,capture:!0};window.addEventListener("pointermove",N,Y);const dt=this.x,v=this.y,I=this.width,W=this.height,rt=this.parent.div.style.cursor,K=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(y.target).cursor;const ut=()=>{this._isDraggable=U,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",N,Y),this.parent.div.style.cursor=rt,this.div.style.cursor=K;const St=this.x,ft=this.y,bt=this.width,Z=this.height;St===dt&&ft===v&&bt===I&&Z===W||this.addCommands({cmd:()=>{this.width=bt,this.height=Z,this.x=St,this.y=ft;const[J,q]=this.parentDimensions;this.setDims(J*bt,q*Z),this.fixAndSetPosition()},undo:()=>{this.width=I,this.height=W,this.x=dt,this.y=v;const[J,q]=this.parentDimensions;this.setDims(J*I,q*W),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},X=new WeakSet,Cn=function(u,y){const[S,N]=this.parentDimensions,U=this.x,Y=this.y,dt=this.width,v=this.height,I=h.MIN_SIZE/S,W=h.MIN_SIZE/N,rt=Ct=>Math.round(Ct*1e4)/1e4,K=it(this,Q,Ve).call(this,this.rotation),ut=(Ct,xt)=>[K[0]*Ct+K[2]*xt,K[1]*Ct+K[3]*xt],St=it(this,Q,Ve).call(this,360-this.rotation),ft=(Ct,xt)=>[St[0]*Ct+St[2]*xt,St[1]*Ct+St[3]*xt];let bt,Z,J=!1,q=!1;switch(u){case"topLeft":J=!0,bt=(Ct,xt)=>[0,0],Z=(Ct,xt)=>[Ct,xt];break;case"topMiddle":bt=(Ct,xt)=>[Ct/2,0],Z=(Ct,xt)=>[Ct/2,xt];break;case"topRight":J=!0,bt=(Ct,xt)=>[Ct,0],Z=(Ct,xt)=>[0,xt];break;case"middleRight":q=!0,bt=(Ct,xt)=>[Ct,xt/2],Z=(Ct,xt)=>[0,xt/2];break;case"bottomRight":J=!0,bt=(Ct,xt)=>[Ct,xt],Z=(Ct,xt)=>[0,0];break;case"bottomMiddle":bt=(Ct,xt)=>[Ct/2,xt],Z=(Ct,xt)=>[Ct/2,0];break;case"bottomLeft":J=!0,bt=(Ct,xt)=>[0,xt],Z=(Ct,xt)=>[Ct,0];break;case"middleLeft":q=!0,bt=(Ct,xt)=>[0,xt/2],Z=(Ct,xt)=>[Ct,xt/2];break}const ct=bt(dt,v),At=Z(dt,v);let Et=ut(...At);const Dt=rt(U+Et[0]),Lt=rt(Y+Et[1]);let jt=1,Vt=1,[Gt,Wt]=this.screenToPageTranslation(y.movementX,y.movementY);if([Gt,Wt]=ft(Gt/S,Wt/N),J){const Ct=Math.hypot(dt,v);jt=Vt=Math.max(Math.min(Math.hypot(At[0]-ct[0]-Gt,At[1]-ct[1]-Wt)/Ct,1/dt,1/v),I/dt,W/v)}else q?jt=Math.max(I,Math.min(1,Math.abs(At[0]-ct[0]-Gt)))/dt:Vt=Math.max(W,Math.min(1,Math.abs(At[1]-ct[1]-Wt)))/v;const Yt=rt(dt*jt),vt=rt(v*Vt);Et=ut(...Z(Yt,vt));const at=Dt-Et[0],nt=Lt-Et[1];this.width=Yt,this.height=vt,this.x=at,this.y=nt,this.setDims(S*Yt,N*vt),this.fixAndSetPosition()},wt=new WeakSet,ze=async function(){var S;const u=a(this,o);if(!u)return;if(!a(this,f)&&!a(this,g)){u.classList.remove("done"),(S=a(this,w))==null||S.remove();return}h._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{u.setAttribute("aria-label",N)});let y=a(this,w);if(!y){gt(this,w,y=document.createElement("span")),y.className="tooltip",y.setAttribute("role","tooltip");const N=y.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",N);const U=100;u.addEventListener("mouseenter",()=>{gt(this,T,setTimeout(()=>{gt(this,T,null),a(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},U))}),u.addEventListener("mouseleave",()=>{var Y;clearTimeout(a(this,T)),gt(this,T,null),(Y=a(this,w))==null||Y.classList.remove("show")})}u.classList.add("done"),y.innerText=a(this,g)?await h._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,f),y.parentNode||u.append(y)},kt=new WeakSet,Tn=function(u){if(!this._isDraggable)return;const y=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let S,N;y&&(S={passive:!0,capture:!0},N=Y=>{const[dt,v]=this.screenToPageTranslation(Y.movementX,Y.movementY);this._uiManager.dragSelectedEditors(dt,v)},window.addEventListener("pointermove",N,S));const U=()=>{if(window.removeEventListener("pointerup",U),window.removeEventListener("blur",U),y&&window.removeEventListener("pointermove",N,S),gt(this,C,!1),!this._uiManager.endDragSession()){const{isMac:Y}=i.FeatureTest.platform;u.ctrlKey&&!Y||u.shiftKey||u.metaKey&&Y?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",U),window.addEventListener("blur",U)},G(h,B),se(h,"_borderLineWidth",-1),se(h,"_colorManager",new n.ColorManager),se(h,"_zIndex",1),se(h,"SMALL_EDITOR_SIZE",0);let c=h;e.AnnotationEditor=c;class b extends c{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,s)=>{var x,R,M,E,C,Ge,F,m,A,H,k,xn,L,Q,st,$,ot,pt,mt,X,yt,wt,Rt,kt,j,h,d,u,y,S,N,U,Y,dt,v,I,W,rt,K,ut,St,ft,bt,Z,J,q,ct,Pn,Et,qe,Lt,Xe,Vt,xe,Wt,Ye,vt,Ke,nt,oe,xt,be,ee,Rn,Mt,kn,Ft,Je,zt,ye,Pt,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=r,e.opacityToHex=c;var n=s(1),i=s(6);function r(V,l,D){for(const z of D)l.addEventListener(z,V[z].bind(V))}function c(V){return Math.round(Math.min(255,Math.max(1,255*V))).toString(16).padStart(2,"0")}class b{constructor(){G(this,x,0)}getId(){return`${n.AnnotationEditorPrefix}${_e(this,x)._++}`}}x=new WeakMap;const O=class O{constructor(){G(this,C);G(this,R,(0,n.getUuid)());G(this,M,0);G(this,E,null)}static get _isSVGFittingCanvas(){const l='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',z=new OffscreenCanvas(1,3).getContext("2d"),et=new Image;et.src=l;const lt=et.decode().then(()=>(z.drawImage(et,0,0,1,1,0,0,1,3),new Uint32Array(z.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",lt)}async getFromFile(l){const{lastModified:D,name:z,size:et,type:lt}=l;return it(this,C,Ge).call(this,`${D}_${z}_${et}_${lt}`,l)}async getFromUrl(l){return it(this,C,Ge).call(this,l,l)}async getFromId(l){a(this,E)||gt(this,E,new Map);const D=a(this,E).get(l);return D?D.bitmap?(D.refCounter+=1,D):D.file?this.getFromFile(D.file):this.getFromUrl(D.url):null}getSvgUrl(l){const D=a(this,E).get(l);return D!=null&&D.isSvg?D.svgUrl:null}deleteId(l){a(this,E)||gt(this,E,new Map);const D=a(this,E).get(l);D&&(D.refCounter-=1,D.refCounter===0&&(D.bitmap=null))}isValidId(l){return l.startsWith(`image_${a(this,R)}_`)}};R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakSet,Ge=async function(l,D){a(this,E)||gt(this,E,new Map);let z=a(this,E).get(l);if(z===null)return null;if(z!=null&&z.bitmap)return z.refCounter+=1,z;try{z||(z={bitmap:null,id:`image_${a(this,R)}_${_e(this,M)._++}`,refCounter:0,isSvg:!1});let et;if(typeof D=="string"){z.url=D;const lt=await fetch(D);if(!lt.ok)throw new Error(lt.statusText);et=await lt.blob()}else et=z.file=D;if(et.type==="image/svg+xml"){const lt=O._isSVGFittingCanvas,_t=new FileReader,Tt=new Image,It=new Promise((Ot,Xt)=>{Tt.onload=()=>{z.bitmap=Tt,z.isSvg=!0,Ot()},_t.onload=async()=>{const Nt=z.svgUrl=_t.result;Tt.src=await lt?`${Nt}#svgView(preserveAspectRatio(none))`:Nt},Tt.onerror=_t.onerror=Xt});_t.readAsDataURL(et),await It}else z.bitmap=await createImageBitmap(et);z.refCounter=1}catch(et){console.error(et),z=null}return a(this,E).set(l,z),z&&a(this,E).set(z.id,z),z};let f=O;class g{constructor(l=128){G(this,F,[]);G(this,m,!1);G(this,A,void 0);G(this,H,-1);gt(this,A,l)}add({cmd:l,undo:D,mustExec:z,type:et=NaN,overwriteIfSameType:lt=!1,keepUndo:_t=!1}){if(z&&l(),a(this,m))return;const Tt={cmd:l,undo:D,type:et};if(a(this,H)===-1){a(this,F).length>0&&(a(this,F).length=0),gt(this,H,0),a(this,F).push(Tt);return}if(lt&&a(this,F)[a(this,H)].type===et){_t&&(Tt.undo=a(this,F)[a(this,H)].undo),a(this,F)[a(this,H)]=Tt;return}const It=a(this,H)+1;It===a(this,A)?a(this,F).splice(0,1):(gt(this,H,It),It<a(this,F).length&&a(this,F).splice(It)),a(this,F).push(Tt)}undo(){a(this,H)!==-1&&(gt(this,m,!0),a(this,F)[a(this,H)].undo(),gt(this,m,!1),gt(this,H,a(this,H)-1))}redo(){a(this,H)<a(this,F).length-1&&(gt(this,H,a(this,H)+1),gt(this,m,!0),a(this,F)[a(this,H)].cmd(),gt(this,m,!1))}hasSomethingToUndo(){return a(this,H)!==-1}hasSomethingToRedo(){return a(this,H)<a(this,F).length-1}destroy(){gt(this,F,null)}}F=new WeakMap,m=new WeakMap,A=new WeakMap,H=new WeakMap,e.CommandManager=g;class o{constructor(l){G(this,k);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:D}=n.FeatureTest.platform;for(const[z,et,lt={}]of l)for(const _t of z){const Tt=_t.startsWith("mac+");D&&Tt?(this.callbacks.set(_t.slice(4),{callback:et,options:lt}),this.allKeys.add(_t.split("+").at(-1))):!D&&!Tt&&(this.callbacks.set(_t,{callback:et,options:lt}),this.allKeys.add(_t.split("+").at(-1)))}}exec(l,D){if(!this.allKeys.has(D.key))return;const z=this.callbacks.get(it(this,k,xn).call(this,D));if(!z)return;const{callback:et,options:{bubbles:lt=!1,args:_t=[],checker:Tt=null}}=z;Tt&&!Tt(l,D)||(et.bind(l,..._t)(),lt||(D.stopPropagation(),D.preventDefault()))}}k=new WeakSet,xn=function(l){l.altKey&&this.buffer.push("alt"),l.ctrlKey&&this.buffer.push("ctrl"),l.metaKey&&this.buffer.push("meta"),l.shiftKey&&this.buffer.push("shift"),this.buffer.push(l.key);const D=this.buffer.join("+");return this.buffer.length=0,D},e.KeyboardManager=o;const B=class B{get _colors(){const l=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(l),(0,n.shadow)(this,"_colors",l)}convert(l){const D=(0,i.getRGB)(l);if(!window.matchMedia("(forced-colors: active)").matches)return D;for(const[z,et]of this._colors)if(et.every((lt,_t)=>lt===D[_t]))return B._colorsMapping.get(z);return D}getHexCode(l){const D=this._colors.get(l);return D?n.Util.makeHexColor(...D):l}};se(B,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=B;e.ColorManager=w;const $t=class $t{constructor(l,D,z,et,lt,_t){G(this,ct);G(this,Et);G(this,Lt);G(this,Vt);G(this,Wt);G(this,vt);G(this,nt);G(this,xt);G(this,ee);G(this,Mt);G(this,Ft);G(this,zt);G(this,Pt);G(this,L,null);G(this,Q,new Map);G(this,st,new Map);G(this,$,null);G(this,ot,null);G(this,pt,new g);G(this,mt,0);G(this,X,new Set);G(this,yt,null);G(this,wt,null);G(this,Rt,new Set);G(this,kt,null);G(this,j,new b);G(this,h,!1);G(this,d,!1);G(this,u,null);G(this,y,n.AnnotationEditorType.NONE);G(this,S,new Set);G(this,N,null);G(this,U,this.blur.bind(this));G(this,Y,this.focus.bind(this));G(this,dt,this.copy.bind(this));G(this,v,this.cut.bind(this));G(this,I,this.paste.bind(this));G(this,W,this.keydown.bind(this));G(this,rt,this.onEditingAction.bind(this));G(this,K,this.onPageChanging.bind(this));G(this,ut,this.onScaleChanging.bind(this));G(this,St,this.onRotationChanging.bind(this));G(this,ft,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});G(this,bt,[0,0]);G(this,Z,null);G(this,J,null);G(this,q,null);gt(this,J,l),gt(this,q,D),gt(this,$,z),this._eventBus=et,this._eventBus._on("editingaction",a(this,rt)),this._eventBus._on("pagechanging",a(this,K)),this._eventBus._on("scalechanging",a(this,ut)),this._eventBus._on("rotationchanging",a(this,St)),gt(this,ot,lt.annotationStorage),gt(this,kt,lt.filterFactory),gt(this,N,_t),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const l=$t.prototype,D=lt=>{const{activeElement:_t}=document;return _t&&a(lt,J).contains(_t)&&lt.hasSomethingToControl()},z=this.TRANSLATE_SMALL,et=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new o([[["ctrl+a","mac+meta+a"],l.selectAll],[["ctrl+z","mac+meta+z"],l.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],l.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],l.delete],[["Escape","mac+Escape"],l.unselectAll],[["ArrowLeft","mac+ArrowLeft"],l.translateSelectedEditors,{args:[-z,0],checker:D}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],l.translateSelectedEditors,{args:[-et,0],checker:D}],[["ArrowRight","mac+ArrowRight"],l.translateSelectedEditors,{args:[z,0],checker:D}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],l.translateSelectedEditors,{args:[et,0],checker:D}],[["ArrowUp","mac+ArrowUp"],l.translateSelectedEditors,{args:[0,-z],checker:D}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],l.translateSelectedEditors,{args:[0,-et],checker:D}],[["ArrowDown","mac+ArrowDown"],l.translateSelectedEditors,{args:[0,z],checker:D}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],l.translateSelectedEditors,{args:[0,et],checker:D}]]))}destroy(){it(this,Vt,xe).call(this),it(this,Et,qe).call(this),this._eventBus._off("editingaction",a(this,rt)),this._eventBus._off("pagechanging",a(this,K)),this._eventBus._off("scalechanging",a(this,ut)),this._eventBus._off("rotationchanging",a(this,St));for(const l of a(this,st).values())l.destroy();a(this,st).clear(),a(this,Q).clear(),a(this,Rt).clear(),gt(this,L,null),a(this,S).clear(),a(this,pt).destroy(),a(this,$).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",a(this,N)?a(this,kt).addHCMFilter(a(this,N).foreground,a(this,N).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(a(this,J)).direction)}editAltText(l){var D;(D=a(this,$))==null||D.editAltText(this,l)}onPageChanging({pageNumber:l}){gt(this,mt,l-1)}focusMainContainer(){a(this,J).focus()}findParent(l,D){for(const z of a(this,st).values()){const{x:et,y:lt,width:_t,height:Tt}=z.div.getBoundingClientRect();if(l>=et&&l<=et+_t&&D>=lt&&D<=lt+Tt)return z}return null}disableUserSelect(l=!1){a(this,q).classList.toggle("noUserSelect",l)}addShouldRescale(l){a(this,Rt).add(l)}removeShouldRescale(l){a(this,Rt).delete(l)}onScaleChanging({scale:l}){this.commitOrRemove(),this.viewParameters.realScale=l*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const D of a(this,Rt))D.onScaleChanging()}onRotationChanging({pagesRotation:l}){this.commitOrRemove(),this.viewParameters.rotation=l}addToAnnotationStorage(l){!l.isEmpty()&&a(this,ot)&&!a(this,ot).has(l.id)&&a(this,ot).setValue(l.id,l)}blur(){if(!this.hasSelection)return;const{activeElement:l}=document;for(const D of a(this,S))if(D.div.contains(l)){gt(this,u,[D,l]),D._focusEventsAllowed=!1;break}}focus(){if(!a(this,u))return;const[l,D]=a(this,u);gt(this,u,null),D.addEventListener("focusin",()=>{l._focusEventsAllowed=!0},{once:!0}),D.focus()}addEditListeners(){it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this)}removeEditListeners(){it(this,Vt,xe).call(this),it(this,vt,Ke).call(this)}copy(l){var z;if(l.preventDefault(),(z=a(this,L))==null||z.commitOrRemove(),!this.hasSelection)return;const D=[];for(const et of a(this,S)){const lt=et.serialize(!0);lt&&D.push(lt)}D.length!==0&&l.clipboardData.setData("application/pdfjs",JSON.stringify(D))}cut(l){this.copy(l),this.delete()}paste(l){l.preventDefault();const{clipboardData:D}=l;for(const lt of D.items)for(const _t of a(this,wt))if(_t.isHandlingMimeForPasting(lt.type)){_t.paste(lt,this.currentLayer);return}let z=D.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(lt){(0,n.warn)(`paste: "${lt.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const et=this.currentLayer;try{const lt=[];for(const It of z){const Ot=et.deserialize(It);if(!Ot)return;lt.push(Ot)}const _t=()=>{for(const It of lt)it(this,Ft,Je).call(this,It);it(this,Pt,Qe).call(this,lt)},Tt=()=>{for(const It of lt)It.remove()};this.addCommands({cmd:_t,undo:Tt,mustExec:!0})}catch(lt){(0,n.warn)(`paste: "${lt.message}".`)}}keydown(l){var D;(D=this.getActive())!=null&&D.shouldGetKeyboardEvents()||$t._keyboardManager.exec(this,l)}onEditingAction(l){["undo","redo","delete","selectAll"].includes(l.name)&&this[l.name]()}setEditingState(l){l?(it(this,ct,Pn).call(this),it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this),it(this,nt,oe).call(this,{isEditing:a(this,y)!==n.AnnotationEditorType.NONE,isEmpty:it(this,zt,ye).call(this),hasSomethingToUndo:a(this,pt).hasSomethingToUndo(),hasSomethingToRedo:a(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,Et,qe).call(this),it(this,Vt,xe).call(this),it(this,vt,Ke).call(this),it(this,nt,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(l){if(!a(this,wt)){gt(this,wt,l);for(const D of a(this,wt))it(this,xt,be).call(this,D.defaultPropertiesToUpdate)}}getId(){return a(this,j).getId()}get currentLayer(){return a(this,st).get(a(this,mt))}getLayer(l){return a(this,st).get(l)}get currentPageIndex(){return a(this,mt)}addLayer(l){a(this,st).set(l.pageIndex,l),a(this,h)?l.enable():l.disable()}removeLayer(l){a(this,st).delete(l.pageIndex)}updateMode(l,D=null){if(a(this,y)!==l){if(gt(this,y,l),l===n.AnnotationEditorType.NONE){this.setEditingState(!1),it(this,Mt,kn).call(this);return}this.setEditingState(!0),it(this,ee,Rn).call(this),this.unselectAll();for(const z of a(this,st).values())z.updateMode(l);if(D){for(const z of a(this,Q).values())if(z.annotationElementId===D){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(l){l!==a(this,y)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:l})}updateParams(l,D){if(a(this,wt)){if(l===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(l);return}for(const z of a(this,S))z.updateParams(l,D);for(const z of a(this,wt))z.updateDefaultParams(l,D)}}enableWaiting(l=!1){if(a(this,d)!==l){gt(this,d,l);for(const D of a(this,st).values())l?D.disableClick():D.enableClick(),D.div.classList.toggle("waiting",l)}}getEditors(l){const D=[];for(const z of a(this,Q).values())z.pageIndex===l&&D.push(z);return D}getEditor(l){return a(this,Q).get(l)}addEditor(l){a(this,Q).set(l.id,l)}removeEditor(l){var D;a(this,Q).delete(l.id),this.unselect(l),(!l.annotationElementId||!a(this,X).has(l.annotationElementId))&&((D=a(this,ot))==null||D.remove(l.id))}addDeletedAnnotationElement(l){a(this,X).add(l.annotationElementId),l.deleted=!0}isDeletedAnnotationElement(l){return a(this,X).has(l)}removeDeletedAnnotationElement(l){a(this,X).delete(l.annotationElementId),l.deleted=!1}setActiveEditor(l){a(this,L)!==l&&(gt(this,L,l),l&&it(this,xt,be).call(this,l.propertiesToUpdate))}toggleSelected(l){if(a(this,S).has(l)){a(this,S).delete(l),l.unselect(),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,S).add(l),l.select(),it(this,xt,be).call(this,l.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}setSelected(l){for(const D of a(this,S))D!==l&&D.unselect();a(this,S).clear(),a(this,S).add(l),l.select(),it(this,xt,be).call(this,l.propertiesToUpdate),it(this,nt,oe).call(this,{hasSelectedEditor:!0})}isSelected(l){return a(this,S).has(l)}unselect(l){l.unselect(),a(this,S).delete(l),it(this,nt,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,S).size!==0}undo(){a(this,pt).undo(),it(this,nt,oe).call(this,{hasSomethingToUndo:a(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,zt,ye).call(this)})}redo(){a(this,pt).redo(),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,pt).hasSomethingToRedo(),isEmpty:it(this,zt,ye).call(this)})}addCommands(l){a(this,pt).add(l),it(this,nt,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,zt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const l=[...a(this,S)],D=()=>{for(const et of l)et.remove()},z=()=>{for(const et of l)it(this,Ft,Je).call(this,et)};this.addCommands({cmd:D,undo:z,mustExec:!0})}commitOrRemove(){var l;(l=a(this,L))==null||l.commitOrRemove()}hasSomethingToControl(){return a(this,L)||this.hasSelection}selectAll(){for(const l of a(this,S))l.commit();it(this,Pt,Qe).call(this,a(this,Q).values())}unselectAll(){if(a(this,L)){a(this,L).commitOrRemove();return}if(this.hasSelection){for(const l of a(this,S))l.unselect();a(this,S).clear(),it(this,nt,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(l,D,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;a(this,bt)[0]+=l,a(this,bt)[1]+=D;const[et,lt]=a(this,bt),_t=[...a(this,S)],Tt=1e3;a(this,Z)&&clearTimeout(a(this,Z)),gt(this,Z,setTimeout(()=>{gt(this,Z,null),a(this,bt)[0]=a(this,bt)[1]=0,this.addCommands({cmd:()=>{for(const It of _t)a(this,Q).has(It.id)&&It.translateInPage(et,lt)},undo:()=>{for(const It of _t)a(this,Q).has(It.id)&&It.translateInPage(-et,-lt)},mustExec:!1})},Tt));for(const It of _t)It.translateInPage(l,D)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,yt,new Map);for(const l of a(this,S))a(this,yt).set(l,{savedX:l.x,savedY:l.y,savedPageIndex:l.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,yt))return!1;this.disableUserSelect(!1);const l=a(this,yt);gt(this,yt,null);let D=!1;for(const[{x:et,y:lt,pageIndex:_t},Tt]of l)Tt.newX=et,Tt.newY=lt,Tt.newPageIndex=_t,D||(D=et!==Tt.savedX||lt!==Tt.savedY||_t!==Tt.savedPageIndex);if(!D)return!1;const z=(et,lt,_t,Tt)=>{if(a(this,Q).has(et.id)){const It=a(this,st).get(Tt);It?et._setParentAndPosition(It,lt,_t):(et.pageIndex=Tt,et.x=lt,et.y=_t)}};return this.addCommands({cmd:()=>{for(const[et,{newX:lt,newY:_t,newPageIndex:Tt}]of l)z(et,lt,_t,Tt)},undo:()=>{for(const[et,{savedX:lt,savedY:_t,savedPageIndex:Tt}]of l)z(et,lt,_t,Tt)},mustExec:!0}),!0}dragSelectedEditors(l,D){if(a(this,yt))for(const z of a(this,yt).keys())z.drag(l,D)}rebuild(l){if(l.parent===null){const D=this.getLayer(l.pageIndex);D?(D.changeParent(l),D.addOrRebuild(l)):(this.addEditor(l),this.addToAnnotationStorage(l),l.rebuild())}else l.parent.addOrRebuild(l)}isActive(l){return a(this,L)===l}getActive(){return a(this,L)}getMode(){return a(this,y)}get imageManager(){return(0,n.shadow)(this,"imageManager",new f)}};L=new WeakMap,Q=new WeakMap,st=new WeakMap,$=new WeakMap,ot=new WeakMap,pt=new WeakMap,mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,y=new WeakMap,S=new WeakMap,N=new WeakMap,U=new WeakMap,Y=new WeakMap,dt=new WeakMap,v=new WeakMap,I=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,bt=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakSet,Pn=function(){window.addEventListener("focus",a(this,Y)),window.addEventListener("blur",a(this,U))},Et=new WeakSet,qe=function(){window.removeEventListener("focus",a(this,Y)),window.removeEventListener("blur",a(this,U))},Lt=new WeakSet,Xe=function(){window.addEventListener("keydown",a(this,W),{capture:!0})},Vt=new WeakSet,xe=function(){window.removeEventListener("keydown",a(this,W),{capture:!0})},Wt=new WeakSet,Ye=function(){document.addEventListener("copy",a(this,dt)),document.addEventListener("cut",a(this,v)),document.addEventListener("paste",a(this,I))},vt=new WeakSet,Ke=function(){document.removeEventListener("copy",a(this,dt)),document.removeEventListener("cut",a(this,v)),document.removeEventListener("paste",a(this,I))},nt=new WeakSet,oe=function(l){Object.entries(l).some(([z,et])=>a(this,ft)[z]!==et)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,ft),l)})},xt=new WeakSet,be=function(l){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:l})},ee=new WeakSet,Rn=function(){if(!a(this,h)){gt(this,h,!0);for(const l of a(this,st).values())l.enable()}},Mt=new WeakSet,kn=function(){if(this.unselectAll(),a(this,h)){gt(this,h,!1);for(const l of a(this,st).values())l.disable()}},Ft=new WeakSet,Je=function(l){const D=a(this,st).get(l.pageIndex);D?D.addOrRebuild(l):this.addEditor(l)},zt=new WeakSet,ye=function(){if(a(this,Q).size===0)return!0;if(a(this,Q).size===1)for(const l of a(this,Q).values())return l.isEmpty();return!1},Pt=new WeakSet,Qe=function(l){a(this,S).clear();for(const D of l)D.isEmpty()||(a(this,S).add(D),D.select());it(this,nt,oe).call(this,{hasSelectedEditor:!0})},se($t,"TRANSLATE_SMALL",1),se($t,"TRANSLATE_BIG",10);let T=$t;e.AnnotationEditorUIManager=T},(t,e,s)=>{var mt,X,yt,wt,Rt,kt,j,h,d,u,y,S,fe,U,pe,dt,Ze,I,Pe,rt,Re,ut,ve,ft,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=H,e.getColorValues=Q,e.getCurrentTransform=st,e.getCurrentTransformInverse=$,e.getFilenameFromUrl=C,e.getPdfFilenameFromUrl=P,e.getRGB=L,e.getXfaPageViewport=B,e.isDataScheme=M,e.isPdfFile=E,e.isValidFetchUrl=F,e.loadScript=A,e.noContextMenu=m,e.setLayerDimensions=ot;var n=s(7),i=s(1);const r="http://www.w3.org/2000/svg",pt=class pt{};se(pt,"CSS",96),se(pt,"PDF",72),se(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let c=pt;e.PixelsPerInch=c;class b extends n.BaseFilterFactory{constructor({docId:q,ownerDocument:ct=globalThis.document}={}){super();G(this,S);G(this,U);G(this,dt);G(this,I);G(this,rt);G(this,ut);G(this,ft);G(this,mt,void 0);G(this,X,void 0);G(this,yt,void 0);G(this,wt,void 0);G(this,Rt,void 0);G(this,kt,void 0);G(this,j,void 0);G(this,h,void 0);G(this,d,void 0);G(this,u,void 0);G(this,y,0);gt(this,yt,q),gt(this,wt,ct)}addFilter(q){if(!q)return"none";let ct=a(this,S,fe).get(q);if(ct)return ct;let At,Et,Dt,Lt;if(q.length===1){const Wt=q[0],Yt=new Array(256);for(let vt=0;vt<256;vt++)Yt[vt]=Wt[vt]/255;Lt=At=Et=Dt=Yt.join(",")}else{const[Wt,Yt,vt]=q,at=new Array(256),nt=new Array(256),Ct=new Array(256);for(let xt=0;xt<256;xt++)at[xt]=Wt[xt]/255,nt[xt]=Yt[xt]/255,Ct[xt]=vt[xt]/255;At=at.join(","),Et=nt.join(","),Dt=Ct.join(","),Lt=`${At}${Et}${Dt}`}if(ct=a(this,S,fe).get(Lt),ct)return a(this,S,fe).set(q,ct),ct;const jt=`g_${a(this,yt)}_transfer_map_${_e(this,y)._++}`,Vt=`url(#${jt})`;a(this,S,fe).set(q,Vt),a(this,S,fe).set(Lt,Vt);const Gt=it(this,I,Pe).call(this,jt);return it(this,ut,ve).call(this,At,Et,Dt,Gt),Vt}addHCMFilter(q,ct){var Yt;const At=`${q}-${ct}`;if(a(this,kt)===At)return a(this,j);if(gt(this,kt,At),gt(this,j,"none"),(Yt=a(this,Rt))==null||Yt.remove(),!q||!ct)return a(this,j);const Et=it(this,ft,Ae).call(this,q);q=i.Util.makeHexColor(...Et);const Dt=it(this,ft,Ae).call(this,ct);if(ct=i.Util.makeHexColor(...Dt),a(this,U,pe).style.color="",q==="#000000"&&ct==="#ffffff"||q===ct)return a(this,j);const Lt=new Array(256);for(let vt=0;vt<=255;vt++){const at=vt/255;Lt[vt]=at<=.03928?at/12.92:((at+.055)/1.055)**2.4}const jt=Lt.join(","),Vt=`g_${a(this,yt)}_hcm_filter`,Gt=gt(this,h,it(this,I,Pe).call(this,Vt));it(this,ut,ve).call(this,jt,jt,jt,Gt),it(this,dt,Ze).call(this,Gt);const Wt=(vt,at)=>{const nt=Et[vt]/255,Ct=Dt[vt]/255,xt=new Array(at+1);for(let ne=0;ne<=at;ne++)xt[ne]=nt+ne/at*(Ct-nt);return xt.join(",")};return it(this,ut,ve).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Gt),gt(this,j,`url(#${Vt})`),a(this,j)}addHighlightHCMFilter(q,ct,At,Et){var Ct;const Dt=`${q}-${ct}-${At}-${Et}`;if(a(this,d)===Dt)return a(this,u);if(gt(this,d,Dt),gt(this,u,"none"),(Ct=a(this,h))==null||Ct.remove(),!q||!ct)return a(this,u);const[Lt,jt]=[q,ct].map(it(this,ft,Ae).bind(this));let Vt=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),Gt=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),[Wt,Yt]=[At,Et].map(it(this,ft,Ae).bind(this));Gt<Vt&&([Vt,Gt,Wt,Yt]=[Gt,Vt,Yt,Wt]),a(this,U,pe).style.color="";const vt=(xt,ne,ee)=>{const ht=new Array(256),Mt=(Gt-Vt)/ee,Ht=xt/255,Ft=(ne-xt)/(255*ee);let Ut=0;for(let zt=0;zt<=ee;zt++){const Zt=Math.round(Vt+zt*Mt),Pt=Ht+zt*Ft;for(let Jt=Ut;Jt<=Zt;Jt++)ht[Jt]=Pt;Ut=Zt+1}for(let zt=Ut;zt<256;zt++)ht[zt]=ht[Ut-1];return ht.join(",")},at=`g_${a(this,yt)}_hcm_highlight_filter`,nt=gt(this,h,it(this,I,Pe).call(this,at));return it(this,dt,Ze).call(this,nt),it(this,ut,ve).call(this,vt(Wt[0],Yt[0],5),vt(Wt[1],Yt[1],5),vt(Wt[2],Yt[2],5),nt),gt(this,u,`url(#${at})`),a(this,u)}destroy(q=!1){q&&(a(this,j)||a(this,u))||(a(this,X)&&(a(this,X).parentNode.parentNode.remove(),gt(this,X,null)),a(this,mt)&&(a(this,mt).clear(),gt(this,mt,null)),gt(this,y,0))}}mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,y=new WeakMap,S=new WeakSet,fe=function(){return a(this,mt)||gt(this,mt,new Map)},U=new WeakSet,pe=function(){if(!a(this,X)){const q=a(this,wt).createElement("div"),{style:ct}=q;ct.visibility="hidden",ct.contain="strict",ct.width=ct.height=0,ct.position="absolute",ct.top=ct.left=0,ct.zIndex=-1;const At=a(this,wt).createElementNS(r,"svg");At.setAttribute("width",0),At.setAttribute("height",0),gt(this,X,a(this,wt).createElementNS(r,"defs")),q.append(At),At.append(a(this,X)),a(this,wt).body.append(q)}return a(this,X)},dt=new WeakSet,Ze=function(q){const ct=a(this,wt).createElementNS(r,"feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(ct)},I=new WeakSet,Pe=function(q){const ct=a(this,wt).createElementNS(r,"filter");return ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("id",q),a(this,U,pe).append(ct),ct},rt=new WeakSet,Re=function(q,ct,At){const Et=a(this,wt).createElementNS(r,ct);Et.setAttribute("type","discrete"),Et.setAttribute("tableValues",At),q.append(Et)},ut=new WeakSet,ve=function(q,ct,At,Et){const Dt=a(this,wt).createElementNS(r,"feComponentTransfer");Et.append(Dt),it(this,rt,Re).call(this,Dt,"feFuncR",q),it(this,rt,Re).call(this,Dt,"feFuncG",ct),it(this,rt,Re).call(this,Dt,"feFuncB",At)},ft=new WeakSet,Ae=function(q){return a(this,U,pe).style.color=q,L(getComputedStyle(a(this,U,pe)).getPropertyValue("color"))},e.DOMFilterFactory=b;class f extends n.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,q){const ct=this._document.createElement("canvas");return ct.width=J,ct.height=q,ct}}e.DOMCanvasFactory=f;async function g(Z,J=!1){if(F(Z,document.baseURI)){const q=await fetch(Z);if(!q.ok)throw new Error(q.statusText);return J?new Uint8Array(await q.arrayBuffer()):(0,i.stringToBytes)(await q.text())}return new Promise((q,ct)=>{const At=new XMLHttpRequest;At.open("GET",Z,!0),J&&(At.responseType="arraybuffer"),At.onreadystatechange=()=>{if(At.readyState===XMLHttpRequest.DONE){if(At.status===200||At.status===0){let Et;if(J&&At.response?Et=new Uint8Array(At.response):!J&&At.responseText&&(Et=(0,i.stringToBytes)(At.responseText)),Et){q(Et);return}}ct(new Error(At.statusText))}},At.send(null)})}class o extends n.BaseCMapReaderFactory{_fetchData(J,q){return g(J,this.isCompressed).then(ct=>({cMapData:ct,compressionType:q}))}}e.DOMCMapReaderFactory=o;class w extends n.BaseStandardFontDataFactory{_fetchData(J){return g(J,!0)}}e.DOMStandardFontDataFactory=w;class T extends n.BaseSVGFactory{_createSVG(J){return document.createElementNS(r,J)}}e.DOMSVGFactory=T;class x{constructor({viewBox:J,scale:q,rotation:ct,offsetX:At=0,offsetY:Et=0,dontFlip:Dt=!1}){this.viewBox=J,this.scale=q,this.rotation=ct,this.offsetX=At,this.offsetY=Et;const Lt=(J[2]+J[0])/2,jt=(J[3]+J[1])/2;let Vt,Gt,Wt,Yt;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:Vt=-1,Gt=0,Wt=0,Yt=1;break;case 90:Vt=0,Gt=1,Wt=1,Yt=0;break;case 270:Vt=0,Gt=-1,Wt=-1,Yt=0;break;case 0:Vt=1,Gt=0,Wt=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Wt=-Wt,Yt=-Yt);let vt,at,nt,Ct;Vt===0?(vt=Math.abs(jt-J[1])*q+At,at=Math.abs(Lt-J[0])*q+Et,nt=(J[3]-J[1])*q,Ct=(J[2]-J[0])*q):(vt=Math.abs(Lt-J[0])*q+At,at=Math.abs(jt-J[1])*q+Et,nt=(J[2]-J[0])*q,Ct=(J[3]-J[1])*q),this.transform=[Vt*q,Gt*q,Wt*q,Yt*q,vt-Vt*q*Lt-Wt*q*jt,at-Gt*q*Lt-Yt*q*jt],this.width=nt,this.height=Ct}get rawDims(){const{viewBox:J}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:q=this.rotation,offsetX:ct=this.offsetX,offsetY:At=this.offsetY,dontFlip:Et=!1}={}){return new x({viewBox:this.viewBox.slice(),scale:J,rotation:q,offsetX:ct,offsetY:At,dontFlip:Et})}convertToViewportPoint(J,q){return i.Util.applyTransform([J,q],this.transform)}convertToViewportRectangle(J){const q=i.Util.applyTransform([J[0],J[1]],this.transform),ct=i.Util.applyTransform([J[2],J[3]],this.transform);return[q[0],q[1],ct[0],ct[1]]}convertToPdfPoint(J,q){return i.Util.applyInverseTransform([J,q],this.transform)}}e.PageViewport=x;class R extends i.BaseException{constructor(J,q=0){super(J,"RenderingCancelledException"),this.extraDelay=q}}e.RenderingCancelledException=R;function M(Z){const J=Z.length;let q=0;for(;q<J&&Z[q].trim()==="";)q++;return Z.substring(q,q+5).toLowerCase()==="data:"}function E(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function C(Z,J=!1){return J||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function P(Z,J="document.pdf"){if(typeof Z!="string")return J;if(M(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,At=q.exec(Z);let Et=ct.exec(At[1])||ct.exec(At[2])||ct.exec(At[3]);if(Et&&(Et=Et[0],Et.includes("%")))try{Et=ct.exec(decodeURIComponent(Et))[0]}catch{}return Et||J}class O{constructor(){se(this,"started",Object.create(null));se(this,"times",[])}time(J){J in this.started&&(0,i.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,i.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let q=0;for(const{name:ct}of this.times)q=Math.max(ct.length,q);for(const{name:ct,start:At,end:Et}of this.times)J.push(`${ct.padEnd(q)} ${Et-At}ms
`);return J.join("")}}e.StatTimer=O;function F(Z,J){try{const{protocol:q}=J?new URL(Z,J):new URL(Z);return q==="http:"||q==="https:"}catch{return!1}}function m(Z){Z.preventDefault()}function A(Z,J=!1){return new Promise((q,ct)=>{const At=document.createElement("script");At.src=Z,At.onload=function(Et){J&&At.remove(),q(Et)},At.onerror=function(){ct(new Error(`Cannot load script at: ${At.src}`))},(document.head||document.documentElement).append(At)})}function H(Z){console.log("Deprecated API usage: "+Z)}let k;class _{static toDateObject(J){if(!J||typeof J!="string")return null;k||(k=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=k.exec(J);if(!q)return null;const ct=parseInt(q[1],10);let At=parseInt(q[2],10);At=At>=1&&At<=12?At-1:0;let Et=parseInt(q[3],10);Et=Et>=1&&Et<=31?Et:1;let Dt=parseInt(q[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Lt=parseInt(q[5],10);Lt=Lt>=0&&Lt<=59?Lt:0;let jt=parseInt(q[6],10);jt=jt>=0&&jt<=59?jt:0;const Vt=q[7]||"Z";let Gt=parseInt(q[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Wt=parseInt(q[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,Vt==="-"?(Dt+=Gt,Lt+=Wt):Vt==="+"&&(Dt-=Gt,Lt-=Wt),new Date(Date.UTC(ct,At,Et,Dt,Lt,jt))}}e.PDFDateString=_;function B(Z,{scale:J=1,rotation:q=0}){const{width:ct,height:At}=Z.attributes.style,Et=[0,0,parseInt(ct),parseInt(At)];return new x({viewBox:Et,scale:J,rotation:q})}function L(Z){if(Z.startsWith("#")){const J=parseInt(Z.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(J=>parseInt(J)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function Q(Z){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const q of Z.keys()){J.style.color=q;const ct=window.getComputedStyle(J).color;Z.set(q,L(ct))}J.remove()}function st(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform();return[J,q,ct,At,Et,Dt]}function $(Z){const{a:J,b:q,c:ct,d:At,e:Et,f:Dt}=Z.getTransform().invertSelf();return[J,q,ct,At,Et,Dt]}function ot(Z,J,q=!1,ct=!0){if(J instanceof x){const{pageWidth:At,pageHeight:Et}=J.rawDims,{style:Dt}=Z,Lt=i.FeatureTest.isCSSRoundSupported,jt=`var(--scale-factor) * ${At}px`,Vt=`var(--scale-factor) * ${Et}px`,Gt=Lt?`round(${jt}, 1px)`:`calc(${jt})`,Wt=Lt?`round(${Vt}, 1px)`:`calc(${Vt})`;!q||J.rotation%180===0?(Dt.width=Gt,Dt.height=Wt):(Dt.width=Wt,Dt.height=Gt)}ct&&Z.setAttribute("data-main-rotation",J.rotation)}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(o){return"none"}addHCMFilter(o,w){return"none"}addHighlightHCMFilter(o,w,T,x){return"none"}destroy(o=!1){}}e.BaseFilterFactory=i;class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,w){if(o<=0||w<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(o,w);return{canvas:T,context:T.getContext("2d")}}reset(o,w,T){if(!o.canvas)throw new Error("Canvas is not specified");if(w<=0||T<=0)throw new Error("Invalid canvas size");o.canvas.width=w,o.canvas.height=T}destroy(o){if(!o.canvas)throw new Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,w){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class c{constructor({baseUrl:o=null,isCompressed:w=!0}){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=w}async fetch({name:o}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw new Error("CMap name must be specified.");const w=this.baseUrl+o+(this.isCompressed?".bcmap":""),T=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(w,T).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(o,w){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=c;class b{constructor({baseUrl:o=null}){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${o}`;return this._fetchData(w).catch(T=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(o){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=b;class f{constructor(){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,w,T=!1){if(o<=0||w<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),T||(x.setAttribute("width",`${o}px`),x.setAttribute("height",`${w}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${o} ${w}`),x}createElement(o){if(typeof o!="string")throw new Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=f},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,r=4294901760,c=65535;class b{constructor(g){this.h1=g?g&4294967295:i,this.h2=g?g&4294967295:i}update(g){let o,w;if(typeof g=="string"){o=new Uint8Array(g.length*2),w=0;for(let H=0,k=g.length;H<k;H++){const _=g.charCodeAt(H);_<=255?o[w++]=_:(o[w++]=_>>>8,o[w++]=_&255)}}else if((0,n.isArrayBuffer)(g))o=g.slice(),w=o.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=w>>2,x=w-T*4,R=new Uint32Array(o.buffer,0,T);let M=0,E=0,C=this.h1,P=this.h2;const O=3432918353,F=461845907,m=O&c,A=F&c;for(let H=0;H<T;H++)H&1?(M=R[H],M=M*O&r|M*m&c,M=M<<15|M>>>17,M=M*F&r|M*A&c,C^=M,C=C<<13|C>>>19,C=C*5+3864292196):(E=R[H],E=E*O&r|E*m&c,E=E<<15|E>>>17,E=E*F&r|E*A&c,P^=E,P=P<<13|P>>>19,P=P*5+3864292196);switch(M=0,x){case 3:M^=o[T*4+2]<<16;case 2:M^=o[T*4+1]<<8;case 1:M^=o[T*4],M=M*O&r|M*m&c,M=M<<15|M>>>17,M=M*F&r|M*A&c,T&1?C^=M:P^=M}this.h1=C,this.h2=P}hexdigest(){let g=this.h1,o=this.h2;return g^=o>>>1,g=g*3981806797&r|g*36045&c,o=o*4283543511&r|((o<<16|g>>>16)*2950163797&r)>>>16,g^=o>>>1,g=g*444984403&r|g*60499&c,o=o*3301882366&r|((o<<16|g>>>16)*3120437893&r)>>>16,g^=o>>>1,(g>>>0).toString(16).padStart(8,"0")+(o>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=b},(t,e,s)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({ownerDocument:f=globalThis.document,styleElement:g=null}){G(this,c,new Set);this._document=f,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(f){this.nativeFontFaces.add(f),this._document.fonts.add(f)}removeNativeFontFace(f){this.nativeFontFaces.delete(f),this._document.fonts.delete(f)}insertRule(f){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const g=this.styleElement.sheet;g.insertRule(f,g.cssRules.length)}clear(){for(const f of this.nativeFontFaces)this._document.fonts.delete(f);this.nativeFontFaces.clear(),a(this,c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(f){if(!(!f||a(this,c).has(f.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:g,src:o,style:w}=f,T=new FontFace(g,o,w);this.addNativeFontFace(T);try{await T.load(),a(this,c).add(g)}catch{(0,n.warn)(`Cannot load system font: ${f.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(T)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(f){if(f.attached||f.missingFile&&!f.systemFontInfo)return;if(f.attached=!0,f.systemFontInfo){await this.loadSystemFont(f.systemFontInfo);return}if(this.isFontLoadingAPISupported){const o=f.createNativeFontFace();if(o){this.addNativeFontFace(o);try{await o.loaded}catch(w){throw(0,n.warn)(`Failed to load font '${o.family}': '${w}'.`),f.disableFontFace=!0,w}}return}const g=f.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise(o=>{const w=this._queueLoadingCallback(o);this._prepareFontLoadEvent(f,w)})}}get isFontLoadingAPISupported(){var g;const f=!!((g=this._document)!=null&&g.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",f)}get isSyncFontLoadingSupported(){let f=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(f=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",f)}_queueLoadingCallback(f){function g(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;o.length>0&&o[0].done;){const T=o.shift();setTimeout(T.callback,0)}}const{loadingRequests:o}=this,w={done:!1,complete:g,callback:f};return o.push(w),w}get _loadTestFont(){const f=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",f)}_prepareFontLoadEvent(f,g){function o(L,Q){return L.charCodeAt(Q)<<24|L.charCodeAt(Q+1)<<16|L.charCodeAt(Q+2)<<8|L.charCodeAt(Q+3)&255}function w(L,Q,st,$){const ot=L.substring(0,Q),pt=L.substring(Q+st);return ot+$+pt}let T,x;const R=this._document.createElement("canvas");R.width=1,R.height=1;const M=R.getContext("2d");let E=0;function C(L,Q){if(++E>30){(0,n.warn)("Load test font never loaded."),Q();return}if(M.font="30px "+L,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(C.bind(null,L,Q))}const P=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=w(O,976,P.length,P);const m=16,A=1482184792;let H=o(O,m);for(T=0,x=P.length-3;T<x;T+=4)H=H-A+o(P,T)|0;T<P.length&&(H=H-A+o(P+"XXX",T)|0),O=w(O,m,4,(0,n.string32)(H));const k=`url(data:font/opentype;base64,${btoa(O)});`,_=`@font-face {font-family:"${P}";src:${k}}`;this.insertRule(_);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const L of[f.loadedName,P]){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=L,B.append(Q)}this._document.body.append(B),C(P,()=>{B.remove(),g.complete()})}}c=new WeakMap,e.FontLoader=i;class r{constructor(f,{isEvalSupported:g=!0,disableFontFace:o=!1,ignoreErrors:w=!1,inspectFont:T=null}){this.compiledGlyphs=Object.create(null);for(const x in f)this[x]=f[x];this.isEvalSupported=g!==!1,this.disableFontFace=o===!0,this.ignoreErrors=w===!0,this._inspectFont=T}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let f;if(!this.cssFontInfo)f=new FontFace(this.loadedName,this.data,{});else{const o={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(o.style=`oblique ${this.cssFontInfo.italicAngle}deg`),f=new FontFace(this.cssFontInfo.fontFamily,this.data,o)}return(g=this._inspectFont)==null||g.call(this,this),f}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const f=(0,n.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(f)});`;let o;if(!this.cssFontInfo)o=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let T=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(T+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),o=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${T}src:${g}}`}return(w=this._inspectFont)==null||w.call(this,this,g),o}getPathGenerator(f,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let o;try{o=f.get(this.loadedName+"_path_"+g)}catch(w){if(!this.ignoreErrors)throw w;return(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[g]=function(T,x){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const T of o){const x=T.args!==void 0?T.args.join(","):"";w.push("c.",T.cmd,"(",x,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",w.join(""))}return this.compiledGlyphs[g]=function(w,T){for(const x of o)x.cmd==="scale"&&(x.args=[T,-T]),w[x.cmd].apply(w,x.args)}}}e.FontFaceObject=r},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(7);s(1);const i=function(g){return new Promise((o,w)=>{require$$5.readFile(g,(x,R)=>{if(x||!R){w(new Error(x));return}o(new Uint8Array(R))})})};class r extends n.BaseFilterFactory{}e.NodeFilterFactory=r;class c extends n.BaseCanvasFactory{_createCanvas(o,w){return require$$5.createCanvas(o,w)}}e.NodeCanvasFactory=c;class b extends n.BaseCMapReaderFactory{_fetchData(o,w){return i(o).then(T=>({cMapData:T,compressionType:w}))}}e.NodeCMapReaderFactory=b;class f extends n.BaseStandardFontDataFactory{_fetchData(o){return i(o)}}e.NodeStandardFontDataFactory=f},(t,e,s)=>{var X,tn,wt,en;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(1),i=s(6),r=s(12),c=s(13);const b=16,f=100,g=4096,o=15,w=10,T=1e3,x=16;function R(j,h){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){h.save(),this.__originalSave()},j.restore=function(){h.restore(),this.__originalRestore()},j.translate=function(u,y){h.translate(u,y),this.__originalTranslate(u,y)},j.scale=function(u,y){h.scale(u,y),this.__originalScale(u,y)},j.transform=function(u,y,S,N,U,Y){h.transform(u,y,S,N,U,Y),this.__originalTransform(u,y,S,N,U,Y)},j.setTransform=function(u,y,S,N,U,Y){h.setTransform(u,y,S,N,U,Y),this.__originalSetTransform(u,y,S,N,U,Y)},j.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},j.rotate=function(u){h.rotate(u),this.__originalRotate(u)},j.clip=function(u){h.clip(u),this.__originalClip(u)},j.moveTo=function(d,u){h.moveTo(d,u),this.__originalMoveTo(d,u)},j.lineTo=function(d,u){h.lineTo(d,u),this.__originalLineTo(d,u)},j.bezierCurveTo=function(d,u,y,S,N,U){h.bezierCurveTo(d,u,y,S,N,U),this.__originalBezierCurveTo(d,u,y,S,N,U)},j.rect=function(d,u,y,S){h.rect(d,u,y,S),this.__originalRect(d,u,y,S)},j.closePath=function(){h.closePath(),this.__originalClosePath()},j.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class M{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,d,u){let y;return this.cache[h]!==void 0?(y=this.cache[h],this.canvasFactory.reset(y,d,u)):(y=this.canvasFactory.create(d,u),this.cache[h]=y),y}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const d=this.cache[h];this.canvasFactory.destroy(d),delete this.cache[h]}}}function E(j,h,d,u,y,S,N,U,Y,dt){const[v,I,W,rt,K,ut]=(0,i.getCurrentTransform)(j);if(I===0&&W===0){const bt=N*v+K,Z=Math.round(bt),J=U*rt+ut,q=Math.round(J),ct=(N+Y)*v+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(U+dt)*rt+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(Math.sign(v),0,0,Math.sign(rt),Z,q),j.drawImage(h,d,u,y,S,0,0,At,Dt),j.setTransform(v,I,W,rt,K,ut),[At,Dt]}if(v===0&&rt===0){const bt=U*W+K,Z=Math.round(bt),J=N*I+ut,q=Math.round(J),ct=(U+dt)*W+K,At=Math.abs(Math.round(ct)-Z)||1,Et=(N+Y)*I+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(0,Math.sign(I),Math.sign(W),0,Z,q),j.drawImage(h,d,u,y,S,0,0,Dt,At),j.setTransform(v,I,W,rt,K,ut),[Dt,At]}j.drawImage(h,d,u,y,S,N,U,Y,dt);const St=Math.hypot(v,I),ft=Math.hypot(W,rt);return[St*Y,ft*dt]}function C(j){const{width:h,height:d}=j;if(h>T||d>T)return null;const u=1e3,y=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),S=h+1;let N=new Uint8Array(S*(d+1)),U,Y,dt;const v=h+7&-8;let I=new Uint8Array(v*d),W=0;for(const ft of j.data){let bt=128;for(;bt>0;)I[W++]=ft&bt?0:255,bt>>=1}let rt=0;for(W=0,I[W]!==0&&(N[0]=1,++rt),Y=1;Y<h;Y++)I[W]!==I[W+1]&&(N[Y]=I[W]?2:1,++rt),W++;for(I[W]!==0&&(N[Y]=2,++rt),U=1;U<d;U++){W=U*v,dt=U*S,I[W-v]!==I[W]&&(N[dt]=I[W]?1:8,++rt);let ft=(I[W]?4:0)+(I[W-v]?8:0);for(Y=1;Y<h;Y++)ft=(ft>>2)+(I[W+1]?4:0)+(I[W-v+1]?8:0),y[ft]&&(N[dt+Y]=y[ft],++rt),W++;if(I[W-v]!==I[W]&&(N[dt+Y]=I[W]?2:4,++rt),rt>u)return null}for(W=v*(d-1),dt=U*S,I[W]!==0&&(N[dt]=8,++rt),Y=1;Y<h;Y++)I[W]!==I[W+1]&&(N[dt+Y]=I[W]?4:8,++rt),W++;if(I[W]!==0&&(N[dt+Y]=4,++rt),rt>u)return null;const K=new Int32Array([0,S,-1,0,-S,0,0,0,1]),ut=new Path2D;for(U=0;rt&&U<=d;U++){let ft=U*S;const bt=ft+h;for(;ft<bt&&!N[ft];)ft++;if(ft===bt)continue;ut.moveTo(ft%S,U);const Z=ft;let J=N[ft];do{const q=K[J];do ft+=q;while(!N[ft]);const ct=N[ft];ct!==5&&ct!==10?(J=ct,N[ft]=0):(J=ct&51*J>>4,N[ft]&=J>>2|J<<2),ut.lineTo(ft%S,ft/S|0),N[ft]||--rt}while(Z!==ft);--U}return I=null,N=null,function(ft){ft.save(),ft.scale(1/h,-1/d),ft.translate(0,-d),ft.fill(ut),ft.beginPath(),ft.restore()}}class P{constructor(h,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,d])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,d){this.x=h,this.y=d}updatePathMinMax(h,d,u){[d,u]=n.Util.applyTransform([d,u],h),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(h,d){const u=n.Util.applyTransform(d,h),y=n.Util.applyTransform(d.slice(2),h);this.minX=Math.min(this.minX,u[0],y[0]),this.minY=Math.min(this.minY,u[1],y[1]),this.maxX=Math.max(this.maxX,u[0],y[0]),this.maxY=Math.max(this.maxY,u[1],y[1])}updateScalingPathMinMax(h,d){n.Util.scaleMinMax(h,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(h,d,u,y,S,N,U,Y,dt,v){const I=n.Util.bezierBoundingBox(d,u,y,S,N,U,Y,dt);if(v){v[0]=Math.min(v[0],I[0],I[2]),v[1]=Math.max(v[1],I[0],I[2]),v[2]=Math.min(v[2],I[1],I[3]),v[3]=Math.max(v[3],I[1],I[3]);return}this.updateRectMinMax(h,I)}getPathBoundingBox(h=r.PathType.FILL,d=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(h===r.PathType.STROKE){d||(0,n.unreachable)("Stroke bounding box must include transform.");const y=n.Util.singularValueDecompose2dScale(d),S=y[0]*this.lineWidth/2,N=y[1]*this.lineWidth/2;u[0]-=S,u[1]-=N,u[2]+=S,u[3]+=N}return u}updateClipFromPath(){const h=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=r.PathType.FILL,d=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(h,d))}}function O(j,h){if(typeof ImageData<"u"&&h instanceof ImageData){j.putImageData(h,0,0);return}const d=h.height,u=h.width,y=d%x,S=(d-y)/x,N=y===0?S:S+1,U=j.createImageData(u,x);let Y=0,dt;const v=h.data,I=U.data;let W,rt,K,ut;if(h.kind===n.ImageKind.GRAYSCALE_1BPP){const St=v.byteLength,ft=new Uint32Array(I.buffer,0,I.byteLength>>2),bt=ft.length,Z=u+7>>3,J=4294967295,q=n.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<N;W++){for(K=W<S?x:y,dt=0,rt=0;rt<K;rt++){const ct=St-Y;let At=0;const Et=ct>Z?u:ct*8-7,Dt=Et&-8;let Lt=0,jt=0;for(;At<Dt;At+=8)jt=v[Y++],ft[dt++]=jt&128?J:q,ft[dt++]=jt&64?J:q,ft[dt++]=jt&32?J:q,ft[dt++]=jt&16?J:q,ft[dt++]=jt&8?J:q,ft[dt++]=jt&4?J:q,ft[dt++]=jt&2?J:q,ft[dt++]=jt&1?J:q;for(;At<Et;At++)Lt===0&&(jt=v[Y++],Lt=128),ft[dt++]=jt&Lt?J:q,Lt>>=1}for(;dt<bt;)ft[dt++]=0;j.putImageData(U,0,W*x)}}else if(h.kind===n.ImageKind.RGBA_32BPP){for(rt=0,ut=u*x*4,W=0;W<S;W++)I.set(v.subarray(Y,Y+ut)),Y+=ut,j.putImageData(U,0,rt),rt+=x;W<N&&(ut=u*y*4,I.set(v.subarray(Y,Y+ut)),j.putImageData(U,0,rt))}else if(h.kind===n.ImageKind.RGB_24BPP)for(K=x,ut=u*K,W=0;W<N;W++){for(W>=S&&(K=y,ut=u*K),dt=0,rt=ut;rt--;)I[dt++]=v[Y++],I[dt++]=v[Y++],I[dt++]=v[Y++],I[dt++]=255;j.putImageData(U,0,W*x)}else throw new Error(`bad image kind: ${h.kind}`)}function F(j,h){if(h.bitmap){j.drawImage(h.bitmap,0,0);return}const d=h.height,u=h.width,y=d%x,S=(d-y)/x,N=y===0?S:S+1,U=j.createImageData(u,x);let Y=0;const dt=h.data,v=U.data;for(let I=0;I<N;I++){const W=I<S?x:y;({srcPos:Y}=(0,c.convertBlackAndWhiteToRGBA)({src:dt,srcPos:Y,dest:v,width:u,height:W,nonBlackColor:0})),j.putImageData(U,0,I*x)}}function m(j,h){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of d)j[u]!==void 0&&(h[u]=j[u]);j.setLineDash!==void 0&&(h.setLineDash(j.getLineDash()),h.lineDashOffset=j.lineDashOffset)}function A(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!n.isNodeJS){const{filter:h}=j;h!=="none"&&h!==""&&(j.filter="none")}}function H(j,h,d,u){const y=j.length;for(let S=3;S<y;S+=4){const N=j[S];if(N===0)j[S-3]=h,j[S-2]=d,j[S-1]=u;else if(N<255){const U=255-N;j[S-3]=j[S-3]*N+h*U>>8,j[S-2]=j[S-2]*N+d*U>>8,j[S-1]=j[S-1]*N+u*U>>8}}}function k(j,h,d){const u=j.length,y=1/255;for(let S=3;S<u;S+=4){const N=d?d[j[S]]:j[S];h[S]=h[S]*N*y|0}}function _(j,h,d){const u=j.length;for(let y=3;y<u;y+=4){const S=j[y-3]*77+j[y-2]*152+j[y-1]*28;h[y]=d?h[y]*d[S>>8]>>8:h[y]*S>>16}}function B(j,h,d,u,y,S,N,U,Y,dt,v){const I=!!S,W=I?S[0]:0,rt=I?S[1]:0,K=I?S[2]:0,ut=y==="Luminosity"?_:k,ft=Math.min(u,Math.ceil(1048576/d));for(let bt=0;bt<u;bt+=ft){const Z=Math.min(ft,u-bt),J=j.getImageData(U-dt,bt+(Y-v),d,Z),q=h.getImageData(U,bt+Y,d,Z);I&&H(J.data,W,rt,K),ut(J.data,q.data,N),h.putImageData(q,U,bt+Y)}}function L(j,h,d,u){const y=u[0],S=u[1],N=u[2]-y,U=u[3]-S;N===0||U===0||(B(h.context,d,N,U,h.subtype,h.backdrop,h.transferMap,y,S,h.offsetX,h.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(d.canvas,0,0),j.restore())}function Q(j,h){const d=n.Util.singularValueDecompose2dScale(j);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:d[0]<=u||d[1]<=u}const st=["butt","round","square"],$=["miter","round","bevel"],ot={},pt={},kt=class kt{constructor(h,d,u,y,S,{optionalContentConfig:N,markedContentStack:U=null},Y,dt){G(this,X);G(this,wt);this.ctx=h,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=u,this.canvasFactory=y,this.filterFactory=S,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=U||[],this.optionalContentConfig=N,this.cachedCanvases=new M(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,d=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):d}beginDrawing({transform:h,viewport:d,transparency:u=!1,background:y=null}){const S=this.ctx.canvas.width,N=this.ctx.canvas.height,U=this.ctx.fillStyle;if(this.ctx.fillStyle=y||"#ffffff",this.ctx.fillRect(0,0,S,N),this.ctx.fillStyle=U,u){const Y=this.cachedCanvases.getCanvas("transparent",S,N);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(h,d,u,y){const S=h.argsArray,N=h.fnArray;let U=d||0;const Y=S.length;if(Y===U)return U;const dt=Y-U>w&&typeof u=="function",v=dt?Date.now()+o:0;let I=0;const W=this.commonObjs,rt=this.objs;let K;for(;;){if(y!==void 0&&U===y.nextBreakPoint)return y.breakIt(U,u),U;if(K=N[U],K!==n.OPS.dependency)this[K].apply(this,S[U]);else for(const ut of S[U]){const St=ut.startsWith("g_")?W:rt;if(!St.has(ut))return St.get(ut,u),U}if(U++,U===Y)return U;if(dt&&++I>w){if(Date.now()>v)return u(),U;I=0}}}endDrawing(){it(this,X,tn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const d of h.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);h.clear()}this._cachedBitmapsMap.clear(),it(this,wt,en).call(this)}_scaleImage(h,d){const u=h.width,y=h.height;let S=Math.max(Math.hypot(d[0],d[1]),1),N=Math.max(Math.hypot(d[2],d[3]),1),U=u,Y=y,dt="prescale1",v,I;for(;S>2&&U>1||N>2&&Y>1;){let W=U,rt=Y;S>2&&U>1&&(W=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U/2),S/=U/W),N>2&&Y>1&&(rt=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,N/=Y/rt),v=this.cachedCanvases.getCanvas(dt,W,rt),I=v.context,I.clearRect(0,0,W,rt),I.drawImage(h,0,0,U,Y,0,0,W,rt),h=v.canvas,U=W,Y=rt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:U,paintHeight:Y}}_createMaskCanvas(h){const d=this.ctx,{width:u,height:y}=h,S=this.current.fillColor,N=this.current.patternFill,U=(0,i.getCurrentTransform)(d);let Y,dt,v,I;if((h.bitmap||h.data)&&h.count>1){const At=h.bitmap||h.data.buffer;dt=JSON.stringify(N?U:[U.slice(0,4),S]),Y=this._cachedBitmapsMap.get(At),Y||(Y=new Map,this._cachedBitmapsMap.set(At,Y));const Et=Y.get(dt);if(Et&&!N){const Dt=Math.round(Math.min(U[0],U[2])+U[4]),Lt=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:Et,offsetX:Dt,offsetY:Lt}}v=Et}v||(I=this.cachedCanvases.getCanvas("maskCanvas",u,y),F(I.context,h));let W=n.Util.transform(U,[1/u,0,0,-1/y,0,0]);W=n.Util.transform(W,[1,0,0,1,0,-y]);const rt=n.Util.applyTransform([0,0],W),K=n.Util.applyTransform([u,y],W),ut=n.Util.normalizeRect([rt[0],rt[1],K[0],K[1]]),St=Math.round(ut[2]-ut[0])||1,ft=Math.round(ut[3]-ut[1])||1,bt=this.cachedCanvases.getCanvas("fillCanvas",St,ft),Z=bt.context,J=Math.min(rt[0],K[0]),q=Math.min(rt[1],K[1]);Z.translate(-J,-q),Z.transform(...W),v||(v=this._scaleImage(I.canvas,(0,i.getCurrentTransformInverse)(Z)),v=v.img,Y&&N&&Y.set(dt,v)),Z.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(Z),h.interpolate),E(Z,v,0,0,v.width,v.height,0,0,u,y),Z.globalCompositeOperation="source-in";const ct=n.Util.transform((0,i.getCurrentTransformInverse)(Z),[1,0,0,1,-J,-q]);return Z.fillStyle=N?S.getPattern(d,this,ct,r.PathType.FILL):S,Z.fillRect(0,0,u,y),Y&&!N&&(this.cachedCanvases.delete("fillCanvas"),Y.set(dt,bt.canvas)),{canvas:bt.canvas,offsetX:Math.round(J),offsetY:Math.round(q)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=st[h]}setLineJoin(h){this.ctx.lineJoin=$[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,d){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(h),u.lineDashOffset=d)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[d,u]of h)switch(d){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,d=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,y=this.cachedCanvases.getCanvas(u,h,d);this.suspendedCtx=this.ctx,this.ctx=y.context;const S=this.ctx;S.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,S),R(S,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,u=this.suspendedCtx;L(u,d,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(h,d,u,y,S,N){this.ctx.transform(h,d,u,y,S,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(h,d,u){const y=this.ctx,S=this.current;let N=S.x,U=S.y,Y,dt;const v=(0,i.getCurrentTransform)(y),I=v[0]===0&&v[3]===0||v[1]===0&&v[2]===0,W=I?u.slice(0):null;for(let rt=0,K=0,ut=h.length;rt<ut;rt++)switch(h[rt]|0){case n.OPS.rectangle:N=d[K++],U=d[K++];const St=d[K++],ft=d[K++],bt=N+St,Z=U+ft;y.moveTo(N,U),St===0||ft===0?y.lineTo(bt,Z):(y.lineTo(bt,U),y.lineTo(bt,Z),y.lineTo(N,Z)),I||S.updateRectMinMax(v,[N,U,bt,Z]),y.closePath();break;case n.OPS.moveTo:N=d[K++],U=d[K++],y.moveTo(N,U),I||S.updatePathMinMax(v,N,U);break;case n.OPS.lineTo:N=d[K++],U=d[K++],y.lineTo(N,U),I||S.updatePathMinMax(v,N,U);break;case n.OPS.curveTo:Y=N,dt=U,N=d[K+4],U=d[K+5],y.bezierCurveTo(d[K],d[K+1],d[K+2],d[K+3],N,U),S.updateCurvePathMinMax(v,Y,dt,d[K],d[K+1],d[K+2],d[K+3],N,U,W),K+=6;break;case n.OPS.curveTo2:Y=N,dt=U,y.bezierCurveTo(N,U,d[K],d[K+1],d[K+2],d[K+3]),S.updateCurvePathMinMax(v,Y,dt,N,U,d[K],d[K+1],d[K+2],d[K+3],W),N=d[K+2],U=d[K+3],K+=4;break;case n.OPS.curveTo3:Y=N,dt=U,N=d[K+2],U=d[K+3],y.bezierCurveTo(d[K],d[K+1],N,U,N,U),S.updateCurvePathMinMax(v,Y,dt,d[K],d[K+1],N,U,N,U,W),K+=4;break;case n.OPS.closePath:y.closePath();break}I&&S.updateScalingPathMinMax(v,W),S.setCurrentPoint(N,U)}closePath(){this.ctx.closePath()}stroke(h=!0){const d=this.ctx,u=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(d.save(),d.strokeStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),r.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const d=this.ctx,u=this.current.fillColor,y=this.current.patternFill;let S=!1;y&&(d.save(),d.fillStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),r.PathType.FILL),S=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),S&&d.restore(),h&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ot}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,d=this.ctx;if(h===void 0){d.beginPath();return}d.save(),d.beginPath();for(const u of h)d.setTransform(...u.transform),d.translate(u.x,u.y),u.addToPath(d,u.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,d){var v;const u=this.commonObjs.get(h),y=this.current;if(!u)throw new Error(`Can't find font for ${h}`);if(y.fontMatrix=u.fontMatrix||n.FONT_IDENTITY_MATRIX,(y.fontMatrix[0]===0||y.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+h),d<0?(d=-d,y.fontDirection=-1):y.fontDirection=1,this.current.font=u,this.current.fontSize=d,u.isType3Font)return;const S=u.loadedName||"sans-serif",N=((v=u.systemFontInfo)==null?void 0:v.css)||`"${S}", ${u.fallbackName}`;let U="normal";u.black?U="900":u.bold&&(U="bold");const Y=u.italic?"italic":"normal";let dt=d;d<b?dt=b:d>f&&(dt=f),this.current.fontSizeScale=d/dt,this.ctx.font=`${Y} ${U} ${dt}px ${N}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,d){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=d}setLeadingMoveText(h,d){this.setLeading(-d),this.moveText(h,d)}setTextMatrix(h,d,u,y,S,N){this.current.textMatrix=[h,d,u,y,S,N],this.current.textMatrixScale=Math.hypot(h,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,d,u,y){const S=this.ctx,N=this.current,U=N.font,Y=N.textRenderingMode,dt=N.fontSize/N.fontSizeScale,v=Y&n.TextRenderingMode.FILL_STROKE_MASK,I=!!(Y&n.TextRenderingMode.ADD_TO_PATH_FLAG),W=N.patternFill&&!U.missingFile;let rt;(U.disableFontFace||I||W)&&(rt=U.getPathGenerator(this.commonObjs,h)),U.disableFontFace||W?(S.save(),S.translate(d,u),S.beginPath(),rt(S,dt),y&&S.setTransform(...y),(v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fill(),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.stroke(),S.restore()):((v===n.TextRenderingMode.FILL||v===n.TextRenderingMode.FILL_STROKE)&&S.fillText(h,d,u),(v===n.TextRenderingMode.STROKE||v===n.TextRenderingMode.FILL_STROKE)&&S.strokeText(h,d,u)),I&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(S),x:d,y:u,fontSize:dt,addToPath:rt})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const d=h.getImageData(0,0,10,10).data;let u=!1;for(let y=3;y<d.length;y+=4)if(d[y]>0&&d[y]<255){u=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(h){const d=this.current,u=d.font;if(u.isType3Font)return this.showType3Text(h);const y=d.fontSize;if(y===0)return;const S=this.ctx,N=d.fontSizeScale,U=d.charSpacing,Y=d.wordSpacing,dt=d.fontDirection,v=d.textHScale*dt,I=h.length,W=u.vertical,rt=W?1:-1,K=u.defaultVMetrics,ut=y*d.fontMatrix[0],St=d.textRenderingMode===n.TextRenderingMode.FILL&&!u.disableFontFace&&!d.patternFill;S.save(),S.transform(...d.textMatrix),S.translate(d.x,d.y+d.textRise),dt>0?S.scale(v,-1):S.scale(v,1);let ft;if(d.patternFill){S.save();const ct=d.fillColor.getPattern(S,this,(0,i.getCurrentTransformInverse)(S),r.PathType.FILL);ft=(0,i.getCurrentTransform)(S),S.restore(),S.fillStyle=ct}let bt=d.lineWidth;const Z=d.textMatrixScale;if(Z===0||bt===0){const ct=d.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(ct===n.TextRenderingMode.STROKE||ct===n.TextRenderingMode.FILL_STROKE)&&(bt=this.getSinglePixelWidth())}else bt/=Z;if(N!==1&&(S.scale(N,N),bt/=N),S.lineWidth=bt,u.isInvalidPDFjsFont){const ct=[];let At=0;for(const Et of h)ct.push(Et.unicode),At+=Et.width;S.fillText(ct.join(""),0,0),d.x+=At*ut*v,S.restore(),this.compose();return}let J=0,q;for(q=0;q<I;++q){const ct=h[q];if(typeof ct=="number"){J+=rt*ct*y/1e3;continue}let At=!1;const Et=(ct.isSpace?Y:0)+U,Dt=ct.fontChar,Lt=ct.accent;let jt,Vt,Gt=ct.width;if(W){const Yt=ct.vmetric||K,vt=-(ct.vmetric?Yt[1]:Gt*.5)*ut,at=Yt[2]*ut;Gt=Yt?-Yt[0]:Gt,jt=vt/N,Vt=(J+at)/N}else jt=J/N,Vt=0;if(u.remeasure&&Gt>0){const Yt=S.measureText(Dt).width*1e3/y*N;if(Gt<Yt&&this.isFontSubpixelAAEnabled){const vt=Gt/Yt;At=!0,S.save(),S.scale(vt,1),jt/=vt}else Gt!==Yt&&(jt+=(Gt-Yt)/2e3*y/N)}if(this.contentVisible&&(ct.isInFont||u.missingFile)){if(St&&!Lt)S.fillText(Dt,jt,Vt);else if(this.paintChar(Dt,jt,Vt,ft),Lt){const Yt=jt+y*Lt.offset.x/N,vt=Vt-y*Lt.offset.y/N;this.paintChar(Lt.fontChar,Yt,vt,ft)}}const Wt=W?Gt*ut-Et*dt:Gt*ut+Et*dt;J+=Wt,At&&S.restore()}W?d.y-=J:d.x+=J*v,S.restore(),this.compose()}showType3Text(h){const d=this.ctx,u=this.current,y=u.font,S=u.fontSize,N=u.fontDirection,U=y.vertical?1:-1,Y=u.charSpacing,dt=u.wordSpacing,v=u.textHScale*N,I=u.fontMatrix||n.FONT_IDENTITY_MATRIX,W=h.length,rt=u.textRenderingMode===n.TextRenderingMode.INVISIBLE;let K,ut,St,ft;if(!(rt||S===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...u.textMatrix),d.translate(u.x,u.y),d.scale(v,N),K=0;K<W;++K){if(ut=h[K],typeof ut=="number"){ft=U*ut*S/1e3,this.ctx.translate(ft,0),u.x+=ft*v;continue}const bt=(ut.isSpace?dt:0)+Y,Z=y.charProcOperatorList[ut.operatorListId];if(!Z){(0,n.warn)(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),d.scale(S,S),d.transform(...I),this.executeOperatorList(Z),this.restore()),St=n.Util.applyTransform([ut.width,0],I)[0]*S+bt,d.translate(St,0),u.x+=St*v}d.restore(),this.processingType3=null}}setCharWidth(h,d){}setCharWidthAndBounds(h,d,u,y,S,N){this.ctx.rect(u,y,S-u,N-y),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let d;if(h[0]==="TilingPattern"){const u=h[1],y=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),S={createCanvasGraphics:N=>new kt(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};d=new r.TilingPattern(h,u,this.ctx,S,y)}else d=this._getPattern(h[1],h[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,d,u){const y=n.Util.makeHexColor(h,d,u);this.ctx.strokeStyle=y,this.current.strokeColor=y}setFillRGBColor(h,d,u){const y=n.Util.makeHexColor(h,d,u);this.ctx.fillStyle=y,this.current.fillColor=y,this.current.patternFill=!1}_getPattern(h,d=null){let u;return this.cachedPatterns.has(h)?u=this.cachedPatterns.get(h):(u=(0,r.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,u)),d&&(u.matrix=d),u}shadingFill(h){if(!this.contentVisible)return;const d=this.ctx;this.save();const u=this._getPattern(h);d.fillStyle=u.getPattern(d,this,(0,i.getCurrentTransformInverse)(d),r.PathType.SHADING);const y=(0,i.getCurrentTransformInverse)(d);if(y){const{width:S,height:N}=d.canvas,[U,Y,dt,v]=n.Util.getAxialAlignedBoundingBox([0,0,S,N],y);this.ctx.fillRect(U,Y,dt-U,v-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),d)){const u=d[2]-d[0],y=d[3]-d[1];this.ctx.rect(d[0],d[1],u,y),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;h.isolated||(0,n.info)("TODO: Support non-isolated groups."),h.knockout&&(0,n.warn)("Knockout groups not supported.");const u=(0,i.getCurrentTransform)(d);if(h.matrix&&d.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let y=n.Util.getAxialAlignedBoundingBox(h.bbox,(0,i.getCurrentTransform)(d));const S=[0,0,d.canvas.width,d.canvas.height];y=n.Util.intersect(y,S)||[0,0,0,0];const N=Math.floor(y[0]),U=Math.floor(y[1]);let Y=Math.max(Math.ceil(y[2])-N,1),dt=Math.max(Math.ceil(y[3])-U,1),v=1,I=1;Y>g&&(v=Y/g,Y=g),dt>g&&(I=dt/g,dt=g),this.current.startNewPathAndClipBox([0,0,Y,dt]);let W="groupAt"+this.groupLevel;h.smask&&(W+="_smask_"+this.smaskCounter++%2);const rt=this.cachedCanvases.getCanvas(W,Y,dt),K=rt.context;K.scale(1/v,1/I),K.translate(-N,-U),K.transform(...u),h.smask?this.smaskStack.push({canvas:rt.canvas,context:K,offsetX:N,offsetY:U,scaleX:v,scaleY:I,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(N,U),d.scale(v,I),d.save()),m(d,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const y=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...y);const S=n.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],y);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose(S)}}beginAnnotation(h,d,u,y,S){if(it(this,X,tn).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const N=d[2]-d[0],U=d[3]-d[1];if(S&&this.annotationCanvasMap){u=u.slice(),u[4]-=d[0],u[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=N,d[3]=U;const[Y,dt]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:v}=this,I=Math.ceil(N*this.outputScaleX*v),W=Math.ceil(U*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(I,W);const{canvas:rt,context:K}=this.annotationCanvas;this.annotationCanvasMap.set(h,rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=K,this.ctx.save(),this.ctx.setTransform(Y,0,0,-dt,0,U*dt),A(this.ctx)}else A(this.ctx),this.ctx.rect(d[0],d[1],N,U),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...y)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,wt,en).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const d=h.count;h=this.getObject(h.data,h),h.count=d;const u=this.ctx,y=this.processingType3;if(y&&(y.compiled===void 0&&(y.compiled=C(h)),y.compiled)){y.compiled(u);return}const S=this._createMaskCanvas(h),N=S.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(N,S.offsetX,S.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(h,d,u=0,y=0,S,N){if(!this.contentVisible)return;h=this.getObject(h.data,h);const U=this.ctx;U.save();const Y=(0,i.getCurrentTransform)(U);U.transform(d,u,y,S,0,0);const dt=this._createMaskCanvas(h);U.setTransform(1,0,0,1,dt.offsetX-Y[4],dt.offsetY-Y[5]);for(let v=0,I=N.length;v<I;v+=2){const W=n.Util.transform(Y,[d,u,y,S,N[v],N[v+1]]),[rt,K]=n.Util.applyTransform([0,0],W);U.drawImage(dt.canvas,rt,K)}U.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const d=this.ctx,u=this.current.fillColor,y=this.current.patternFill;for(const S of h){const{data:N,width:U,height:Y,transform:dt}=S,v=this.cachedCanvases.getCanvas("maskCanvas",U,Y),I=v.context;I.save();const W=this.getObject(N,S);F(I,W),I.globalCompositeOperation="source-in",I.fillStyle=y?u.getPattern(I,this,(0,i.getCurrentTransformInverse)(d),r.PathType.FILL):u,I.fillRect(0,0,U,Y),I.restore(),d.save(),d.transform(...dt),d.scale(1,-1),E(d,v.canvas,0,0,U,Y,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const d=this.getObject(h);if(!d){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(h,d,u,y){if(!this.contentVisible)return;const S=this.getObject(h);if(!S){(0,n.warn)("Dependent image isn't ready yet");return}const N=S.width,U=S.height,Y=[];for(let dt=0,v=y.length;dt<v;dt+=2)Y.push({transform:[d,0,0,u,y[dt],y[dt+1]],x:0,y:0,w:N,h:U});this.paintInlineImageXObjectGroup(S,Y)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:d,width:u,height:y}=h,S=this.cachedCanvases.getCanvas("inlineImage",u,y),N=S.context;return N.filter=this.current.transferMaps,N.drawImage(d,0,0),N.filter="none",S.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const d=h.width,u=h.height,y=this.ctx;if(this.save(),!n.isNodeJS){const{filter:U}=y;U!=="none"&&U!==""&&(y.filter="none")}y.scale(1/d,-1/u);let S;if(h.bitmap)S=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)S=h;else{const Y=this.cachedCanvases.getCanvas("inlineImage",d,u).context;O(Y,h),S=this.applyTransferMapsToCanvas(Y)}const N=this._scaleImage(S,(0,i.getCurrentTransformInverse)(y));y.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(y),h.interpolate),E(y,N.img,0,0,N.paintWidth,N.paintHeight,0,-u,d,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,d){if(!this.contentVisible)return;const u=this.ctx;let y;if(h.bitmap)y=h.bitmap;else{const S=h.width,N=h.height,Y=this.cachedCanvases.getCanvas("inlineImage",S,N).context;O(Y,h),y=this.applyTransferMapsToCanvas(Y)}for(const S of d)u.save(),u.transform(...S.transform),u.scale(1,-1),E(u,y,S.x,S.y,S.w,S.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,d){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,d){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const u=this.ctx;this.pendingClip&&(d||(this.pendingClip===pt?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,i.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const d=Math.abs(h[0]*h[3]-h[2]*h[1]),u=Math.hypot(h[0],h[2]),y=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(u,y)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:h}=this.current,{a:d,b:u,c:y,d:S}=this.ctx.getTransform();let N,U;if(u===0&&y===0){const Y=Math.abs(d),dt=Math.abs(S);if(Y===dt)if(h===0)N=U=1/Y;else{const v=Y*h;N=U=v<1?1/v:1}else if(h===0)N=1/Y,U=1/dt;else{const v=Y*h,I=dt*h;N=v<1?1/v:1,U=I<1?1/I:1}}else{const Y=Math.abs(d*S-u*y),dt=Math.hypot(d,u),v=Math.hypot(y,S);if(h===0)N=v/Y,U=dt/Y;else{const I=h*Y;N=v>I?v/I:1,U=dt>I?dt/I:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=U}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:d}=this,{lineWidth:u}=this.current,[y,S]=this.getScaleForStroking();if(d.lineWidth=u||1,y===1&&S===1){d.stroke();return}const N=d.getLineDash();if(h&&d.save(),d.scale(y,S),N.length>0){const U=Math.max(y,S);d.setLineDash(N.map(Y=>Y/U)),d.lineDashOffset/=U}d.stroke(),h&&d.restore()}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};X=new WeakSet,tn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wt=new WeakSet,en=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const d=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=d}}};let mt=kt;e.CanvasGraphics=mt;for(const j in n.OPS)mt.prototype[j]!==void 0&&(mt.prototype[n.OPS[j]]=mt.prototype[j])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=x;var n=s(1),i=s(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=r;function c(C,P){if(!P)return;const O=P[2]-P[0],F=P[3]-P[1],m=new Path2D;m.rect(P[0],P[1],O,F),C.clip(m)}class b{constructor(){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class f extends b{constructor(P){super(),this._type=P[1],this._bbox=P[2],this._colorStops=P[3],this._p0=P[4],this._p1=P[5],this._r0=P[6],this._r1=P[7],this.matrix=null}_createGradient(P){let O;this._type==="axial"?O=P.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=P.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const F of this._colorStops)O.addColorStop(F[0],F[1]);return O}getPattern(P,O,F,m){let A;if(m===r.STROKE||m===r.FILL){const H=O.current.getClippedPathBoundingBox(m,(0,i.getCurrentTransform)(P))||[0,0,0,0],k=Math.ceil(H[2]-H[0])||1,_=Math.ceil(H[3]-H[1])||1,B=O.cachedCanvases.getCanvas("pattern",k,_,!0),L=B.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-H[0],-H[1]),F=n.Util.transform(F,[1,0,0,1,H[0],H[1]]),L.transform(...O.baseTransform),this.matrix&&L.transform(...this.matrix),c(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),A=P.createPattern(B.canvas,"no-repeat");const Q=new DOMMatrix(F);A.setTransform(Q)}else c(P,this._bbox),A=this._createGradient(P);return A}}function g(C,P,O,F,m,A,H,k){const _=P.coords,B=P.colors,L=C.data,Q=C.width*4;let st;_[O+1]>_[F+1]&&(st=O,O=F,F=st,st=A,A=H,H=st),_[F+1]>_[m+1]&&(st=F,F=m,m=st,st=H,H=k,k=st),_[O+1]>_[F+1]&&(st=O,O=F,F=st,st=A,A=H,H=st);const $=(_[O]+P.offsetX)*P.scaleX,ot=(_[O+1]+P.offsetY)*P.scaleY,pt=(_[F]+P.offsetX)*P.scaleX,mt=(_[F+1]+P.offsetY)*P.scaleY,X=(_[m]+P.offsetX)*P.scaleX,yt=(_[m+1]+P.offsetY)*P.scaleY;if(ot>=yt)return;const wt=B[A],Rt=B[A+1],kt=B[A+2],j=B[H],h=B[H+1],d=B[H+2],u=B[k],y=B[k+1],S=B[k+2],N=Math.round(ot),U=Math.round(yt);let Y,dt,v,I,W,rt,K,ut;for(let St=N;St<=U;St++){if(St<mt){const q=St<ot?0:(ot-St)/(ot-mt);Y=$-($-pt)*q,dt=wt-(wt-j)*q,v=Rt-(Rt-h)*q,I=kt-(kt-d)*q}else{let q;St>yt?q=1:mt===yt?q=0:q=(mt-St)/(mt-yt),Y=pt-(pt-X)*q,dt=j-(j-u)*q,v=h-(h-y)*q,I=d-(d-S)*q}let ft;St<ot?ft=0:St>yt?ft=1:ft=(ot-St)/(ot-yt),W=$-($-X)*ft,rt=wt-(wt-u)*ft,K=Rt-(Rt-y)*ft,ut=kt-(kt-S)*ft;const bt=Math.round(Math.min(Y,W)),Z=Math.round(Math.max(Y,W));let J=Q*St+bt*4;for(let q=bt;q<=Z;q++)ft=(Y-q)/(Y-W),ft<0?ft=0:ft>1&&(ft=1),L[J++]=dt-(dt-rt)*ft|0,L[J++]=v-(v-K)*ft|0,L[J++]=I-(I-ut)*ft|0,L[J++]=255}}function o(C,P,O){const F=P.coords,m=P.colors;let A,H;switch(P.type){case"lattice":const k=P.verticesPerRow,_=Math.floor(F.length/k)-1,B=k-1;for(A=0;A<_;A++){let L=A*k;for(let Q=0;Q<B;Q++,L++)g(C,O,F[L],F[L+1],F[L+k],m[L],m[L+1],m[L+k]),g(C,O,F[L+k+1],F[L+1],F[L+k],m[L+k+1],m[L+1],m[L+k])}break;case"triangles":for(A=0,H=F.length;A<H;A+=3)g(C,O,F[A],F[A+1],F[A+2],m[A],m[A+1],m[A+2]);break;default:throw new Error("illegal figure")}}class w extends b{constructor(P){super(),this._coords=P[2],this._colors=P[3],this._figures=P[4],this._bounds=P[5],this._bbox=P[7],this._background=P[8],this.matrix=null}_createMeshCanvas(P,O,F){const k=Math.floor(this._bounds[0]),_=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-k,L=Math.ceil(this._bounds[3])-_,Q=Math.min(Math.ceil(Math.abs(B*P[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(L*P[1]*1.1)),3e3),$=B/Q,ot=L/st,pt={coords:this._coords,colors:this._colors,offsetX:-k,offsetY:-_,scaleX:1/$,scaleY:1/ot},mt=Q+2*2,X=st+2*2,yt=F.getCanvas("mesh",mt,X,!1),wt=yt.context,Rt=wt.createImageData(Q,st);if(O){const j=Rt.data;for(let h=0,d=j.length;h<d;h+=4)j[h]=O[0],j[h+1]=O[1],j[h+2]=O[2],j[h+3]=255}for(const j of this._figures)o(Rt,j,pt);return wt.putImageData(Rt,2,2),{canvas:yt.canvas,offsetX:k-2*$,offsetY:_-2*ot,scaleX:$,scaleY:ot}}getPattern(P,O,F,m){c(P,this._bbox);let A;if(m===r.SHADING)A=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(P));else if(A=n.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const k=n.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*k[0],A[1]*k[1]]}const H=this._createMeshCanvas(A,m===r.SHADING?null:this._background,O.cachedCanvases);return m!==r.SHADING&&(P.setTransform(...O.baseTransform),this.matrix&&P.transform(...this.matrix)),P.translate(H.offsetX,H.offsetY),P.scale(H.scaleX,H.scaleY),P.createPattern(H.canvas,"no-repeat")}}class T extends b{getPattern(){return"hotpink"}}function x(C){switch(C[0]){case"RadialAxial":return new f(C);case"Mesh":return new w(C);case"Dummy":return new T}throw new Error(`Unknown IR type: ${C[0]}`)}const R={COLORED:1,UNCOLORED:2},E=class E{constructor(P,O,F,m,A){this.operatorList=P[2],this.matrix=P[3]||[1,0,0,1,0,0],this.bbox=P[4],this.xstep=P[5],this.ystep=P[6],this.paintType=P[7],this.tilingType=P[8],this.color=O,this.ctx=F,this.canvasGraphicsFactory=m,this.baseTransform=A}createPatternCanvas(P){const O=this.operatorList,F=this.bbox,m=this.xstep,A=this.ystep,H=this.paintType,k=this.tilingType,_=this.color,B=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+k);const L=F[0],Q=F[1],st=F[2],$=F[3],ot=n.Util.singularValueDecompose2dScale(this.matrix),pt=n.Util.singularValueDecompose2dScale(this.baseTransform),mt=[ot[0]*pt[0],ot[1]*pt[1]],X=this.getSizeAndScale(m,this.ctx.canvas.width,mt[0]),yt=this.getSizeAndScale(A,this.ctx.canvas.height,mt[1]),wt=P.cachedCanvases.getCanvas("pattern",X.size,yt.size,!0),Rt=wt.context,kt=B.createCanvasGraphics(Rt);kt.groupLevel=P.groupLevel,this.setFillAndStrokeStyleToContext(kt,H,_);let j=L,h=Q,d=st,u=$;return L<0&&(j=0,d+=Math.abs(L)),Q<0&&(h=0,u+=Math.abs(Q)),Rt.translate(-(X.scale*j),-(yt.scale*h)),kt.transform(X.scale,0,0,yt.scale,0,0),Rt.save(),this.clipBbox(kt,j,h,d,u),kt.baseTransform=(0,i.getCurrentTransform)(kt.ctx),kt.executeOperatorList(O),kt.endDrawing(),{canvas:wt.canvas,scaleX:X.scale,scaleY:yt.scale,offsetX:j,offsetY:h}}getSizeAndScale(P,O,F){P=Math.abs(P);const m=Math.max(E.MAX_PATTERN_SIZE,O);let A=Math.ceil(P*F);return A>=m?A=m:F=A/P,{scale:F,size:A}}clipBbox(P,O,F,m,A){const H=m-O,k=A-F;P.ctx.rect(O,F,H,k),P.current.updateRectMinMax((0,i.getCurrentTransform)(P.ctx),[O,F,m,A]),P.clip(),P.endPath()}setFillAndStrokeStyleToContext(P,O,F){const m=P.ctx,A=P.current;switch(O){case R.COLORED:const H=this.ctx;m.fillStyle=H.fillStyle,m.strokeStyle=H.strokeStyle,A.fillColor=H.fillStyle,A.strokeColor=H.strokeStyle;break;case R.UNCOLORED:const k=n.Util.makeHexColor(F[0],F[1],F[2]);m.fillStyle=k,m.strokeStyle=k,A.fillColor=k,A.strokeColor=k;break;default:throw new n.FormatError(`Unsupported paint type: ${O}`)}}getPattern(P,O,F,m){let A=F;m!==r.SHADING&&(A=n.Util.transform(A,O.baseTransform),this.matrix&&(A=n.Util.transform(A,this.matrix)));const H=this.createPatternCanvas(O);let k=new DOMMatrix(A);k=k.translate(H.offsetX,H.offsetY),k=k.scale(1/H.scaleX,1/H.scaleY);const _=P.createPattern(H.canvas,"repeat");return _.setTransform(k),_}};se(E,"MAX_PATTERN_SIZE",3e3);let M=E;e.TilingPattern=M},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=i,e.grayToRGBA=b;var n=s(1);function i(f){switch(f.kind){case n.ImageKind.GRAYSCALE_1BPP:return r(f);case n.ImageKind.RGB_24BPP:return c(f)}return null}function r({src:f,srcPos:g=0,dest:o,width:w,height:T,nonBlackColor:x=4294967295,inverseDecode:R=!1}){const M=n.FeatureTest.isLittleEndian?4278190080:255,[E,C]=R?[x,M]:[M,x],P=w>>3,O=w&7,F=f.length;o=new Uint32Array(o.buffer);let m=0;for(let A=0;A<T;A++){for(const k=g+P;g<k;g++){const _=g<F?f[g]:255;o[m++]=_&128?C:E,o[m++]=_&64?C:E,o[m++]=_&32?C:E,o[m++]=_&16?C:E,o[m++]=_&8?C:E,o[m++]=_&4?C:E,o[m++]=_&2?C:E,o[m++]=_&1?C:E}if(O===0)continue;const H=g<F?f[g++]:255;for(let k=0;k<O;k++)o[m++]=H&1<<7-k?C:E}return{srcPos:g,destPos:m}}function c({src:f,srcPos:g=0,dest:o,destPos:w=0,width:T,height:x}){let R=0;const M=f.length>>2,E=new Uint32Array(f.buffer,g,M);if(n.FeatureTest.isLittleEndian){for(;R<M-2;R+=3,w+=4){const C=E[R],P=E[R+1],O=E[R+2];o[w]=C|4278190080,o[w+1]=C>>>24|P<<8|4278190080,o[w+2]=P>>>16|O<<16|4278190080,o[w+3]=O>>>8|4278190080}for(let C=R*4,P=f.length;C<P;C+=3)o[w++]=f[C]|f[C+1]<<8|f[C+2]<<16|4278190080}else{for(;R<M-2;R+=3,w+=4){const C=E[R],P=E[R+1],O=E[R+2];o[w]=C|255,o[w+1]=C<<24|P>>>8|255,o[w+2]=P<<16|O>>>16|255,o[w+3]=O<<8|255}for(let C=R*4,P=f.length;C<P;C+=3)o[w++]=f[C]<<24|f[C+1]<<16|f[C+2]<<8|255}return{srcPos:g,destPos:w}}function b(f,g){if(n.FeatureTest.isLittleEndian)for(let o=0,w=f.length;o<w;o++)g[o]=f[o]*65793|4278190080;else for(let o=0,w=f.length;o<w;o++)g[o]=f[o]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(t,e,s)=>{var f,Mn,o,Fn,T,ke;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new n.AbortException(R.message);case"MissingPDFException":return new n.MissingPDFException(R.message);case"PasswordException":return new n.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new n.UnknownErrorException(R.message,R.details);default:return new n.UnknownErrorException(R.message,R.toString())}}class b{constructor(M,E,C){G(this,f);G(this,o);G(this,T);this.sourceName=M,this.targetName=E,this.comObj=C,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const O=P.data;if(O.targetName!==this.sourceName)return;if(O.stream){it(this,o,Fn).call(this,O);return}if(O.callback){const m=O.callbackId,A=this.callbackCapabilities[m];if(!A)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],O.callback===i.DATA)A.resolve(O.data);else if(O.callback===i.ERROR)A.reject(c(O.reason));else throw new Error("Unexpected callback case");return}const F=this.actionHandler[O.action];if(!F)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const m=this.sourceName,A=O.sourceName;new Promise(function(H){H(F(O.data))}).then(function(H){C.postMessage({sourceName:m,targetName:A,callback:i.DATA,callbackId:O.callbackId,data:H})},function(H){C.postMessage({sourceName:m,targetName:A,callback:i.ERROR,callbackId:O.callbackId,reason:c(H)})});return}if(O.streamId){it(this,f,Mn).call(this,O);return}F(O.data)},C.addEventListener("message",this._onComObjOnMessage)}on(M,E){const C=this.actionHandler;if(C[M])throw new Error(`There is already an actionName called "${M}"`);C[M]=E}send(M,E,C){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,data:E},C)}sendWithPromise(M,E,C){const P=this.callbackId++,O=new n.PromiseCapability;this.callbackCapabilities[P]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,callbackId:P,data:E},C)}catch(F){O.reject(F)}return O.promise}sendWithStream(M,E,C,P){const O=this.streamId++,F=this.sourceName,m=this.targetName,A=this.comObj;return new ReadableStream({start:H=>{const k=new n.PromiseCapability;return this.streamControllers[O]={controller:H,startCall:k,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:F,targetName:m,action:M,streamId:O,data:E,desiredSize:H.desiredSize},P),k.promise},pull:H=>{const k=new n.PromiseCapability;return this.streamControllers[O].pullCall=k,A.postMessage({sourceName:F,targetName:m,stream:r.PULL,streamId:O,desiredSize:H.desiredSize}),k.promise},cancel:H=>{(0,n.assert)(H instanceof Error,"cancel must have a valid reason");const k=new n.PromiseCapability;return this.streamControllers[O].cancelCall=k,this.streamControllers[O].isClosed=!0,A.postMessage({sourceName:F,targetName:m,stream:r.CANCEL,streamId:O,reason:c(H)}),k.promise}},C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f=new WeakSet,Mn=function(M){const E=M.streamId,C=this.sourceName,P=M.sourceName,O=this.comObj,F=this,m=this.actionHandler[M.action],A={enqueue(H,k=1,_){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=k,B>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),O.postMessage({sourceName:C,targetName:P,stream:r.ENQUEUE,streamId:E,chunk:H},_)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:C,targetName:P,stream:r.CLOSE,streamId:E}),delete F.streamSinks[E])},error(H){(0,n.assert)(H instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:C,targetName:P,stream:r.ERROR,streamId:E,reason:c(H)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:M.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[E]=A,new Promise(function(H){H(m(M.data,A))}).then(function(){O.postMessage({sourceName:C,targetName:P,stream:r.START_COMPLETE,streamId:E,success:!0})},function(H){O.postMessage({sourceName:C,targetName:P,stream:r.START_COMPLETE,streamId:E,reason:c(H)})})},o=new WeakSet,Fn=function(M){const E=M.streamId,C=this.sourceName,P=M.sourceName,O=this.comObj,F=this.streamControllers[E],m=this.streamSinks[E];switch(M.stream){case r.START_COMPLETE:M.success?F.startCall.resolve():F.startCall.reject(c(M.reason));break;case r.PULL_COMPLETE:M.success?F.pullCall.resolve():F.pullCall.reject(c(M.reason));break;case r.PULL:if(!m){O.postMessage({sourceName:C,targetName:P,stream:r.PULL_COMPLETE,streamId:E,success:!0});break}m.desiredSize<=0&&M.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=M.desiredSize,new Promise(function(A){var H;A((H=m.onPull)==null?void 0:H.call(m))}).then(function(){O.postMessage({sourceName:C,targetName:P,stream:r.PULL_COMPLETE,streamId:E,success:!0})},function(A){O.postMessage({sourceName:C,targetName:P,stream:r.PULL_COMPLETE,streamId:E,reason:c(A)})});break;case r.ENQUEUE:if((0,n.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(M.chunk);break;case r.CLOSE:if((0,n.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),it(this,T,ke).call(this,F,E);break;case r.ERROR:(0,n.assert)(F,"error should have stream controller"),F.controller.error(c(M.reason)),it(this,T,ke).call(this,F,E);break;case r.CANCEL_COMPLETE:M.success?F.cancelCall.resolve():F.cancelCall.reject(c(M.reason)),it(this,T,ke).call(this,F,E);break;case r.CANCEL:if(!m)break;new Promise(function(A){var H;A((H=m.onCancel)==null?void 0:H.call(m,c(M.reason)))}).then(function(){O.postMessage({sourceName:C,targetName:P,stream:r.CANCEL_COMPLETE,streamId:E,success:!0})},function(A){O.postMessage({sourceName:C,targetName:P,stream:r.CANCEL_COMPLETE,streamId:E,reason:c(A)})}),m.sinkCapability.reject(c(M.reason)),m.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}},T=new WeakSet,ke=async function(M,E){var C,P,O;await Promise.allSettled([(C=M.startCall)==null?void 0:C.promise,(P=M.pullCall)==null?void 0:P.promise,(O=M.cancelCall)==null?void 0:O.promise]),delete this.streamControllers[E]},e.MessageHandler=b},(t,e,s)=>{var r,c;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:f,rawData:g}){G(this,r,void 0);G(this,c,void 0);gt(this,r,f),gt(this,c,g)}getRaw(){return a(this,c)}get(f){return a(this,r).get(f)??null}getAll(){return(0,n.objectFromMap)(a(this,r))}has(f){return a(this,r).has(f)}}r=new WeakMap,c=new WeakMap,e.Metadata=i},(t,e,s)=>{var f,g,o,w,T,x,nn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1),i=s(8);const r=Symbol("INTERNAL");class c{constructor(E,C){G(this,f,!0);this.name=E,this.intent=C}get visible(){return a(this,f)}_setVisible(E,C){E!==r&&(0,n.unreachable)("Internal method `_setVisible` called."),gt(this,f,C)}}f=new WeakMap;class b{constructor(E){G(this,x);G(this,g,null);G(this,o,new Map);G(this,w,null);G(this,T,null);if(this.name=null,this.creator=null,E!==null){this.name=E.name,this.creator=E.creator,gt(this,T,E.order);for(const C of E.groups)a(this,o).set(C.id,new c(C.name,C.intent));if(E.baseState==="OFF")for(const C of a(this,o).values())C._setVisible(r,!1);for(const C of E.on)a(this,o).get(C)._setVisible(r,!0);for(const C of E.off)a(this,o).get(C)._setVisible(r,!1);gt(this,w,this.getHash())}}isVisible(E){if(a(this,o).size===0)return!0;if(!E)return(0,n.warn)("Optional content group not defined."),!0;if(E.type==="OCG")return a(this,o).has(E.id)?a(this,o).get(E.id).visible:((0,n.warn)(`Optional content group not found: ${E.id}`),!0);if(E.type==="OCMD"){if(E.expression)return it(this,x,nn).call(this,E.expression);if(!E.policy||E.policy==="AnyOn"){for(const C of E.ids){if(!a(this,o).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(a(this,o).get(C).visible)return!0}return!1}else if(E.policy==="AllOn"){for(const C of E.ids){if(!a(this,o).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!a(this,o).get(C).visible)return!1}return!0}else if(E.policy==="AnyOff"){for(const C of E.ids){if(!a(this,o).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(!a(this,o).get(C).visible)return!0}return!1}else if(E.policy==="AllOff"){for(const C of E.ids){if(!a(this,o).has(C))return(0,n.warn)(`Optional content group not found: ${C}`),!0;if(a(this,o).get(C).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,n.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,C=!0){if(!a(this,o).has(E)){(0,n.warn)(`Optional content group not found: ${E}`);return}a(this,o).get(E)._setVisible(r,!!C),gt(this,g,null)}get hasInitialVisibility(){return a(this,w)===null||this.getHash()===a(this,w)}getOrder(){return a(this,o).size?a(this,T)?a(this,T).slice():[...a(this,o).keys()]:null}getGroups(){return a(this,o).size>0?(0,n.objectFromMap)(a(this,o)):null}getGroup(E){return a(this,o).get(E)||null}getHash(){if(a(this,g)!==null)return a(this,g);const E=new i.MurmurHash3_64;for(const[C,P]of a(this,o))E.update(`${C}:${P.visible}`);return gt(this,g,E.hexdigest())}}g=new WeakMap,o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakSet,nn=function(E){const C=E.length;if(C<2)return!0;const P=E[0];for(let O=1;O<C;O++){const F=E[O];let m;if(Array.isArray(F))m=it(this,x,nn).call(this,F);else if(a(this,o).has(F))m=a(this,o).get(F).visible;else return(0,n.warn)(`Optional content group not found: ${F}`),!0;switch(P){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return P==="And"},e.OptionalContentConfig=b},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class r{constructor({length:g,initialData:o,progressiveDone:w=!1,contentDispositionFilename:T=null,disableRange:x=!1,disableStream:R=!1},M){if((0,n.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=T,(o==null?void 0:o.length)>0){const E=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!R,this._isRangeSupported=!x,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,C)=>{this._onReceiveData({begin:E,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((E,C)=>{this._onProgress({loaded:E,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:o}){const w=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const T=this._rangeReaders.some(function(x){return x._begin!==g?!1:(x._enqueue(w),!0)});(0,n.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var o,w,T,x;g.total===void 0?(w=(o=this._rangeReaders[0])==null?void 0:o.onProgress)==null||w.call(o,{loaded:g.loaded}):(x=(T=this._fullRequestReader)==null?void 0:T.onProgress)==null||x.call(T,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const o=this._rangeReaders.indexOf(g);o>=0&&this._rangeReaders.splice(o,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new c(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,o){if(o<=this._progressiveDataLength)return null;const w=new b(this,g,o);return this._pdfDataRangeTransport.requestDataRange(g,o),this._rangeReaders.push(w),w}cancelAllRequests(g){var o;(o=this._fullRequestReader)==null||o.cancel(g);for(const w of this._rangeReaders.slice(0))w.cancel(g);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=r;class c{constructor(g,o,w=!1,T=null){this._stream=g,this._done=w||!1,this._filename=(0,i.isPdfFile)(T)?T:null,this._queuedChunks=o||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new n.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(g,o,w){this._stream=g,this._begin=o,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const o=this._queuedChunk;return this._queuedChunk=null,{value:o,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new n.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(20);function r(w,T,x){return{method:"GET",headers:w,signal:x.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function c(w){const T=new Headers;for(const x in w){const R=w[x];R!==void 0&&T.append(x,R)}return T}function b(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class f{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(T,x){if(x<=this._progressiveDataLength)return null;const R=new o(this,T,x);return this._rangeRequestReaders.push(R),R}cancelAllRequests(T){var x;(x=this._fullRequestReader)==null||x.cancel(T);for(const R of this._rangeRequestReaders.slice(0))R.cancel(T)}}e.PDFFetchStream=f;class g{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const x=T.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new n.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=c(this._stream.httpHeaders);const R=x.url;fetch(R,r(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,i.validateResponseStatus)(M.status))throw(0,i.createResponseStatusError)(M.status,R);this._reader=M.body.getReader(),this._headersCapability.resolve();const E=O=>M.headers.get(O),{allowRangeRequests:C,suggestedLength:P}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=P||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;await this._headersCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}class o{constructor(T,x,R){this._stream=T,this._reader=null,this._loaded=0;const M=T.source;this._withCredentials=M.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${R-1}`);const E=M.url;fetch(E,r(this._headers,this._withCredentials,this._abortController)).then(C=>{if(!(0,i.validateResponseStatus)(C.status))throw(0,i.createResponseStatusError)(C.status,E);this._readCapability.resolve(),this._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;await this._readCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded}),{value:b(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=f,e.extractFilenameFromHeader=b,e.validateRangeRequestCapabilities=c,e.validateResponseStatus=g;var n=s(1),i=s(21),r=s(6);function c({getResponseHeader:o,isHttp:w,rangeChunkSize:T,disableRange:x}){const R={allowRangeRequests:!1,suggestedLength:void 0},M=parseInt(o("Content-Length"),10);return!Number.isInteger(M)||(R.suggestedLength=M,M<=2*T)||x||!w||o("Accept-Ranges")!=="bytes"||(o("Content-Encoding")||"identity")!=="identity"||(R.allowRangeRequests=!0),R}function b(o){const w=o("Content-Disposition");if(w){let T=(0,i.getFilenameFromContentDispositionHeader)(w);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,r.isPdfFile)(T))return T}return null}function f(o,w){return o===404||o===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${o}) while retrieving PDF "${w}".`,o)}function g(o){return o===200||o===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(r){let c=!0,b=f("filename\\*","i").exec(r);if(b){b=b[1];let M=T(b);return M=unescape(M),M=x(M),M=R(M),o(M)}if(b=w(r),b){const M=R(b);return o(M)}if(b=f("filename","i").exec(r),b){b=b[1];let M=T(b);return M=R(M),o(M)}function f(M,E){return new RegExp("(?:^|;)\\s*"+M+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function g(M,E){if(M){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const C=new TextDecoder(M,{fatal:!0}),P=(0,n.stringToBytes)(E);E=C.decode(P),c=!1}catch{}}return E}function o(M){return c&&/[\x80-\xff]/.test(M)&&(M=g("utf-8",M),c&&(M=g("iso-8859-1",M))),M}function w(M){const E=[];let C;const P=f("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(C=P.exec(M))!==null;){let[,F,m,A]=C;if(F=parseInt(F,10),F in E){if(F===0)break;continue}E[F]=[m,A]}const O=[];for(let F=0;F<E.length&&F in E;++F){let[m,A]=E[F];A=T(A),m&&(A=unescape(A),F===0&&(A=x(A))),O.push(A)}return O.join("")}function T(M){if(M.startsWith('"')){const E=M.slice(1).split('\\"');for(let C=0;C<E.length;++C){const P=E[C].indexOf('"');P!==-1&&(E[C]=E[C].slice(0,P),E.length=C+1),E[C]=E[C].replaceAll(/\\(.)/g,"$1")}M=E.join('"')}return M}function x(M){const E=M.indexOf("'");if(E===-1)return M;const C=M.slice(0,E),O=M.slice(E+1).replace(/^[^']*'/,"");return g(C,O)}function R(M){return!M.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(M)?M:M.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,C,P,O){if(P==="q"||P==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(F,m){return String.fromCharCode(parseInt(m,16))}),g(C,O);try{O=atob(O)}catch{}return g(C,O)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(20);const r=200,c=206;function b(T){const x=T.response;return typeof x!="string"?x:(0,n.stringToBytes)(x).buffer}class f{constructor(x,R={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&R.httpHeaders||Object.create(null),this.withCredentials=R.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,R,M){const E={begin:x,end:R};for(const C in M)E[C]=M[C];return this.request(E)}requestFull(x){return this.request(x)}request(x){const R=new XMLHttpRequest,M=this.currXhrId++,E=this.pendingRequests[M]={xhr:R};R.open("GET",this.url),R.withCredentials=this.withCredentials;for(const C in this.httpHeaders){const P=this.httpHeaders[C];P!==void 0&&R.setRequestHeader(C,P)}return this.isHttp&&"begin"in x&&"end"in x?(R.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),E.expectedStatus=c):E.expectedStatus=r,R.responseType="arraybuffer",x.onError&&(R.onerror=function(C){x.onError(R.status)}),R.onreadystatechange=this.onStateChange.bind(this,M),R.onprogress=this.onProgress.bind(this,M),E.onHeadersReceived=x.onHeadersReceived,E.onDone=x.onDone,E.onError=x.onError,E.onProgress=x.onProgress,R.send(null),M}onProgress(x,R){var E;const M=this.pendingRequests[x];M&&((E=M.onProgress)==null||E.call(M,R))}onStateChange(x,R){var F,m,A;const M=this.pendingRequests[x];if(!M)return;const E=M.xhr;if(E.readyState>=2&&M.onHeadersReceived&&(M.onHeadersReceived(),delete M.onHeadersReceived),E.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],E.status===0&&this.isHttp){(F=M.onError)==null||F.call(M,E.status);return}const C=E.status||r;if(!(C===r&&M.expectedStatus===c)&&C!==M.expectedStatus){(m=M.onError)==null||m.call(M,E.status);return}const O=b(E);if(C===c){const H=E.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(H);M.onDone({begin:parseInt(k[1],10),chunk:O})}else O?M.onDone({begin:0,chunk:O}):(A=M.onError)==null||A.call(M,E.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const R=this.pendingRequests[x].xhr;delete this.pendingRequests[x],R.abort()}}class g{constructor(x){this._source=x,this._manager=new f(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const R=this._rangeRequestReaders.indexOf(x);R>=0&&this._rangeRequestReaders.splice(R,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(x,R){const M=new w(this._manager,x,R);return M.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(M),M}cancelAllRequests(x){var R;(R=this._fullRequestReader)==null||R.cancel(x);for(const M of this._rangeRequestReaders.slice(0))M.cancel(x)}}e.PDFNetworkStream=g;class o{constructor(x,R){this._manager=x;const M={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._fullRequestId=x.requestFull(M),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=R.disableRange||!1,this._contentLength=R.length,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,R=this._manager.getRequestXhr(x),M=P=>R.getResponseHeader(P),{allowRangeRequests:E,suggestedLength:C}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=C||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(M),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,i.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var R;(R=this.onProgress)==null||R.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(x,R,M){this._manager=x;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(R,M,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const R=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:R,done:!1}):this._queuedChunk=R,this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,i.createResponseStatusError)(x,this._url);for(const R of this._requests)R.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var R;this.isStreamingSupported||(R=this.onProgress)==null||R.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const R=this._queuedChunk;return this._queuedChunk=null,{value:R,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function c(M){const E=require$$5,C=E.parse(M);return C.protocol==="file:"||C.host?C:/^[a-z]:[/\\]/i.test(M)?E.parse(`file:///${M}`):(C.host||(C.protocol="file:"),C)}class b{constructor(E){this.source=E,this.url=c(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new w(this),this._fullRequestReader}getRangeReader(E,C){if(C<=this._progressiveDataLength)return null;const P=this.isFsUrl?new R(this,E,C):new T(this,E,C);return this._rangeRequestReaders.push(P),P}cancelAllRequests(E){var C;(C=this._fullRequestReader)==null||C.cancel(E);for(const P of this._rangeRequestReaders.slice(0))P.cancel(E)}}e.PDFNodeStream=b;class f{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const C=E.source;this._contentLength=C.length,this._loaded=0,this._filename=null,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=E.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",C=>{this._error(C)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const C=E.source;this._isStreamingSupported=!C.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=E.length,(P=this.onProgress)==null||P.call(this,{loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",C=>{this._error(C)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(M,E){return{protocol:M.protocol,auth:M.auth,host:M.hostname,port:M.port,path:M.path,method:"GET",headers:E}}class w extends f{constructor(E){super(E);const C=P=>{if(P.statusCode===404){const A=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(P);const O=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:F,suggestedLength:m}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=F,this._contentLength=m||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const P=require$$5;this._request=P.request(o(this._url,E.httpHeaders),C)}else{const P=require$$5;this._request=P.request(o(this._url,E.httpHeaders),C)}this._request.on("error",P=>{this._storedError=P,this._headersCapability.reject(P)}),this._request.end()}}class T extends g{constructor(E,C,P){super(E),this._httpHeaders={};for(const F in E.httpHeaders){const m=E.httpHeaders[F];m!==void 0&&(this._httpHeaders[F]=m)}this._httpHeaders.Range=`bytes=${C}-${P-1}`;const O=F=>{if(F.statusCode===404){const m=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m;return}this._setReadableStream(F)};if(this._request=null,this._url.protocol==="http:"){const F=require$$5;this._request=F.request(o(this._url,this._httpHeaders),O)}else{const F=require$$5;this._request=F.request(o(this._url,this._httpHeaders),O)}this._request.on("error",F=>{this._storedError=F}),this._request.end()}}class x extends f{constructor(E){super(E);let C=decodeURIComponent(this._url.path);r.test(this._url.href)&&(C=C.replace(/^\//,""));const P=require$$5;P.lstat(C,(O,F)=>{if(O){O.code==="ENOENT"&&(O=new n.MissingPDFException(`Missing PDF "${C}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=F.size,this._setReadableStream(P.createReadStream(C)),this._headersCapability.resolve()})}}class R extends g{constructor(E,C,P){super(E);let O=decodeURIComponent(this._url.path);r.test(this._url.href)&&(O=O.replace(/^\//,""));const F=require$$5;this._setReadableStream(F.createReadStream(O,{start:C,end:P-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(6),i=s(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",f=["butt","round","square"],g=["miter","round","bevel"],o=function(F,m="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([F],{type:m}));const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let k=`data:${m};base64,`;for(let _=0,B=F.length;_<B;_+=3){const L=F[_]&255,Q=F[_+1]&255,st=F[_+2]&255,$=L>>2,ot=(L&3)<<4|Q>>4,pt=_+1<B?(Q&15)<<2|st>>6:64,mt=_+2<B?st&63:64;k+=H[$]+H[ot]+H[pt]+H[mt]}return k},w=function(){const F=new Uint8Array([137,80,78,71,13,10,26,10]),m=12,A=new Int32Array(256);for(let st=0;st<256;st++){let $=st;for(let ot=0;ot<8;ot++)$=$&1?3988292384^$>>1&2147483647:$>>1&2147483647;A[st]=$}function H(st,$,ot){let pt=-1;for(let mt=$;mt<ot;mt++){const X=(pt^st[mt])&255,yt=A[X];pt=pt>>>8^yt}return pt^-1}function k(st,$,ot,pt){let mt=pt;const X=$.length;ot[mt]=X>>24&255,ot[mt+1]=X>>16&255,ot[mt+2]=X>>8&255,ot[mt+3]=X&255,mt+=4,ot[mt]=st.charCodeAt(0)&255,ot[mt+1]=st.charCodeAt(1)&255,ot[mt+2]=st.charCodeAt(2)&255,ot[mt+3]=st.charCodeAt(3)&255,mt+=4,ot.set($,mt),mt+=$.length;const yt=H(ot,pt+4,mt);ot[mt]=yt>>24&255,ot[mt+1]=yt>>16&255,ot[mt+2]=yt>>8&255,ot[mt+3]=yt&255}function _(st,$,ot){let pt=1,mt=0;for(let X=$;X<ot;++X)pt=(pt+(st[X]&255))%65521,mt=(mt+pt)%65521;return mt<<16|pt}function B(st){if(!i.isNodeJS)return L(st);try{const $=parseInt(process.versions.node)>=8?st:Buffer.from(st),ot=require$$5.deflateSync($,{level:9});return ot instanceof Uint8Array?ot:new Uint8Array(ot)}catch($){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+$)}return L(st)}function L(st){let $=st.length;const ot=65535,pt=Math.ceil($/ot),mt=new Uint8Array(2+$+pt*5+4);let X=0;mt[X++]=120,mt[X++]=156;let yt=0;for(;$>ot;)mt[X++]=0,mt[X++]=255,mt[X++]=255,mt[X++]=0,mt[X++]=0,mt.set(st.subarray(yt,yt+ot),X),X+=ot,yt+=ot,$-=ot;mt[X++]=1,mt[X++]=$&255,mt[X++]=$>>8&255,mt[X++]=~$&65535&255,mt[X++]=(~$&65535)>>8&255,mt.set(st.subarray(yt),X),X+=st.length-yt;const wt=_(st,0,st.length);return mt[X++]=wt>>24&255,mt[X++]=wt>>16&255,mt[X++]=wt>>8&255,mt[X++]=wt&255,mt}function Q(st,$,ot,pt){const mt=st.width,X=st.height;let yt,wt,Rt;const kt=st.data;switch($){case i.ImageKind.GRAYSCALE_1BPP:wt=0,yt=1,Rt=mt+7>>3;break;case i.ImageKind.RGB_24BPP:wt=2,yt=8,Rt=mt*3;break;case i.ImageKind.RGBA_32BPP:wt=6,yt=8,Rt=mt*4;break;default:throw new Error("invalid format")}const j=new Uint8Array((1+Rt)*X);let h=0,d=0;for(let Y=0;Y<X;++Y)j[h++]=0,j.set(kt.subarray(d,d+Rt),h),d+=Rt,h+=Rt;if($===i.ImageKind.GRAYSCALE_1BPP&&pt){h=0;for(let Y=0;Y<X;Y++){h++;for(let dt=0;dt<Rt;dt++)j[h++]^=255}}const u=new Uint8Array([mt>>24&255,mt>>16&255,mt>>8&255,mt&255,X>>24&255,X>>16&255,X>>8&255,X&255,yt,wt,0,0,0]),y=B(j),S=F.length+m*3+u.length+y.length,N=new Uint8Array(S);let U=0;return N.set(F,U),U+=F.length,k("IHDR",u,N,U),U+=m+u.length,k("IDATA",y,N,U),U+=m+y.length,k("IEND",new Uint8Array(0),N,U),o(N,"image/png",ot)}return function($,ot,pt){const mt=$.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:$.kind;return Q($,mt,ot,pt)}}();class T{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(m,A){this.x=m,this.y=A}}function x(F){let m=[];const A=[];for(const H of F){if(H.fn==="save"){m.push({fnId:92,fn:"group",items:[]}),A.push(m),m=m.at(-1).items;continue}H.fn==="restore"?m=A.pop():m.push(H)}return m}function R(F){if(Number.isInteger(F))return F.toString();const m=F.toFixed(10);let A=m.length-1;if(m[A]!=="0")return m;do A--;while(m[A]==="0");return m.substring(0,m[A]==="."?A:A+1)}function M(F){if(F[4]===0&&F[5]===0){if(F[1]===0&&F[2]===0)return F[0]===1&&F[3]===1?"":`scale(${R(F[0])} ${R(F[3])})`;if(F[0]===F[3]&&F[1]===-F[2]){const m=Math.acos(F[0])*180/Math.PI;return`rotate(${R(m)})`}}else if(F[0]===1&&F[1]===0&&F[2]===0&&F[3]===1)return`translate(${R(F[4])} ${R(F[5])})`;return`matrix(${R(F[0])} ${R(F[1])} ${R(F[2])} ${R(F[3])} ${R(F[4])} ${R(F[5])})`}let E=0,C=0,P=0;class O{constructor(m,A,H=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new T,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=m,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!H,this._operatorIdMapping=[];for(const k in i.OPS)this._operatorIdMapping[i.OPS[k]]=k}getObject(m,A=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):A}save(){this.transformStack.push(this.transformMatrix);const m=this.current;this.extraStack.push(m),this.current=m.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(m){this.save(),this.executeOpTree(m),this.restore()}loadDependencies(m){const A=m.fnArray,H=m.argsArray;for(let k=0,_=A.length;k<_;k++)if(A[k]===i.OPS.dependency)for(const B of H[k]){const L=B.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(st=>{L.get(B,st)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(m,A,H,k,_,B){const L=[m,A,H,k,_,B];this.transformMatrix=i.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(m,A){this.viewport=A;const H=this._initialize(A);return this.loadDependencies(m).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(m)),H))}convertOpList(m){const A=this._operatorIdMapping,H=m.argsArray,k=m.fnArray,_=[];for(let B=0,L=k.length;B<L;B++){const Q=k[B];_.push({fnId:Q,fn:A[Q],args:H[B]})}return x(_)}executeOpTree(m){for(const A of m){const H=A.fn,k=A.fnId,_=A.args;switch(k|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(_);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(_[0],_[1]);break;case i.OPS.setFont:this.setFont(_);break;case i.OPS.showText:this.showText(_[0]);break;case i.OPS.showSpacedText:this.showText(_[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(_[0],_[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(_[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(_[0]);break;case i.OPS.setHScale:this.setHScale(_[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(_[0],_[1],_[2],_[3],_[4],_[5]);break;case i.OPS.setTextRise:this.setTextRise(_[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(_[0]);break;case i.OPS.setLineWidth:this.setLineWidth(_[0]);break;case i.OPS.setLineJoin:this.setLineJoin(_[0]);break;case i.OPS.setLineCap:this.setLineCap(_[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(_[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(_[0],_[1],_[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(_[0],_[1],_[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(_);break;case i.OPS.setFillColorN:this.setFillColorN(_);break;case i.OPS.shadingFill:this.shadingFill(_[0]);break;case i.OPS.setDash:this.setDash(_[0],_[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(_[0]);break;case i.OPS.setFlatness:this.setFlatness(_[0]);break;case i.OPS.setGState:this.setGState(_[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(_[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(_[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(_[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(_[0],_[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(_[0],_[1],_[2],_[3],_[4],_[5]);break;case i.OPS.constructPath:this.constructPath(_[0],_[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,i.warn)(`Unimplemented operator ${H}`);break}}}setWordSpacing(m){this.current.wordSpacing=m}setCharSpacing(m){this.current.charSpacing=m}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(m,A,H,k,_,B){const L=this.current;L.textMatrix=L.lineMatrix=[m,A,H,k,_,B],L.textMatrixScale=Math.hypot(m,A),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${R(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",R(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const m=this.current;m.x=m.lineX=0,m.y=m.lineY=0,m.textMatrix=i.IDENTITY_MATRIX,m.lineMatrix=i.IDENTITY_MATRIX,m.textMatrixScale=1,m.tspan=this.svgFactory.createElement("svg:tspan"),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtgrp=this.svgFactory.createElement("svg:g"),m.xcoords=[],m.ycoords=[]}moveText(m,A){const H=this.current;H.x=H.lineX+=m,H.y=H.lineY+=A,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${R(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",R(-H.y))}showText(m){const A=this.current,H=A.font,k=A.fontSize;if(k===0)return;const _=A.fontSizeScale,B=A.charSpacing,L=A.wordSpacing,Q=A.fontDirection,st=A.textHScale*Q,$=H.vertical,ot=$?1:-1,pt=H.defaultVMetrics,mt=k*A.fontMatrix[0];let X=0;for(const Rt of m){if(Rt===null){X+=Q*L;continue}else if(typeof Rt=="number"){X+=ot*Rt*k/1e3;continue}const kt=(Rt.isSpace?L:0)+B,j=Rt.fontChar;let h,d,u=Rt.width;if($){let S;const N=Rt.vmetric||pt;S=Rt.vmetric?N[1]:u*.5,S=-S*mt;const U=N[2]*mt;u=N?-N[0]:u,h=S/_,d=(X+U)/_}else h=X/_,d=0;(Rt.isInFont||H.missingFile)&&(A.xcoords.push(A.x+h),$&&A.ycoords.push(-A.y+d),A.tspan.textContent+=j);const y=$?u*mt-kt*Q:u*mt+kt*Q;X+=y}A.tspan.setAttributeNS(null,"x",A.xcoords.map(R).join(" ")),$?A.tspan.setAttributeNS(null,"y",A.ycoords.map(R).join(" ")):A.tspan.setAttributeNS(null,"y",R(-A.y)),$?A.y-=X:A.x+=X*st,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${R(A.fontSize)}px`),A.fontStyle!==r.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==r.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const yt=A.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(yt===i.TextRenderingMode.FILL||yt===i.TextRenderingMode.FILL_STROKE?(A.fillColor!==r.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),yt===i.TextRenderingMode.STROKE||yt===i.TextRenderingMode.FILL_STROKE){const Rt=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,Rt)}let wt=A.textMatrix;A.textRise!==0&&(wt=wt.slice(),wt[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${M(wt)} scale(${R(st)}, -1)`),A.txtElement.setAttributeNS(c,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(m,A){this.setLeading(-A),this.moveText(m,A)}addFontStyle(m){if(!m.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=o(m.data,m.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${m.loadedName}"; src: url(${A}); }
`}setFont(m){const A=this.current,H=this.commonObjs.get(m[0]);let k=m[1];A.font=H,this.embedFonts&&!H.missingFile&&!this.embeddedFonts[H.loadedName]&&(this.addFontStyle(H),this.embeddedFonts[H.loadedName]=H),A.fontMatrix=H.fontMatrix||i.FONT_IDENTITY_MATRIX;let _="normal";H.black?_="900":H.bold&&(_="bold");const B=H.italic?"italic":"normal";k<0?(k=-k,A.fontDirection=-1):A.fontDirection=1,A.fontSize=k,A.fontFamily=H.loadedName,A.fontWeight=_,A.fontStyle=B,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",R(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const m=this.current;m.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=m.txtElement)!=null&&A.hasChildNodes())&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(m){m>0&&(this.current.lineWidth=m)}setLineCap(m){this.current.lineCap=f[m]}setLineJoin(m){this.current.lineJoin=g[m]}setMiterLimit(m){this.current.miterLimit=m}setStrokeAlpha(m){this.current.strokeAlpha=m}setStrokeRGBColor(m,A,H){this.current.strokeColor=i.Util.makeHexColor(m,A,H)}setFillAlpha(m){this.current.fillAlpha=m}setFillRGBColor(m,A,H){this.current.fillColor=i.Util.makeHexColor(m,A,H),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(m){this.current.strokeColor=this._makeColorN_Pattern(m)}setFillColorN(m){this.current.fillColor=this._makeColorN_Pattern(m)}shadingFill(m){const{width:A,height:H}=this.viewport,k=i.Util.inverseTransform(this.transformMatrix),[_,B,L,Q]=i.Util.getAxialAlignedBoundingBox([0,0,A,H],k),st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x",_),st.setAttributeNS(null,"y",B),st.setAttributeNS(null,"width",L-_),st.setAttributeNS(null,"height",Q-B),st.setAttributeNS(null,"fill",this._makeShadingPattern(m)),this.current.fillAlpha<1&&st.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(st)}_makeColorN_Pattern(m){return m[0]==="TilingPattern"?this._makeTilingPattern(m):this._makeShadingPattern(m)}_makeTilingPattern(m){const A=m[1],H=m[2],k=m[3]||i.IDENTITY_MATRIX,[_,B,L,Q]=m[4],st=m[5],$=m[6],ot=m[7],pt=`shading${P++}`,[mt,X,yt,wt]=i.Util.normalizeRect([...i.Util.applyTransform([_,B],k),...i.Util.applyTransform([L,Q],k)]),[Rt,kt]=i.Util.singularValueDecompose2dScale(k),j=st*Rt,h=$*kt,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",pt),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",j),d.setAttributeNS(null,"height",h),d.setAttributeNS(null,"x",`${mt}`),d.setAttributeNS(null,"y",`${X}`);const u=this.svg,y=this.transformMatrix,S=this.current.fillColor,N=this.current.strokeColor,U=this.svgFactory.create(yt-mt,wt-X);if(this.svg=U,this.transformMatrix=k,ot===2){const Y=i.Util.makeHexColor(...A);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(H)),this.svg=u,this.transformMatrix=y,this.current.fillColor=S,this.current.strokeColor=N,d.append(U.childNodes[0]),this.defs.append(d),`url(#${pt})`}_makeShadingPattern(m){switch(typeof m=="string"&&(m=this.objs.get(m)),m[0]){case"RadialAxial":const A=`shading${P++}`,H=m[3];let k;switch(m[1]){case"axial":const _=m[4],B=m[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",A),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",_[0]),k.setAttributeNS(null,"y1",_[1]),k.setAttributeNS(null,"x2",B[0]),k.setAttributeNS(null,"y2",B[1]);break;case"radial":const L=m[4],Q=m[5],st=m[6],$=m[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",A),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",Q[0]),k.setAttributeNS(null,"cy",Q[1]),k.setAttributeNS(null,"r",$),k.setAttributeNS(null,"fx",L[0]),k.setAttributeNS(null,"fy",L[1]),k.setAttributeNS(null,"fr",st);break;default:throw new Error(`Unknown RadialAxial type: ${m[1]}`)}for(const _ of H){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",_[0]),B.setAttributeNS(null,"stop-color",_[1]),k.append(B)}return this.defs.append(k),`url(#${A})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${m[0]}`)}}setDash(m,A){this.current.dashArray=m,this.current.dashPhase=A}constructPath(m,A){const H=this.current;let k=H.x,_=H.y,B=[],L=0;for(const Q of m)switch(Q|0){case i.OPS.rectangle:k=A[L++],_=A[L++];const st=A[L++],$=A[L++],ot=k+st,pt=_+$;B.push("M",R(k),R(_),"L",R(ot),R(_),"L",R(ot),R(pt),"L",R(k),R(pt),"Z");break;case i.OPS.moveTo:k=A[L++],_=A[L++],B.push("M",R(k),R(_));break;case i.OPS.lineTo:k=A[L++],_=A[L++],B.push("L",R(k),R(_));break;case i.OPS.curveTo:k=A[L+4],_=A[L+5],B.push("C",R(A[L]),R(A[L+1]),R(A[L+2]),R(A[L+3]),R(k),R(_)),L+=6;break;case i.OPS.curveTo2:B.push("C",R(k),R(_),R(A[L]),R(A[L+1]),R(A[L+2]),R(A[L+3])),k=A[L+2],_=A[L+3],L+=4;break;case i.OPS.curveTo3:k=A[L+2],_=A[L+3],B.push("C",R(A[L]),R(A[L+1]),R(k),R(_),R(k),R(_)),L+=4;break;case i.OPS.closePath:B.push("Z");break}B=B.join(" "),H.path&&m.length>0&&m[0]!==i.OPS.rectangle&&m[0]!==i.OPS.moveTo?B=H.path.getAttributeNS(null,"d")+B:(H.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(H.path)),H.path.setAttributeNS(null,"d",B),H.path.setAttributeNS(null,"fill","none"),H.element=H.path,H.setCurrentPoint(k,_)}endPath(){const m=this.current;if(m.path=null,!this.pendingClip)return;if(!m.element){this.pendingClip=null;return}const A=`clippath${E++}`,H=this.svgFactory.createElement("svg:clipPath");H.setAttributeNS(null,"id",A),H.setAttributeNS(null,"transform",M(this.transformMatrix));const k=m.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,H.append(k),this.defs.append(H),m.activeClipUrl){m.clipGroup=null;for(const _ of this.extraStack)_.clipGroup=null;H.setAttributeNS(null,"clip-path",m.activeClipUrl)}m.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(m){this.pendingClip=m}closePath(){const m=this.current;if(m.path){const A=`${m.path.getAttributeNS(null,"d")}Z`;m.path.setAttributeNS(null,"d",A)}}setLeading(m){this.current.leading=-m}setTextRise(m){this.current.textRise=m}setTextRenderingMode(m){this.current.textRenderingMode=m}setHScale(m){this.current.textHScale=m/100}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[A,H]of m)switch(A){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H);break;case"CA":this.setStrokeAlpha(H);break;case"ca":this.setFillAlpha(H);break;default:(0,i.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const m=this.current;m.element&&(m.element.setAttributeNS(null,"fill",m.fillColor),m.element.setAttributeNS(null,"fill-opacity",m.fillAlpha),this.endPath())}stroke(){const m=this.current;m.element&&(this._setStrokeAttributes(m.element),m.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(m,A=1){const H=this.current;let k=H.dashArray;A!==1&&k.length>0&&(k=k.map(function(_){return A*_})),m.setAttributeNS(null,"stroke",H.strokeColor),m.setAttributeNS(null,"stroke-opacity",H.strokeAlpha),m.setAttributeNS(null,"stroke-miterlimit",R(H.miterLimit)),m.setAttributeNS(null,"stroke-linecap",H.lineCap),m.setAttributeNS(null,"stroke-linejoin",H.lineJoin),m.setAttributeNS(null,"stroke-width",R(A*H.lineWidth)+"px"),m.setAttributeNS(null,"stroke-dasharray",k.map(R).join(" ")),m.setAttributeNS(null,"stroke-dashoffset",R(A*H.dashPhase)+"px")}eoFill(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(m)}paintImageXObject(m){const A=this.getObject(m);if(!A){(0,i.warn)(`Dependent image with object ID ${m} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(m,A){const H=m.width,k=m.height,_=w(m,this.forceDataSchema,!!A),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",R(H)),B.setAttributeNS(null,"height",R(k)),this.current.element=B,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(b,"xlink:href",_),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",R(-k)),L.setAttributeNS(null,"width",R(H)+"px"),L.setAttributeNS(null,"height",R(k)+"px"),L.setAttributeNS(null,"transform",`scale(${R(1/H)} ${R(-1/k)})`),A?A.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(m){const A=this.getObject(m.data,m);if(A.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const H=this.current,k=A.width,_=A.height,B=H.fillColor;H.maskId=`mask${C++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",H.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",R(k)),Q.setAttributeNS(null,"height",R(_)),Q.setAttributeNS(null,"fill",B),Q.setAttributeNS(null,"mask",`url(#${H.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(A,L)}paintFormXObjectBegin(m,A){if(Array.isArray(m)&&m.length===6&&this.transform(m[0],m[1],m[2],m[3],m[4],m[5]),A){const H=A[2]-A[0],k=A[3]-A[1],_=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x",A[0]),_.setAttributeNS(null,"y",A[1]),_.setAttributeNS(null,"width",R(H)),_.setAttributeNS(null,"height",R(k)),this.current.element=_,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(m){const A=this.svgFactory.create(m.width,m.height),H=this.svgFactory.createElement("svg:defs");A.append(H),this.defs=H;const k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",M(m.transform)),A.append(k),this.svg=k,A}_ensureClipGroup(){if(!this.current.clipGroup){const m=this.svgFactory.createElement("svg:g");m.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(m),this.current.clipGroup=m}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",M(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=O},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const r=[],c={items:r,styles:Object.create(null)};function b(f){var w;if(!f)return;let g=null;const o=f.name;if(o==="#text")g=f.value;else if(s.shouldBuildText(o))(w=f==null?void 0:f.attributes)!=null&&w.textContent?g=f.attributes.textContent:f.value&&(g=f.value);else return;if(g!==null&&r.push({str:g}),!!f.children)for(const T of f.children)b(T)}return b(i),c}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=M,e.updateTextLayer=E;var n=s(1),i=s(6);const r=1e5,c=30,b=.8,f=new Map;function g(C,P){let O;if(P&&n.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(C,C).getContext("2d",{alpha:!1});else{const F=document.createElement("canvas");F.width=F.height=C,O=F.getContext("2d",{alpha:!1})}return O}function o(C,P){const O=f.get(C);if(O)return O;const F=g(c,P);F.font=`${c}px ${C}`;const m=F.measureText("");let A=m.fontBoundingBoxAscent,H=Math.abs(m.fontBoundingBoxDescent);if(A){const _=A/(A+H);return f.set(C,_),F.canvas.width=F.canvas.height=0,_}F.strokeStyle="red",F.clearRect(0,0,c,c),F.strokeText("g",0,0);let k=F.getImageData(0,0,c,c).data;H=0;for(let _=k.length-1-3;_>=0;_-=4)if(k[_]>0){H=Math.ceil(_/4/c);break}F.clearRect(0,0,c,c),F.strokeText("A",0,c),k=F.getImageData(0,0,c,c).data,A=0;for(let _=0,B=k.length;_<B;_+=4)if(k[_]>0){A=c-Math.floor(_/4/c);break}if(F.canvas.width=F.canvas.height=0,A){const _=A/(A+H);return f.set(C,_),_}return f.set(C,b),b}function w(C,P,O){const F=document.createElement("span"),m={angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,fontSize:0};C._textDivs.push(F);const A=n.Util.transform(C._transform,P.transform);let H=Math.atan2(A[1],A[0]);const k=O[P.fontName];k.vertical&&(H+=Math.PI/2);const _=Math.hypot(A[2],A[3]),B=_*o(k.fontFamily,C._isOffscreenCanvasSupported);let L,Q;H===0?(L=A[4],Q=A[5]-B):(L=A[4]+B*Math.sin(H),Q=A[5]-B*Math.cos(H));const st="calc(var(--scale-factor)*",$=F.style;C._container===C._rootContainer?($.left=`${(100*L/C._pageWidth).toFixed(2)}%`,$.top=`${(100*Q/C._pageHeight).toFixed(2)}%`):($.left=`${st}${L.toFixed(2)}px)`,$.top=`${st}${Q.toFixed(2)}px)`),$.fontSize=`${st}${_.toFixed(2)}px)`,$.fontFamily=k.fontFamily,m.fontSize=_,F.setAttribute("role","presentation"),F.textContent=P.str,F.dir=P.dir,C._fontInspectorEnabled&&(F.dataset.fontName=P.fontName),H!==0&&(m.angle=H*(180/Math.PI));let ot=!1;if(P.str.length>1)ot=!0;else if(P.str!==" "&&P.transform[0]!==P.transform[3]){const pt=Math.abs(P.transform[0]),mt=Math.abs(P.transform[3]);pt!==mt&&Math.max(pt,mt)/Math.min(pt,mt)>1.5&&(ot=!0)}ot&&(m.canvasWidth=k.vertical?P.height:P.width),C._textDivProperties.set(F,m),C._isReadableStream&&C._layoutText(F)}function T(C){const{div:P,scale:O,properties:F,ctx:m,prevFontSize:A,prevFontFamily:H}=C,{style:k}=P;let _="";if(F.canvasWidth!==0&&F.hasText){const{fontFamily:B}=k,{canvasWidth:L,fontSize:Q}=F;(A!==Q||H!==B)&&(m.font=`${Q*O}px ${B}`,C.prevFontSize=Q,C.prevFontFamily=B);const{width:st}=m.measureText(P.textContent);st>0&&(_=`scaleX(${L*O/st})`)}F.angle!==0&&(_=`rotate(${F.angle}deg) ${_}`),_.length>0&&(k.transform=_)}function x(C){if(C._canceled)return;const P=C._textDivs,O=C._capability;if(P.length>r){O.resolve();return}if(!C._isReadableStream)for(const m of P)C._layoutText(m);O.resolve()}class R{constructor({textContentSource:P,container:O,viewport:F,textDivs:m,textDivProperties:A,textContentItemsStr:H,isOffscreenCanvasSupported:k}){var st;this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=m||[],this._textContentItemsStr=H||[],this._isOffscreenCanvasSupported=k,this._fontInspectorEnabled=!!((st=globalThis.FontInspector)!=null&&st.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:F.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,k)};const{pageWidth:_,pageHeight:B,pageX:L,pageY:Q}=F.rawDims;this._transform=[1,0,0,-1,-L,Q+B],this._pageWidth=_,this._pageHeight=B,(0,i.setLayerDimensions)(O,F),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(P,O){for(const F of P){if(F.str===void 0){if(F.type==="beginMarkedContentProps"||F.type==="beginMarkedContent"){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),F.id!==null&&this._container.setAttribute("id",`${F.id}`),m.append(this._container)}else F.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(F.str),w(this,F,O)}}_layoutText(P){const O=this._layoutTextParams.properties=this._textDivProperties.get(P);if(this._layoutTextParams.div=P,T(this._layoutTextParams),O.hasText&&this._container.append(P),O.hasEOL){const F=document.createElement("br");F.setAttribute("role","presentation"),this._container.append(F)}}_render(){const P=new n.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const F=()=>{this._reader.read().then(({value:m,done:A})=>{if(A){P.resolve();return}Object.assign(O,m.styles),this._processItems(m.items,O),F()},P.reject)};this._reader=this._textContentSource.getReader(),F()}else if(this._textContentSource){const{items:F,styles:m}=this._textContentSource;this._processItems(F,m),P.resolve()}else throw new Error('No "textContentSource" parameter specified.');P.promise.then(()=>{O=null,x(this)},this._capability.reject)}}e.TextLayerRenderTask=R;function M(C){!C.textContentSource&&(C.textContent||C.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),C.textContentSource=C.textContent||C.textContentStream);const{container:P,viewport:O}=C,F=getComputedStyle(P),m=F.getPropertyValue("visibility"),A=parseFloat(F.getPropertyValue("--scale-factor"));m==="visible"&&(!A||Math.abs(A-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const H=new R(C);return H._render(),H}function E({container:C,viewport:P,textDivs:O,textDivProperties:F,isOffscreenCanvasSupported:m,mustRotate:A=!0,mustRescale:H=!0}){if(A&&(0,i.setLayerDimensions)(C,{rotation:P.rotation}),H){const k=g(0,m),B={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:k};for(const L of O)B.properties=F.get(L),B.div=L,T(B)}}},(t,e,s)=>{var o,w,T,x,R,M,E,C,P,O,F,sn,A,Me,k,rn,B,an;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(1),i=s(4),r=s(28),c=s(33),b=s(6),f=s(34);const Q=class Q{constructor({uiManager:$,pageIndex:ot,div:pt,accessibilityManager:mt,annotationLayer:X,viewport:yt,l10n:wt}){G(this,F);G(this,A);G(this,k);G(this,B);G(this,o,void 0);G(this,w,!1);G(this,T,null);G(this,x,this.pointerup.bind(this));G(this,R,this.pointerdown.bind(this));G(this,M,new Map);G(this,E,!1);G(this,C,!1);G(this,P,!1);G(this,O,void 0);const Rt=[r.FreeTextEditor,c.InkEditor,f.StampEditor];if(!Q._initialized){Q._initialized=!0;for(const kt of Rt)kt.initialize(wt)}$.registerEditorTypes(Rt),gt(this,O,$),this.pageIndex=ot,this.div=pt,gt(this,o,mt),gt(this,T,X),this.viewport=yt,a(this,O).addLayer(this)}get isEmpty(){return a(this,M).size===0}updateToolbar($){a(this,O).updateToolbar($)}updateMode($=a(this,O).getMode()){it(this,B,an).call(this),$===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),$!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",$===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",$===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",$===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded($){if(!$&&a(this,O).getMode()!==n.AnnotationEditorType.INK)return;if(!$){for(const pt of a(this,M).values())if(pt.isEmpty()){pt.setInBackground();return}}it(this,A,Me).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState($){a(this,O).setEditingState($)}addCommands($){a(this,O).addCommands($)}enable(){this.div.style.pointerEvents="auto";const $=new Set;for(const pt of a(this,M).values())pt.enableEditing(),pt.annotationElementId&&$.add(pt.annotationElementId);if(!a(this,T))return;const ot=a(this,T).getEditableAnnotations();for(const pt of ot){if(pt.hide(),a(this,O).isDeletedAnnotationElement(pt.data.id)||$.has(pt.data.id))continue;const mt=this.deserialize(pt);mt&&(this.addOrRebuild(mt),mt.enableEditing())}}disable(){var ot;gt(this,P,!0),this.div.style.pointerEvents="none";const $=new Set;for(const pt of a(this,M).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){$.add(pt.annotationElementId);continue}(ot=this.getEditableAnnotation(pt.annotationElementId))==null||ot.show(),pt.remove()}if(a(this,T)){const pt=a(this,T).getEditableAnnotations();for(const mt of pt){const{id:X}=mt.data;$.has(X)||a(this,O).isDeletedAnnotationElement(X)||mt.show()}}it(this,B,an).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,P,!1)}getEditableAnnotation($){var ot;return((ot=a(this,T))==null?void 0:ot.getEditableAnnotation($))||null}setActiveEditor($){a(this,O).getActive()!==$&&a(this,O).setActiveEditor($)}enableClick(){this.div.addEventListener("pointerdown",a(this,R)),this.div.addEventListener("pointerup",a(this,x))}disableClick(){this.div.removeEventListener("pointerdown",a(this,R)),this.div.removeEventListener("pointerup",a(this,x))}attach($){a(this,M).set($.id,$);const{annotationElementId:ot}=$;ot&&a(this,O).isDeletedAnnotationElement(ot)&&a(this,O).removeDeletedAnnotationElement($)}detach($){var ot;a(this,M).delete($.id),(ot=a(this,o))==null||ot.removePointerInTextLayer($.contentDiv),!a(this,P)&&$.annotationElementId&&a(this,O).addDeletedAnnotationElement($)}remove($){this.detach($),a(this,O).removeEditor($),$.div.contains(document.activeElement)&&setTimeout(()=>{a(this,O).focusMainContainer()},0),$.div.remove(),$.isAttachedToDOM=!1,a(this,C)||this.addInkEditorIfNeeded(!1)}changeParent($){var ot;$.parent!==this&&($.annotationElementId&&(a(this,O).addDeletedAnnotationElement($.annotationElementId),i.AnnotationEditor.deleteAnnotationElement($),$.annotationElementId=null),this.attach($),(ot=$.parent)==null||ot.detach($),$.setParent(this),$.div&&$.isAttachedToDOM&&($.div.remove(),this.div.append($.div)))}add($){if(this.changeParent($),a(this,O).addEditor($),this.attach($),!$.isAttachedToDOM){const ot=$.render();this.div.append(ot),$.isAttachedToDOM=!0}$.fixAndSetPosition(),$.onceAdded(),a(this,O).addToAnnotationStorage($)}moveEditorInDOM($){var pt;if(!$.isAttachedToDOM)return;const{activeElement:ot}=document;$.div.contains(ot)&&($._focusEventsAllowed=!1,setTimeout(()=>{$.div.contains(document.activeElement)?$._focusEventsAllowed=!0:($.div.addEventListener("focusin",()=>{$._focusEventsAllowed=!0},{once:!0}),ot.focus())},0)),$._structTreeParentId=(pt=a(this,o))==null?void 0:pt.moveElementInDOM(this.div,$.div,$.contentDiv,!0)}addOrRebuild($){$.needsToBeRebuilt()?$.rebuild():this.add($)}addUndoableEditor($){const ot=()=>$._uiManager.rebuild($),pt=()=>{$.remove()};this.addCommands({cmd:ot,undo:pt,mustExec:!1})}getNextId(){return a(this,O).getId()}pasteEditor($,ot){a(this,O).updateToolbar($),a(this,O).updateMode($);const{offsetX:pt,offsetY:mt}=it(this,k,rn).call(this),X=this.getNextId(),yt=it(this,F,sn).call(this,{parent:this,id:X,x:pt,y:mt,uiManager:a(this,O),isCentered:!0,...ot});yt&&this.add(yt)}deserialize($){switch($.annotationType??$.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize($,this,a(this,O));case n.AnnotationEditorType.INK:return c.InkEditor.deserialize($,this,a(this,O));case n.AnnotationEditorType.STAMP:return f.StampEditor.deserialize($,this,a(this,O))}return null}addNewEditor(){it(this,A,Me).call(this,it(this,k,rn).call(this),!0)}setSelected($){a(this,O).setSelected($)}toggleSelected($){a(this,O).toggleSelected($)}isSelected($){return a(this,O).isSelected($)}unselect($){a(this,O).unselect($)}pointerup($){const{isMac:ot}=n.FeatureTest.platform;if(!($.button!==0||$.ctrlKey&&ot)&&$.target===this.div&&a(this,E)){if(gt(this,E,!1),!a(this,w)){gt(this,w,!0);return}if(a(this,O).getMode()===n.AnnotationEditorType.STAMP){a(this,O).unselectAll();return}it(this,A,Me).call(this,$,!1)}}pointerdown($){if(a(this,E)){gt(this,E,!1);return}const{isMac:ot}=n.FeatureTest.platform;if($.button!==0||$.ctrlKey&&ot||$.target!==this.div)return;gt(this,E,!0);const pt=a(this,O).getActive();gt(this,w,!pt||pt.isEmpty())}findNewParent($,ot,pt){const mt=a(this,O).findParent(ot,pt);return mt===null||mt===this?!1:(mt.changeParent($),!0)}destroy(){var $,ot;(($=a(this,O).getActive())==null?void 0:$.parent)===this&&(a(this,O).commitOrRemove(),a(this,O).setActiveEditor(null));for(const pt of a(this,M).values())(ot=a(this,o))==null||ot.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,a(this,M).clear(),a(this,O).removeLayer(this)}render({viewport:$}){this.viewport=$,(0,b.setLayerDimensions)(this.div,$);for(const ot of a(this,O).getEditors(this.pageIndex))this.add(ot);this.updateMode()}update({viewport:$}){a(this,O).commitOrRemove(),this.viewport=$,(0,b.setLayerDimensions)(this.div,{rotation:$.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:$,pageHeight:ot}=this.viewport.rawDims;return[$,ot]}};o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,P=new WeakMap,O=new WeakMap,F=new WeakSet,sn=function($){switch(a(this,O).getMode()){case n.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor($);case n.AnnotationEditorType.INK:return new c.InkEditor($);case n.AnnotationEditorType.STAMP:return new f.StampEditor($)}return null},A=new WeakSet,Me=function($,ot){const pt=this.getNextId(),mt=it(this,F,sn).call(this,{parent:this,id:pt,x:$.offsetX,y:$.offsetY,uiManager:a(this,O),isCentered:ot});return mt&&this.add(mt),mt},k=new WeakSet,rn=function(){const{x:$,y:ot,width:pt,height:mt}=this.div.getBoundingClientRect(),X=Math.max(0,$),yt=Math.max(0,ot),wt=Math.min(window.innerWidth,$+pt),Rt=Math.min(window.innerHeight,ot+mt),kt=(X+wt)/2-$,j=(yt+Rt)/2-ot,[h,d]=this.viewport.rotation%180===0?[kt,j]:[j,kt];return{offsetX:h,offsetY:d}},B=new WeakSet,an=function(){gt(this,C,!0);for(const $ of a(this,M).values())$.isEmpty()&&$.remove();gt(this,C,!1)},se(Q,"_initialized",!1);let g=Q;e.AnnotationEditorLayer=g},(t,e,s)=>{var f,g,o,w,T,x,R,M,E,C,On,O,In,m,Dn,H,Se,_,on,L,Ln,st,ln;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(5),r=s(4),c=s(29);const ot=class ot extends r.AnnotationEditor{constructor(X){super({...X,name:"freeTextEditor"});G(this,C);G(this,O);G(this,m);G(this,H);G(this,_);G(this,L);G(this,st);G(this,f,this.editorDivBlur.bind(this));G(this,g,this.editorDivFocus.bind(this));G(this,o,this.editorDivInput.bind(this));G(this,w,this.editorDivKeydown.bind(this));G(this,T,void 0);G(this,x,"");G(this,R,`${this.id}-editor`);G(this,M,void 0);G(this,E,null);gt(this,T,X.color||ot._defaultColor||r.AnnotationEditor._defaultLineColor),gt(this,M,X.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const X=ot.prototype,yt=kt=>kt.isEmpty(),wt=i.AnnotationEditorUIManager.TRANSLATE_SMALL,Rt=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],X.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],X.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],X._translateEmpty,{args:[-wt,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X._translateEmpty,{args:[-Rt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],X._translateEmpty,{args:[wt,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X._translateEmpty,{args:[Rt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],X._translateEmpty,{args:[0,-wt],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X._translateEmpty,{args:[0,-Rt],checker:yt}],[["ArrowDown","mac+ArrowDown"],X._translateEmpty,{args:[0,wt],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X._translateEmpty,{args:[0,Rt],checker:yt}]]))}static initialize(X){r.AnnotationEditor.initialize(X,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ot._defaultFontSize=yt;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ot._defaultColor=yt;break}}updateParams(X,yt){switch(X){case n.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,C,On).call(this,yt);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,O,In).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,ot._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,ot._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,M)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,T)]]}_translateEmpty(X,yt){this._uiManager.translateSelectedEditors(X,yt,!0)}getInitialTranslation(){const X=this.parentScale;return[-ot._internalPadding*X,-(ot._internalPadding+a(this,M))*X]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,w)),this.editorDiv.addEventListener("focus",a(this,g)),this.editorDiv.addEventListener("blur",a(this,f)),this.editorDiv.addEventListener("input",a(this,o)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,R)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,w)),this.editorDiv.removeEventListener("focus",a(this,g)),this.editorDiv.removeEventListener("blur",a(this,f)),this.editorDiv.removeEventListener("input",a(this,o)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),X.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var X;if(this.width){it(this,st,ln).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(X=this._initialOptions)!=null&&X.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const X=a(this,x),yt=gt(this,x,it(this,m,Dn).call(this).trimEnd());if(X===yt)return;const wt=Rt=>{if(gt(this,x,Rt),!Rt){this.remove();return}it(this,_,on).call(this),this._uiManager.rebuild(this),it(this,H,Se).call(this)};this.addCommands({cmd:()=>{wt(yt)},undo:()=>{wt(X)},mustExec:!1}),it(this,H,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(X){this.enterInEditMode()}keydown(X){X.target===this.div&&X.key==="Enter"&&(this.enterInEditMode(),X.preventDefault())}editorDivKeydown(X){ot._keyboardManager.exec(this,X)}editorDivFocus(X){this.isEditing=!0}editorDivBlur(X){this.isEditing=!1}editorDivInput(X){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let X,yt;this.width&&(X=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,R)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("aria-label",Rt)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("default-content",Rt)}),this.editorDiv.contentEditable=!0;const{style:wt}=this.editorDiv;if(wt.fontSize=`calc(${a(this,M)}px * var(--scale-factor))`,wt.color=a(this,T),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Rt,kt]=this.parentDimensions;if(this.annotationElementId){const{position:j}=a(this,E);let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[u,y]=this.pageDimensions,[S,N]=this.pageTranslation;let U,Y;switch(this.rotation){case 0:U=X+(j[0]-S)/u,Y=yt+this.height-(j[1]-N)/y;break;case 90:U=X+(j[0]-S)/u,Y=yt-(j[1]-N)/y,[h,d]=[d,-h];break;case 180:U=X-this.width+(j[0]-S)/u,Y=yt-(j[1]-N)/y,[h,d]=[-h,-d];break;case 270:U=X+(j[0]-S-this.height*y)/u,Y=yt+(j[1]-N-this.width*u)/y,[h,d]=[-d,h];break}this.setAt(U*Rt,Y*kt,h,d)}else this.setAt(X*Rt,yt*kt,this.width*Rt,this.height*kt);it(this,_,on).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(X,yt,wt){let Rt=null;if(X instanceof c.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:j,fontColor:h},rect:d,rotation:u,id:y},textContent:S,textPosition:N,parent:{page:{pageNumber:U}}}=X;if(!S||S.length===0)return null;Rt=X={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(h),fontSize:j,value:S.join(`
`),position:N,pageIndex:U-1,rect:d,rotation:u,id:y,deleted:!1}}const kt=super.deserialize(X,yt,wt);return gt(kt,M,X.fontSize),gt(kt,T,n.Util.makeHexColor(...X.color)),gt(kt,x,X.value),kt.annotationElementId=X.id||null,gt(kt,E,Rt),kt}serialize(X=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=ot._internalPadding*this.parentScale,wt=this.getRect(yt,yt),Rt=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,T)),kt={annotationType:n.AnnotationEditorType.FREETEXT,color:Rt,fontSize:a(this,M),value:a(this,x),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return X?kt:this.annotationElementId&&!it(this,L,Ln).call(this,kt)?null:(kt.id=this.annotationElementId,kt)}};f=new WeakMap,g=new WeakMap,o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakSet,On=function(X){const yt=Rt=>{this.editorDiv.style.fontSize=`calc(${Rt}px * var(--scale-factor))`,this.translate(0,-(Rt-a(this,M))*this.parentScale),gt(this,M,Rt),it(this,H,Se).call(this)},wt=a(this,M);this.addCommands({cmd:()=>{yt(X)},undo:()=>{yt(wt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,In=function(X){const yt=a(this,T);this.addCommands({cmd:()=>{gt(this,T,this.editorDiv.style.color=X)},undo:()=>{gt(this,T,this.editorDiv.style.color=yt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Dn=function(){const X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;const yt=[];for(const wt of X)yt.push(wt.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},H=new WeakSet,Se=function(){const[X,yt]=this.parentDimensions;let wt;if(this.isAttachedToDOM)wt=this.div.getBoundingClientRect();else{const{currentLayer:Rt,div:kt}=this,j=kt.style.display;kt.style.display="hidden",Rt.div.append(this.div),wt=kt.getBoundingClientRect(),kt.remove(),kt.style.display=j}this.rotation%180===this.parentRotation%180?(this.width=wt.width/X,this.height=wt.height/yt):(this.width=wt.height/X,this.height=wt.width/yt),this.fixAndSetPosition()},_=new WeakSet,on=function(){if(this.editorDiv.replaceChildren(),!!a(this,x))for(const X of a(this,x).split(`
`)){const yt=document.createElement("div");yt.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(yt)}},L=new WeakSet,Ln=function(X){const{value:yt,fontSize:wt,color:Rt,rect:kt,pageIndex:j}=a(this,E);return X.value!==yt||X.fontSize!==wt||X.rect.some((h,d)=>Math.abs(h-kt[d])>=1)||X.color.some((h,d)=>h!==Rt[d])||X.pageIndex!==j},st=new WeakSet,ln=function(X=!1){if(!this.annotationElementId)return;if(it(this,H,Se).call(this),!X&&(this.width===0||this.height===0)){setTimeout(()=>it(this,st,ln).call(this,!0),0);return}const yt=ot._internalPadding*this.parentScale;a(this,E).rect=this.getRect(yt,yt)},se(ot,"_freeTextDefaultContent",""),se(ot,"_internalPadding",0),se(ot,"_defaultColor",null),se(ot,"_defaultFontSize",10),se(ot,"_type","freetext");let b=ot;e.FreeTextEditor=b},(t,e,s)=>{var d,y,ue,N,Nn,Y,dt,v,I,W,rt,K,ut,St,ft,bt,Z,J,q,ct,At,Et,Dt,Bn,jt,Fe,Gt,cn,Yt,hn,at,nt,Ct,xt,ne,ee,ht,un,Ht,Ft,Ut,zt,jn,Pt,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=s(1),i=s(6),r=s(3),c=s(30),b=s(31),f=s(32);const g=1e3,o=9,w=new WeakSet;function T($t){return{width:$t[2]-$t[0],height:$t[3]-$t[1]}}class x{static create(V){switch(V.data.annotationType){case n.AnnotationType.LINK:return new M(V);case n.AnnotationType.TEXT:return new E(V);case n.AnnotationType.WIDGET:switch(V.data.fieldType){case"Tx":return new P(V);case"Btn":return V.data.radioButton?new m(V):V.data.checkBox?new F(V):new A(V);case"Ch":return new H(V);case"Sig":return new O(V)}return new C(V);case n.AnnotationType.POPUP:return new k(V);case n.AnnotationType.FREETEXT:return new B(V);case n.AnnotationType.LINE:return new L(V);case n.AnnotationType.SQUARE:return new Q(V);case n.AnnotationType.CIRCLE:return new st(V);case n.AnnotationType.POLYLINE:return new $(V);case n.AnnotationType.CARET:return new pt(V);case n.AnnotationType.INK:return new mt(V);case n.AnnotationType.POLYGON:return new ot(V);case n.AnnotationType.HIGHLIGHT:return new X(V);case n.AnnotationType.UNDERLINE:return new yt(V);case n.AnnotationType.SQUIGGLY:return new wt(V);case n.AnnotationType.STRIKEOUT:return new Rt(V);case n.AnnotationType.STAMP:return new kt(V);case n.AnnotationType.FILEATTACHMENT:return new j(V);default:return new R(V)}}}const u=class u{constructor(V,{isRenderable:l=!1,ignoreBorder:D=!1,createQuadrilaterals:z=!1}={}){G(this,d,!1);this.isRenderable=l,this.data=V.data,this.layer=V.layer,this.linkService=V.linkService,this.downloadManager=V.downloadManager,this.imageResourcesPath=V.imageResourcesPath,this.renderForms=V.renderForms,this.svgFactory=V.svgFactory,this.annotationStorage=V.annotationStorage,this.enableScripting=V.enableScripting,this.hasJSActions=V.hasJSActions,this._fieldObjects=V.fieldObjects,this.parent=V.parent,l&&(this.container=this._createContainer(D)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:V,contentsObj:l,richText:D}){return!!(V!=null&&V.str||l!=null&&l.str||D!=null&&D.str)}get hasPopupData(){return u._hasPopupData(this.data)}_createContainer(V){const{data:l,parent:{page:D,viewport:z}}=this,et=document.createElement("section");et.setAttribute("data-annotation-id",l.id),this instanceof C||(et.tabIndex=g),et.style.zIndex=this.parent.zIndex++,this.data.popupRef&&et.setAttribute("aria-haspopup","dialog"),l.noRotate&&et.classList.add("norotate");const{pageWidth:lt,pageHeight:_t,pageX:Tt,pageY:It}=z.rawDims;if(!l.rect||this instanceof k){const{rotation:qt}=l;return!l.hasOwnCanvas&&qt!==0&&this.setRotation(qt,et),et}const{width:Ot,height:Xt}=T(l.rect),Nt=n.Util.normalizeRect([l.rect[0],D.view[3]-l.rect[1]+D.view[1],l.rect[2],D.view[3]-l.rect[3]+D.view[1]]);if(!V&&l.borderStyle.width>0){et.style.borderWidth=`${l.borderStyle.width}px`;const qt=l.borderStyle.horizontalCornerRadius,Kt=l.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const te=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;et.style.borderRadius=te}else if(this instanceof m){const te=`calc(${Ot}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;et.style.borderRadius=te}switch(l.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:et.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:et.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:et.style.borderBottomStyle="solid";break}const Qt=l.borderColor||null;Qt?(gt(this,d,!0),et.style.borderColor=n.Util.makeHexColor(Qt[0]|0,Qt[1]|0,Qt[2]|0)):et.style.borderWidth=0}et.style.left=`${100*(Nt[0]-Tt)/lt}%`,et.style.top=`${100*(Nt[1]-It)/_t}%`;const{rotation:Bt}=l;return l.hasOwnCanvas||Bt===0?(et.style.width=`${100*Ot/lt}%`,et.style.height=`${100*Xt/_t}%`):this.setRotation(Bt,et),et}setRotation(V,l=this.container){if(!this.data.rect)return;const{pageWidth:D,pageHeight:z}=this.parent.viewport.rawDims,{width:et,height:lt}=T(this.data.rect);let _t,Tt;V%180===0?(_t=100*et/D,Tt=100*lt/z):(_t=100*lt/D,Tt=100*et/z),l.style.width=`${_t}%`,l.style.height=`${Tt}%`,l.setAttribute("data-main-rotation",(360-V)%360)}get _commonActions(){const V=(l,D,z)=>{const et=z.detail[l],lt=et[0],_t=et.slice(1);z.target.style[D]=c.ColorConverters[`${lt}_HTML`](_t),this.annotationStorage.setValue(this.data.id,{[D]:c.ColorConverters[`${lt}_rgb`](_t)})};return(0,n.shadow)(this,"_commonActions",{display:l=>{const{display:D}=l.detail,z=D%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:D===1||D===2})},print:l=>{this.annotationStorage.setValue(this.data.id,{noPrint:!l.detail.print})},hidden:l=>{const{hidden:D}=l.detail;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:D,noView:D})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.target.disabled=l.detail.readonly},required:l=>{this._setRequired(l.target,l.detail.required)},bgColor:l=>{V("bgColor","backgroundColor",l)},fillColor:l=>{V("fillColor","backgroundColor",l)},fgColor:l=>{V("fgColor","color",l)},textColor:l=>{V("textColor","color",l)},borderColor:l=>{V("borderColor","borderColor",l)},strokeColor:l=>{V("strokeColor","borderColor",l)},rotation:l=>{const D=l.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox(V,l){const D=this._commonActions;for(const z of Object.keys(l.detail)){const et=V[z]||D[z];et==null||et(l)}}_setDefaultPropertiesFromJS(V){if(!this.enableScripting)return;const l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;const D=this._commonActions;for(const[z,et]of Object.entries(l)){const lt=D[z];if(lt){const _t={detail:{[z]:et},target:V};lt(_t),delete l[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:V}=this.data;if(!V)return;const[l,D,z,et]=this.data.rect;if(V.length===1){const[,{x:Kt,y:Qt},{x:te,y:re}]=V[0];if(z===Kt&&et===Qt&&l===te&&D===re)return}const{style:lt}=this.container;let _t;if(a(this,d)){const{borderColor:Kt,borderWidth:Qt}=lt;lt.borderWidth=0,_t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Qt}">`],this.container.classList.add("hasBorder")}const Tt=z-l,It=et-D,{svgFactory:Ot}=this,Xt=Ot.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Nt=Ot.createElement("defs");Xt.append(Nt);const Bt=Ot.createElement("clipPath"),qt=`clippath_${this.data.id}`;Bt.setAttribute("id",qt),Bt.setAttribute("clipPathUnits","objectBoundingBox"),Nt.append(Bt);for(const[,{x:Kt,y:Qt},{x:te,y:re}]of V){const ie=Ot.createElement("rect"),ae=(te-l)/Tt,ce=(et-Qt)/It,he=(Kt-te)/Tt,An=(Qt-re)/It;ie.setAttribute("x",ae),ie.setAttribute("y",ce),ie.setAttribute("width",he),ie.setAttribute("height",An),Bt.append(ie),_t==null||_t.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${An}"/>`)}a(this,d)&&(_t.push("</g></svg>')"),lt.backgroundImage=_t.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:V,data:l}=this;V.setAttribute("aria-haspopup","dialog");const D=new k({data:{color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,parentRect:l.rect,borderStyle:0,id:`popup_${l.id}`,rotation:l.rotation},parent:this.parent,elements:[this]});this.parent.div.append(D.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(V,l=null){const D=[];if(this._fieldObjects){const z=this._fieldObjects[V];if(z)for(const{page:et,id:lt,exportValues:_t}of z){if(et===-1||lt===l)continue;const Tt=typeof _t=="string"?_t:null,It=document.querySelector(`[data-element-id="${lt}"]`);if(It&&!w.has(It)){(0,n.warn)(`_getElementsByName - element not allowed: ${lt}`);continue}D.push({id:lt,exportValue:Tt,domElement:It})}return D}for(const z of document.getElementsByName(V)){const{exportValue:et}=z,lt=z.getAttribute("data-element-id");lt!==l&&w.has(z)&&D.push({id:lt,exportValue:et,domElement:z})}return D}show(){var V;this.container&&(this.container.hidden=!1),(V=this.popup)==null||V.maybeShow()}hide(){var V;this.container&&(this.container.hidden=!0),(V=this.popup)==null||V.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const V=this.getElementsToTriggerPopup();if(Array.isArray(V))for(const l of V)l.classList.add("highlightArea");else V.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:V,data:{id:l}}=this;this.container.addEventListener("dblclick",()=>{var D;(D=this.linkService.eventBus)==null||D.dispatch("switchannotationeditormode",{source:this,mode:V,editId:l})})}};d=new WeakMap;let R=u;class M extends R{constructor(l,D=null){super(l,{isRenderable:!0,ignoreBorder:!!(D!=null&&D.ignoreBorder),createQuadrilaterals:!0});G(this,y);G(this,N);this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:D}=this,z=document.createElement("a");z.setAttribute("data-element-id",l.id);let et=!1;return l.url?(D.addLinkAttributes(z,l.url,l.newWindow),et=!0):l.action?(this._bindNamedAction(z,l.action),et=!0):l.attachment?(this._bindAttachment(z,l.attachment),et=!0):l.setOCGState?(it(this,N,Nn).call(this,z,l.setOCGState),et=!0):l.dest?(this._bindLink(z,l.dest),et=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,l),et=!0),l.resetForm?(this._bindResetFormAction(z,l.resetForm),et=!0):this.isTooltipOnly&&!et&&(this._bindLink(z,""),et=!0)),this.container.classList.add("linkAnnotation"),et&&this.container.append(z),this.container}_bindLink(l,D){l.href=this.linkService.getDestinationHash(D),l.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&it(this,y,ue).call(this)}_bindNamedAction(l,D){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(D),!1),it(this,y,ue).call(this)}_bindAttachment(l,D){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,D.content,D.filename),!1},it(this,y,ue).call(this)}_bindJSAction(l,D){l.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const et of Object.keys(D.actions)){const lt=z.get(et);lt&&(l[lt]=()=>{var _t;return(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:et}}),!1})}l.onclick||(l.onclick=()=>!1),it(this,y,ue).call(this)}_bindResetFormAction(l,D){const z=l.onclick;if(z||(l.href=this.linkService.getAnchorUrl("")),it(this,y,ue).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(l.onclick=()=>!1);return}l.onclick=()=>{var Xt;z==null||z();const{fields:et,refs:lt,include:_t}=D,Tt=[];if(et.length!==0||lt.length!==0){const Nt=new Set(lt);for(const Bt of et){const qt=this._fieldObjects[Bt]||[];for(const{id:Kt}of qt)Nt.add(Kt)}for(const Bt of Object.values(this._fieldObjects))for(const qt of Bt)Nt.has(qt.id)===_t&&Tt.push(qt)}else for(const Nt of Object.values(this._fieldObjects))Tt.push(...Nt);const It=this.annotationStorage,Ot=[];for(const Nt of Tt){const{id:Bt}=Nt;switch(Ot.push(Bt),Nt.type){case"text":{const Kt=Nt.defaultValue||"";It.setValue(Bt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Nt.defaultValue===Nt.exportValues;It.setValue(Bt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Nt.defaultValue||"";It.setValue(Bt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${Bt}"]`);if(qt){if(!w.has(qt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ot,name:"ResetForm"}})),!1}}}y=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,Nn=function(l,D){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeSetOCGState(D),!1),it(this,y,ue).call(this)};class E extends R{constructor(V){super(V,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const V=document.createElement("img");return V.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",V.alt="[{{type}} Annotation]",V.dataset.l10nId="text_annotation_type",V.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(V),this.container}}class C extends R{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(V){var l;this.data.hasOwnCanvas&&(((l=V.previousSibling)==null?void 0:l.nodeName)==="CANVAS"&&(V.previousSibling.hidden=!0),V.hidden=!1)}_getKeyModifier(V){const{isWin:l,isMac:D}=n.FeatureTest.platform;return l&&V.ctrlKey||D&&V.metaKey}_setEventListener(V,l,D,z,et){D.includes("mouse")?V.addEventListener(D,lt=>{var _t;(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt),shift:lt.shiftKey,modifier:this._getKeyModifier(lt)}})}):V.addEventListener(D,lt=>{var _t;if(D==="blur"){if(!l.focused||!lt.relatedTarget)return;l.focused=!1}else if(D==="focus"){if(l.focused)return;l.focused=!0}et&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt)}}))})}_setEventListeners(V,l,D,z){var et,lt,_t;for(const[Tt,It]of D)(It==="Action"||(et=this.data.actions)!=null&&et[It])&&((It==="Focus"||It==="Blur")&&(l||(l={focused:!1})),this._setEventListener(V,l,Tt,It,z),It==="Focus"&&!((lt=this.data.actions)!=null&&lt.Blur)?this._setEventListener(V,l,"blur","Blur",null):It==="Blur"&&!((_t=this.data.actions)!=null&&_t.Focus)&&this._setEventListener(V,l,"focus","Focus",null))}_setBackgroundColor(V){const l=this.data.backgroundColor||null;V.style.backgroundColor=l===null?"transparent":n.Util.makeHexColor(l[0],l[1],l[2])}_setTextStyle(V){const l=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||o,et=V.style;let lt;const _t=2,Tt=It=>Math.round(10*It)/10;if(this.data.multiLine){const It=Math.abs(this.data.rect[3]-this.data.rect[1]-_t),Ot=Math.round(It/(n.LINE_FACTOR*z))||1,Xt=It/Ot;lt=Math.min(z,Tt(Xt/n.LINE_FACTOR))}else{const It=Math.abs(this.data.rect[3]-this.data.rect[1]-_t);lt=Math.min(z,Tt(It/n.LINE_FACTOR))}et.fontSize=`calc(${lt}px * var(--scale-factor))`,et.color=n.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(et.textAlign=l[this.data.textAlignment])}_setRequired(V,l){l?V.setAttribute("required",!0):V.removeAttribute("required"),V.setAttribute("aria-required",l)}}class P extends C{constructor(V){const l=V.renderForms||!V.data.hasAppearance&&!!V.data.fieldValue;super(V,{isRenderable:l})}setPropertyOnSiblings(V,l,D,z){const et=this.annotationStorage;for(const lt of this._getElementsByName(V.name,V.id))lt.domElement&&(lt.domElement[l]=D),et.setValue(lt.id,{[z]:D})}render(){var z,et;const V=this.annotationStorage,l=this.data.id;this.container.classList.add("textWidgetAnnotation");let D=null;if(this.renderForms){const lt=V.getValue(l,{value:this.data.fieldValue});let _t=lt.value||"";const Tt=V.getValue(l,{charLimit:this.data.maxLen}).charLimit;Tt&&_t.length>Tt&&(_t=_t.slice(0,Tt));let It=lt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;It&&this.data.comb&&(It=It.replaceAll(/\s+/g,""));const Ot={userValue:_t,formattedValue:It,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=It??_t,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",It??_t),this.data.doNotScroll&&(D.style.overflowX="hidden")),this.data.hasOwnCanvas&&(D.hidden=!0),w.add(D),D.setAttribute("data-element-id",l),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=g,this._setRequired(D,this.data.required),Tt&&(D.maxLength=Tt),D.addEventListener("input",Nt=>{V.setValue(l,{value:Nt.target.value}),this.setPropertyOnSiblings(D,"value",Nt.target.value,"value"),Ot.formattedValue=null}),D.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue??"";D.value=Ot.userValue=Bt,Ot.formattedValue=null});let Xt=Nt=>{const{formattedValue:Bt}=Ot;Bt!=null&&(Nt.target.value=Bt),Nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",Bt=>{if(Ot.focused)return;const{target:qt}=Bt;Ot.userValue&&(qt.value=Ot.userValue),Ot.lastCommittedValue=qt.value,Ot.commitKey=1,Ot.focused=!0}),D.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const qt={value(Kt){Ot.userValue=Kt.detail.value??"",V.setValue(l,{value:Ot.userValue.toString()}),Kt.target.value=Ot.userValue},formattedValue(Kt){const{formattedValue:Qt}=Kt.detail;Ot.formattedValue=Qt,Qt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Qt),V.setValue(l,{formattedValue:Qt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ie;const{charLimit:Qt}=Kt.detail,{target:te}=Kt;if(Qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Qt);let re=Ot.userValue;!re||re.length<=Qt||(re=re.slice(0,Qt),te.value=Ot.userValue=re,V.setValue(l,{value:re}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,Bt)}),D.addEventListener("keydown",Bt=>{var Qt;Ot.commitKey=1;let qt=-1;if(Bt.key==="Escape"?qt=0:Bt.key==="Enter"&&!this.data.multiLine?qt=2:Bt.key==="Tab"&&(Ot.commitKey=3),qt===-1)return;const{value:Kt}=Bt.target;Ot.lastCommittedValue!==Kt&&(Ot.lastCommittedValue=Kt,Ot.userValue=Kt,(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Nt=Xt;Xt=null,D.addEventListener("blur",Bt=>{var Kt;if(!Ot.focused||!Bt.relatedTarget)return;Ot.focused=!1;const{value:qt}=Bt.target;Ot.userValue=qt,Ot.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:qt,willCommit:!0,commitKey:Ot.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Nt(Bt)}),(et=this.data.actions)!=null&&et.Keystroke&&D.addEventListener("beforeinput",Bt=>{var ce;Ot.lastCommittedValue=null;const{data:qt,target:Kt}=Bt,{value:Qt,selectionStart:te,selectionEnd:re}=Kt;let ie=te,ae=re;switch(Bt.inputType){case"deleteWordBackward":{const he=Qt.substring(0,te).match(/\w*[^\w]*$/);he&&(ie-=he[0].length);break}case"deleteWordForward":{const he=Qt.substring(te).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":te===re&&(ie-=1);break;case"deleteContentForward":te===re&&(ae+=1);break}Bt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Qt,change:qt||"",willCommit:!1,selStart:ie,selEnd:ae}})}),this._setEventListeners(D,Ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Xt&&D.addEventListener("blur",Xt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Tt;D.classList.add("comb"),D.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class O extends C{constructor(V){super(V,{isRenderable:!!V.data.hasOwnCanvas})}}class F extends C{constructor(V){super(V,{isRenderable:V.renderForms})}render(){const V=this.annotationStorage,l=this.data,D=l.id;let z=V.getValue(D,{value:l.exportValue===l.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",V.setValue(D,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const et=document.createElement("input");return w.add(et),et.setAttribute("data-element-id",D),et.disabled=l.readOnly,this._setRequired(et,this.data.required),et.type="checkbox",et.name=l.fieldName,z&&et.setAttribute("checked",!0),et.setAttribute("exportValue",l.exportValue),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:_t,checked:Tt}=lt.target;for(const It of this._getElementsByName(_t,D)){const Ot=Tt&&It.exportValue===l.exportValue;It.domElement&&(It.domElement.checked=Ot),V.setValue(It.id,{value:Ot})}V.setValue(D,{value:Tt})}),et.addEventListener("resetform",lt=>{const _t=l.defaultFieldValue||"Off";lt.target.checked=_t===l.exportValue}),this.enableScripting&&this.hasJSActions&&(et.addEventListener("updatefromsandbox",lt=>{const _t={value(Tt){Tt.target.checked=Tt.detail.value!=="Off",V.setValue(D,{value:Tt.target.checked})}};this._dispatchEventFromSandbox(_t,lt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)),this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class m extends C{constructor(V){super(V,{isRenderable:V.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const V=this.annotationStorage,l=this.data,D=l.id;let z=V.getValue(D,{value:l.fieldValue===l.buttonValue}).value;typeof z=="string"&&(z=z!==l.buttonValue,V.setValue(D,{value:z}));const et=document.createElement("input");if(w.add(et),et.setAttribute("data-element-id",D),et.disabled=l.readOnly,this._setRequired(et,this.data.required),et.type="radio",et.name=l.fieldName,z&&et.setAttribute("checked",!0),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:_t,checked:Tt}=lt.target;for(const It of this._getElementsByName(_t,D))V.setValue(It.id,{value:!1});V.setValue(D,{value:Tt})}),et.addEventListener("resetform",lt=>{const _t=l.defaultFieldValue;lt.target.checked=_t!=null&&_t===l.buttonValue}),this.enableScripting&&this.hasJSActions){const lt=l.buttonValue;et.addEventListener("updatefromsandbox",_t=>{const Tt={value:It=>{const Ot=lt===It.detail.value;for(const Xt of this._getElementsByName(It.target.name)){const Nt=Ot&&Xt.id===D;Xt.domElement&&(Xt.domElement.checked=Nt),V.setValue(Xt.id,{value:Nt})}}};this._dispatchEventFromSandbox(Tt,_t)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)}return this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class A extends M{constructor(V){super(V,{ignoreBorder:V.data.hasAppearance})}render(){const V=super.render();V.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(V.title=this.data.alternativeText);const l=V.lastChild;return this.enableScripting&&this.hasJSActions&&l&&(this._setDefaultPropertiesFromJS(l),l.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),V}}class H extends C{constructor(V){super(V,{isRenderable:V.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const V=this.annotationStorage,l=this.data.id,D=V.getValue(l,{value:this.data.fieldValue}),z=document.createElement("select");w.add(z),z.setAttribute("data-element-id",l),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=g;let et=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",Ot=>{const Xt=this.data.defaultFieldValue;for(const Nt of z.options)Nt.selected=Nt.value===Xt});for(const Ot of this.data.options){const Xt=document.createElement("option");Xt.textContent=Ot.displayValue,Xt.value=Ot.exportValue,D.value.includes(Ot.exportValue)&&(Xt.setAttribute("selected",!0),et=!1),z.append(Xt)}let lt=null;if(et){const Ot=document.createElement("option");Ot.value=" ",Ot.setAttribute("hidden",!0),Ot.setAttribute("selected",!0),z.prepend(Ot),lt=()=>{Ot.remove(),z.removeEventListener("input",lt),lt=null},z.addEventListener("input",lt)}const _t=Ot=>{const Xt=Ot?"value":"textContent",{options:Nt,multiple:Bt}=z;return Bt?Array.prototype.filter.call(Nt,qt=>qt.selected).map(qt=>qt[Xt]):Nt.selectedIndex===-1?null:Nt[Nt.selectedIndex][Xt]};let Tt=_t(!1);const It=Ot=>{const Xt=Ot.target.options;return Array.prototype.map.call(Xt,Nt=>({displayValue:Nt.textContent,exportValue:Nt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",Ot=>{const Xt={value(Nt){lt==null||lt();const Bt=Nt.detail.value,qt=new Set(Array.isArray(Bt)?Bt:[Bt]);for(const Kt of z.options)Kt.selected=qt.has(Kt.value);V.setValue(l,{value:_t(!0)}),Tt=_t(!1)},multipleSelection(Nt){z.multiple=!0},remove(Nt){const Bt=z.options,qt=Nt.detail.remove;Bt[qt].selected=!1,z.remove(qt),Bt.length>0&&Array.prototype.findIndex.call(Bt,Qt=>Qt.selected)===-1&&(Bt[0].selected=!0),V.setValue(l,{value:_t(!0),items:It(Nt)}),Tt=_t(!1)},clear(Nt){for(;z.length!==0;)z.remove(0);V.setValue(l,{value:null,items:[]}),Tt=_t(!1)},insert(Nt){const{index:Bt,displayValue:qt,exportValue:Kt}=Nt.detail.insert,Qt=z.children[Bt],te=document.createElement("option");te.textContent=qt,te.value=Kt,Qt?Qt.before(te):z.append(te),V.setValue(l,{value:_t(!0),items:It(Nt)}),Tt=_t(!1)},items(Nt){const{items:Bt}=Nt.detail;for(;z.length!==0;)z.remove(0);for(const qt of Bt){const{displayValue:Kt,exportValue:Qt}=qt,te=document.createElement("option");te.textContent=Kt,te.value=Qt,z.append(te)}z.options.length>0&&(z.options[0].selected=!0),V.setValue(l,{value:_t(!0),items:It(Nt)}),Tt=_t(!1)},indices(Nt){const Bt=new Set(Nt.detail.indices);for(const qt of Nt.target.options)qt.selected=Bt.has(qt.index);V.setValue(l,{value:_t(!0)}),Tt=_t(!1)},editable(Nt){Nt.target.disabled=!Nt.detail.editable}};this._dispatchEventFromSandbox(Xt,Ot)}),z.addEventListener("input",Ot=>{var Nt;const Xt=_t(!0);V.setValue(l,{value:Xt}),Ot.preventDefault(),(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Tt,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ot=>Ot.target.value)):z.addEventListener("input",function(Ot){V.setValue(l,{value:_t(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class k extends R{constructor(V){const{data:l,elements:D}=V;super(V,{isRenderable:R._hasPopupData(l)}),this.elements=D}render(){this.container.classList.add("popupAnnotation");const V=new _({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),l=[];for(const D of this.elements)D.popup=V,l.push(D.data.id),D.addHighlightArea();return this.container.setAttribute("aria-controls",l.map(D=>`${n.AnnotationPrefix}${D}`).join(",")),this.container}}class _{constructor({container:V,color:l,elements:D,titleObj:z,modificationDate:et,contentsObj:lt,richText:_t,parent:Tt,rect:It,parentRect:Ot,open:Xt}){G(this,Dt);G(this,jt);G(this,Gt);G(this,Yt);G(this,Y,null);G(this,dt,it(this,Dt,Bn).bind(this));G(this,v,it(this,Yt,hn).bind(this));G(this,I,it(this,Gt,cn).bind(this));G(this,W,it(this,jt,Fe).bind(this));G(this,rt,null);G(this,K,null);G(this,ut,null);G(this,St,null);G(this,ft,null);G(this,bt,null);G(this,Z,!1);G(this,J,null);G(this,q,null);G(this,ct,null);G(this,At,null);G(this,Et,!1);var Bt;gt(this,K,V),gt(this,At,z),gt(this,ut,lt),gt(this,ct,_t),gt(this,ft,Tt),gt(this,rt,l),gt(this,q,It),gt(this,bt,Ot),gt(this,St,D);const Nt=i.PDFDateString.toDateObject(et);Nt&&gt(this,Y,Tt.l10n.get("annotation_date_string",{date:Nt.toLocaleDateString(),time:Nt.toLocaleTimeString()})),this.trigger=D.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",a(this,W)),qt.addEventListener("mouseenter",a(this,I)),qt.addEventListener("mouseleave",a(this,v)),qt.classList.add("popupTriggerArea");for(const qt of D)(Bt=qt.container)==null||Bt.addEventListener("keydown",a(this,dt));a(this,K).hidden=!0,Xt&&it(this,jt,Fe).call(this)}render(){if(a(this,J))return;const{page:{view:V},viewport:{rawDims:{pageWidth:l,pageHeight:D,pageX:z,pageY:et}}}=a(this,ft),lt=gt(this,J,document.createElement("div"));if(lt.className="popup",a(this,rt)){const ie=lt.style.outlineColor=n.Util.makeHexColor(...a(this,rt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?lt.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:lt.style.backgroundColor=n.Util.makeHexColor(...a(this,rt).map(ce=>Math.floor(.7*(255-ce)+ce)))}const _t=document.createElement("span");_t.className="header";const Tt=document.createElement("h1");if(_t.append(Tt),{dir:Tt.dir,str:Tt.textContent}=a(this,At),lt.append(_t),a(this,Y)){const ie=document.createElement("span");ie.classList.add("popupDate"),a(this,Y).then(ae=>{ie.textContent=ae}),_t.append(ie)}const It=a(this,ut),Ot=a(this,ct);if(Ot!=null&&Ot.str&&(!(It!=null&&It.str)||It.str===Ot.str))f.XfaLayer.render({xfaHtml:Ot.html,intent:"richText",div:lt}),lt.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(It);lt.append(ie)}let Xt=!!a(this,bt),Nt=Xt?a(this,bt):a(this,q);for(const ie of a(this,St))if(!Nt||n.Util.intersect(ie.data.rect,Nt)!==null){Nt=ie.data.rect,Xt=!0;break}const Bt=n.Util.normalizeRect([Nt[0],V[3]-Nt[1]+V[1],Nt[2],V[3]-Nt[3]+V[1]]),qt=5,Kt=Xt?Nt[2]-Nt[0]+qt:0,Qt=Bt[0]+Kt,te=Bt[1],{style:re}=a(this,K);re.left=`${100*(Qt-z)/l}%`,re.top=`${100*(te-et)/D}%`,a(this,K).append(lt)}_formatContents({str:V,dir:l}){const D=document.createElement("p");D.classList.add("popupContent"),D.dir=l;const z=V.split(/(?:\r\n?|\n)/);for(let et=0,lt=z.length;et<lt;++et){const _t=z[et];D.append(document.createTextNode(_t)),et<lt-1&&D.append(document.createElement("br"))}return D}forceHide(){gt(this,Et,this.isVisible),a(this,Et)&&(a(this,K).hidden=!0)}maybeShow(){a(this,Et)&&(gt(this,Et,!1),a(this,K).hidden=!1)}get isVisible(){return a(this,K).hidden===!1}}Y=new WeakMap,dt=new WeakMap,v=new WeakMap,I=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,bt=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakMap,At=new WeakMap,Et=new WeakMap,Dt=new WeakSet,Bn=function(V){V.altKey||V.shiftKey||V.ctrlKey||V.metaKey||(V.key==="Enter"||V.key==="Escape"&&a(this,Z))&&it(this,jt,Fe).call(this)},jt=new WeakSet,Fe=function(){gt(this,Z,!a(this,Z)),a(this,Z)?(it(this,Gt,cn).call(this),a(this,K).addEventListener("click",a(this,W)),a(this,K).addEventListener("keydown",a(this,dt))):(it(this,Yt,hn).call(this),a(this,K).removeEventListener("click",a(this,W)),a(this,K).removeEventListener("keydown",a(this,dt)))},Gt=new WeakSet,cn=function(){a(this,J)||this.render(),this.isVisible?a(this,Z)&&a(this,K).classList.add("focused"):(a(this,K).hidden=!1,a(this,K).style.zIndex=parseInt(a(this,K).style.zIndex)+1e3)},Yt=new WeakSet,hn=function(){a(this,K).classList.remove("focused"),!(a(this,Z)||!this.isVisible)&&(a(this,K).hidden=!0,a(this,K).style.zIndex=parseInt(a(this,K).style.zIndex)-1e3)};class B extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0}),this.textContent=V.data.textContent,this.textPosition=V.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const V=document.createElement("div");V.classList.add("annotationTextContent"),V.setAttribute("role","comment");for(const l of this.textContent){const D=document.createElement("span");D.textContent=l,V.append(D)}this.container.append(V)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=B;class L extends R{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});G(this,at,null)}render(){this.container.classList.add("lineAnnotation");const l=this.data,{width:D,height:z}=T(l.rect),et=this.svgFactory.create(D,z,!0),lt=gt(this,at,this.svgFactory.createElement("svg:line"));return lt.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),lt.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),lt.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),lt.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),lt.setAttribute("stroke-width",l.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),et.append(lt),this.container.append(et),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap;class Q extends R{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});G(this,nt,null)}render(){this.container.classList.add("squareAnnotation");const l=this.data,{width:D,height:z}=T(l.rect),et=this.svgFactory.create(D,z,!0),lt=l.borderStyle.width,_t=gt(this,nt,this.svgFactory.createElement("svg:rect"));return _t.setAttribute("x",lt/2),_t.setAttribute("y",lt/2),_t.setAttribute("width",D-lt),_t.setAttribute("height",z-lt),_t.setAttribute("stroke-width",lt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,nt)}addHighlightArea(){this.container.classList.add("highlightArea")}}nt=new WeakMap;class st extends R{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});G(this,Ct,null)}render(){this.container.classList.add("circleAnnotation");const l=this.data,{width:D,height:z}=T(l.rect),et=this.svgFactory.create(D,z,!0),lt=l.borderStyle.width,_t=gt(this,Ct,this.svgFactory.createElement("svg:ellipse"));return _t.setAttribute("cx",D/2),_t.setAttribute("cy",z/2),_t.setAttribute("rx",D/2-lt/2),_t.setAttribute("ry",z/2-lt/2),_t.setAttribute("stroke-width",lt||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ct=new WeakMap;class $ extends R{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});G(this,xt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:D,height:z}=T(l.rect),et=this.svgFactory.create(D,z,!0);let lt=[];for(const Tt of l.vertices){const It=Tt.x-l.rect[0],Ot=l.rect[3]-Tt.y;lt.push(It+","+Ot)}lt=lt.join(" ");const _t=gt(this,xt,this.svgFactory.createElement(this.svgElementName));return _t.setAttribute("points",lt),_t.setAttribute("stroke-width",l.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),et.append(_t),this.container.append(et),!l.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class ot extends ${constructor(V){super(V),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class mt extends R{constructor(l){super(l,{isRenderable:!0,ignoreBorder:!0});G(this,ne,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const l=this.data,{width:D,height:z}=T(l.rect),et=this.svgFactory.create(D,z,!0);for(const lt of l.inkLists){let _t=[];for(const It of lt){const Ot=It.x-l.rect[0],Xt=l.rect[3]-It.y;_t.push(`${Ot},${Xt}`)}_t=_t.join(" ");const Tt=this.svgFactory.createElement(this.svgElementName);a(this,ne).push(Tt),Tt.setAttribute("points",_t),Tt.setAttribute("stroke-width",l.borderStyle.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),!l.popupRef&&this.hasPopupData&&this._createPopup(),et.append(Tt)}return this.container.append(et),this.container}getElementsToTriggerPopup(){return a(this,ne)}addHighlightArea(){this.container.classList.add("highlightArea")}}ne=new WeakMap,e.InkAnnotationElement=mt;class X extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class wt extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Rt extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kt extends R{constructor(V){super(V,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=kt;class j extends R{constructor(l){var et;super(l,{isRenderable:!0});G(this,ht);G(this,ee,null);const{filename:D,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=z,(et=this.linkService.eventBus)==null||et.dispatch("fileattachmentannotation",{source:this,filename:D,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:l,data:D}=this;let z;D.hasAppearance||D.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),z.addEventListener("dblclick",it(this,ht,un).bind(this)),gt(this,ee,z);const{isMac:et}=n.FeatureTest.platform;return l.addEventListener("keydown",lt=>{lt.key==="Enter"&&(et?lt.metaKey:lt.ctrlKey)&&it(this,ht,un).call(this)}),!D.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),l.append(z),l}getElementsToTriggerPopup(){return a(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,ht=new WeakSet,un=function(){var l;(l=this.downloadManager)==null||l.openOrDownloadData(this.container,this.content,this.filename)};class h{constructor({div:V,accessibilityManager:l,annotationCanvasMap:D,l10n:z,page:et,viewport:lt}){G(this,zt);G(this,Pt);G(this,Ht,null);G(this,Ft,null);G(this,Ut,new Map);this.div=V,gt(this,Ht,l),gt(this,Ft,D),this.l10n=z,this.page=et,this.viewport=lt,this.zIndex=0,this.l10n||(this.l10n=b.NullL10n)}async render(V){const{annotations:l}=V,D=this.div;(0,i.setLayerDimensions)(D,this.viewport);const z=new Map,et={data:null,layer:D,linkService:V.linkService,downloadManager:V.downloadManager,imageResourcesPath:V.imageResourcesPath||"",renderForms:V.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:V.annotationStorage||new r.AnnotationStorage,enableScripting:V.enableScripting===!0,hasJSActions:V.hasJSActions,fieldObjects:V.fieldObjects,parent:this,elements:null};for(const lt of l){if(lt.noHTML)continue;const _t=lt.annotationType===n.AnnotationType.POPUP;if(_t){const Ot=z.get(lt.id);if(!Ot)continue;et.elements=Ot}else{const{width:Ot,height:Xt}=T(lt.rect);if(Ot<=0||Xt<=0)continue}et.data=lt;const Tt=x.create(et);if(!Tt.isRenderable)continue;if(!_t&&lt.popupRef){const Ot=z.get(lt.popupRef);Ot?Ot.push(Tt):z.set(lt.popupRef,[Tt])}Tt.annotationEditorType>0&&a(this,Ut).set(Tt.data.id,Tt);const It=Tt.render();lt.hidden&&(It.style.visibility="hidden"),it(this,zt,jn).call(this,It,lt.id)}it(this,Pt,dn).call(this),await this.l10n.translate(D)}update({viewport:V}){const l=this.div;this.viewport=V,(0,i.setLayerDimensions)(l,{rotation:V.rotation}),it(this,Pt,dn).call(this),l.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Ut).values())}getEditableAnnotation(V){return a(this,Ut).get(V)}}Ht=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,zt=new WeakSet,jn=function(V,l){var z;const D=V.firstChild||V;D.id=`${n.AnnotationPrefix}${l}`,this.div.append(V),(z=a(this,Ht))==null||z.moveElementInDOM(this.div,V,D,!1)},Pt=new WeakSet,dn=function(){if(!a(this,Ft))return;const V=this.div;for(const[l,D]of a(this,Ft)){const z=V.querySelector(`[data-annotation-id="${l}"]`);if(!z)continue;const{firstChild:et}=z;et?et.nodeName==="CANVAS"?et.replaceWith(D):et.before(D):z.append(D)}a(this,Ft).clear()},e.AnnotationLayer=h},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function n(r){return Math.max(0,Math.min(255,255*r))}class i{static CMYK_G([c,b,f,g]){return["G",1-Math.min(1,.3*c+.59*f+.11*b+g)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_rgb([c]){return c=n(c),[c,c,c]}static G_HTML([c]){const b=s(c);return`#${b}${b}${b}`}static RGB_G([c,b,f]){return["G",.3*c+.59*b+.11*f]}static RGB_rgb(c){return c.map(n)}static RGB_HTML(c){return`#${c.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([c,b,f,g]){return["RGB",1-Math.min(1,c+g),1-Math.min(1,f+g),1-Math.min(1,b+g)]}static CMYK_rgb([c,b,f,g]){return[n(1-Math.min(1,c+g)),n(1-Math.min(1,f+g)),n(1-Math.min(1,b+g))]}static CMYK_HTML(c){const b=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([c,b,f]){const g=1-c,o=1-b,w=1-f,T=Math.min(g,o,w);return["CMYK",g,o,w,T]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function n(c,b){switch(c){case"find_match_count":c=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return s[c]||""}function i(c,b){return b?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(f,g)=>g in b?b[g]:"{{"+g+"}}"):c}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(c,b=null,f=n(c,b)){return i(f,b)},async translate(c){}};e.NullL10n=r},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(25);class i{static setupStorage(c,b,f,g,o){const w=g.getValue(b,{value:null});switch(f.name){case"textarea":if(w.value!==null&&(c.textContent=w.value),o==="print")break;c.addEventListener("input",T=>{g.setValue(b,{value:T.target.value})});break;case"input":if(f.attributes.type==="radio"||f.attributes.type==="checkbox"){if(w.value===f.attributes.xfaOn?c.setAttribute("checked",!0):w.value===f.attributes.xfaOff&&c.removeAttribute("checked"),o==="print")break;c.addEventListener("change",T=>{g.setValue(b,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&c.setAttribute("value",w.value),o==="print")break;c.addEventListener("input",T=>{g.setValue(b,{value:T.target.value})})}break;case"select":if(w.value!==null){c.setAttribute("value",w.value);for(const T of f.children)T.attributes.value===w.value?T.attributes.selected=!0:T.attributes.hasOwnProperty("selected")&&delete T.attributes.selected}c.addEventListener("input",T=>{const x=T.target.options,R=x.selectedIndex===-1?"":x[x.selectedIndex].value;g.setValue(b,{value:R})});break}}static setAttributes({html:c,element:b,storage:f=null,intent:g,linkService:o}){const{attributes:w}=b,T=c instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${g}`);for(const[x,R]of Object.entries(w))if(R!=null)switch(x){case"class":R.length&&c.setAttribute(x,R.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",R);break;case"style":Object.assign(c.style,R);break;case"textContent":c.textContent=R;break;default:(!T||x!=="href"&&x!=="newWindow")&&c.setAttribute(x,R)}T&&o.addLinkAttributes(c,w.href,w.newWindow),f&&w.dataId&&this.setupStorage(c,w.dataId,b,f)}static render(c){var M;const b=c.annotationStorage,f=c.linkService,g=c.xfaHtml,o=c.intent||"display",w=document.createElement(g.name);g.attributes&&this.setAttributes({html:w,element:g,intent:o,linkService:f});const T=[[g,-1,w]],x=c.div;if(x.append(w),c.viewport){const E=`matrix(${c.viewport.transform.join(",")})`;x.style.transform=E}o!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const R=[];for(;T.length>0;){const[E,C,P]=T.at(-1);if(C+1===E.children.length){T.pop();continue}const O=E.children[++T.at(-1)[1]];if(O===null)continue;const{name:F}=O;if(F==="#text"){const A=document.createTextNode(O.value);R.push(A),P.append(A);continue}const m=(M=O==null?void 0:O.attributes)!=null&&M.xmlns?document.createElementNS(O.attributes.xmlns,F):document.createElement(F);if(P.append(m),O.attributes&&this.setAttributes({html:m,element:O,storage:b,intent:o,linkService:f}),O.children&&O.children.length>0)T.push([O,-1,m]);else if(O.value){const A=document.createTextNode(O.value);n.XfaText.shouldBuildText(F)&&R.push(A),m.append(A)}}for(const E of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:R}}static update(c){const b=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=b,c.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{var g,o,w,T,x,R,M,E,C,P,O,F,m,A,H,$n,_,Hn,L,Un,st,Wn,ot,fn,mt,Vn,yt,pn,Rt,zn,j,Gn,d,qn,y,Xn,N,Yn,Y,le,v,gn,W,Oe,K,Ie,St,ge,bt,mn,J,De,ct,Kn,Et,_n,Lt,Jn,Vt,Qn,Wt,bn,vt,Le,nt,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=s(1),i=s(4),r=s(29),c=s(6),b=s(5);const xt=class xt extends i.AnnotationEditor{constructor(ht){super({...ht,name:"inkEditor"});G(this,H);G(this,_);G(this,L);G(this,st);G(this,ot);G(this,mt);G(this,yt);G(this,Rt);G(this,j);G(this,d);G(this,y);G(this,N);G(this,Y);G(this,v);G(this,W);G(this,K);G(this,St);G(this,bt);G(this,J);G(this,Vt);G(this,Wt);G(this,vt);G(this,nt);G(this,g,0);G(this,o,0);G(this,w,this.canvasPointermove.bind(this));G(this,T,this.canvasPointerleave.bind(this));G(this,x,this.canvasPointerup.bind(this));G(this,R,this.canvasPointerdown.bind(this));G(this,M,new Path2D);G(this,E,!1);G(this,C,!1);G(this,P,!1);G(this,O,null);G(this,F,0);G(this,m,0);G(this,A,null);this.color=ht.color||null,this.thickness=ht.thickness||null,this.opacity=ht.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ht){i.AnnotationEditor.initialize(ht,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:xt._defaultThickness=Mt;break;case n.AnnotationEditorParamsType.INK_COLOR:xt._defaultColor=Mt;break;case n.AnnotationEditorParamsType.INK_OPACITY:xt._defaultOpacity=Mt/100;break}}updateParams(ht,Mt){switch(ht){case n.AnnotationEditorParamsType.INK_THICKNESS:it(this,H,$n).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_COLOR:it(this,_,Hn).call(this,Mt);break;case n.AnnotationEditorParamsType.INK_OPACITY:it(this,L,Un).call(this,Mt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,xt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,xt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(xt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||xt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||xt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??xt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(it(this,W,Oe).call(this),it(this,K,Ie).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,St,ge).call(this)),it(this,nt,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,O).disconnect(),gt(this,O,null),super.remove())}setParent(ht){!this.parent&&ht?this._uiManager.removeShouldRescale(this):this.parent&&ht===null&&this._uiManager.addShouldRescale(this),super.setParent(ht)}onScaleChanging(){const[ht,Mt]=this.parentDimensions,Ht=this.width*ht,Ft=this.height*Mt;this.setDimensions(Ht,Ft)}enableEditMode(){a(this,E)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,R)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,R)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,E)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,E,!0),this.div.classList.add("disabled"),it(this,nt,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),this.enableEditMode())}canvasPointerdown(ht){ht.button!==0||!this.isInEditMode()||a(this,E)||(this.setInForeground(),ht.preventDefault(),ht.type!=="mouse"&&this.div.focus(),it(this,mt,Vn).call(this,ht.offsetX,ht.offsetY))}canvasPointermove(ht){ht.preventDefault(),it(this,yt,pn).call(this,ht.offsetX,ht.offsetY)}canvasPointerup(ht){ht.preventDefault(),it(this,v,gn).call(this,ht)}canvasPointerleave(ht){it(this,v,gn).call(this,ht)}get isResizable(){return!this.isEmpty()&&a(this,E)}render(){if(this.div)return this.div;let ht,Mt;this.width&&(ht=this.x,Mt=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var Pt;return(Pt=this.div)==null?void 0:Pt.setAttribute("aria-label",Zt)});const[Ht,Ft,Ut,zt]=it(this,st,Wn).call(this);if(this.setAt(Ht,Ft,0,0),this.setDims(Ut,zt),it(this,W,Oe).call(this),this.width){const[Zt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*Pt),this.setAt(ht*Zt,Mt*Pt,this.width*Zt,this.height*Pt),gt(this,P,!0),it(this,St,ge).call(this),this.setDims(this.width*Zt,this.height*Pt),it(this,Y,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,K,Ie).call(this),this.div}setDimensions(ht,Mt){const Ht=Math.round(ht),Ft=Math.round(Mt);if(a(this,F)===Ht&&a(this,m)===Ft)return;gt(this,F,Ht),gt(this,m,Ft),this.canvas.style.visibility="hidden";const[Ut,zt]=this.parentDimensions;this.width=ht/Ut,this.height=Mt/zt,this.fixAndSetPosition(),a(this,E)&&it(this,bt,mn).call(this,ht,Mt),it(this,St,ge).call(this),it(this,Y,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ht,Mt,Ht){var et,lt,_t;if(ht instanceof r.InkAnnotationElement)return null;const Ft=super.deserialize(ht,Mt,Ht);Ft.thickness=ht.thickness,Ft.color=n.Util.makeHexColor(...ht.color),Ft.opacity=ht.opacity;const[Ut,zt]=Ft.pageDimensions,Zt=Ft.width*Ut,Pt=Ft.height*zt,Jt=Ft.parentScale,$t=ht.thickness/2;gt(Ft,E,!0),gt(Ft,F,Math.round(Zt)),gt(Ft,m,Math.round(Pt));const{paths:V,rect:l,rotation:D}=ht;for(let{bezier:Tt}of V){Tt=it(et=xt,Lt,Jn).call(et,Tt,l,D);const It=[];Ft.paths.push(It);let Ot=Jt*(Tt[0]-$t),Xt=Jt*(Tt[1]-$t);for(let Bt=2,qt=Tt.length;Bt<qt;Bt+=6){const Kt=Jt*(Tt[Bt]-$t),Qt=Jt*(Tt[Bt+1]-$t),te=Jt*(Tt[Bt+2]-$t),re=Jt*(Tt[Bt+3]-$t),ie=Jt*(Tt[Bt+4]-$t),ae=Jt*(Tt[Bt+5]-$t);It.push([[Ot,Xt],[Kt,Qt],[te,re],[ie,ae]]),Ot=ie,Xt=ae}const Nt=it(this,ct,Kn).call(this,It);Ft.bezierPath2D.push(Nt)}const z=it(lt=Ft,Wt,bn).call(lt);return gt(Ft,o,Math.max(i.AnnotationEditor.MIN_SIZE,z[2]-z[0])),gt(Ft,g,Math.max(i.AnnotationEditor.MIN_SIZE,z[3]-z[1])),it(_t=Ft,bt,mn).call(_t,Zt,Pt),Ft}serialize(){if(this.isEmpty())return null;const ht=this.getRect(0,0),Mt=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:Mt,thickness:this.thickness,opacity:this.opacity,paths:it(this,Vt,Qn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ht),pageIndex:this.pageIndex,rect:ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};g=new WeakMap,o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,P=new WeakMap,O=new WeakMap,F=new WeakMap,m=new WeakMap,A=new WeakMap,H=new WeakSet,$n=function(ht){const Mt=this.thickness;this.addCommands({cmd:()=>{this.thickness=ht,it(this,nt,me).call(this)},undo:()=>{this.thickness=Mt,it(this,nt,me).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,Hn=function(ht){const Mt=this.color;this.addCommands({cmd:()=>{this.color=ht,it(this,Y,le).call(this)},undo:()=>{this.color=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,Un=function(ht){ht/=100;const Mt=this.opacity;this.addCommands({cmd:()=>{this.opacity=ht,it(this,Y,le).call(this)},undo:()=>{this.opacity=Mt,it(this,Y,le).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},st=new WeakSet,Wn=function(){const{parentRotation:ht,parentDimensions:[Mt,Ht]}=this;switch(ht){case 90:return[0,Ht,Ht,Mt];case 180:return[Mt,Ht,Mt,Ht];case 270:return[Mt,0,Ht,Mt];default:return[0,0,Mt,Ht]}},ot=new WeakSet,fn=function(){const{ctx:ht,color:Mt,opacity:Ht,thickness:Ft,parentScale:Ut,scaleFactor:zt}=this;ht.lineWidth=Ft*Ut/zt,ht.lineCap="round",ht.lineJoin="round",ht.miterLimit=10,ht.strokeStyle=`${Mt}${(0,b.opacityToHex)(Ht)}`},mt=new WeakSet,Vn=function(ht,Mt){this.canvas.addEventListener("contextmenu",c.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,T)),this.canvas.addEventListener("pointermove",a(this,w)),this.canvas.addEventListener("pointerup",a(this,x)),this.canvas.removeEventListener("pointerdown",a(this,R)),this.isEditing=!0,a(this,P)||(gt(this,P,!0),it(this,St,ge).call(this),this.thickness||(this.thickness=xt._defaultThickness),this.color||(this.color=xt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=xt._defaultOpacity)),this.currentPath.push([ht,Mt]),gt(this,C,!1),it(this,ot,fn).call(this),gt(this,A,()=>{it(this,d,qn).call(this),a(this,A)&&window.requestAnimationFrame(a(this,A))}),window.requestAnimationFrame(a(this,A))},yt=new WeakSet,pn=function(ht,Mt){const[Ht,Ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&ht===Ht&&Mt===Ft)return;const Ut=this.currentPath;let zt=a(this,M);if(Ut.push([ht,Mt]),gt(this,C,!0),Ut.length<=2){zt.moveTo(...Ut[0]),zt.lineTo(ht,Mt);return}Ut.length===3&&(gt(this,M,zt=new Path2D),zt.moveTo(...Ut[0])),it(this,y,Xn).call(this,zt,...Ut.at(-3),...Ut.at(-2),ht,Mt)},Rt=new WeakSet,zn=function(){if(this.currentPath.length===0)return;const ht=this.currentPath.at(-1);a(this,M).lineTo(...ht)},j=new WeakSet,Gn=function(ht,Mt){gt(this,A,null),ht=Math.min(Math.max(ht,0),this.canvas.width),Mt=Math.min(Math.max(Mt,0),this.canvas.height),it(this,yt,pn).call(this,ht,Mt),it(this,Rt,zn).call(this);let Ht;if(this.currentPath.length!==1)Ht=it(this,N,Yn).call(this);else{const Pt=[ht,Mt];Ht=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const Ft=a(this,M),Ut=this.currentPath;this.currentPath=[],gt(this,M,new Path2D);const zt=()=>{this.allRawPaths.push(Ut),this.paths.push(Ht),this.bezierPath2D.push(Ft),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,W,Oe).call(this),it(this,K,Ie).call(this)),it(this,nt,me).call(this))};this.addCommands({cmd:zt,undo:Zt,mustExec:!0})},d=new WeakSet,qn=function(){if(!a(this,C))return;gt(this,C,!1);const ht=Math.ceil(this.thickness*this.parentScale),Mt=this.currentPath.slice(-3),Ht=Mt.map(zt=>zt[0]),Ft=Mt.map(zt=>zt[1]);Math.min(...Ht)-ht,Math.max(...Ht)+ht,Math.min(...Ft)-ht,Math.max(...Ft)+ht;const{ctx:Ut}=this;Ut.save(),Ut.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zt of this.bezierPath2D)Ut.stroke(zt);Ut.stroke(a(this,M)),Ut.restore()},y=new WeakSet,Xn=function(ht,Mt,Ht,Ft,Ut,zt,Zt){const Pt=(Mt+Ft)/2,Jt=(Ht+Ut)/2,$t=(Ft+zt)/2,V=(Ut+Zt)/2;ht.bezierCurveTo(Pt+2*(Ft-Pt)/3,Jt+2*(Ut-Jt)/3,$t+2*(Ft-$t)/3,V+2*(Ut-V)/3,$t,V)},N=new WeakSet,Yn=function(){const ht=this.currentPath;if(ht.length<=2)return[[ht[0],ht[0],ht.at(-1),ht.at(-1)]];const Mt=[];let Ht,[Ft,Ut]=ht[0];for(Ht=1;Ht<ht.length-2;Ht++){const[l,D]=ht[Ht],[z,et]=ht[Ht+1],lt=(l+z)/2,_t=(D+et)/2,Tt=[Ft+2*(l-Ft)/3,Ut+2*(D-Ut)/3],It=[lt+2*(l-lt)/3,_t+2*(D-_t)/3];Mt.push([[Ft,Ut],Tt,It,[lt,_t]]),[Ft,Ut]=[lt,_t]}const[zt,Zt]=ht[Ht],[Pt,Jt]=ht[Ht+1],$t=[Ft+2*(zt-Ft)/3,Ut+2*(Zt-Ut)/3],V=[Pt+2*(zt-Pt)/3,Jt+2*(Zt-Jt)/3];return Mt.push([[Ft,Ut],$t,V,[Pt,Jt]]),Mt},Y=new WeakSet,le=function(){if(this.isEmpty()){it(this,J,De).call(this);return}it(this,ot,fn).call(this);const{canvas:ht,ctx:Mt}=this;Mt.setTransform(1,0,0,1,0,0),Mt.clearRect(0,0,ht.width,ht.height),it(this,J,De).call(this);for(const Ht of this.bezierPath2D)Mt.stroke(Ht)},v=new WeakSet,gn=function(ht){this.canvas.removeEventListener("pointerleave",a(this,T)),this.canvas.removeEventListener("pointermove",a(this,w)),this.canvas.removeEventListener("pointerup",a(this,x)),this.canvas.addEventListener("pointerdown",a(this,R)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",c.noContextMenu)},10),it(this,j,Gn).call(this,ht.offsetX,ht.offsetY),this.addToAnnotationStorage(),this.setInBackground()},W=new WeakSet,Oe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ht=>{var Mt;return(Mt=this.canvas)==null?void 0:Mt.setAttribute("aria-label",ht)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,Ie=function(){gt(this,O,new ResizeObserver(ht=>{const Mt=ht[0].contentRect;Mt.width&&Mt.height&&this.setDimensions(Mt.width,Mt.height)})),a(this,O).observe(this.div)},St=new WeakSet,ge=function(){if(!a(this,P))return;const[ht,Mt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ht),this.canvas.height=Math.ceil(this.height*Mt),it(this,J,De).call(this)},bt=new WeakSet,mn=function(ht,Mt){const Ht=it(this,vt,Le).call(this),Ft=(ht-Ht)/a(this,o),Ut=(Mt-Ht)/a(this,g);this.scaleFactor=Math.min(Ft,Ut)},J=new WeakSet,De=function(){const ht=it(this,vt,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ht,this.translationY*this.scaleFactor+ht)},ct=new WeakSet,Kn=function(ht){const Mt=new Path2D;for(let Ht=0,Ft=ht.length;Ht<Ft;Ht++){const[Ut,zt,Zt,Pt]=ht[Ht];Ht===0&&Mt.moveTo(...Ut),Mt.bezierCurveTo(zt[0],zt[1],Zt[0],Zt[1],Pt[0],Pt[1])}return Mt},Et=new WeakSet,_n=function(ht,Mt,Ht){const[Ft,Ut,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]+=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=ht[Pt+1]+Ft,ht[Pt+1]=$t+Ut}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]+=Ut;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=zt-ht[Pt+1],ht[Pt+1]=Zt-$t}break;default:throw new Error("Invalid rotation")}return ht},Lt=new WeakSet,Jn=function(ht,Mt,Ht){const[Ft,Ut,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]-=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=ht[Pt+1]-Ut,ht[Pt+1]=$t-Ft}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]-=Ut;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const $t=ht[Pt];ht[Pt]=Zt-ht[Pt+1],ht[Pt+1]=zt-$t}break;default:throw new Error("Invalid rotation")}return ht},Vt=new WeakSet,Qn=function(ht,Mt,Ht,Ft){var Jt,$t;const Ut=[],zt=this.thickness/2,Zt=ht*Mt+zt,Pt=ht*Ht+zt;for(const V of this.paths){const l=[],D=[];for(let z=0,et=V.length;z<et;z++){const[lt,_t,Tt,It]=V[z],Ot=ht*lt[0]+Zt,Xt=ht*lt[1]+Pt,Nt=ht*_t[0]+Zt,Bt=ht*_t[1]+Pt,qt=ht*Tt[0]+Zt,Kt=ht*Tt[1]+Pt,Qt=ht*It[0]+Zt,te=ht*It[1]+Pt;z===0&&(l.push(Ot,Xt),D.push(Ot,Xt)),l.push(Nt,Bt,qt,Kt,Qt,te),D.push(Nt,Bt),z===et-1&&D.push(Qt,te)}Ut.push({bezier:it(Jt=xt,Et,_n).call(Jt,l,Ft,this.rotation),points:it($t=xt,Et,_n).call($t,D,Ft,this.rotation)})}return Ut},Wt=new WeakSet,bn=function(){let ht=1/0,Mt=-1/0,Ht=1/0,Ft=-1/0;for(const Ut of this.paths)for(const[zt,Zt,Pt,Jt]of Ut){const $t=n.Util.bezierBoundingBox(...zt,...Zt,...Pt,...Jt);ht=Math.min(ht,$t[0]),Ht=Math.min(Ht,$t[1]),Mt=Math.max(Mt,$t[2]),Ft=Math.max(Ft,$t[3])}return[ht,Ht,Mt,Ft]},vt=new WeakSet,Le=function(){return a(this,E)?Math.ceil(this.thickness*this.parentScale):0},nt=new WeakSet,me=function(ht=!1){if(this.isEmpty())return;if(!a(this,E)){it(this,Y,le).call(this);return}const Mt=it(this,Wt,bn).call(this),Ht=it(this,vt,Le).call(this);gt(this,o,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),gt(this,g,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1]));const Ft=Math.ceil(Ht+a(this,o)*this.scaleFactor),Ut=Math.ceil(Ht+a(this,g)*this.scaleFactor),[zt,Zt]=this.parentDimensions;this.width=Ft/zt,this.height=Ut/Zt,this.setAspectRatio(Ft,Ut);const Pt=this.translationX,Jt=this.translationY;this.translationX=-Mt[0],this.translationY=-Mt[1],it(this,St,ge).call(this),it(this,Y,le).call(this),gt(this,F,Ft),gt(this,m,Ut),this.setDims(Ft,Ut);const $t=ht?Ht/this.scaleFactor/2:0;this.translate(Pt-this.translationX-$t,Jt-this.translationY-$t)},G(xt,ct),G(xt,Et),G(xt,Lt),se(xt,"_defaultColor",null),se(xt,"_defaultOpacity",1),se(xt,"_defaultThickness",1),se(xt,"_type","ink");let f=xt;e.InkEditor=f},(t,e,s)=>{var f,g,o,w,T,x,R,M,E,C,P,Ee,F,we,A,Ne,k,yn,B,Zn,Q,ts,$,vn,pt,Be,X,es;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=s(1),i=s(4),r=s(6),c=s(29);const wt=class wt extends i.AnnotationEditor{constructor(j){super({...j,name:"stampEditor"});G(this,P);G(this,F);G(this,A);G(this,k);G(this,B);G(this,Q);G(this,$);G(this,pt);G(this,X);G(this,f,null);G(this,g,null);G(this,o,null);G(this,w,null);G(this,T,null);G(this,x,null);G(this,R,null);G(this,M,null);G(this,E,!1);G(this,C,!1);gt(this,w,j.bitmapUrl),gt(this,T,j.bitmapFile)}static initialize(j){i.AnnotationEditor.initialize(j)}static get supportedTypes(){const j=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",j.map(h=>`image/${h}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(j){return this.supportedTypes.includes(j)}static paste(j,h){h.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:j.getAsFile()})}remove(){var j,h;a(this,g)&&(gt(this,f,null),this._uiManager.imageManager.deleteId(a(this,g)),(j=a(this,x))==null||j.remove(),gt(this,x,null),(h=a(this,R))==null||h.disconnect(),gt(this,R,null)),super.remove()}rebuild(){if(!this.parent){a(this,g)&&it(this,A,Ne).call(this);return}super.rebuild(),this.div!==null&&(a(this,g)&&it(this,A,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,o)||a(this,f)||a(this,w)||a(this,T))}get isResizable(){return!0}render(){if(this.div)return this.div;let j,h;if(this.width&&(j=this.x,h=this.y),super.render(),this.div.hidden=!0,a(this,f)?it(this,k,yn).call(this):it(this,A,Ne).call(this),this.width){const[d,u]=this.parentDimensions;this.setAt(j*d,h*u,this.width*d,this.height*u)}return this.div}static deserialize(j,h,d){if(j instanceof c.StampAnnotationElement)return null;const u=super.deserialize(j,h,d),{rect:y,bitmapUrl:S,bitmapId:N,isSvg:U,accessibilityData:Y}=j;N&&d.imageManager.isValidId(N)?gt(u,g,N):gt(u,w,S),gt(u,E,U);const[dt,v]=u.pageDimensions;return u.width=(y[2]-y[0])/dt,u.height=(y[3]-y[1])/v,Y&&(u.altTextData=Y),u}serialize(j=!1,h=null){if(this.isEmpty())return null;const d={annotationType:n.AnnotationEditorType.STAMP,bitmapId:a(this,g),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,E),structTreeParentId:this._structTreeParentId};if(j)return d.bitmapUrl=it(this,pt,Be).call(this,!0),d.accessibilityData=this.altTextData,d;const{decorative:u,altText:y}=this.altTextData;if(!u&&y&&(d.accessibilityData={type:"Figure",alt:y}),h===null)return d;h.stamps||(h.stamps=new Map);const S=a(this,E)?(d.rect[2]-d.rect[0])*(d.rect[3]-d.rect[1]):null;if(!h.stamps.has(a(this,g)))h.stamps.set(a(this,g),{area:S,serialized:d}),d.bitmap=it(this,pt,Be).call(this,!1);else if(a(this,E)){const N=h.stamps.get(a(this,g));S>N.area&&(N.area=S,N.serialized.bitmap.close(),N.serialized.bitmap=it(this,pt,Be).call(this,!1))}return d}};f=new WeakMap,g=new WeakMap,o=new WeakMap,w=new WeakMap,T=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,E=new WeakMap,C=new WeakMap,P=new WeakSet,Ee=function(j,h=!1){if(!j){this.remove();return}gt(this,f,j.bitmap),h||(gt(this,g,j.id),gt(this,E,j.isSvg)),it(this,k,yn).call(this)},F=new WeakSet,we=function(){gt(this,o,null),this._uiManager.enableWaiting(!1),a(this,x)&&this.div.focus()},A=new WeakSet,Ne=function(){if(a(this,g)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,g)).then(h=>it(this,P,Ee).call(this,h,!0)).finally(()=>it(this,F,we).call(this));return}if(a(this,w)){const h=a(this,w);gt(this,w,null),this._uiManager.enableWaiting(!0),gt(this,o,this._uiManager.imageManager.getFromUrl(h).then(d=>it(this,P,Ee).call(this,d)).finally(()=>it(this,F,we).call(this)));return}if(a(this,T)){const h=a(this,T);gt(this,T,null),this._uiManager.enableWaiting(!0),gt(this,o,this._uiManager.imageManager.getFromFile(h).then(d=>it(this,P,Ee).call(this,d)).finally(()=>it(this,F,we).call(this)));return}const j=document.createElement("input");j.type="file",j.accept=wt.supportedTypesStr,gt(this,o,new Promise(h=>{j.addEventListener("change",async()=>{if(!j.files||j.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const d=await this._uiManager.imageManager.getFromFile(j.files[0]);it(this,P,Ee).call(this,d)}h()}),j.addEventListener("cancel",()=>{this.remove(),h()})}).finally(()=>it(this,F,we).call(this))),j.click()},k=new WeakSet,yn=function(){const{div:j}=this;let{width:h,height:d}=a(this,f);const[u,y]=this.pageDimensions,S=.75;if(this.width)h=this.width*u,d=this.height*y;else if(h>S*u||d>S*y){const dt=Math.min(S*u/h,S*y/d);h*=dt,d*=dt}const[N,U]=this.parentDimensions;this.setDims(h*N/u,d*U/y),this._uiManager.enableWaiting(!1);const Y=gt(this,x,document.createElement("canvas"));j.append(Y),j.hidden=!1,it(this,$,vn).call(this,h,d),it(this,X,es).call(this),a(this,C)||(this.parent.addUndoableEditor(this),gt(this,C,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},B=new WeakSet,Zn=function(j,h){var S;const[d,u]=this.parentDimensions;this.width=j/d,this.height=h/u,this.setDims(j,h),(S=this._initialOptions)!=null&&S.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,M)!==null&&clearTimeout(a(this,M)),gt(this,M,setTimeout(()=>{gt(this,M,null),it(this,$,vn).call(this,j,h)},200))},Q=new WeakSet,ts=function(j,h){const{width:d,height:u}=a(this,f);let y=d,S=u,N=a(this,f);for(;y>2*j||S>2*h;){const U=y,Y=S;y>2*j&&(y=y>=16384?Math.floor(y/2)-1:Math.ceil(y/2)),S>2*h&&(S=S>=16384?Math.floor(S/2)-1:Math.ceil(S/2));const dt=new OffscreenCanvas(y,S);dt.getContext("2d").drawImage(N,0,0,U,Y,0,0,y,S),N=dt.transferToImageBitmap()}return N},$=new WeakSet,vn=function(j,h){j=Math.ceil(j),h=Math.ceil(h);const d=a(this,x);if(!d||d.width===j&&d.height===h)return;d.width=j,d.height=h;const u=a(this,E)?a(this,f):it(this,Q,ts).call(this,j,h),y=d.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(u,0,0,u.width,u.height,0,0,j,h)},pt=new WeakSet,Be=function(j){if(j){if(a(this,E)){const u=this._uiManager.imageManager.getSvgUrl(a(this,g));if(u)return u}const h=document.createElement("canvas");return{width:h.width,height:h.height}=a(this,f),h.getContext("2d").drawImage(a(this,f),0,0),h.toDataURL()}if(a(this,E)){const[h,d]=this.pageDimensions,u=Math.round(this.width*h*r.PixelsPerInch.PDF_TO_CSS_UNITS),y=Math.round(this.height*d*r.PixelsPerInch.PDF_TO_CSS_UNITS),S=new OffscreenCanvas(u,y);return S.getContext("2d").drawImage(a(this,f),0,0,a(this,f).width,a(this,f).height,0,0,u,y),S.transferToImageBitmap()}return structuredClone(a(this,f))},X=new WeakSet,es=function(){gt(this,R,new ResizeObserver(j=>{const h=j[0].contentRect;h.width&&h.height&&it(this,B,Zn).call(this,h.width,h.height)})),a(this,R).observe(this.div)},se(wt,"_type","stamp");let b=wt;e.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),c=__w_pdfjs_require__(5),b=__w_pdfjs_require__(29),f=__w_pdfjs_require__(14),g=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(s,n){n()})(commonjsGlobal,function(){function s(g,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function n(g,o,w){var T=new XMLHttpRequest;T.open("GET",g),T.responseType="blob",T.onload=function(){f(T.response,o,w)},T.onerror=function(){console.error("could not download file")},T.send()}function i(g){var o=new XMLHttpRequest;o.open("HEAD",g,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function r(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(o)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,b=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!b?function(g,o,w){var T=c.URL||c.webkitURL,x=document.createElement("a");o=o||g.name||"download",x.download=o,x.rel="noopener",typeof g=="string"?(x.href=g,x.origin===location.origin?r(x):i(x.href)?n(g,o,w):r(x,x.target="_blank")):(x.href=T.createObjectURL(g),setTimeout(function(){T.revokeObjectURL(x.href)},4e4),setTimeout(function(){r(x)},0))}:"msSaveOrOpenBlob"in navigator?function(g,o,w){if(o=o||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(s(g,w),o);else if(i(g))n(g,o,w);else{var T=document.createElement("a");T.href=g,T.target="_blank",setTimeout(function(){r(T)})}}:function(g,o,w,T){if(T=T||open("","_blank"),T&&(T.document.title=T.document.body.innerText="downloading..."),typeof g=="string")return n(g,o,w);var x=g.type==="application/octet-stream",R=/constructor/i.test(c.HTMLElement)||c.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||x&&R||b)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var O=E.result;O=M?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),T?T.location.href=O:location=O,T=null},E.readAsDataURL(g)}else{var C=c.URL||c.webkitURL,P=C.createObjectURL(g);T?T.location=P:location.href=P,T=null,setTimeout(function(){C.revokeObjectURL(P)},4e4)}});c.saveAs=f.saveAs=f,t.exports=f})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function generateCanvas(t,e,s){const{width:n,height:i,words:r,compression:c}=t,b=document.createElement("canvas"),f=b.getContext("2d");return b.width=s?e.width:n,b.height=s?e.height:i,f.drawImage(e,0,0,b.width,b.height),r.trim().length>0&&addWaterMark(t,f),{src:b.toDataURL("image/jpeg",c),newCanvas:b}}function addWaterMark(t,e){const{width:s,height:n,words:i,fontSize:r,color:c,rotate:b,row:f,col:g,startX:o,startY:w,offsetX:T,offsetY:x}=t;e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,s,n),e.rotate(parseInt(b)*Math.PI/180),e.fillStyle=c,e.font=`normal ${r}px Arial`,Array.from({length:f}).forEach((R,M)=>{Array.from({length:g}).forEach((E,C)=>{if(i.includes(`
`))multipleWords(e,M,C,i,r,o,w,T,x);else{const P=+o+C*(i.length*r+T),O=+w+M*(x+r);e.fillText(i,P,O)}})})}function multipleWords(t,e,s,n,i,r,c,b,f){const g=n.split(`
`),o=g.length,w=Math.max(...g.map(T=>T.length));for(let T=0;T<o;T++){const x=+r+s*(w*i+b)+(w-g[T].length)/2*i,R=+c+e*f+i*1.3*(T+o*e);t.fillText(g[T],x,R)}}function downloadImage(t,e,s){const n=new Image;n.src=t,n.onload=()=>{const i=document.createElement("canvas");i.width=+e.width,i.height=+e.height;const r=i.getContext("2d");r==null||r.drawImage(n,0,0);const c=i.toDataURL("image/png"),b=dataURLToBlob(c),f=document.createElement("a");f.href=URL.createObjectURL(b),f.download=s,f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)}}function dataURLToBlob(t){const e=t.split(";base64,"),s=e[0].split(":")[1],n=window.atob(e[1]),i=n.length,r=new Uint8Array(i);for(let c=0;c<i;++c)r[c]=n.charCodeAt(c);return new Blob([r],{type:s})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(t,e,s,n,i){const r=pdfExports.getDocument({url:t,disableRange:!0});imgData.length=0,r.promise.then(c=>{s.value&&(s.value.innerHTML="");const b=c.numPages;for(let f=1;f<=b;f++)c.getPage(f).then(g=>{const o=document.createElement("canvas"),w=o.getContext("2d"),T=g.getViewport({scale:1});o.width=T.width,o.height=T.height,e.width=o.width,e.height=o.height;const x={canvasContext:w,viewport:T};g.render(x).promise.then(function(){const{newCanvas:M,src:E}=generateCanvas(e,o,i);s.value.appendChild(M),imgData.push({src:E,width:o.width,height:o.height}),imgData.length===b&&(n.value=!1)})})})}function img2Pdf(t,e){const s={autoFirstPage:!1,compress:!1},n=new PDFDocument(s),i=n.pipe(blobStream());for(let r=0;r<imgData.length;r++){const{src:c,width:b,height:f}=imgData[r];n.addPage({size:[b,f]}),n.image(c,0,0)}n.end(),i.on("finish",function(){var r=i.toBlob("application/pdf");FileSaver_minExports.saveAs(r,t),e.value=!1})}const _hoisted_1$5={class:"flex gap-2 mb-4"},_hoisted_2$4={class:"inline-flex items-center gap-1.5 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white text-sm font-medium rounded-lg cursor-pointer transition-colors"},_hoisted_3$3=["disabled"],_hoisted_4$2={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-3 min-h-[150px] sm:min-h-[200px] lg:min-h-[250px] flex items-center justify-center"},_hoisted_5$1={key:0,class:"flex items-center justify-center"},_hoisted_6$1=["src"],_hoisted_7$1={key:1,class:"overflow-auto w-full"},_hoisted_8={key:2,class:"flex flex-col items-center justify-center cursor-pointer group"},_hoisted_9={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm"},_sfc_main$6=defineComponent({__name:"TheMain",props:{config:null},setup(t){watch(t.config,e);function e(){s=!1,b&&(g.value.src=generateCanvas(t.config,b,s).src),T.value&&loadPdf(T.value,t.config,R,x,s)}let s=!1,n="",i="";function r(C){s=!0,c();const P=C.target.files;if(P&&P.length>0){const O=P[0];n=O.type,i=O.name,n.startsWith("image/")&&w(O),n==="application/pdf"&&(x.value=!0,M(O))}}function c(){b&&(b=null),o.value&&(o.value=""),T.value&&(T.value=""),R.value&&(R.value.innerHTML="")}let b;const f=ref(),g=ref(),o=ref("");function w(C){const P=new FileReader;P.readAsDataURL(C),P.onload=()=>{const O=new Image;O.src=P.result,b=O,O.onload=()=>{t.config.width=O.width,t.config.height=O.height,g.value.src=generateCanvas(t.config,O,s).src}},P.onloadend=()=>{o.value=P.result}}const T=ref(""),x=ref(!1),R=ref();function M(C){const P=new FileReader;P.readAsDataURL(C),P.onloadend=()=>{T.value=P.result,loadPdf(T.value,t.config,R,x,s)}}function E(){if(!(o.value===""&&T.value==="")){if(n.startsWith("image/")&&b){const C=generateCanvas(t.config,b,s).src;downloadImage(C,t.config,i)}n==="application/pdf"&&img2Pdf(i,x)}}return(C,P)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("label",_hoisted_2$4,[P[0]||(P[0]=createBaseVNode("span",{"i-carbon-upload":"",class:"text-base"},null,-1)),P[1]||(P[1]=createBaseVNode("span",null,"Load",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:r},null,32)]),createBaseVNode("button",{class:"inline-flex items-center gap-1.5 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:unref(o)===""&&unref(T)==="",onClick:E},[...P[2]||(P[2]=[createBaseVNode("span",{"i-carbon-download":"",class:"text-base"},null,-1),createBaseVNode("span",null,"Download",-1)])],8,_hoisted_3$3)]),createBaseVNode("div",_hoisted_4$2,[unref(o)?(openBlock(),createElementBlock("div",_hoisted_5$1,[createBaseVNode("img",{ref_key:"preview",ref:g,src:unref(o),class:"max-w-full h-auto rounded-lg shadow-xl",style:{"max-height":"70vh"}},null,8,_hoisted_6$1),createBaseVNode("canvas",{ref_key:"canvas",ref:f,class:"hidden"},null,512)])):unref(T)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",{ref_key:"wrap",ref:R,class:"flex flex-wrap gap-3 justify-center [&>canvas]:rounded-lg [&>canvas]:shadow-xl [&>canvas]:max-w-full [&>canvas]:h-auto"},null,512)])):(openBlock(),createElementBlock("label",_hoisted_8,[P[3]||(P[3]=createBaseVNode("div",{class:"p-3 rounded-full bg-slate-700/50 mb-2 group-hover:bg-violet-600/20 transition-colors"},[createBaseVNode("div",{"i-carbon-document-add":"",class:"text-2xl text-violet-400"})],-1)),P[4]||(P[4]=createBaseVNode("p",{class:"text-xs text-gray-300 font-medium"},"Drop file here or click to browse",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:r},null,32)]))]),unref(x)?(openBlock(),createElementBlock("div",_hoisted_9,[...P[5]||(P[5]=[createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"w-10 h-10 border-3 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),createBaseVNode("p",{class:"text-sm text-gray-300"},"Processing...")],-1)])])):createCommentVNode("",!0)]))}});var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function createFilterWrapper(t,e){function s(...n){return new Promise((i,r)=>{Promise.resolve(t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(r)})}return s}const bypassFilter=t=>t();function pausableFilter(t=bypassFilter){const e=ref(!0);function s(){e.value=!1}function n(){e.value=!0}const i=(...r)=>{e.value&&t(...r)};return{isActive:readonly(e),pause:s,resume:n,eventFilter:i}}function identity(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function resolveRef(t){return typeof t=="function"?computed(t):ref(t)}function tryOnMounted(t,e=!0){getCurrentInstance()?onMounted(t):e?t():nextTick(t)}function useToggle(t=!1,e={}){const{truthyValue:s=!0,falsyValue:n=!1}=e,i=isRef(t),r=ref(t);function c(b){if(arguments.length)return r.value=b,r.value;{const f=resolveUnref(s);return r.value=r.value===f?resolveUnref(n):f,r.value}}return i?c:[r,c]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(t,e)=>{var s={};for(var n in t)__hasOwnProp$6.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&__getOwnPropSymbols$6)for(var n of __getOwnPropSymbols$6(t))e.indexOf(n)<0&&__propIsEnum$6.call(t,n)&&(s[n]=t[n]);return s};function watchWithFilter(t,e,s={}){const n=s,{eventFilter:i=bypassFilter}=n,r=__objRest$5(n,["eventFilter"]);return watch(t,createFilterWrapper(i,e),r)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(t,e,s)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$2=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$2.call(e,s)&&__defNormalProp$2(t,s,e[s]);if(__getOwnPropSymbols$2)for(var s of __getOwnPropSymbols$2(e))__propIsEnum$2.call(e,s)&&__defNormalProp$2(t,s,e[s]);return t},__spreadProps$2=(t,e)=>__defProps$2(t,__getOwnPropDescs$2(e)),__objRest$1=(t,e)=>{var s={};for(var n in t)__hasOwnProp$2.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(t))e.indexOf(n)<0&&__propIsEnum$2.call(t,n)&&(s[n]=t[n]);return s};function watchPausable(t,e,s={}){const n=s,{eventFilter:i}=n,r=__objRest$1(n,["eventFilter"]),{eventFilter:c,pause:b,resume:f,isActive:g}=pausableFilter(i);return{stop:watchWithFilter(t,e,__spreadProps$2(__spreadValues$2({},r),{eventFilter:c})),pause:b,resume:f,isActive:g}}function unrefElement(t){var e;const s=resolveUnref(t);return(e=s==null?void 0:s.$el)!=null?e:s}const defaultWindow=isClient?window:void 0;function useEventListener(...t){let e,s,n,i;if(isString(t[0])||Array.isArray(t[0])?([s,n,i]=t,e=defaultWindow):[e,s,n,i]=t,!e)return noop;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const r=[],c=()=>{r.forEach(o=>o()),r.length=0},b=(o,w,T,x)=>(o.addEventListener(w,T,x),()=>o.removeEventListener(w,T,x)),f=watch(()=>[unrefElement(e),resolveUnref(i)],([o,w])=>{c(),o&&r.push(...s.flatMap(T=>n.map(x=>b(o,T,x,w))))},{immediate:!0,flush:"post"}),g=()=>{f(),c()};return tryOnScopeDispose(g),g}function useSupported(t,e=!1){const s=ref(),n=()=>s.value=!!t();return n(),tryOnMounted(n,e),s}function useMediaQuery(t,e={}){const{window:s=defaultWindow}=e,n=useSupported(()=>s&&"matchMedia"in s&&typeof s.matchMedia=="function");let i;const r=ref(!1),c=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",b):i.removeListener(b))},b=()=>{n.value&&(c(),i=s.matchMedia(resolveRef(t).value),r.value=i.matches,"addEventListener"in i?i.addEventListener("change",b):i.addListener(b))};return watchEffect(b),tryOnScopeDispose(()=>c()),r}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(t,e){return handlers[t]||e}function guessSerializerType(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(t,e,s)=>e in t?__defProp$k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$k=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$m.call(e,s)&&__defNormalProp$k(t,s,e[s]);if(__getOwnPropSymbols$m)for(var s of __getOwnPropSymbols$m(e))__propIsEnum$m.call(e,s)&&__defNormalProp$k(t,s,e[s]);return t};const StorageSerializers={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(t,e,s,n={}){var i;const{flush:r="pre",deep:c=!0,listenToStorageChanges:b=!0,writeDefaults:f=!0,mergeDefaults:g=!1,shallow:o,window:w=defaultWindow,eventFilter:T,onError:x=k=>{console.error(k)}}=n,R=(o?shallowRef:ref)(e);if(!s)try{s=getSSRHandler("getDefaultStorage",()=>{var k;return(k=defaultWindow)==null?void 0:k.localStorage})()}catch(k){x(k)}if(!s)return R;const M=resolveUnref(e),E=guessSerializerType(M),C=(i=n.serializer)!=null?i:StorageSerializers[E],{pause:P,resume:O}=watchPausable(R,()=>F(R.value),{flush:r,deep:c,eventFilter:T});return w&&b&&(useEventListener(w,"storage",H),useEventListener(w,customStorageEventName,A)),H(),R;function F(k){try{if(k==null)s.removeItem(t);else{const _=C.write(k),B=s.getItem(t);B!==_&&(s.setItem(t,_),w&&w.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:t,oldValue:B,newValue:_,storageArea:s}})))}}catch(_){x(_)}}function m(k){const _=k?k.newValue:s.getItem(t);if(_==null)return f&&M!==null&&s.setItem(t,C.write(M)),M;if(!k&&g){const B=C.read(_);return isFunction(g)?g(B,M):E==="object"&&!Array.isArray(B)?__spreadValues$k(__spreadValues$k({},M),B):B}else return typeof _!="string"?_:C.read(_)}function A(k){H(k.detail)}function H(k){if(!(k&&k.storageArea!==s)){if(k&&k.key==null){R.value=M;return}if(!(k&&k.key!==t)){P();try{R.value=m(k)}catch(_){x(_)}finally{k?nextTick(O):O()}}}}}function usePreferredDark(t){return useMediaQuery("(prefers-color-scheme: dark)",t)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(t,e,s)=>e in t?__defProp$j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$j=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$l.call(e,s)&&__defNormalProp$j(t,s,e[s]);if(__getOwnPropSymbols$l)for(var s of __getOwnPropSymbols$l(e))__propIsEnum$l.call(e,s)&&__defNormalProp$j(t,s,e[s]);return t};function useColorMode(t={}){const{selector:e="html",attribute:s="class",initialValue:n="auto",window:i=defaultWindow,storage:r,storageKey:c="vueuse-color-scheme",listenToStorageChanges:b=!0,storageRef:f,emitAuto:g}=t,o=__spreadValues$j({auto:"",light:"light",dark:"dark"},t.modes||{}),w=usePreferredDark({window:i}),T=computed(()=>w.value?"dark":"light"),x=f||(c==null?ref(n):useStorage(c,n,r,{window:i,listenToStorageChanges:b})),R=computed({get(){return x.value==="auto"&&!g?T.value:x.value},set(P){x.value=P}}),M=getSSRHandler("updateHTMLAttrs",(P,O,F)=>{const m=i==null?void 0:i.document.querySelector(P);if(m)if(O==="class"){const A=F.split(/\s/g);Object.values(o).flatMap(H=>(H||"").split(/\s/g)).filter(Boolean).forEach(H=>{A.includes(H)?m.classList.add(H):m.classList.remove(H)})}else m.setAttribute(O,F)});function E(P){var O;const F=P==="auto"?T.value:P;M(e,s,(O=o[F])!=null?O:F)}function C(P){t.onChanged?t.onChanged(P,E):E(P)}return watch(R,C,{flush:"post",immediate:!0}),g&&watch(T,()=>C(R.value),{flush:"post"}),tryOnMounted(()=>C(R.value)),R}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(t,e,s)=>e in t?__defProp$i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues$i=(t,e)=>{for(var s in e||(e={}))__hasOwnProp$k.call(e,s)&&__defNormalProp$i(t,s,e[s]);if(__getOwnPropSymbols$k)for(var s of __getOwnPropSymbols$k(e))__propIsEnum$k.call(e,s)&&__defNormalProp$i(t,s,e[s]);return t},__spreadProps$7=(t,e)=>__defProps$7(t,__getOwnPropDescs$7(e));function useDark(t={}){const{valueDark:e="dark",valueLight:s="",window:n=defaultWindow}=t,i=useColorMode(__spreadProps$7(__spreadValues$i({},t),{onChanged:(b,f)=>{var g;t.onChanged?(g=t.onChanged)==null||g.call(t,b==="dark"):f(b)},modes:{dark:e,light:s}})),r=usePreferredDark({window:n});return computed({get(){return i.value==="dark"},set(b){b===r.value?i.value="auto":i.value=b?"dark":"light"}})}var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,s)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues=(t,e)=>{for(var s in e||(e={}))__hasOwnProp.call(e,s)&&__defNormalProp(t,s,e[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))__propIsEnum.call(e,s)&&__defNormalProp(t,s,e[s]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,s,n={}){var i,r,c;const{clone:b=!1,passive:f=!1,eventName:g,deep:o=!1,defaultValue:w}=n,T=getCurrentInstance(),x=s||(T==null?void 0:T.emit)||((i=T==null?void 0:T.$emit)==null?void 0:i.bind(T))||((c=(r=T==null?void 0:T.proxy)==null?void 0:r.$emit)==null?void 0:c.bind(T==null?void 0:T.proxy));let R=g;e||(e="modelValue"),R=g||R||`update:${e.toString()}`;const M=C=>b?isFunction(b)?b(C):cloneFnJSON(C):C,E=()=>isDef(t[e])?M(t[e]):w;if(f){const C=E(),P=ref(C);return watch(()=>t[e],O=>P.value=M(O)),watch(P,O=>{(O!==t[e]||o)&&x(R,O)},{deep:o}),P}else return computed({get(){return E()},set(C){x(R,C)}})}const isDark=useDark(),toggleDark=useToggle(isDark),_export_sfc=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},_sfc_main$5={},_hoisted_1$4={class:"flex items-center justify-center gap-2"};function _sfc_render(t,e){return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("button",{class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",onClick:e[0]||(e[0]=s=>("toggleDark"in t?t.toggleDark:unref(toggleDark))()),title:"Toggle theme"},[...e[1]||(e[1]=[createBaseVNode("div",{"i-carbon-sun":"",class:"text-sm dark:hidden"},null,-1),createBaseVNode("div",{"i-carbon-moon":"",class:"text-sm hidden dark:block"},null,-1)])]),e[2]||(e[2]=createBaseVNode("a",{href:"https://github.com/9M2PJU/Watermark-PDF",target:"_blank",class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",title:"View on GitHub"},[createBaseVNode("div",{"i-carbon-logo-github":"",class:"text-sm"})],-1))])}const __unplugin_components_1=_export_sfc(_sfc_main$5,[["render",_sfc_render]]),_sfc_main$4=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const s=e;return(n,i)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["relative w-9 h-5 rounded-full transition-colors",t.value?"bg-violet-600":"bg-slate-600"]),onClick:i[0]||(i[0]=r=>s("update:value",!t.value))},[createBaseVNode("span",{class:normalizeClass(["absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform",t.value?"left-[18px]":"left-0.5"])},null,2)],2))}}),__MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,s=Object.create(null);for(const n of t)if(typeof n=="string")s[n]=useVModel(e,n,void 0,{eventName:`update:${n}`,passive:!0});else{const[i,r=i,c=`update:${i}`,b={}]=n;s[i]=useVModel(e,r,void 0,{eventName:c,passive:!0,...b})}return s},WATERMWRK_KEY="watermark-config",defaultConfig={words:"CONFIDENTIAL",width:0,height:0,fontSize:16,color:"rgba(0, 0, 0, 0.2)",rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},tooltips={words:"the words of watermark, use enter key to wrap lines",width:"the width of image, pdf is not useful",height:"the height of image, pdf is not useful",fontSize:"the font size of the watermark",color:"the color of the watermark, rgba is three-primary color, last parameter is opacity",rotate:"the rotation angle of watermark",row:"the rows of watermarks",col:"the columns of watermarks",startX:"the position along the X axis of first watermark",startY:"the position along the Y axis of first watermark",offsetX:"the offset along the X axis between two watermarks",offsetY:"the offset along the Y axis between two watermarks",compression:"the level for compression",saveConfig:"save the config for next use"},_hoisted_1$3={class:"flex items-center justify-between py-1.5"},_hoisted_2$3=["for","title"],_hoisted_3$2=["id"],_hoisted_4$1={key:2,class:"flex items-center gap-2"},_hoisted_5={class:"text-[10px] text-gray-500 w-6"},_hoisted_6=["id"],_hoisted_7=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value");return(s,n)=>{const i=_sfc_main$4;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("label",{for:t.property,class:"text-xs text-gray-400 capitalize",title:unref(tooltips)[t.property]},toDisplayString(t.property),9,_hoisted_2$3),t.property==="saveConfig"?(openBlock(),createBlock(i,{key:0,value:unref(e),"onUpdate:value":n[0]||(n[0]=r=>s.$emit("update:value",r))},null,8,["value"])):t.property==="words"?withDirectives((openBlock(),createElementBlock("input",{key:1,id:t.property,"onUpdate:modelValue":n[1]||(n[1]=r=>isRef(e)?e.value=r:null),type:"text",class:"w-32 sm:w-36 px-2 py-1 text-xs bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none",placeholder:"Watermark text"},null,8,_hoisted_3$2)),[[vModelText,unref(e)]]):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_4$1,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":n[2]||(n[2]=r=>isRef(e)?e.value=r:null),class:"w-20 sm:w-24 h-1 bg-slate-600 rounded appearance-none cursor-pointer accent-violet-500"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_5,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?withDirectives((openBlock(),createElementBlock("input",{key:3,id:t.property,"onUpdate:modelValue":n[3]||(n[3]=r=>isRef(e)?e.value=r:null),type:"number",class:"w-32 sm:w-36 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_6)),[[vModelText,unref(e)]]):withDirectives((openBlock(),createElementBlock("input",{key:4,id:t.property,"onUpdate:modelValue":n[4]||(n[4]=r=>isRef(e)?e.value=r:null),type:"text",class:"w-32 sm:w-36 px-2 py-1 text-xs text-center bg-slate-700/50 border border-slate-600 rounded text-white focus:border-violet-500 focus:outline-none"},null,8,_hoisted_7)),[[vModelText,unref(e)]])])}}}),_hoisted_1$2={class:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-xl p-4 lg:sticky lg:top-4"},_hoisted_2$2={class:"space-y-2"},_hoisted_3$1={class:"mt-3 pt-3 border-t border-slate-700/50"},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){return(e,s)=>{const n=_sfc_main$3,i=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$2,[s[1]||(s[1]=createBaseVNode("div",{class:"text-center pb-3 mb-3 border-b border-slate-700/50"},[createBaseVNode("div",{class:"flex items-center justify-center gap-2 mb-2"},[createBaseVNode("span",{"i-material-symbols-add-photo-alternate-rounded":"",class:"text-xl text-violet-400"}),createBaseVNode("span",{"i-material-symbols:picture-as-pdf":"",class:"text-xl text-cyan-400"})]),createBaseVNode("h1",{class:"text-base font-bold text-white"},"9M2PJU Watermark PDF"),createBaseVNode("p",{class:"text-xs text-gray-400"},"Add watermark to image/pdf")],-1)),createBaseVNode("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.config,(r,c)=>(openBlock(),createBlock(n,{key:c,property:c,value:r,"onUpdate:value":b=>e.$emit("update",c,b)},null,8,["property","value","onUpdate:value"]))),128))]),createBaseVNode("div",_hoisted_3$1,[s[0]||(s[0]=createBaseVNode("p",{class:"text-[10px] text-gray-500 text-center mb-2"}," Host on GitHub, your files will be safe ",-1)),createVNode(i)])])}}}),_hoisted_1$1={class:"max-w-6xl mx-auto"},_hoisted_2$1={class:"flex flex-col lg:flex-row lg:items-start gap-4"},_hoisted_3={class:"w-full lg:w-72 lg:flex-shrink-0"},_hoisted_4={class:"flex-1"},_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),s=e&&JSON.parse(e),n=reactive(i(s)||defaultConfig);function i(b){if(!b)return;const{rotate:f,startX:g,startY:o}=b;return{...b,rotate:Number(f),startX:Number(g),startY:Number(o)}}const r=["words","color","rotate","startX","startY"];function c(b,f){b==="saveConfig"?n[b]=!!f:r.includes(b)?n[b]=f:n[b]=+f,b==="saveConfig"&&f===!1?localStorage.setItem(WATERMWRK_KEY,""):n.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(n))}return(b,f)=>{const g=_sfc_main$2,o=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3,[createVNode(g,{config:unref(n),onUpdate:c},null,8,["config"])]),createBaseVNode("div",_hoisted_4,[createVNode(o,{config:unref(n)},null,8,["config"])])])])}}}),_hoisted_1={class:"min-h-screen bg-slate-900 text-gray-200 font-sans"},_hoisted_2={class:"relative z-10 p-3 sm:p-4 lg:p-6"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,s)=>(openBlock(),createElementBlock("main",_hoisted_1,[s[0]||(s[0]=createBaseVNode("div",{class:"fixed inset-0 bg-gradient-to-br from-slate-900 via-violet-950/30 to-slate-900 pointer-events-none"},null,-1)),createBaseVNode("div",_hoisted_2,[createVNode(_sfc_main$1)])]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
