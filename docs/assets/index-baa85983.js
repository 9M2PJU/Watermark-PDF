var en=Object.defineProperty;var sn=(t,e,n)=>e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>(sn(t,typeof e!="symbol"?e+"":e,n),n),je=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var r=(t,e,n)=>(je(t,e,"read from private field"),n?n.call(t):e.get(t)),G=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},gt=(t,e,n,s)=>(je(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);var be=(t,e,n,s)=>({set _(i){gt(t,e,i,n)},get _(){return r(t,e,s)}}),it=(t,e,n)=>(je(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction$1=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction$1(t))&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-\w/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,e=>e.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},def=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=isString(s)?parseStringStyle(s):normalizeStyle(s);if(i)for(const a in i)e[a]=i[a]}return e}else if(isString(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const s=n.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let n=0;n<t.length;n++){const s=normalizeClass(t[n]);s&&(e+=s+" ")}else if(isObject(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],a)=>(n[stringifySymbol(s,a)+" =>"]=i,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var n;return isSymbol(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),removeSub(s),removeDep(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,n=activeSub,s=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const i=t.fn(t._value);(e.version===0||hasChanged(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{activeSub=n,shouldTrack=s,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)removeSub(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=s)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)addSub(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,n){if(shouldTrack&&activeSub){let s=targetMap.get(t);s||targetMap.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new Dep),i.map=s,i.key=n),i.track()}}function trigger(t,e,n,s,i,a){const o=targetMap.get(t);if(!o){globalVersion++;return}const _=d=>{d&&d.trigger()};if(startBatch(),e==="clear")o.forEach(_);else{const d=isArray(t),g=d&&isIntegerKey(n);if(d&&n==="length"){const l=Number(s);o.forEach((w,R)=>{(R==="length"||R===ARRAY_ITERATE_KEY||!isSymbol(R)&&R>=l)&&_(w)})}else switch((n!==void 0||o.has(void 0))&&_(o.get(n)),g&&_(o.get(ARRAY_ITERATE_KEY)),e){case"add":d?g&&_(o.get("length")):(_(o.get(ITERATE_KEY)),isMap(t)&&_(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":d||(_(o.get(ITERATE_KEY)),isMap(t)&&_(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&_(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}function toWrapped(t,e){return isReadonly(t)?isReactive(t)?toReadonly(toReactive(e)):toReadonly(e):toReactive(e)}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,t=>toWrapped(this,t))},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toWrapped(this,t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,n=>n.map(s=>toWrapped(this,s)),arguments)},find(t,e){return apply(this,"find",t,e,n=>toWrapped(this,n),arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,n=>toWrapped(this,n),arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",t=>toWrapped(this,t))}};function iterator(t,e,n){const s=shallowReadArray(t),i=s[e]();return s!==t&&!isShallow(t)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=n(a.value)),a}),i}const arrayProto=Array.prototype;function apply(t,e,n,s,i,a){const o=shallowReadArray(t),_=o!==t&&!isShallow(t),d=o[e];if(d!==arrayProto[e]){const w=d.apply(t,a);return _?toReactive(w):w}let g=n;o!==t&&(_?g=function(w,R){return n.call(this,toWrapped(t,w),R,t)}:n.length>2&&(g=function(w,R){return n.call(this,w,R,t)}));const l=d.call(o,g,s);return _&&i?i(l):l}function reduce(t,e,n,s){const i=shallowReadArray(t);let a=n;return i!==t&&(isShallow(t)?n.length>3&&(a=function(o,_,d){return n.call(this,o,_,d,t)}):a=function(o,_,d){return n.call(this,o,toWrapped(t,_),d,t)}),i[e](a,...s)}function searchProxy(t,e,n){const s=toRaw(t);track(s,"iterate",ARRAY_ITERATE_KEY);const i=s[e](...n);return(i===-1||i===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),s[e](...n)):i}function noTracking(t,e,n=[]){pauseTracking(),startBatch();const s=toRaw(t)[e].apply(t,n);return endBatch(),resetTracking(),s}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return s===(i?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=isArray(e);if(!i){let d;if(o&&(d=arrayInstrumentations[n]))return d;if(n==="hasOwnProperty")return hasOwnProperty}const _=Reflect.get(e,n,isRef(e)?e:s);if((isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(i||track(e,"get",n),a))return _;if(isRef(_)){const d=o&&isIntegerKey(n)?_:_.value;return i&&isObject(d)?readonly(d):d}return isObject(_)?i?readonly(_):reactive(_):_}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,s,i){let a=e[n];const o=isArray(e)&&isIntegerKey(n);if(!this._isShallow){const g=isReadonly(a);if(!isShallow(s)&&!isReadonly(s)&&(a=toRaw(a),s=toRaw(s)),!o&&isRef(a)&&!isRef(s))return g||(a.value=s),!0}const _=o?Number(n)<e.length:hasOwn(e,n),d=Reflect.set(e,n,s,isRef(e)?e:i);return e===toRaw(i)&&(_?hasChanged(s,a)&&trigger(e,"set",n,s):trigger(e,"add",n,s)),d}deleteProperty(e,n){const s=hasOwn(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&trigger(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),s}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,n){return function(...s){const i=this.__v_raw,a=toRaw(i),o=isMap(a),_=t==="entries"||t===Symbol.iterator&&o,d=t==="keys"&&o,g=i[t](...s),l=n?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:w,done:R}=g.next();return R?{value:w,done:R}:{value:_?[l(w[0]),l(w[1])]:l(w),done:R}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const n={get(i){const a=this.__v_raw,o=toRaw(a),_=toRaw(i);t||(hasChanged(i,_)&&track(o,"get",i),track(o,"get",_));const{has:d}=getProto(o),g=e?toShallow:t?toReadonly:toReactive;if(d.call(o,i))return g(a.get(i));if(d.call(o,_))return g(a.get(_));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!t&&track(toRaw(i),"iterate",ITERATE_KEY),i.size},has(i){const a=this.__v_raw,o=toRaw(a),_=toRaw(i);return t||(hasChanged(i,_)&&track(o,"has",i),track(o,"has",_)),i===_?a.has(i):a.has(i)||a.has(_)},forEach(i,a){const o=this,_=o.__v_raw,d=toRaw(_),g=e?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",ITERATE_KEY),_.forEach((l,w)=>i.call(a,g(l),g(w),o))}};return extend(n,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!e&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const a=toRaw(this);return getProto(a).has.call(a,i)||(a.add(i),trigger(a,"add",i,i)),this},set(i,a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const o=toRaw(this),{has:_,get:d}=getProto(o);let g=_.call(o,i);g||(i=toRaw(i),g=_.call(o,i));const l=d.call(o,i);return o.set(i,a),g?hasChanged(a,l)&&trigger(o,"set",i,a):trigger(o,"add",i,a),this},delete(i){const a=toRaw(this),{has:o,get:_}=getProto(a);let d=o.call(a,i);d||(i=toRaw(i),d=o.call(a,i)),_&&_.call(a,i);const g=a.delete(i);return d&&trigger(a,"delete",i,void 0),g},clear(){const i=toRaw(this),a=i.size!==0,o=i.clear();return a&&trigger(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=createIterableMethod(i,t,e)}),n}function createInstrumentationGetter(t,e){const n=createInstrumentations(t,e);return(s,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(hasOwn(n,i)&&i in s?n:s,i,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,n,s,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=getTargetType(t);if(a===0)return t;const o=i.get(t);if(o)return o;const _=new Proxy(t,a===2?s:n);return i.set(t,_),_}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=s?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>e==="__v_raw"?t:unref(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return isRef(i)&&!isRef(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,n=!1){let s,i;return isFunction$1(t)?s=t:(s=t.get,i=t.set),new ComputedRefImpl(s,i,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,n=activeWatcher){if(n){let s=cleanupMap.get(n);s||cleanupMap.set(n,s=[]),s.push(t)}}function watch$1(t,e,n=EMPTY_OBJ){const{immediate:s,deep:i,once:a,scheduler:o,augmentJob:_,call:d}=n,g=C=>i?C:isShallow(C)||i===!1||i===0?traverse(C,1):traverse(C);let l,w,R,x,k=!1,T=!1;if(isRef(t)?(w=()=>t.value,k=isShallow(t)):isReactive(t)?(w=()=>g(t),k=!0):isArray(t)?(T=!0,k=t.some(C=>isReactive(C)||isShallow(C)),w=()=>t.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return g(C);if(isFunction$1(C))return d?d(C,2):C()})):isFunction$1(t)?e?w=d?()=>d(t,2):t:w=()=>{if(R){pauseTracking();try{R()}finally{resetTracking()}}const C=activeWatcher;activeWatcher=l;try{return d?d(t,3,[x]):t(x)}finally{activeWatcher=C}}:w=NOOP,e&&i){const C=w,m=i===!0?1/0:i;w=()=>traverse(C(),m)}const S=getCurrentScope(),P=()=>{l.stop(),S&&S.active&&remove(S.effects,l)};if(a&&e){const C=e;e=(...m)=>{C(...m),P()}}let I=T?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const M=C=>{if(!(!(l.flags&1)||!l.dirty&&!C))if(e){const m=l.run();if(i||k||(T?m.some((A,H)=>hasChanged(A,I[H])):hasChanged(m,I))){R&&R();const A=activeWatcher;activeWatcher=l;try{const H=[m,I===INITIAL_WATCHER_VALUE?void 0:T&&I[0]===INITIAL_WATCHER_VALUE?[]:I,x];I=m,d?d(e,3,H):e(...H)}finally{activeWatcher=A}}}else l.run()};return _&&_(M),l=new ReactiveEffect(w),l.scheduler=o?()=>o(M,!1):M,x=C=>onWatcherCleanup(C,!1,l),R=l.onStop=()=>{const C=cleanupMap.get(l);if(C){if(d)d(C,4);else for(const m of C)m();cleanupMap.delete(l)}},e?s?M(!0):I=l.run():o?o(M.bind(null,!0),!0):l.run(),P.pause=l.pause.bind(l),P.resume=l.resume.bind(l),P.stop=P,P}function traverse(t,e=1/0,n){if(e<=0||!isObject(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,isRef(t))traverse(t.value,e,n);else if(isArray(t))for(let s=0;s<t.length;s++)traverse(t[s],e,n);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e,n)});else if(isPlainObject(t)){for(const s in t)traverse(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&traverse(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,s=n&&n.appContext.config.warnHandler,i=getComponentTrace();if(s)callWithErrorHandling(s,n,11,[t+e.map(a=>{var o,_;return(_=(o=a.toString)==null?void 0:o.call(a))!=null?_:JSON.stringify(a)}).join(""),n&&n.proxy,i.map(({vnode:a})=>`at <${formatComponentName(n,a.type)}>`).join(`
`),i]);else{const a=[`[Vue warn]: ${t}`,...e];i.length&&a.push(`
`,...formatTrace(i)),console.warn(...a)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const s=t.component&&t.component.parent;t=s&&s.vnode}return e}function formatTrace(t){const e=[];return t.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=t.component?t.component.parent==null:!1,i=` at <${formatComponentName(t.component,t.type,s)}`,a=">"+n;return t.props?[i,...formatProps(t.props),a]:[i+a]}function formatProps(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(s=>{e.push(...formatProp(s,t[s]))}),n.length>3&&e.push(" ..."),e}function formatProp(t,e,n){return isString(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):isFunction$1(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${t}=`,e])}function callWithErrorHandling(t,e,n,s){try{return s?t(...s):t()}catch(i){handleError(i,e,n)}}function callWithAsyncErrorHandling(t,e,n,s){if(isFunction$1(t)){const i=callWithErrorHandling(t,e,n,s);return i&&isPromise(i)&&i.catch(a=>{handleError(a,e,n)}),i}if(isArray(t)){const i=[];for(let a=0;a<t.length;a++)i.push(callWithAsyncErrorHandling(t[a],e,n,s));return i}}function handleError(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||EMPTY_OBJ;if(e){let _=e.parent;const d=e.proxy,g=`https://vuejs.org/error-reference/#runtime-${n}`;for(;_;){const l=_.ec;if(l){for(let w=0;w<l.length;w++)if(l[w](t,d,g)===!1)return}_=_.parent}if(a){pauseTracking(),callWithErrorHandling(a,null,10,[t,d,g]),resetTracking();return}}logError(t,n,i,s,o)}function logError(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const s=e+n>>>1,i=queue[s],a=getId(i);a<t||a===t&&i.flags&2?e=s+1:n=s}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),n=queue[queue.length-1];!n||!(t.flags&2)&&e>=getId(n)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,n=flushIndex+1){for(;n<queue.length;n++){const s=queue[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;queue.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,s)=>getId(n)-getId(s));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),callWithErrorHandling(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&(n.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(e);let o;try{o=t(...i)}finally{setCurrentRenderingInstance(a),s._d&&setBlockTracking(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const n=getComponentPublicInstance(currentRenderingInstance),s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[a,o,_,d=EMPTY_OBJ]=e[i];a&&(isFunction$1(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(o),s.push({dir:a,instance:n,value:o,oldValue:void 0,arg:_,modifiers:d}))}return t}function invokeDirectiveHook(t,e,n,s){const i=t.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const _=i[o];a&&(_.oldValue=a[o].value);let d=_.dir[s];d&&(pauseTracking(),callWithAsyncErrorHandling(d,n,8,[t.el,_,t,e]),resetTracking())}}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===n&&(n=currentInstance.provides=Object.create(s)),n[t]=e}}function inject(t,e,n=!1){const s=getCurrentInstance();if(s||currentApp){let i=currentApp?currentApp._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&isFunction$1(e)?e.call(s&&s.proxy):e}}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,n=EMPTY_OBJ){const{immediate:s,deep:i,flush:a,once:o}=n,_=extend({},n),d=e&&s||!e&&a!=="post";let g;if(isInSSRComponentSetup){if(a==="sync"){const x=useSSRContext();g=x.__watcherHandles||(x.__watcherHandles=[])}else if(!d){const x=()=>{};return x.stop=NOOP,x.resume=NOOP,x.pause=NOOP,x}}const l=currentInstance;_.call=(x,k,T)=>callWithAsyncErrorHandling(x,l,k,T);let w=!1;a==="post"?_.scheduler=x=>{queuePostRenderEffect(x,l&&l.suspense)}:a!=="sync"&&(w=!0,_.scheduler=(x,k)=>{k?x():queueJob(x)}),_.augmentJob=x=>{e&&(x.flags|=4),w&&(x.flags|=2,l&&(x.id=l.uid,x.i=l))};const R=watch$1(t,e,_);return isInSSRComponentSetup&&(g?g.push(R):d&&R()),R}function instanceWatch(t,e,n){const s=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(s,t):()=>s[t]:t.bind(s,s);let a;isFunction$1(e)?a=e:(a=e.handler,n=e);const o=setCurrentInstance(this),_=doWatch(i,a.bind(s),n);return o(),_}function createPathGetter(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTeleportDeferred=t=>t&&(t.defer||t.defer===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,isTargetMathML=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,resolveTarget=(t,e)=>{const n=t&&t.to;return isString(n)?e?e(n):null:n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(t,e,n,s,i,a,o,_,d,g){const{mc:l,pc:w,pbc:R,o:{insert:x,querySelector:k,createText:T,createComment:S}}=g,P=isTeleportDisabled(e.props);let{shapeFlag:I,children:M,dynamicChildren:C}=e;if(t==null){const m=e.el=T(""),A=e.anchor=T("");x(m,n,s),x(A,n,s);const H=(b,B)=>{I&16&&l(M,b,B,i,a,o,_,d)},F=()=>{const b=e.target=resolveTarget(e.props,k),B=prepareAnchor(b,e,T,x);b&&(o!=="svg"&&isTargetSVG(b)?o="svg":o!=="mathml"&&isTargetMathML(b)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(b),P||(H(b,B),updateCssVars(e,!1)))};P&&(H(n,A),updateCssVars(e,!0)),isTeleportDeferred(e.props)?(e.el.__isMounted=!1,queuePostRenderEffect(()=>{F(),delete e.el.__isMounted},a)):F()}else{if(isTeleportDeferred(e.props)&&t.el.__isMounted===!1){queuePostRenderEffect(()=>{TeleportImpl.process(t,e,n,s,i,a,o,_,d,g)},a);return}e.el=t.el,e.targetStart=t.targetStart;const m=e.anchor=t.anchor,A=e.target=t.target,H=e.targetAnchor=t.targetAnchor,F=isTeleportDisabled(t.props),b=F?n:A,B=F?m:H;if(o==="svg"||isTargetSVG(A)?o="svg":(o==="mathml"||isTargetMathML(A))&&(o="mathml"),C?(R(t.dynamicChildren,C,b,i,a,o,_),traverseStaticChildren(t,e,!0)):d||w(t,e,b,B,i,a,o,_,!1),P)F?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):moveTeleport(e,n,m,g,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const O=e.target=resolveTarget(e.props,k);O&&moveTeleport(e,O,null,g,0)}else F&&moveTeleport(e,A,H,g,1);updateCssVars(e,P)}},remove(t,e,n,{um:s,o:{remove:i}},a){const{shapeFlag:o,children:_,anchor:d,targetStart:g,targetAnchor:l,target:w,props:R}=t;if(w&&(i(g),i(l)),a&&i(d),o&16){const x=a||!isTeleportDisabled(R);for(let k=0;k<_.length;k++){const T=_[k];s(T,e,n,x,!!T.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,e,n,{o:{insert:s},m:i},a=2){a===0&&s(t.targetAnchor,e,n);const{el:o,anchor:_,shapeFlag:d,children:g,props:l}=t,w=a===2;if(w&&s(o,e,n),(!w||isTeleportDisabled(l))&&d&16)for(let R=0;R<g.length;R++)i(g[R],e,n,2);w&&s(_,e,n)}function hydrateTeleport(t,e,n,s,i,a,{o:{nextSibling:o,parentNode:_,querySelector:d,insert:g,createText:l}},w){function R(T,S,P,I){S.anchor=w(o(T),S,_(T),n,s,i,a),S.targetStart=P,S.targetAnchor=I}const x=e.target=resolveTarget(e.props,d),k=isTeleportDisabled(e.props);if(x){const T=x._lpa||x.firstChild;if(e.shapeFlag&16)if(k)R(t,e,T,T&&o(T));else{e.anchor=o(t);let S=T;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,x._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||prepareAnchor(x,e,l,g),w(T&&o(T),e,x,n,s,i,a)}updateCssVars(e,k)}else k&&e.shapeFlag&16&&R(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(t,e){const n=t.ctx;if(n&&n.ut){let s,i;for(e?(s=t.el,i=t.anchor):(s=t.targetStart,i=t.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function prepareAnchor(t,e,n,s){const i=e.targetStart=n(""),a=e.targetAnchor=n("");return i[TeleportEndKey]=a,t&&(s(i,t),s(a,t)),a}const leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function defineComponent(t,e){return isFunction$1(t)?(()=>extend({name:t.name},e,{setup:t}))():t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(t,e,n,s,i=!1){if(isArray(t)){t.forEach((k,T)=>setRef(k,e&&(isArray(e)?e[T]:e),n,s,i));return}if(isAsyncWrapper(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&setRef(t,e,n,s.component.subTree);return}const a=s.shapeFlag&4?getComponentPublicInstance(s.component):s.el,o=i?null:a,{i:_,r:d}=t,g=e&&e.r,l=_.refs===EMPTY_OBJ?_.refs={}:_.refs,w=_.setupState,R=toRaw(w),x=w===EMPTY_OBJ?NO:k=>hasOwn(R,k);if(g!=null&&g!==d){if(invalidatePendingSetRef(e),isString(g))l[g]=null,x(g)&&(w[g]=null);else if(isRef(g)){g.value=null;const k=e;k.k&&(l[k.k]=null)}}if(isFunction$1(d))callWithErrorHandling(d,_,12,[o,l]);else{const k=isString(d),T=isRef(d);if(k||T){const S=()=>{if(t.f){const P=k?x(d)?w[d]:l[d]:d.value;if(i)isArray(P)&&remove(P,a);else if(isArray(P))P.includes(a)||P.push(a);else if(k)l[d]=[a],x(d)&&(w[d]=l[d]);else{const I=[a];d.value=I,t.k&&(l[t.k]=I)}}else k?(l[d]=o,x(d)&&(w[d]=o)):T&&(d.value=o,t.k&&(l[t.k]=o))};if(o){const P=()=>{S(),pendingSetRefMap.delete(t)};P.id=-1,pendingSetRefMap.set(t,P),queuePostRenderEffect(P,n)}else invalidatePendingSetRef(t),S()}}}function invalidatePendingSetRef(t){const e=pendingSetRefMap.get(t);e&&(e.flags|=8,pendingSetRefMap.delete(t))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,s,n),n){let i=n.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(s,e,n,i),i=i.parent}}function injectToKeepAliveRoot(t,e,n,s){const i=injectHook(e,t,s,!0);onUnmounted(()=>{remove(s[e],i)},n)}function injectHook(t,e,n=currentInstance,s=!1){if(n){const i=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...o)=>{pauseTracking();const _=setCurrentInstance(n),d=callWithAsyncErrorHandling(e,n,t,o);return _(),resetTracking(),d});return s?i.unshift(a):i.push(a),a}}const createHook=t=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...s)=>e(...s),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,n,s){let i;const a=n&&n[s],o=isArray(t);if(o||isString(t)){const _=o&&isReactive(t);let d=!1,g=!1;_&&(d=!isShallow(t),g=isReadonly(t),t=shallowReadArray(t)),i=new Array(t.length);for(let l=0,w=t.length;l<w;l++)i[l]=e(d?g?toReadonly(toReactive(t[l])):toReactive(t[l]):t[l],l,void 0,a&&a[l])}else if(typeof t=="number"){i=new Array(t);for(let _=0;_<t;_++)i[_]=e(_+1,_,void 0,a&&a[_])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(_,d)=>e(_,d,void 0,a&&a[d]));else{const _=Object.keys(t);i=new Array(_.length);for(let d=0,g=_.length;d<g;d++){const l=_[d];i[d]=e(t[l],l,d,a&&a[d])}}else i=[];return n&&(n[s]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:a,accessCache:o,type:_,appContext:d}=t;if(e[0]!=="$"){const R=o[e];if(R!==void 0)switch(R){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return a[e]}else{if(hasSetupBinding(s,e))return o[e]=1,s[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return o[e]=2,i[e];if(hasOwn(a,e))return o[e]=3,a[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];shouldCacheAccess&&(o[e]=0)}}const g=publicPropertiesMap[e];let l,w;if(g)return e==="$attrs"&&track(t.attrs,"get",""),g(t);if((l=_.__cssModules)&&(l=l[e]))return l;if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];if(w=d.config.globalProperties,hasOwn(w,e))return w[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:a}=t;return hasSetupBinding(i,e)?(i[e]=n,!0):s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,props:a,type:o}},_){let d;return!!(n[_]||t!==EMPTY_OBJ&&_[0]!=="$"&&hasOwn(t,_)||hasSetupBinding(e,_)||hasOwn(a,_)||hasOwn(s,_)||hasOwn(publicPropertiesMap,_)||hasOwn(i.config.globalProperties,_)||(d=o.__cssModules)&&d[_])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,s=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:o,watch:_,provide:d,inject:g,created:l,beforeMount:w,mounted:R,beforeUpdate:x,updated:k,activated:T,deactivated:S,beforeDestroy:P,beforeUnmount:I,destroyed:M,unmounted:C,render:m,renderTracked:A,renderTriggered:H,errorCaptured:F,serverPrefetch:b,expose:B,inheritAttrs:O,components:Q,directives:nt,filters:U}=e;if(g&&resolveInjections(g,s,null),o)for(const mt in o){const X=o[mt];isFunction$1(X)&&(s[mt]=X.bind(n))}if(i){const mt=i.call(n,n);isObject(mt)&&(t.data=reactive(mt))}if(shouldCacheAccess=!0,a)for(const mt in a){const X=a[mt],yt=isFunction$1(X)?X.bind(n,n):isFunction$1(X.get)?X.get.bind(n,n):NOOP,wt=!isFunction$1(X)&&isFunction$1(X.set)?X.set.bind(n):NOOP,Rt=computed({get:yt,set:wt});Object.defineProperty(s,mt,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:kt=>Rt.value=kt})}if(_)for(const mt in _)createWatcher(_[mt],s,n,mt);if(d){const mt=isFunction$1(d)?d.call(n):d;Reflect.ownKeys(mt).forEach(X=>{provide(X,mt[X])})}l&&callHook(l,t,"c");function pt(mt,X){isArray(X)?X.forEach(yt=>mt(yt.bind(n))):X&&mt(X.bind(n))}if(pt(onBeforeMount,w),pt(onMounted,R),pt(onBeforeUpdate,x),pt(onUpdated,k),pt(onActivated,T),pt(onDeactivated,S),pt(onErrorCaptured,F),pt(onRenderTracked,A),pt(onRenderTriggered,H),pt(onBeforeUnmount,I),pt(onUnmounted,C),pt(onServerPrefetch,b),isArray(B))if(B.length){const mt=t.exposed||(t.exposed={});B.forEach(X=>{Object.defineProperty(mt,X,{get:()=>n[X],set:yt=>n[X]=yt,enumerable:!0})})}else t.exposed||(t.exposed={});m&&t.render===NOOP&&(t.render=m),O!=null&&(t.inheritAttrs=O),Q&&(t.components=Q),nt&&(t.directives=nt),b&&markAsyncBoundary(t)}function resolveInjections(t,e,n=NOOP){isArray(t)&&(t=normalizeInject(t));for(const s in t){const i=t[s];let a;isObject(i)?"default"in i?a=inject(i.from||s,i.default,!0):a=inject(i.from||s):a=inject(i),isRef(a)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[s]=a}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,s){let i=s.includes(".")?createPathGetter(n,s):()=>n[s];if(isString(t)){const a=e[t];isFunction$1(a)&&watch(i,a)}else if(isFunction$1(t))watch(i,t.bind(n));else if(isObject(t))if(isArray(t))t.forEach(a=>createWatcher(a,e,n,s));else{const a=isFunction$1(t.handler)?t.handler.bind(n):e[t.handler];isFunction$1(a)&&watch(i,a,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=t.appContext,_=a.get(e);let d;return _?d=_:!i.length&&!n&&!s?d=e:(d={},i.length&&i.forEach(g=>mergeOptions(d,g,o,!0)),mergeOptions(d,e,o)),isObject(e)&&a.set(e,d),d}function mergeOptions(t,e,n,s=!1){const{mixins:i,extends:a}=e;a&&mergeOptions(t,a,n,!0),i&&i.forEach(o=>mergeOptions(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const _=internalOptionMergeStrats[o]||n&&n[o];t[o]=_?_(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const s in e)n[s]=mergeAsArray(t[s],e[s]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(s,i=null){isFunction$1(s)||(s=extend({},s)),i!=null&&!isObject(i)&&(i=null);const a=createAppContext(),o=new WeakSet,_=[];let d=!1;const g=a.app={_uid:uid$1++,_component:s,_props:i,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(l){},use(l,...w){return o.has(l)||(l&&isFunction$1(l.install)?(o.add(l),l.install(g,...w)):isFunction$1(l)&&(o.add(l),l(g,...w))),g},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),g},component(l,w){return w?(a.components[l]=w,g):a.components[l]},directive(l,w){return w?(a.directives[l]=w,g):a.directives[l]},mount(l,w,R){if(!d){const x=g._ceVNode||createVNode(s,i);return x.appContext=a,R===!0?R="svg":R===!1&&(R=void 0),w&&e?e(x,l):t(x,l,R),d=!0,g._container=l,l.__vue_app__=g,getComponentPublicInstance(x.component)}},onUnmount(l){_.push(l)},unmount(){d&&(callWithAsyncErrorHandling(_,g._instance,16),t(null,g._container),delete g._container.__vue_app__)},provide(l,w){return a.provides[l]=w,g},runWithContext(l){const w=currentApp;currentApp=g;try{return l()}finally{currentApp=w}}};return g}}let currentApp=null;const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||EMPTY_OBJ;let i=n;const a=e.startsWith("update:"),o=a&&getModelModifiers(s,e.slice(7));o&&(o.trim&&(i=n.map(l=>isString(l)?l.trim():l)),o.number&&(i=n.map(looseToNumber)));let _,d=s[_=toHandlerKey(e)]||s[_=toHandlerKey(camelize(e))];!d&&a&&(d=s[_=toHandlerKey(hyphenate(e))]),d&&callWithAsyncErrorHandling(d,t,6,i);const g=s[_+"Once"];if(g){if(!t.emitted)t.emitted={};else if(t.emitted[_])return;t.emitted[_]=!0,callWithAsyncErrorHandling(g,t,6,i)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(t,e,n=!1){const s=n?mixinEmitsCache:e.emitsCache,i=s.get(t);if(i!==void 0)return i;const a=t.emits;let o={},_=!1;if(!isFunction$1(t)){const d=g=>{const l=normalizeEmitsOptions(g,e,!0);l&&(_=!0,extend(o,l))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!a&&!_?(isObject(t)&&s.set(t,null),null):(isArray(a)?a.forEach(d=>o[d]=null):extend(o,a),isObject(t)&&s.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[a],slots:o,attrs:_,emit:d,render:g,renderCache:l,props:w,data:R,setupState:x,ctx:k,inheritAttrs:T}=t,S=setCurrentRenderingInstance(t);let P,I;try{if(n.shapeFlag&4){const C=i||s,m=C;P=normalizeVNode(g.call(m,C,l,w,x,R,k)),I=_}else{const C=e;P=normalizeVNode(C.length>1?C(w,{attrs:_,slots:o,emit:d}):C(w,null)),I=e.props?_:getFunctionalFallthrough(_)}}catch(C){blockStack.length=0,handleError(C,t,1),P=createVNode(Comment)}let M=P;if(I&&T!==!1){const C=Object.keys(I),{shapeFlag:m}=M;C.length&&m&7&&(a&&C.some(isModelListener)&&(I=filterModelListeners(I,a)),M=cloneVNode(M,I,!1,!0))}return n.dirs&&(M=cloneVNode(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(M,n.transition),P=M,setCurrentRenderingInstance(S),P}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const s in t)(!isModelListener(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function shouldUpdateComponent(t,e,n){const{props:s,children:i,component:a}=t,{props:o,children:_,patchFlag:d}=e,g=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return s?hasPropsChanged(s,o,g):!!o;if(d&8){const l=e.dynamicProps;for(let w=0;w<l.length;w++){const R=l[w];if(o[R]!==s[R]&&!isEmitListener(g,R))return!0}}}else return(i||_)&&(!_||!_.$stable)?!0:s===o?!1:s?o?hasPropsChanged(s,o,g):!0:!!o;return!1}function hasPropsChanged(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const a=s[i];if(e[a]!==t[a]&&!isEmitListener(n,a))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,n,s=!1){const i={},a=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,i,a);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:shallowReactive(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function updateProps(t,e,n,s){const{props:i,attrs:a,vnode:{patchFlag:o}}=t,_=toRaw(i),[d]=t.propsOptions;let g=!1;if((s||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let w=0;w<l.length;w++){let R=l[w];if(isEmitListener(t.emitsOptions,R))continue;const x=e[R];if(d)if(hasOwn(a,R))x!==a[R]&&(a[R]=x,g=!0);else{const k=camelize(R);i[k]=resolvePropValue(d,_,k,x,t,!1)}else x!==a[R]&&(a[R]=x,g=!0)}}}else{setFullProps(t,e,i,a)&&(g=!0);let l;for(const w in _)(!e||!hasOwn(e,w)&&((l=hyphenate(w))===w||!hasOwn(e,l)))&&(d?n&&(n[w]!==void 0||n[l]!==void 0)&&(i[w]=resolvePropValue(d,_,w,void 0,t,!0)):delete i[w]);if(a!==_)for(const w in a)(!e||!hasOwn(e,w))&&(delete a[w],g=!0)}g&&trigger(t.attrs,"set","")}function setFullProps(t,e,n,s){const[i,a]=t.propsOptions;let o=!1,_;if(e)for(let d in e){if(isReservedProp(d))continue;const g=e[d];let l;i&&hasOwn(i,l=camelize(d))?!a||!a.includes(l)?n[l]=g:(_||(_={}))[l]=g:isEmitListener(t.emitsOptions,d)||(!(d in s)||g!==s[d])&&(s[d]=g,o=!0)}if(a){const d=toRaw(n),g=_||EMPTY_OBJ;for(let l=0;l<a.length;l++){const w=a[l];n[w]=resolvePropValue(i,d,w,g[w],t,!hasOwn(g,w))}}return o}function resolvePropValue(t,e,n,s,i,a){const o=t[n];if(o!=null){const _=hasOwn(o,"default");if(_&&s===void 0){const d=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction$1(d)){const{propsDefaults:g}=i;if(n in g)s=g[n];else{const l=setCurrentInstance(i);s=g[n]=d.call(null,e),l()}}else s=d;i.ce&&i.ce._setProp(n,s)}o[0]&&(a&&!_?s=!1:o[1]&&(s===""||s===hyphenate(n))&&(s=!0))}return s}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,n=!1){const s=n?mixinPropsCache:e.propsCache,i=s.get(t);if(i)return i;const a=t.props,o={},_=[];let d=!1;if(!isFunction$1(t)){const l=w=>{d=!0;const[R,x]=normalizePropsOptions(w,e,!0);extend(o,R),x&&_.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!a&&!d)return isObject(t)&&s.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let l=0;l<a.length;l++){const w=camelize(a[l]);validatePropName(w)&&(o[w]=EMPTY_OBJ)}else if(a)for(const l in a){const w=camelize(l);if(validatePropName(w)){const R=a[l],x=o[w]=isArray(R)||isFunction$1(R)?{type:R}:extend({},R),k=x.type;let T=!1,S=!0;if(isArray(k))for(let P=0;P<k.length;++P){const I=k[P],M=isFunction$1(I)&&I.name;if(M==="Boolean"){T=!0;break}else M==="String"&&(S=!1)}else T=isFunction$1(k)&&k.name==="Boolean";x[0]=T,x[1]=S,(T||hasOwn(x,"default"))&&_.push(w)}}const g=[o,_];return isObject(t)&&s.set(t,g),g}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,n)=>{if(e._n)return e;const s=withCtx((...i)=>normalizeSlotValue(e(...i)),n);return s._c=!1,s},normalizeObjectSlots=(t,e,n)=>{const s=t._ctx;for(const i in t){if(isInternalKey(i))continue;const a=t[i];if(isFunction$1(a))e[i]=normalizeSlot(i,a,s);else if(a!=null){const o=normalizeSlotValue(a);e[i]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},assignSlots=(t,e,n)=>{for(const s in e)(n||!isInternalKey(s))&&(t[s]=e[s])},initSlots=(t,e,n)=>{const s=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const i=e._;i?(assignSlots(s,e,n),n&&def(s,"_",i,!0)):normalizeObjectSlots(e,s)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,n)=>{const{vnode:s,slots:i}=t;let a=!0,o=EMPTY_OBJ;if(s.shapeFlag&32){const _=e._;_?n&&_===1?a=!1:assignSlots(i,e,n):(a=!e.$stable,normalizeObjectSlots(e,i)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(a)for(const _ in i)!isInternalKey(_)&&o[_]==null&&delete i[_]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:s,remove:i,patchProp:a,createElement:o,createText:_,createComment:d,setText:g,setElementText:l,parentNode:w,nextSibling:R,setScopeId:x=NOOP,insertStaticContent:k}=t,T=(v,D,W,rt=null,K=null,ut=null,St=void 0,ft=null,_t=!!D.dynamicChildren)=>{if(v===D)return;v&&!isSameVNodeType(v,D)&&(rt=y(v),kt(v,K,ut,!0),v=null),D.patchFlag===-2&&(_t=!1,D.dynamicChildren=null);const{type:Z,ref:J,shapeFlag:q}=D;switch(Z){case Text:S(v,D,W,rt);break;case Comment:P(v,D,W,rt);break;case Static:v==null&&I(D,W,rt,St);break;case Fragment:Q(v,D,W,rt,K,ut,St,ft,_t);break;default:q&1?m(v,D,W,rt,K,ut,St,ft,_t):q&6?nt(v,D,W,rt,K,ut,St,ft,_t):(q&64||q&128)&&Z.process(v,D,W,rt,K,ut,St,ft,_t,V)}J!=null&&K?setRef(J,v&&v.ref,ut,D||v,!D):J==null&&v&&v.ref!=null&&setRef(v.ref,null,ut,v,!0)},S=(v,D,W,rt)=>{if(v==null)s(D.el=_(D.children),W,rt);else{const K=D.el=v.el;D.children!==v.children&&g(K,D.children)}},P=(v,D,W,rt)=>{v==null?s(D.el=d(D.children||""),W,rt):D.el=v.el},I=(v,D,W,rt)=>{[v.el,v.anchor]=k(v.children,D,W,rt,v.el,v.anchor)},M=({el:v,anchor:D},W,rt)=>{let K;for(;v&&v!==D;)K=R(v),s(v,W,rt),v=K;s(D,W,rt)},C=({el:v,anchor:D})=>{let W;for(;v&&v!==D;)W=R(v),i(v),v=W;i(D)},m=(v,D,W,rt,K,ut,St,ft,_t)=>{if(D.type==="svg"?St="svg":D.type==="math"&&(St="mathml"),v==null)A(D,W,rt,K,ut,St,ft,_t);else{const Z=v.el&&v.el._isVueCE?v.el:null;try{Z&&Z._beginPatch(),b(v,D,K,ut,St,ft,_t)}finally{Z&&Z._endPatch()}}},A=(v,D,W,rt,K,ut,St,ft)=>{let _t,Z;const{props:J,shapeFlag:q,transition:ct,dirs:vt}=v;if(_t=v.el=o(v.type,ut,J&&J.is,J),q&8?l(_t,v.children):q&16&&F(v.children,_t,null,rt,K,resolveChildrenNamespace(v,ut),St,ft),vt&&invokeDirectiveHook(v,null,rt,"created"),H(_t,v,v.scopeId,St,rt),J){for(const Dt in J)Dt!=="value"&&!isReservedProp(Dt)&&a(_t,Dt,null,J[Dt],ut,rt);"value"in J&&a(_t,"value",null,J.value,ut),(Z=J.onVnodeBeforeMount)&&invokeVNodeHook(Z,rt,v)}vt&&invokeDirectiveHook(v,null,rt,"beforeMount");const Et=needTransition(K,ct);Et&&ct.beforeEnter(_t),s(_t,D,W),((Z=J&&J.onVnodeMounted)||Et||vt)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,rt,v),Et&&ct.enter(_t),vt&&invokeDirectiveHook(v,null,rt,"mounted")},K)},H=(v,D,W,rt,K)=>{if(W&&x(v,W),rt)for(let ut=0;ut<rt.length;ut++)x(v,rt[ut]);if(K){let ut=K.subTree;if(D===ut||isSuspense(ut.type)&&(ut.ssContent===D||ut.ssFallback===D)){const St=K.vnode;H(v,St,St.scopeId,St.slotScopeIds,K.parent)}}},F=(v,D,W,rt,K,ut,St,ft,_t=0)=>{for(let Z=_t;Z<v.length;Z++){const J=v[Z]=ft?cloneIfMounted(v[Z]):normalizeVNode(v[Z]);T(null,J,D,W,rt,K,ut,St,ft)}},b=(v,D,W,rt,K,ut,St)=>{const ft=D.el=v.el;let{patchFlag:_t,dynamicChildren:Z,dirs:J}=D;_t|=v.patchFlag&16;const q=v.props||EMPTY_OBJ,ct=D.props||EMPTY_OBJ;let vt;if(W&&toggleRecurse(W,!1),(vt=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(vt,W,D,v),J&&invokeDirectiveHook(D,v,W,"beforeUpdate"),W&&toggleRecurse(W,!0),(q.innerHTML&&ct.innerHTML==null||q.textContent&&ct.textContent==null)&&l(ft,""),Z?B(v.dynamicChildren,Z,ft,W,rt,resolveChildrenNamespace(D,K),ut):St||X(v,D,ft,null,W,rt,resolveChildrenNamespace(D,K),ut,!1),_t>0){if(_t&16)O(ft,q,ct,W,K);else if(_t&2&&q.class!==ct.class&&a(ft,"class",null,ct.class,K),_t&4&&a(ft,"style",q.style,ct.style,K),_t&8){const Et=D.dynamicProps;for(let Dt=0;Dt<Et.length;Dt++){const Lt=Et[Dt],jt=q[Lt],$t=ct[Lt];($t!==jt||Lt==="value")&&a(ft,Lt,jt,$t,K,W)}}_t&1&&v.children!==D.children&&l(ft,D.children)}else!St&&Z==null&&O(ft,q,ct,W,K);((vt=ct.onVnodeUpdated)||J)&&queuePostRenderEffect(()=>{vt&&invokeVNodeHook(vt,W,D,v),J&&invokeDirectiveHook(D,v,W,"updated")},rt)},B=(v,D,W,rt,K,ut,St)=>{for(let ft=0;ft<D.length;ft++){const _t=v[ft],Z=D[ft],J=_t.el&&(_t.type===Fragment||!isSameVNodeType(_t,Z)||_t.shapeFlag&198)?w(_t.el):W;T(_t,Z,J,null,rt,K,ut,St,!0)}},O=(v,D,W,rt,K)=>{if(D!==W){if(D!==EMPTY_OBJ)for(const ut in D)!isReservedProp(ut)&&!(ut in W)&&a(v,ut,D[ut],null,K,rt);for(const ut in W){if(isReservedProp(ut))continue;const St=W[ut],ft=D[ut];St!==ft&&ut!=="value"&&a(v,ut,ft,St,K,rt)}"value"in W&&a(v,"value",D.value,W.value,K)}},Q=(v,D,W,rt,K,ut,St,ft,_t)=>{const Z=D.el=v?v.el:_(""),J=D.anchor=v?v.anchor:_("");let{patchFlag:q,dynamicChildren:ct,slotScopeIds:vt}=D;vt&&(ft=ft?ft.concat(vt):vt),v==null?(s(Z,W,rt),s(J,W,rt),F(D.children||[],W,J,K,ut,St,ft,_t)):q>0&&q&64&&ct&&v.dynamicChildren&&v.dynamicChildren.length===ct.length?(B(v.dynamicChildren,ct,W,K,ut,St,ft),(D.key!=null||K&&D===K.subTree)&&traverseStaticChildren(v,D,!0)):X(v,D,W,J,K,ut,St,ft,_t)},nt=(v,D,W,rt,K,ut,St,ft,_t)=>{D.slotScopeIds=ft,v==null?D.shapeFlag&512?K.ctx.activate(D,W,rt,St,_t):U(D,W,rt,K,ut,St,_t):ot(v,D,_t)},U=(v,D,W,rt,K,ut,St)=>{const ft=v.component=createComponentInstance(v,rt,K);if(isKeepAlive(v)&&(ft.ctx.renderer=V),setupComponent(ft,!1,St),ft.asyncDep){if(K&&K.registerDep(ft,pt,St),!v.el){const _t=ft.subTree=createVNode(Comment);P(null,_t,D,W),v.placeholder=_t.el}}else pt(ft,v,D,W,K,ut,St)},ot=(v,D,W)=>{const rt=D.component=v.component;if(shouldUpdateComponent(v,D,W))if(rt.asyncDep&&!rt.asyncResolved){mt(rt,D,W);return}else rt.next=D,rt.update();else D.el=v.el,rt.vnode=D},pt=(v,D,W,rt,K,ut,St)=>{const ft=()=>{if(v.isMounted){let{next:q,bu:ct,u:vt,parent:Et,vnode:Dt}=v;{const Wt=locateNonHydratedAsyncRoot(v);if(Wt){q&&(q.el=Dt.el,mt(v,q,St)),Wt.asyncDep.then(()=>{v.isUnmounted||ft()});return}}let Lt=q,jt;toggleRecurse(v,!1),q?(q.el=Dt.el,mt(v,q,St)):q=Dt,ct&&invokeArrayFns(ct),(jt=q.props&&q.props.onVnodeBeforeUpdate)&&invokeVNodeHook(jt,Et,q,Dt),toggleRecurse(v,!0);const $t=renderComponentRoot(v),Gt=v.subTree;v.subTree=$t,T(Gt,$t,w(Gt.el),y(Gt),v,K,ut),q.el=$t.el,Lt===null&&updateHOCHostEl(v,$t.el),vt&&queuePostRenderEffect(vt,K),(jt=q.props&&q.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(jt,Et,q,Dt),K)}else{let q;const{el:ct,props:vt}=D,{bm:Et,m:Dt,parent:Lt,root:jt,type:$t}=v,Gt=isAsyncWrapper(D);if(toggleRecurse(v,!1),Et&&invokeArrayFns(Et),!Gt&&(q=vt&&vt.onVnodeBeforeMount)&&invokeVNodeHook(q,Lt,D),toggleRecurse(v,!0),ct&&dt){const Wt=()=>{v.subTree=renderComponentRoot(v),dt(ct,v.subTree,v,K,null)};Gt&&$t.__asyncHydrate?$t.__asyncHydrate(ct,v,Wt):Wt()}else{jt.ce&&jt.ce._def.shadowRoot!==!1&&jt.ce._injectChildStyle($t);const Wt=v.subTree=renderComponentRoot(v);T(null,Wt,W,rt,v,K,ut),D.el=Wt.el}if(Dt&&queuePostRenderEffect(Dt,K),!Gt&&(q=vt&&vt.onVnodeMounted)){const Wt=D;queuePostRenderEffect(()=>invokeVNodeHook(q,Lt,Wt),K)}(D.shapeFlag&256||Lt&&isAsyncWrapper(Lt.vnode)&&Lt.vnode.shapeFlag&256)&&v.a&&queuePostRenderEffect(v.a,K),v.isMounted=!0,D=W=rt=null}};v.scope.on();const _t=v.effect=new ReactiveEffect(ft);v.scope.off();const Z=v.update=_t.run.bind(_t),J=v.job=_t.runIfDirty.bind(_t);J.i=v,J.id=v.uid,_t.scheduler=()=>queueJob(J),toggleRecurse(v,!0),Z()},mt=(v,D,W)=>{D.component=v;const rt=v.vnode.props;v.vnode=D,v.next=null,updateProps(v,D.props,rt,W),updateSlots(v,D.children,W),pauseTracking(),flushPreFlushCbs(v),resetTracking()},X=(v,D,W,rt,K,ut,St,ft,_t=!1)=>{const Z=v&&v.children,J=v?v.shapeFlag:0,q=D.children,{patchFlag:ct,shapeFlag:vt}=D;if(ct>0){if(ct&128){wt(Z,q,W,rt,K,ut,St,ft,_t);return}else if(ct&256){yt(Z,q,W,rt,K,ut,St,ft,_t);return}}vt&8?(J&16&&u(Z,K,ut),q!==Z&&l(W,q)):J&16?vt&16?wt(Z,q,W,rt,K,ut,St,ft,_t):u(Z,K,ut,!0):(J&8&&l(W,""),vt&16&&F(q,W,rt,K,ut,St,ft,_t))},yt=(v,D,W,rt,K,ut,St,ft,_t)=>{v=v||EMPTY_ARR,D=D||EMPTY_ARR;const Z=v.length,J=D.length,q=Math.min(Z,J);let ct;for(ct=0;ct<q;ct++){const vt=D[ct]=_t?cloneIfMounted(D[ct]):normalizeVNode(D[ct]);T(v[ct],vt,W,null,K,ut,St,ft,_t)}Z>J?u(v,K,ut,!0,!1,q):F(D,W,rt,K,ut,St,ft,_t,q)},wt=(v,D,W,rt,K,ut,St,ft,_t)=>{let Z=0;const J=D.length;let q=v.length-1,ct=J-1;for(;Z<=q&&Z<=ct;){const vt=v[Z],Et=D[Z]=_t?cloneIfMounted(D[Z]):normalizeVNode(D[Z]);if(isSameVNodeType(vt,Et))T(vt,Et,W,null,K,ut,St,ft,_t);else break;Z++}for(;Z<=q&&Z<=ct;){const vt=v[q],Et=D[ct]=_t?cloneIfMounted(D[ct]):normalizeVNode(D[ct]);if(isSameVNodeType(vt,Et))T(vt,Et,W,null,K,ut,St,ft,_t);else break;q--,ct--}if(Z>q){if(Z<=ct){const vt=ct+1,Et=vt<J?D[vt].el:rt;for(;Z<=ct;)T(null,D[Z]=_t?cloneIfMounted(D[Z]):normalizeVNode(D[Z]),W,Et,K,ut,St,ft,_t),Z++}}else if(Z>ct)for(;Z<=q;)kt(v[Z],K,ut,!0),Z++;else{const vt=Z,Et=Z,Dt=new Map;for(Z=Et;Z<=ct;Z++){const at=D[Z]=_t?cloneIfMounted(D[Z]):normalizeVNode(D[Z]);at.key!=null&&Dt.set(at.key,Z)}let Lt,jt=0;const $t=ct-Et+1;let Gt=!1,Wt=0;const Yt=new Array($t);for(Z=0;Z<$t;Z++)Yt[Z]=0;for(Z=vt;Z<=q;Z++){const at=v[Z];if(jt>=$t){kt(at,K,ut,!0);continue}let st;if(at.key!=null)st=Dt.get(at.key);else for(Lt=Et;Lt<=ct;Lt++)if(Yt[Lt-Et]===0&&isSameVNodeType(at,D[Lt])){st=Lt;break}st===void 0?kt(at,K,ut,!0):(Yt[st-Et]=Z+1,st>=Wt?Wt=st:Gt=!0,T(at,D[st],W,null,K,ut,St,ft,_t),jt++)}const At=Gt?getSequence(Yt):EMPTY_ARR;for(Lt=At.length-1,Z=$t-1;Z>=0;Z--){const at=Et+Z,st=D[at],xt=D[at+1],Ct=at+1<J?xt.el||resolveAsyncComponentPlaceholder(xt):rt;Yt[Z]===0?T(null,st,W,Ct,K,ut,St,ft,_t):Gt&&(Lt<0||Z!==At[Lt]?Rt(st,W,Ct,2):Lt--)}}},Rt=(v,D,W,rt,K=null)=>{const{el:ut,type:St,transition:ft,children:_t,shapeFlag:Z}=v;if(Z&6){Rt(v.component.subTree,D,W,rt);return}if(Z&128){v.suspense.move(D,W,rt);return}if(Z&64){St.move(v,D,W,V);return}if(St===Fragment){s(ut,D,W);for(let q=0;q<_t.length;q++)Rt(_t[q],D,W,rt);s(v.anchor,D,W);return}if(St===Static){M(v,D,W);return}if(rt!==2&&Z&1&&ft)if(rt===0)ft.beforeEnter(ut),s(ut,D,W),queuePostRenderEffect(()=>ft.enter(ut),K);else{const{leave:q,delayLeave:ct,afterLeave:vt}=ft,Et=()=>{v.ctx.isUnmounted?i(ut):s(ut,D,W)},Dt=()=>{ut._isLeaving&&ut[leaveCbKey](!0),q(ut,()=>{Et(),vt&&vt()})};ct?ct(ut,Et,Dt):Dt()}else s(ut,D,W)},kt=(v,D,W,rt=!1,K=!1)=>{const{type:ut,props:St,ref:ft,children:_t,dynamicChildren:Z,shapeFlag:J,patchFlag:q,dirs:ct,cacheIndex:vt}=v;if(q===-2&&(K=!1),ft!=null&&(pauseTracking(),setRef(ft,null,W,v,!0),resetTracking()),vt!=null&&(D.renderCache[vt]=void 0),J&256){D.ctx.deactivate(v);return}const Et=J&1&&ct,Dt=!isAsyncWrapper(v);let Lt;if(Dt&&(Lt=St&&St.onVnodeBeforeUnmount)&&invokeVNodeHook(Lt,D,v),J&6)f(v.component,W,rt);else{if(J&128){v.suspense.unmount(W,rt);return}Et&&invokeDirectiveHook(v,null,D,"beforeUnmount"),J&64?v.type.remove(v,D,W,V,rt):Z&&!Z.hasOnce&&(ut!==Fragment||q>0&&q&64)?u(Z,D,W,!1,!0):(ut===Fragment&&q&384||!K&&J&16)&&u(_t,D,W),rt&&j(v)}(Dt&&(Lt=St&&St.onVnodeUnmounted)||Et)&&queuePostRenderEffect(()=>{Lt&&invokeVNodeHook(Lt,D,v),Et&&invokeDirectiveHook(v,null,D,"unmounted")},W)},j=v=>{const{type:D,el:W,anchor:rt,transition:K}=v;if(D===Fragment){h(W,rt);return}if(D===Static){C(v);return}const ut=()=>{i(W),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(v.shapeFlag&1&&K&&!K.persisted){const{leave:St,delayLeave:ft}=K,_t=()=>St(W,ut);ft?ft(v.el,ut,_t):_t()}else ut()},h=(v,D)=>{let W;for(;v!==D;)W=R(v),i(v),v=W;i(D)},f=(v,D,W)=>{const{bum:rt,scope:K,job:ut,subTree:St,um:ft,m:_t,a:Z}=v;invalidateMount(_t),invalidateMount(Z),rt&&invokeArrayFns(rt),K.stop(),ut&&(ut.flags|=8,kt(St,v,D,W)),ft&&queuePostRenderEffect(ft,D),queuePostRenderEffect(()=>{v.isUnmounted=!0},D)},u=(v,D,W,rt=!1,K=!1,ut=0)=>{for(let St=ut;St<v.length;St++)kt(v[St],D,W,rt,K)},y=v=>{if(v.shapeFlag&6)return y(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const D=R(v.anchor||v.el),W=D&&D[TeleportEndKey];return W?R(W):D};let E=!1;const N=(v,D,W)=>{let rt;v==null?D._vnode&&(kt(D._vnode,null,null,!0),rt=D._vnode.component):T(D._vnode||null,v,D,null,null,null,W),D._vnode=v,E||(E=!0,flushPreFlushCbs(rt),flushPostFlushCbs(),E=!1)},V={p:T,um:kt,m:Rt,r:j,mt:U,mc:F,pc:X,pbc:B,n:y,o:t};let Y,dt;return e&&([Y,dt]=e(V)),{render:N,hydrate:Y,createApp:createAppAPI(N,Y)}}function resolveChildrenNamespace({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,n=!1){const s=t.children,i=e.children;if(isArray(s)&&isArray(i))for(let a=0;a<s.length;a++){const o=s[a];let _=i[a];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=i[a]=cloneIfMounted(i[a]),_.el=o.el),!n&&_.patchFlag!==-2&&traverseStaticChildren(o,_)),_.type===Text&&(_.patchFlag!==-1?_.el=o.el:_.__elIndex=a+(t.type===Fragment?1:0)),_.type===Comment&&!_.el&&(_.el=o.el)}}function getSequence(t){const e=t.slice(),n=[0];let s,i,a,o,_;const d=t.length;for(s=0;s<d;s++){const g=t[s];if(g!==0){if(i=n[n.length-1],t[i]<g){e[s]=i,n.push(s);continue}for(a=0,o=n.length-1;a<o;)_=a+o>>1,t[n[_]]<g?a=_+1:o=_;g<t[n[a]]&&(a>0&&(e[s]=n[a-1]),n[a]=s)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=e[o];return n}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function resolveAsyncComponentPlaceholder(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?resolveAsyncComponentPlaceholder(e.subTree):null}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,s,i,a){return setupBlock(createBaseVNode(t,e,n,s,i,a,!0))}function createBlock(t,e,n,s,i){return setupBlock(createVNode(t,e,n,s,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null);function createBaseVNode(t,e=null,n=null,s=0,i=null,a=t===Fragment?0:1,o=!1,_=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return _?(normalizeChildren(d,n),a&128&&t.normalize(d)):n&&(d.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,s=0,i=null,a=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const _=cloneVNode(t,e,!0);return n&&normalizeChildren(_,n),isBlockTreeEnabled>0&&!a&&currentBlock&&(_.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=_:currentBlock.push(_)),_.patchFlag=-2,_}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:_,style:d}=e;_&&!isString(_)&&(e.class=normalizeClass(_)),isObject(d)&&(isProxy(d)&&!isArray(d)&&(d=extend({},d)),e.style=normalizeStyle(d))}const o=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,n,s,i,o,a,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,n=!1,s=!1){const{props:i,ref:a,patchFlag:o,children:_,transition:d}=t,g=e?mergeProps(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:g,key:g&&normalizeKey(g),ref:e&&e.ref?n&&a?isArray(a)?a.concat(normalizeRef(e)):[a,normalizeRef(e)]:normalizeRef(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:_,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:d,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return d&&s&&setTransitionHooks(l,d.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!isInternalObject(e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),s&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(i==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(i)){const a=e[i],o=s[i];o&&a!==o&&!(isArray(a)&&a.includes(o))&&(e[i]=a?[].concat(a,o):o)}else i!==""&&(e[i]=s[i])}return e}function invokeVNodeHook(t,e,n,s=null){callWithAsyncErrorHandling(t,e,7,[n,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,a={uid:uid++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,i),emitsOptions:normalizeEmitsOptions(s,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=emit.bind(null,a),t.ce&&t.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:s,children:i}=t.vnode,a=isStatefulComponent(t);initProps(t,s,a,e),initSlots(t,i,n||e);const o=a?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),o}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:s}=n;if(s){pauseTracking();const i=t.setupContext=s.length>1?createSetupContext(t):null,a=setCurrentInstance(t),o=callWithErrorHandling(s,t,0,[t.props,i]),_=isPromise(o);if(resetTracking(),a(),(_||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),_){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(d=>{handleSetupResult(t,d,e)}).catch(d=>{handleError(d,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const s=t.type;if(!t.render){if(!e&&compile&&!s.render){const i=s.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:a,compilerOptions:o}=t.appContext.config,{delimiters:_,compilerOptions:d}=s,g=extend(extend({isCustomElement:a,delimiters:_},o),d);s.render=compile(i,g)}}t.render=s.render||NOOP}{const i=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,n=!1){let s=getComponentName(e);if(!s&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(s=i[1])}if(!s&&t){const i=a=>{for(const o in a)if(a[o]===e)return o};s=i(t.components)||t.parent&&i(t.parent.type.components)||i(t.appContext.components)}return s?classify(s):n?"App":"Anonymous"}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):n?doc.createElement(t,{is:n}):doc.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,a){const o=n?n.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const _=templateContainer.content;if(s==="svg"||s==="mathml"){const d=_.firstChild;for(;d.firstChild;)_.appendChild(d.firstChild);_.removeChild(d)}e.insertBefore(_,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,n){const s=t[vtcKey];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={name:"show",beforeMount(t,{value:e},{transition:n}){t[vShowOriginalDisplay]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),setDisplay(t,!0),s.enter(t)):s.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t[vShowOriginalDisplay]:"none",t[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(t,e,n){const s=t.style,i=isString(n);let a=!1;if(n&&!i){if(e)if(isString(e))for(const o of e.split(";")){const _=o.slice(0,o.indexOf(":")).trim();n[_]==null&&setStyle(s,_,"")}else for(const o in e)n[o]==null&&setStyle(s,o,"");for(const o in n)o==="display"&&(a=!0),setStyle(s,o,n[o])}else if(i){if(e!==n){const o=s[CSS_VAR_TEXT];o&&(n+=";"+o),s.cssText=n,a=displayRE.test(n)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=a?s.display:"",t[vShowHidden]&&(s.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray(n))n.forEach(s=>setStyle(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(s),n.replace(importantRE,""),"important"):t[s]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let s=camelize(e);if(s!=="filter"&&s in t)return prefixCache[e]=s;s=capitalize(s);for(let i=0;i<prefixes.length;i++){const a=prefixes[i]+s;if(a in t)return prefixCache[e]=a}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,s,i,a=isSpecialBooleanAttr(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n):n==null||a&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,a?"":isSymbol(n)?String(n):n)}function patchDOMProp(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const _=a==="OPTION"?t.getAttribute("value")||"":t.value,d=n==null?t.type==="checkbox"?"on":"":String(n);(_!==d||!("_value"in t))&&(t.value=d),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=includeBooleanAttr(n):n==null&&_==="string"?(n="",o=!0):_==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function addEventListener(t,e,n,s){t.addEventListener(e,n,s)}function removeEventListener(t,e,n,s){t.removeEventListener(e,n,s)}const veiKey=Symbol("_vei");function patchEvent(t,e,n,s,i=null){const a=t[veiKey]||(t[veiKey]={}),o=a[e];if(s&&o)o.value=s;else{const[_,d]=parseName(e);if(s){const g=a[e]=createInvoker(s,i);addEventListener(t,_,g,d)}else o&&(removeEventListener(t,_,o,d),a[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let s;for(;s=t.match(optionsModifierRE);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,n.value),e,5,[s])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,n,s,i,a)=>{const o=i==="svg";e==="class"?patchClass(t,s,o):e==="style"?patchStyle(t,n,s):isOn(e)?isModelListener(e)||patchEvent(t,e,n,s,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,s,o))?(patchDOMProp(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,s,o,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString(s))?patchDOMProp(t,camelize(e),s,a,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),patchAttr(t,e,s,o))};function shouldSetAsProp(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction$1(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString(n)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign");function castValue(t,e,n){return e&&(t=t.trim()),n&&(t=looseToNumber(t)),t}const vModelText={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[assignKey]=getModelAssigner(i);const a=s||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",o=>{o.target.composing||t[assignKey](castValue(t.value,n,a))}),(n||a)&&addEventListener(t,"change",()=>{t.value=castValue(t.value,n,a)}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:i,number:a}},o){if(t[assignKey]=getModelAssigner(o),t.composing)return;const _=(a||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,d=e??"";_!==d&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||i&&t.value.trim()===d)||(t.value=d))}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(n=>t[`${n}Key`]&&!e.includes(n))},withModifiers=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...a)=>{for(let o=0;o<e.length;o++){const _=modifierGuards[e[o]];if(_&&_(i,e))return}return t(i,...a)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=normalizeContainer(s);if(!i)return;const a=e._component;!isFunction$1(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString(t)?document.querySelector(t):t}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Yt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=yt,e.bytesToString=Y,e.createValidAbsoluteUrl=Rt,e.getModificationDate=Et,e.getUuid=Gt,e.getVerbosityLevel=ot,e.info=pt,e.isArrayBuffer=ct,e.isArrayEqual=vt,e.isNodeJS=void 0,e.normalizeUnicode=$t,e.objectFromMap=W,e.objectSize=D,e.setVerbosityLevel=U,e.shadow=kt,e.string32=v,e.stringToBytes=dt,e.stringToPDFString=Z,e.stringToUTF8String=J,e.unreachable=X,e.utf8StringToString=q,e.warn=mt;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;const s=[1,0,0,1,0,0];e.IDENTITY_MATRIX=s;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const a=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=a;const o=1.35;e.LINE_FACTOR=o;const _=.35;e.LINE_DESCENT_FACTOR=_;const d=_/o;e.BASELINE_FACTOR=d;const g={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=g;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;const w="pdfjs_internal_editor_";e.AnnotationEditorPrefix=w;const R={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=R;const x={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=x;const k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=k;const T={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=T;const S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=S;const P={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=P;const I={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=I;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=M;const C={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=C;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=m;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=A;const H={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=H;const F={O:"PageOpen",C:"PageClose"};e.PageActionEventType=F;const b={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=b;const B={NONE:0,BINARY:1};e.CMapCompressionType=B;const O={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=O;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let nt=b.WARNINGS;function U(At){Number.isInteger(At)&&(nt=At)}function ot(){return nt}function pt(At){nt>=b.INFOS&&console.log(`Info: ${At}`)}function mt(At){nt>=b.WARNINGS&&console.log(`Warning: ${At}`)}function X(At){throw new Error(At)}function yt(At,at){At||X(at)}function wt(At){switch(At==null?void 0:At.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rt(At,at=null,st=null){if(!At)return null;try{if(st&&typeof At=="string"){if(st.addDefaultProtocol&&At.startsWith("www.")){const Ct=At.match(/\./g);(Ct==null?void 0:Ct.length)>=2&&(At=`http://${At}`)}if(st.tryConvertEncoding)try{At=J(At)}catch{}}const xt=at?new URL(At,at):new URL(At);if(wt(xt))return xt}catch{}return null}function kt(At,at,st,xt=!1){return Object.defineProperty(At,at,{value:st,enumerable:!xt,configurable:!0,writable:!1}),st}const j=function(){function at(st,xt){this.constructor===at&&X("Cannot initialize BaseException."),this.message=st,this.name=xt}return at.prototype=new Error,at.constructor=at,at}();e.BaseException=j;class h extends j{constructor(at,st){super(at,"PasswordException"),this.code=st}}e.PasswordException=h;class f extends j{constructor(at,st){super(at,"UnknownErrorException"),this.details=st}}e.UnknownErrorException=f;class u extends j{constructor(at){super(at,"InvalidPDFException")}}e.InvalidPDFException=u;class y extends j{constructor(at){super(at,"MissingPDFException")}}e.MissingPDFException=y;class E extends j{constructor(at,st){super(at,"UnexpectedResponseException"),this.status=st}}e.UnexpectedResponseException=E;class N extends j{constructor(at){super(at,"FormatError")}}e.FormatError=N;class V extends j{constructor(at){super(at,"AbortException")}}e.AbortException=V;function Y(At){(typeof At!="object"||(At==null?void 0:At.length)===void 0)&&X("Invalid argument for bytesToString");const at=At.length,st=8192;if(at<st)return String.fromCharCode.apply(null,At);const xt=[];for(let Ct=0;Ct<at;Ct+=st){const se=Math.min(Ct+st,at),ee=At.subarray(Ct,se);xt.push(String.fromCharCode.apply(null,ee))}return xt.join("")}function dt(At){typeof At!="string"&&X("Invalid argument for stringToBytes");const at=At.length,st=new Uint8Array(at);for(let xt=0;xt<at;++xt)st[xt]=At.charCodeAt(xt)&255;return st}function v(At){return String.fromCharCode(At>>24&255,At>>16&255,At>>8&255,At&255)}function D(At){return Object.keys(At).length}function W(At){const at=Object.create(null);for(const[st,xt]of At)at[st]=xt;return at}function rt(){const At=new Uint8Array(4);return At[0]=1,new Uint32Array(At.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class ut{static get isLittleEndian(){return kt(this,"isLittleEndian",rt())}static get isEvalSupported(){return kt(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?kt(this,"platform",{isWin:!1,isMac:!1}):kt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var at,st;return kt(this,"isCSSRoundSupported",(st=(at=globalThis.CSS)==null?void 0:at.supports)==null?void 0:st.call(at,"width: round(1.5px, 1px)"))}}e.FeatureTest=ut;const St=[...Array(256).keys()].map(At=>At.toString(16).padStart(2,"0"));class ft{static makeHexColor(at,st,xt){return`#${St[at]}${St[st]}${St[xt]}`}static scaleMinMax(at,st){let xt;at[0]?(at[0]<0&&(xt=st[0],st[0]=st[1],st[1]=xt),st[0]*=at[0],st[1]*=at[0],at[3]<0&&(xt=st[2],st[2]=st[3],st[3]=xt),st[2]*=at[3],st[3]*=at[3]):(xt=st[0],st[0]=st[2],st[2]=xt,xt=st[1],st[1]=st[3],st[3]=xt,at[1]<0&&(xt=st[2],st[2]=st[3],st[3]=xt),st[2]*=at[1],st[3]*=at[1],at[2]<0&&(xt=st[0],st[0]=st[1],st[1]=xt),st[0]*=at[2],st[1]*=at[2]),st[0]+=at[4],st[1]+=at[4],st[2]+=at[5],st[3]+=at[5]}static transform(at,st){return[at[0]*st[0]+at[2]*st[1],at[1]*st[0]+at[3]*st[1],at[0]*st[2]+at[2]*st[3],at[1]*st[2]+at[3]*st[3],at[0]*st[4]+at[2]*st[5]+at[4],at[1]*st[4]+at[3]*st[5]+at[5]]}static applyTransform(at,st){const xt=at[0]*st[0]+at[1]*st[2]+st[4],Ct=at[0]*st[1]+at[1]*st[3]+st[5];return[xt,Ct]}static applyInverseTransform(at,st){const xt=st[0]*st[3]-st[1]*st[2],Ct=(at[0]*st[3]-at[1]*st[2]+st[2]*st[5]-st[4]*st[3])/xt,se=(-at[0]*st[1]+at[1]*st[0]+st[4]*st[1]-st[5]*st[0])/xt;return[Ct,se]}static getAxialAlignedBoundingBox(at,st){const xt=this.applyTransform(at,st),Ct=this.applyTransform(at.slice(2,4),st),se=this.applyTransform([at[0],at[3]],st),ee=this.applyTransform([at[2],at[1]],st);return[Math.min(xt[0],Ct[0],se[0],ee[0]),Math.min(xt[1],Ct[1],se[1],ee[1]),Math.max(xt[0],Ct[0],se[0],ee[0]),Math.max(xt[1],Ct[1],se[1],ee[1])]}static inverseTransform(at){const st=at[0]*at[3]-at[1]*at[2];return[at[3]/st,-at[1]/st,-at[2]/st,at[0]/st,(at[2]*at[5]-at[4]*at[3])/st,(at[4]*at[1]-at[5]*at[0])/st]}static singularValueDecompose2dScale(at){const st=[at[0],at[2],at[1],at[3]],xt=at[0]*st[0]+at[1]*st[2],Ct=at[0]*st[1]+at[1]*st[3],se=at[2]*st[0]+at[3]*st[2],ee=at[2]*st[1]+at[3]*st[3],ht=(xt+ee)/2,Mt=Math.sqrt((xt+ee)**2-4*(xt*ee-se*Ct))/2,Ht=ht+Mt||1,Ft=ht-Mt||1;return[Math.sqrt(Ht),Math.sqrt(Ft)]}static normalizeRect(at){const st=at.slice(0);return at[0]>at[2]&&(st[0]=at[2],st[2]=at[0]),at[1]>at[3]&&(st[1]=at[3],st[3]=at[1]),st}static intersect(at,st){const xt=Math.max(Math.min(at[0],at[2]),Math.min(st[0],st[2])),Ct=Math.min(Math.max(at[0],at[2]),Math.max(st[0],st[2]));if(xt>Ct)return null;const se=Math.max(Math.min(at[1],at[3]),Math.min(st[1],st[3])),ee=Math.min(Math.max(at[1],at[3]),Math.max(st[1],st[3]));return se>ee?null:[xt,se,Ct,ee]}static bezierBoundingBox(at,st,xt,Ct,se,ee,ht,Mt){const Ht=[],Ft=[[],[]];let Vt,zt,Zt,Pt,Jt,Ut,$,c;for(let lt=0;lt<2;++lt){if(lt===0?(zt=6*at-12*xt+6*se,Vt=-3*at+9*xt-9*se+3*ht,Zt=3*xt-3*at):(zt=6*st-12*Ct+6*ee,Vt=-3*st+9*Ct-9*ee+3*Mt,Zt=3*Ct-3*st),Math.abs(Vt)<1e-12){if(Math.abs(zt)<1e-12)continue;Pt=-Zt/zt,0<Pt&&Pt<1&&Ht.push(Pt);continue}$=zt*zt-4*Zt*Vt,c=Math.sqrt($),!($<0)&&(Jt=(-zt+c)/(2*Vt),0<Jt&&Jt<1&&Ht.push(Jt),Ut=(-zt-c)/(2*Vt),0<Ut&&Ut<1&&Ht.push(Ut))}let L=Ht.length,z;const et=L;for(;L--;)Pt=Ht[L],z=1-Pt,Ft[0][L]=z*z*z*at+3*z*z*Pt*xt+3*z*Pt*Pt*se+Pt*Pt*Pt*ht,Ft[1][L]=z*z*z*st+3*z*z*Pt*Ct+3*z*Pt*Pt*ee+Pt*Pt*Pt*Mt;return Ft[0][et]=at,Ft[1][et]=st,Ft[0][et+1]=ht,Ft[1][et+1]=Mt,Ft[0].length=Ft[1].length=et+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}e.Util=ft;const _t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Z(At){if(At[0]>=""){let st;if(At[0]===""&&At[1]===""?st="utf-16be":At[0]===""&&At[1]===""?st="utf-16le":At[0]===""&&At[1]===""&&At[2]===""&&(st="utf-8"),st)try{const xt=new TextDecoder(st,{fatal:!0}),Ct=dt(At);return xt.decode(Ct)}catch(xt){mt(`stringToPDFString: "${xt}".`)}}const at=[];for(let st=0,xt=At.length;st<xt;st++){const Ct=_t[At.charCodeAt(st)];at.push(Ct?String.fromCharCode(Ct):At.charAt(st))}return at.join("")}function J(At){return decodeURIComponent(escape(At))}function q(At){return unescape(encodeURIComponent(At))}function ct(At){return typeof At=="object"&&(At==null?void 0:At.byteLength)!==void 0}function vt(At,at){if(At.length!==at.length)return!1;for(let st=0,xt=At.length;st<xt;st++)if(At[st]!==at[st])return!1;return!0}function Et(At=new Date){return[At.getUTCFullYear().toString(),(At.getUTCMonth()+1).toString().padStart(2,"0"),At.getUTCDate().toString().padStart(2,"0"),At.getUTCHours().toString().padStart(2,"0"),At.getUTCMinutes().toString().padStart(2,"0"),At.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){G(this,Yt,!1);this.promise=new Promise((at,st)=>{this.resolve=xt=>{gt(this,Yt,!0),at(xt)},this.reject=xt=>{gt(this,Yt,!0),st(xt)}})}get settled(){return r(this,Yt)}}Yt=new WeakMap,e.PromiseCapability=Dt;let Lt=null,jt=null;function $t(At){return Lt||(Lt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jt=new Map([["","t"]])),At.replaceAll(Lt,(at,st,xt)=>st?st.normalize("NFKC"):jt.get(xt))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const At=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(At);else for(let at=0;at<32;at++)At[at]=Math.floor(Math.random()*255);return Y(At)}const Wt="pdfjs_internal_id_";e.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,n,s,i,de,o,xe,d,g,l,w,R,x,k,T,S,Te,I,M,Ue,m,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(F){if(typeof F=="string"||F instanceof URL?F={url:F}:(0,_util.isArrayBuffer)(F)&&(F={data:F}),typeof F!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!F.url&&!F.data&&!F.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const b=new PDFDocumentLoadingTask,{docId:B}=b,O=F.url?getUrlProp(F.url):null,Q=F.data?getDataProp(F.data):null,nt=F.httpHeaders||null,U=F.withCredentials===!0,ot=F.password??null,pt=F.range instanceof PDFDataRangeTransport?F.range:null,mt=Number.isInteger(F.rangeChunkSize)&&F.rangeChunkSize>0?F.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let X=F.worker instanceof PDFWorker?F.worker:null;const yt=F.verbosity,wt=typeof F.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(F.docBaseUrl)?F.docBaseUrl:null,Rt=typeof F.cMapUrl=="string"?F.cMapUrl:null,kt=F.cMapPacked!==!1,j=F.CMapReaderFactory||DefaultCMapReaderFactory,h=typeof F.standardFontDataUrl=="string"?F.standardFontDataUrl:null,f=F.StandardFontDataFactory||DefaultStandardFontDataFactory,u=F.stopAtErrors!==!0,y=Number.isInteger(F.maxImageSize)&&F.maxImageSize>-1?F.maxImageSize:-1,E=F.isEvalSupported!==!1,N=typeof F.isOffscreenCanvasSupported=="boolean"?F.isOffscreenCanvasSupported:!_util.isNodeJS,V=Number.isInteger(F.canvasMaxAreaInBytes)?F.canvasMaxAreaInBytes:-1,Y=typeof F.disableFontFace=="boolean"?F.disableFontFace:_util.isNodeJS,dt=F.fontExtraProperties===!0,v=F.enableXfa===!0,D=F.ownerDocument||globalThis.document,W=F.disableRange===!0,rt=F.disableStream===!0,K=F.disableAutoFetch===!0,ut=F.pdfBug===!0,St=pt?pt.length:F.length??NaN,ft=typeof F.useSystemFonts=="boolean"?F.useSystemFonts:!_util.isNodeJS&&!Y,_t=typeof F.useWorkerFetch=="boolean"?F.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&f===_display_utils.DOMStandardFontDataFactory&&Rt&&h&&(0,_display_utils.isValidFetchUrl)(Rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),Z=F.canvasFactory||new DefaultCanvasFactory({ownerDocument:D}),J=F.filterFactory||new DefaultFilterFactory({docId:B,ownerDocument:D}),q=null;(0,_util.setVerbosityLevel)(yt);const ct={canvasFactory:Z,filterFactory:J};if(_t||(ct.cMapReaderFactory=new j({baseUrl:Rt,isCompressed:kt}),ct.standardFontDataFactory=new f({baseUrl:h})),!X){const Dt={verbosity:yt,port:_worker_options.GlobalWorkerOptions.workerPort};X=Dt.port?PDFWorker.fromPort(Dt):new PDFWorker(Dt),b._worker=X}const vt={docId:B,apiVersion:"3.11.174",data:Q,password:ot,disableAutoFetch:K,rangeChunkSize:mt,length:St,docBaseUrl:wt,enableXfa:v,evaluatorOptions:{maxImageSize:y,disableFontFace:Y,ignoreErrors:u,isEvalSupported:E,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:V,fontExtraProperties:dt,useSystemFonts:ft,cMapUrl:_t?Rt:null,standardFontDataUrl:_t?h:null}},Et={ignoreErrors:u,isEvalSupported:E,disableFontFace:Y,fontExtraProperties:dt,enableXfa:v,ownerDocument:D,disableAutoFetch:K,pdfBug:ut,styleElement:q};return X.promise.then(function(){if(b.destroyed)throw new Error("Loading aborted");const Dt=_fetchDocument(X,vt),Lt=new Promise(function(jt){let $t;pt?$t=new _transport_stream.PDFDataTransportStream({length:St,initialData:pt.initialData,progressiveDone:pt.progressiveDone,contentDispositionFilename:pt.contentDispositionFilename,disableRange:W,disableStream:rt},pt):Q||($t=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:O,length:St,httpHeaders:nt,withCredentials:U,rangeChunkSize:mt,disableRange:W,disableStream:rt})),jt($t)});return Promise.all([Dt,Lt]).then(function([jt,$t]){if(b.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(B,jt,X.port),Wt=new WorkerTransport(Gt,b,$t,Et,ct);b._transport=Wt,Gt.send("Ready",null)})}).catch(b._capability.reject),b}async function _fetchDocument(F,b){if(F.destroyed)throw new Error("Worker was destroyed");const B=await F.messageHandler.sendWithPromise("GetDocRequest",b,b.data?[b.data.buffer]:null);if(F.destroyed)throw new Error("Worker was destroyed");return B}function getUrlProp(F){if(F instanceof URL)return F.href;try{return new URL(F,window.location).href}catch{if(_util.isNodeJS&&typeof F=="string")return F}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(F){if(_util.isNodeJS&&typeof Buffer<"u"&&F instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(F instanceof Uint8Array&&F.byteLength===F.buffer.byteLength)return F;if(typeof F=="string")return(0,_util.stringToBytes)(F);if(typeof F=="object"&&!isNaN(F==null?void 0:F.length)||(0,_util.isArrayBuffer)(F))return new Uint8Array(F);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${be(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var b,B,O;this.destroyed=!0;try{(b=this._worker)!=null&&b.port&&(this._worker._pendingDestroy=!0),await((B=this._transport)==null?void 0:B.destroy())}catch(Q){throw(O=this._worker)!=null&&O.port&&delete this._worker._pendingDestroy,Q}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,G(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(b,B,O=!1,Q=null){this.length=b,this.initialData=B,this.progressiveDone=O,this.contentDispositionFilename=Q,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(b){this._rangeListeners.push(b)}addProgressListener(b){this._progressListeners.push(b)}addProgressiveReadListener(b){this._progressiveReadListeners.push(b)}addProgressiveDoneListener(b){this._progressiveDoneListeners.push(b)}onDataRange(b,B){for(const O of this._rangeListeners)O(b,B)}onDataProgress(b,B){this._readyCapability.promise.then(()=>{for(const O of this._progressListeners)O(b,B)})}onDataProgressiveRead(b){this._readyCapability.promise.then(()=>{for(const B of this._progressiveReadListeners)B(b)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const b of this._progressiveDoneListeners)b()})}transportReady(){this._readyCapability.resolve()}requestDataRange(b,B){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(b,B){this._pdfInfo=b,this._transport=B,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(O=>{if(!O)return O;const Q=[];for(const nt in O)Q.push(...O[nt]);return Q}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(b){return this._transport.getPage(b)}getPageIndex(b){return this._transport.getPageIndex(b)}getDestinations(){return this._transport.getDestinations()}getDestination(b){return this._transport.getDestination(b)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(b=!1){return this._transport.startCleanup(b||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(b,B,O,Q=!1){G(this,i);G(this,o);G(this,n,null);G(this,s,!1);this._pageIndex=b,this._pageInfo=B,this._transport=O,this._stats=Q?new _display_utils.StatTimer:null,this._pdfBug=Q,this.commonObjs=O.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:b,rotation:B=this.rotate,offsetX:O=0,offsetY:Q=0,dontFlip:nt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:b,rotation:B,offsetX:O,offsetY:Q,dontFlip:nt})}getAnnotations({intent:b="display"}={}){const B=this._transport.getRenderingIntent(b);return this._transport.getAnnotations(this._pageIndex,B.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var b;return((b=this._transport._htmlForXfa)==null?void 0:b.children[this._pageIndex])||null}render({canvasContext:b,viewport:B,intent:O="display",annotationMode:Q=_util.AnnotationMode.ENABLE,transform:nt=null,background:U=null,optionalContentConfigPromise:ot=null,annotationCanvasMap:pt=null,pageColors:mt=null,printAnnotationStorage:X=null}){var f,u;(f=this._stats)==null||f.time("Overall");const yt=this._transport.getRenderingIntent(O,Q,X);gt(this,s,!1),it(this,o,xe).call(this),ot||(ot=this._transport.getOptionalContentConfig());let wt=this._intentStates.get(yt.cacheKey);wt||(wt=Object.create(null),this._intentStates.set(yt.cacheKey,wt)),wt.streamReaderCancelTimeout&&(clearTimeout(wt.streamReaderCancelTimeout),wt.streamReaderCancelTimeout=null);const Rt=!!(yt.renderingIntent&_util.RenderingIntentFlag.PRINT);wt.displayReadyCapability||(wt.displayReadyCapability=new _util.PromiseCapability,wt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(yt));const kt=y=>{var E,N;wt.renderTasks.delete(j),(this._maybeCleanupAfterRender||Rt)&&gt(this,s,!0),it(this,i,de).call(this,!Rt),y?(j.capability.reject(y),this._abortOperatorList({intentState:wt,reason:y instanceof Error?y:new Error(y)})):j.capability.resolve(),(E=this._stats)==null||E.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},j=new InternalRenderTask({callback:kt,params:{canvasContext:b,viewport:B,transform:nt,background:U},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:pt,operatorList:wt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Rt,pdfBug:this._pdfBug,pageColors:mt});(wt.renderTasks||(wt.renderTasks=new Set)).add(j);const h=j.task;return Promise.all([wt.displayReadyCapability.promise,ot]).then(([y,E])=>{var N;if(this.destroyed){kt();return}(N=this._stats)==null||N.time("Rendering"),j.initializeGraphics({transparency:y,optionalContentConfig:E}),j.operatorListChanged()}).catch(kt),h}getOperatorList({intent:b="display",annotationMode:B=_util.AnnotationMode.ENABLE,printAnnotationStorage:O=null}={}){var pt;function Q(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(ot))}const nt=this._transport.getRenderingIntent(b,B,O,!0);let U=this._intentStates.get(nt.cacheKey);U||(U=Object.create(null),this._intentStates.set(nt.cacheKey,U));let ot;return U.opListReadCapability||(ot=Object.create(null),ot.operatorListChanged=Q,U.opListReadCapability=new _util.PromiseCapability,(U.renderTasks||(U.renderTasks=new Set)).add(ot),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(nt)),U.opListReadCapability.promise}streamTextContent({includeMarkedContent:b=!1,disableNormalization:B=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:b===!0,disableNormalization:B===!0},{highWaterMark:100,size(Q){return Q.items.length}})}getTextContent(b={}){if(this._transport._htmlForXfa)return this.getXfa().then(O=>_xfa_text.XfaText.textContent(O));const B=this.streamTextContent(b);return new Promise(function(O,Q){function nt(){U.read().then(function({value:pt,done:mt}){if(mt){O(ot);return}Object.assign(ot.styles,pt.styles),ot.items.push(...pt.items),nt()},Q)}const U=B.getReader(),ot={items:[],styles:Object.create(null)};nt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const b=[];for(const B of this._intentStates.values())if(this._abortOperatorList({intentState:B,reason:new Error("Page was destroyed."),force:!0}),!B.opListReadCapability)for(const O of B.renderTasks)b.push(O.completed),O.cancel();return this.objs.clear(),gt(this,s,!1),it(this,o,xe).call(this),Promise.all(b)}cleanup(b=!1){gt(this,s,!0);const B=it(this,i,de).call(this,!1);return b&&B&&this._stats&&(this._stats=new _display_utils.StatTimer),B}_startRenderPage(b,B){var Q,nt;const O=this._intentStates.get(B);O&&((Q=this._stats)==null||Q.timeEnd("Page Request"),(nt=O.displayReadyCapability)==null||nt.resolve(b))}_renderPageChunk(b,B){for(let O=0,Q=b.length;O<Q;O++)B.operatorList.fnArray.push(b.fnArray[O]),B.operatorList.argsArray.push(b.argsArray[O]);B.operatorList.lastChunk=b.lastChunk,B.operatorList.separateAnnots=b.separateAnnots;for(const O of B.renderTasks)O.operatorListChanged();b.lastChunk&&it(this,i,de).call(this,!0)}_pumpOperatorList({renderingIntent:b,cacheKey:B,annotationStorageSerializable:O}){const{map:Q,transfers:nt}=O,ot=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:b,cacheKey:B,annotationStorage:Q},nt).getReader(),pt=this._intentStates.get(B);pt.streamReader=ot;const mt=()=>{ot.read().then(({value:X,done:yt})=>{if(yt){pt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,pt),mt())},X=>{if(pt.streamReader=null,!this._transport.destroyed){if(pt.operatorList){pt.operatorList.lastChunk=!0;for(const yt of pt.renderTasks)yt.operatorListChanged();it(this,i,de).call(this,!0)}if(pt.displayReadyCapability)pt.displayReadyCapability.reject(X);else if(pt.opListReadCapability)pt.opListReadCapability.reject(X);else throw X}})};mt()}_abortOperatorList({intentState:b,reason:B,force:O=!1}){if(b.streamReader){if(b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null),!O){if(b.renderTasks.size>0)return;if(B instanceof _display_utils.RenderingCancelledException){let Q=RENDERING_CANCELLED_TIMEOUT;B.extraDelay>0&&B.extraDelay<1e3&&(Q+=B.extraDelay),b.streamReaderCancelTimeout=setTimeout(()=>{b.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:b,reason:B,force:!0})},Q);return}}if(b.streamReader.cancel(new _util.AbortException(B.message)).catch(()=>{}),b.streamReader=null,!this._transport.destroyed){for(const[Q,nt]of this._intentStates)if(nt===b){this._intentStates.delete(Q);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,s=new WeakMap,i=new WeakSet,de=function(b=!1){if(it(this,o,xe).call(this),!r(this,s)||this.destroyed)return!1;if(b)return gt(this,n,setTimeout(()=>{gt(this,n,null),it(this,i,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:B,operatorList:O}of this._intentStates.values())if(B.size>0||!O.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,s,!1),!0},o=new WeakSet,xe=function(){r(this,n)&&(clearTimeout(r(this,n)),gt(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){G(this,d,new Set);G(this,g,Promise.resolve())}postMessage(b,B){const O={data:structuredClone(b,B?{transfer:B}:null)};r(this,g).then(()=>{for(const Q of r(this,d))Q.call(this,O)})}addEventListener(b,B){r(this,d).add(B)}removeEventListener(b,B){r(this,d).delete(B)}terminate(){r(this,d).clear()}}d=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const F=(l=document==null?void 0:document.currentScript)==null?void 0:l.src;F&&(PDFWorkerUtil.fallbackWorkerSrc=F.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(F,b){let B;try{if(B=new URL(F),!B.origin||B.origin==="null")return!1}catch{return!1}const O=new URL(b,B);return B.origin===O.origin},PDFWorkerUtil.createCDNWrapper=function(F){const b=`importScripts("${F}");`;return URL.createObjectURL(new Blob([b]))}}const _PDFWorker=class _PDFWorker{constructor({name:F=null,port:b=null,verbosity:B=(0,_util.getVerbosityLevel)()}={}){var O;if(this.name=F,this.destroyed=!1,this.verbosity=B,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,b){if((O=r(_PDFWorker,w))!=null&&O.has(b))throw new Error("Cannot use more than one PDFWorker per port.");(r(_PDFWorker,w)||gt(_PDFWorker,w,new WeakMap)).set(b,this),this._initializeFromPort(b);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(F){this._port=F,this._messageHandler=new _message_handler.MessageHandler("main","worker",F),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:F}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,F)||(F=PDFWorkerUtil.createCDNWrapper(new URL(F,window.location).href));const b=new Worker(F),B=new _message_handler.MessageHandler("main","worker",b),O=()=>{b.removeEventListener("error",Q),B.destroy(),b.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Q=()=>{this._webWorker||O()};b.addEventListener("error",Q),B.on("test",U=>{if(b.removeEventListener("error",Q),this.destroyed){O();return}U?(this._messageHandler=B,this._port=b,this._webWorker=b,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),B.destroy(),b.terminate())}),B.on("ready",U=>{if(b.removeEventListener("error",Q),this.destroyed){O();return}try{nt()}catch{this._setupFakeWorker()}});const nt=()=>{const U=new Uint8Array;B.send("test",U,[U.buffer])};nt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(F=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const b=new LoopbackPort;this._port=b;const B=`fake${PDFWorkerUtil.fakeWorkerId++}`,O=new _message_handler.MessageHandler(B+"_worker",B,b);F.setup(O,b);const Q=new _message_handler.MessageHandler(B,B+"_worker",b);this._messageHandler=Q,this._readyCapability.resolve(),Q.send("configure",{verbosity:this.verbosity})}).catch(F=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${F.message}".`))})}destroy(){var F;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(F=r(_PDFWorker,w))==null||F.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(F){var B;if(!(F!=null&&F.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const b=(B=r(this,w))==null?void 0:B.get(F.port);if(b){if(b._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return b}return new _PDFWorker(F)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var F;try{return((F=globalThis.pdfjsWorker)==null?void 0:F.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};w=new WeakMap,G(_PDFWorker,w,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(b,B,O,Q,nt){G(this,S);G(this,R,new Map);G(this,x,new Map);G(this,k,new Map);G(this,T,null);this.messageHandler=b,this.loadingTask=B,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Q.ownerDocument,styleElement:Q.styleElement}),this._params=Q,this.canvasFactory=nt.canvasFactory,this.filterFactory=nt.filterFactory,this.cMapReaderFactory=nt.cMapReaderFactory,this.standardFontDataFactory=nt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=O,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(b,B=_util.AnnotationMode.ENABLE,O=null,Q=!1){let nt=_util.RenderingIntentFlag.DISPLAY,U=_annotation_storage.SerializableEmpty;switch(b){case"any":nt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":nt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${b}`)}switch(B){case _util.AnnotationMode.DISABLE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:nt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:nt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(nt&_util.RenderingIntentFlag.PRINT&&O instanceof _annotation_storage.PrintAnnotationStorage?O:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${B}`)}return Q&&(nt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:nt,cacheKey:`${nt}_${U.hash}`,annotationStorageSerializable:U}}destroy(){var O;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(O=r(this,T))==null||O.reject(new Error("Worker was destroyed during onPassword callback"));const b=[];for(const Q of r(this,x).values())b.push(Q._destroy());r(this,x).clear(),r(this,k).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const B=this.messageHandler.sendWithPromise("Terminate",null);return b.push(B),Promise.all(b).then(()=>{var Q;this.commonObjs.clear(),this.fontLoader.clear(),r(this,R).clear(),this.filterFactory.destroy(),(Q=this._networkStream)==null||Q.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:b,loadingTask:B}=this;b.on("GetReader",(O,Q)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=nt=>{this._lastProgress={loaded:nt.loaded,total:nt.total}},Q.onPull=()=>{this._fullReader.read().then(function({value:nt,done:U}){if(U){Q.close();return}(0,_util.assert)(nt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(nt),1,[nt])}).catch(nt=>{Q.error(nt)})},Q.onCancel=nt=>{this._fullReader.cancel(nt),Q.ready.catch(U=>{if(!this.destroyed)throw U})}}),b.on("ReaderHeadersReady",O=>{const Q=new _util.PromiseCapability,nt=this._fullReader;return nt.headersReady.then(()=>{var U;(!nt.isStreamingSupported||!nt.isRangeSupported)&&(this._lastProgress&&((U=B.onProgress)==null||U.call(B,this._lastProgress)),nt.onProgress=ot=>{var pt;(pt=B.onProgress)==null||pt.call(B,{loaded:ot.loaded,total:ot.total})}),Q.resolve({isStreamingSupported:nt.isStreamingSupported,isRangeSupported:nt.isRangeSupported,contentLength:nt.contentLength})},Q.reject),Q.promise}),b.on("GetRangeReader",(O,Q)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const nt=this._networkStream.getRangeReader(O.begin,O.end);if(!nt){Q.close();return}Q.onPull=()=>{nt.read().then(function({value:U,done:ot}){if(ot){Q.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Q.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{Q.error(U)})},Q.onCancel=U=>{nt.cancel(U),Q.ready.catch(ot=>{if(!this.destroyed)throw ot})}}),b.on("GetDoc",({pdfInfo:O})=>{this._numPages=O.numPages,this._htmlForXfa=O.htmlForXfa,delete O.htmlForXfa,B._capability.resolve(new PDFDocumentProxy(O,this))}),b.on("DocException",function(O){let Q;switch(O.name){case"PasswordException":Q=new _util.PasswordException(O.message,O.code);break;case"InvalidPDFException":Q=new _util.InvalidPDFException(O.message);break;case"MissingPDFException":Q=new _util.MissingPDFException(O.message);break;case"UnexpectedResponseException":Q=new _util.UnexpectedResponseException(O.message,O.status);break;case"UnknownErrorException":Q=new _util.UnknownErrorException(O.message,O.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}B._capability.reject(Q)}),b.on("PasswordRequest",O=>{if(gt(this,T,new _util.PromiseCapability),B.onPassword){const Q=nt=>{nt instanceof Error?r(this,T).reject(nt):r(this,T).resolve({password:nt})};try{B.onPassword(Q,O.code)}catch(nt){r(this,T).reject(nt)}}else r(this,T).reject(new _util.PasswordException(O.message,O.code));return r(this,T).promise}),b.on("DataLoaded",O=>{var Q;(Q=B.onProgress)==null||Q.call(B,{loaded:O.length,total:O.length}),this.downloadInfoCapability.resolve(O)}),b.on("StartRenderPage",O=>{if(this.destroyed)return;r(this,x).get(O.pageIndex)._startRenderPage(O.transparency,O.cacheKey)}),b.on("commonobj",([O,Q,nt])=>{var U;if(!this.destroyed&&!this.commonObjs.has(O))switch(Q){case"Font":const ot=this._params;if("error"in nt){const X=nt.error;(0,_util.warn)(`Error during font loading: ${X}`),this.commonObjs.resolve(O,X);break}const pt=ot.pdfBug&&((U=globalThis.FontInspector)!=null&&U.enabled)?(X,yt)=>globalThis.FontInspector.fontAdded(X,yt):null,mt=new _font_loader.FontFaceObject(nt,{isEvalSupported:ot.isEvalSupported,disableFontFace:ot.disableFontFace,ignoreErrors:ot.ignoreErrors,inspectFont:pt});this.fontLoader.bind(mt).catch(X=>b.sendWithPromise("FontFallback",{id:O})).finally(()=>{!ot.fontExtraProperties&&mt.data&&(mt.data=null),this.commonObjs.resolve(O,mt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(O,nt);break;default:throw new Error(`Got unknown common object type ${Q}`)}}),b.on("obj",([O,Q,nt,U])=>{var pt;if(this.destroyed)return;const ot=r(this,x).get(Q);if(!ot.objs.has(O))switch(nt){case"Image":if(ot.objs.resolve(O,U),U){let mt;if(U.bitmap){const{width:X,height:yt}=U;mt=X*yt*4}else mt=((pt=U.data)==null?void 0:pt.length)||0;mt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ot._maybeCleanupAfterRender=!0)}break;case"Pattern":ot.objs.resolve(O,U);break;default:throw new Error(`Got unknown object type ${nt}`)}}),b.on("DocProgress",O=>{var Q;this.destroyed||(Q=B.onProgress)==null||Q.call(B,{loaded:O.loaded,total:O.total})}),b.on("FetchBuiltInCMap",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(O):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),b.on("FetchStandardFontData",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(O):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var O;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:b,transfers:B}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:b,filename:((O=this._fullReader)==null?void 0:O.filename)??null},B).finally(()=>{this.annotationStorage.resetModified()})}getPage(b){if(!Number.isInteger(b)||b<=0||b>this._numPages)return Promise.reject(new Error("Invalid page request."));const B=b-1,O=r(this,k).get(B);if(O)return O;const Q=this.messageHandler.sendWithPromise("GetPage",{pageIndex:B}).then(nt=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(B,nt,this,this._params.pdfBug);return r(this,x).set(B,U),U});return r(this,k).set(B,Q),Q}getPageIndex(b){return typeof b!="object"||b===null||!Number.isInteger(b.num)||b.num<0||!Number.isInteger(b.gen)||b.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:b.num,gen:b.gen})}getAnnotations(b,B){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:b,intent:B})}getFieldObjects(){return it(this,S,Te).call(this,"GetFieldObjects")}hasJSActions(){return it(this,S,Te).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(b){return typeof b!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:b})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return it(this,S,Te).call(this,"GetDocJSActions")}getPageJSActions(b){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:b})}getStructTree(b){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:b})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(b=>new _optional_content_config.OptionalContentConfig(b))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const b="GetMetadata",B=r(this,R).get(b);if(B)return B;const O=this.messageHandler.sendWithPromise(b,null).then(Q=>{var nt,U;return{info:Q[0],metadata:Q[1]?new _metadata.Metadata(Q[1]):null,contentDispositionFilename:((nt=this._fullReader)==null?void 0:nt.filename)??null,contentLength:((U=this._fullReader)==null?void 0:U.contentLength)??null}});return r(this,R).set(b,O),O}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(b=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const B of r(this,x).values())if(!B.cleanup())throw new Error(`startCleanup: Page ${B.pageNumber} is currently rendering.`);this.commonObjs.clear(),b||this.fontLoader.clear(),r(this,R).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:b,enableXfa:B}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:b,enableXfa:B})}}R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakSet,Te=function(b,B=null){const O=r(this,R).get(b);if(O)return O;const Q=this.messageHandler.sendWithPromise(b,B);return r(this,R).set(b,Q),Q};class PDFObjects{constructor(){G(this,M);G(this,I,Object.create(null))}get(b,B=null){if(B){const Q=it(this,M,Ue).call(this,b);return Q.capability.promise.then(()=>B(Q.data)),null}const O=r(this,I)[b];if(!(O!=null&&O.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${b}.`);return O.data}has(b){const B=r(this,I)[b];return(B==null?void 0:B.capability.settled)||!1}resolve(b,B=null){const O=it(this,M,Ue).call(this,b);O.data=B,O.capability.resolve()}clear(){var b;for(const B in r(this,I)){const{data:O}=r(this,I)[B];(b=O==null?void 0:O.bitmap)==null||b.close()}gt(this,I,Object.create(null))}}I=new WeakMap,M=new WeakSet,Ue=function(b){var B;return(B=r(this,I))[b]||(B[b]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(b){G(this,m,null);gt(this,m,b),this.onContinue=null}get promise(){return r(this,m).capability.promise}cancel(b=0){r(this,m).cancel(null,b)}get separateAnnots(){const{separateAnnots:b}=r(this,m).operatorList;if(!b)return!1;const{annotationCanvasMap:B}=r(this,m);return b.form||b.canvas&&(B==null?void 0:B.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const H=class H{constructor({callback:b,params:B,objs:O,commonObjs:Q,annotationCanvasMap:nt,operatorList:U,pageIndex:ot,canvasFactory:pt,filterFactory:mt,useRequestAnimationFrame:X=!1,pdfBug:yt=!1,pageColors:wt=null}){this.callback=b,this.params=B,this.objs=O,this.commonObjs=Q,this.annotationCanvasMap=nt,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=ot,this.canvasFactory=pt,this.filterFactory=mt,this._pdfBug=yt,this.pageColors=wt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=X===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=B.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:b=!1,optionalContentConfig:B}){var ot,pt;if(this.cancelled)return;if(this._canvas){if(r(H,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(H,A).add(this._canvas)}this._pdfBug&&((ot=globalThis.StepperManager)!=null&&ot.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:O,viewport:Q,transform:nt,background:U}=this.params;this.gfx=new _canvas.CanvasGraphics(O,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:B},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:nt,viewport:Q,transparency:b,background:U}),this.operatorListIdx=0,this.graphicsReady=!0,(pt=this.graphicsReadyCallback)==null||pt.call(this)}cancel(b=null,B=0){var O;this.running=!1,this.cancelled=!0,(O=this.gfx)==null||O.endDrawing(),r(H,A).delete(this._canvas),this.callback(b||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,B))}operatorListChanged(){var b;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(b=this.stepper)==null||b.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r(H,A).delete(this._canvas),this.callback())))}};A=new WeakMap,G(H,A,new WeakSet);let InternalRenderTask=H;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{var g,l,w,vs,x;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var s=n(1),i=n(4),a=n(8);const o=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=o;class _{constructor(){G(this,w);G(this,g,!1);G(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(T,S){const P=r(this,l).get(T);return P===void 0?S:Object.assign(S,P)}getRawValue(T){return r(this,l).get(T)}remove(T){if(r(this,l).delete(T),r(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const S of r(this,l).values())if(S instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(T,S){const P=r(this,l).get(T);let I=!1;if(P!==void 0)for(const[M,C]of Object.entries(S))P[M]!==C&&(I=!0,P[M]=C);else I=!0,r(this,l).set(T,S);I&&it(this,w,vs).call(this),S instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(S.constructor._type)}has(T){return r(this,l).has(T)}getAll(){return r(this,l).size>0?(0,s.objectFromMap)(r(this,l)):null}setAll(T){for(const[S,P]of Object.entries(T))this.setValue(S,P)}get size(){return r(this,l).size}resetModified(){r(this,g)&&(gt(this,g,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(r(this,l).size===0)return o;const T=new Map,S=new a.MurmurHash3_64,P=[],I=Object.create(null);let M=!1;for(const[C,m]of r(this,l)){const A=m instanceof i.AnnotationEditor?m.serialize(!1,I):m;A&&(T.set(C,A),S.update(`${C}:${JSON.stringify(A)}`),M||(M=!!A.bitmap))}if(M)for(const C of T.values())C.bitmap&&P.push(C.bitmap);return T.size>0?{map:T,hash:S.hexdigest(),transfers:P}:o}}g=new WeakMap,l=new WeakMap,w=new WeakSet,vs=function(){r(this,g)||(gt(this,g,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=_;class d extends _{constructor(S){super();G(this,x,void 0);const{map:P,hash:I,transfers:M}=S.serializable,C=structuredClone(P,M?{transfer:M}:null);gt(this,x,{map:C,hash:I,transfers:M})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,x)}}x=new WeakMap,e.PrintAnnotationStorage=d},(t,e,n)=>{var d,g,l,w,R,x,k,T,S,P,I,M,C,m,A,He,F,Ve,B,We,Q,$e,U,Ss,pt,Es,X,ws,wt,ze,kt,xs;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var s=n(5),i=n(1),a=n(6);const h=class h{constructor(u){G(this,A);G(this,F);G(this,Q);G(this,U);G(this,pt);G(this,X);G(this,wt);G(this,kt);G(this,d,"");G(this,g,!1);G(this,l,null);G(this,w,null);G(this,R,null);G(this,x,!1);G(this,k,null);G(this,T,this.focusin.bind(this));G(this,S,this.focusout.bind(this));G(this,P,!1);G(this,I,!1);G(this,M,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);G(this,C,!1);G(this,m,h._zIndex++);this.constructor===h&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;const{rotation:y,rawDims:{pageWidth:E,pageHeight:N,pageX:V,pageY:Y}}=this.parent.viewport;this.rotation=y,this.pageRotation=(360+y-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[E,N],this.pageTranslation=[V,Y];const[dt,v]=this.parentDimensions;this.x=u.x/dt,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){const y=new _({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});y.annotationElementId=u.annotationElementId,y.deleted=!0,y._uiManager.addToAnnotationStorage(y)}static initialize(u,y=null){if(h._l10nPromise||(h._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,u.get(N)]))),y!=null&&y.strings)for(const N of y.strings)h._l10nPromise.set(N,u.get(N));if(h._borderLineWidth!==-1)return;const E=getComputedStyle(document.documentElement);h._borderLineWidth=parseFloat(E.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,y){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,y){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return r(this,C)}set _isDraggable(u){var y;gt(this,C,u),(y=this.div)==null||y.classList.toggle("draggable",u)}center(){const[u,y]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*y/(u*2),this.y+=this.width*u/(y*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*y/(u*2),this.y-=this.width*u/(y*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,m)}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(r(this,P)?gt(this,P,!1):this.parent.setSelected(this))}focusout(u){var E;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const y=u.relatedTarget;y!=null&&y.closest(`#${this.id}`)||(u.preventDefault(),(E=this.parent)!=null&&E.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,y,E,N){const[V,Y]=this.parentDimensions;[E,N]=this.screenToPageTranslation(E,N),this.x=(u+E)/V,this.y=(y+N)/Y,this.fixAndSetPosition()}translate(u,y){it(this,A,He).call(this,this.parentDimensions,u,y)}translateInPage(u,y){it(this,A,He).call(this,this.pageDimensions,u,y),this.div.scrollIntoView({block:"nearest"})}drag(u,y){const[E,N]=this.parentDimensions;if(this.x+=u/E,this.y+=y/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:D,y:W}=this.div.getBoundingClientRect();this.parent.findNewParent(this,D,W)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:V,y:Y}=this;const[dt,v]=it(this,F,Ve).call(this);V+=dt,Y+=v,this.div.style.left=`${(100*V).toFixed(2)}%`,this.div.style.top=`${(100*Y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[u,y]=this.pageDimensions;let{x:E,y:N,width:V,height:Y}=this;switch(V*=u,Y*=y,E*=u,N*=y,this.rotation){case 0:E=Math.max(0,Math.min(u-V,E)),N=Math.max(0,Math.min(y-Y,N));break;case 90:E=Math.max(0,Math.min(u-Y,E)),N=Math.min(y,Math.max(V,N));break;case 180:E=Math.min(u,Math.max(V,E)),N=Math.min(y,Math.max(Y,N));break;case 270:E=Math.min(u,Math.max(Y,E)),N=Math.max(0,Math.min(y-V,N));break}this.x=E/=u,this.y=N/=y;const[dt,v]=it(this,F,Ve).call(this);E+=dt,N+=v;const{style:D}=this.div;D.left=`${(100*E).toFixed(2)}%`,D.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(u,y){var E;return it(E=h,B,We).call(E,u,y,this.parentRotation)}pageTranslationToScreen(u,y){var E;return it(E=h,B,We).call(E,u,y,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:u,pageDimensions:[y,E]}=this,N=y*u,V=E*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(V)]:[N,V]}setDims(u,y){var V;const[E,N]=this.parentDimensions;this.div.style.width=`${(100*u/E).toFixed(2)}%`,r(this,x)||(this.div.style.height=`${(100*y/N).toFixed(2)}%`),(V=r(this,l))==null||V.classList.toggle("small",u<h.SMALL_EDITOR_SIZE||y<h.SMALL_EDITOR_SIZE)}fixDims(){const{style:u}=this.div,{height:y,width:E}=u,N=E.endsWith("%"),V=!r(this,x)&&y.endsWith("%");if(N&&V)return;const[Y,dt]=this.parentDimensions;N||(u.width=`${(100*parseFloat(E)/Y).toFixed(2)}%`),!r(this,x)&&!V&&(u.height=`${(100*parseFloat(y)/dt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(r(this,l))return;const u=gt(this,l,document.createElement("button"));u.className="altText";const y=await h._l10nPromise.get("editor_alt_text_button_label");u.textContent=y,u.setAttribute("aria-label",y),u.tabIndex="0",u.addEventListener("contextmenu",a.noContextMenu),u.addEventListener("pointerdown",E=>E.stopPropagation()),u.addEventListener("click",E=>{E.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",E=>{E.target===u&&E.key==="Enter"&&(E.preventDefault(),this._uiManager.editAltText(this))}),it(this,wt,ze).call(this),this.div.append(u),h.SMALL_EDITOR_SIZE||(h.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:r(this,d),decorative:r(this,g)}}set altTextData({altText:u,decorative:y}){r(this,d)===u&&r(this,g)===y||(gt(this,d,u),gt(this,g,y),it(this,wt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,T)),this.div.addEventListener("focusout",r(this,S));const[u,y]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*y/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/y).toFixed(2)}%`);const[E,N]=this.getInitialTranslation();return this.translate(E,N),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){const{isMac:y}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&y){u.preventDefault();return}gt(this,P,!0),it(this,kt,xs).call(this,u)}moveInDOM(){var u;(u=this.parent)==null||u.moveEditorInDOM(this)}_setParentAndPosition(u,y,E){u.changeParent(this),this.x=y,this.y=E,this.fixAndSetPosition()}getRect(u,y){const E=this.parentScale,[N,V]=this.pageDimensions,[Y,dt]=this.pageTranslation,v=u/E,D=y/E,W=this.x*N,rt=this.y*V,K=this.width*N,ut=this.height*V;switch(this.rotation){case 0:return[W+v+Y,V-rt-D-ut+dt,W+v+K+Y,V-rt-D+dt];case 90:return[W+D+Y,V-rt+v+dt,W+D+ut+Y,V-rt+v+K+dt];case 180:return[W-v-K+Y,V-rt+D+dt,W-v+Y,V-rt+D+ut+dt];case 270:return[W-D-ut+Y,V-rt-v-K+dt,W-D+Y,V-rt-v+dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,y){const[E,N,V,Y]=u,dt=V-E,v=Y-N;switch(this.rotation){case 0:return[E,y-Y,dt,v];case 90:return[E,y-N,v,dt];case 180:return[V,y-N,dt,v];case 270:return[V,y-Y,v,dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,M,!0)}disableEditMode(){gt(this,M,!1)}isInEditMode(){return r(this,M)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var u,y;(u=this.div)==null||u.addEventListener("focusin",r(this,T)),(y=this.div)==null||y.addEventListener("focusout",r(this,S))}serialize(u=!1,y=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,y,E){const N=new this.prototype.constructor({parent:y,id:y.getNextId(),uiManager:E});N.rotation=u.rotation;const[V,Y]=N.pageDimensions,[dt,v,D,W]=N.getRectInCurrentCoords(u.rect,Y);return N.x=dt/V,N.y=v/Y,N.width=D/V,N.height=W/Y,N}remove(){var u;this.div.removeEventListener("focusin",r(this,T)),this.div.removeEventListener("focusout",r(this,S)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(u=r(this,l))==null||u.remove(),gt(this,l,null),gt(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(it(this,U,Ss).call(this),r(this,k).classList.remove("hidden"))}select(){var u;this.makeResizable(),(u=this.div)==null||u.classList.add("selectedEditor")}unselect(){var u,y,E;(u=r(this,k))==null||u.classList.add("hidden"),(y=this.div)==null||y.classList.remove("selectedEditor"),(E=this.div)!=null&&E.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,y){}disableEditing(){r(this,l)&&(r(this,l).hidden=!0)}enableEditing(){r(this,l)&&(r(this,l).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,I)}set isEditing(u){gt(this,I,u),this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,y){gt(this,x,!0);const E=u/y,{style:N}=this.div;N.aspectRatio=E,N.height="auto"}static get MIN_SIZE(){return 16}};d=new WeakMap,g=new WeakMap,l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,I=new WeakMap,M=new WeakMap,C=new WeakMap,m=new WeakMap,A=new WeakSet,He=function([u,y],E,N){[E,N]=this.screenToPageTranslation(E,N),this.x+=E/u,this.y+=N/y,this.fixAndSetPosition()},F=new WeakSet,Ve=function(){const[u,y]=this.parentDimensions,{_borderLineWidth:E}=h,N=E/u,V=E/y;switch(this.rotation){case 90:return[-N,V];case 180:return[N,V];case 270:return[N,-V];default:return[-N,-V]}},B=new WeakSet,We=function(u,y,E){switch(E){case 90:return[y,-u];case 180:return[-u,-y];case 270:return[-y,u];default:return[u,y]}},Q=new WeakSet,$e=function(u){switch(u){case 90:{const[y,E]=this.pageDimensions;return[0,-y/E,E/y,0]}case 180:return[-1,0,0,-1];case 270:{const[y,E]=this.pageDimensions;return[0,y/E,-E/y,0]}default:return[1,0,0,1]}},U=new WeakSet,Ss=function(){if(r(this,k))return;gt(this,k,document.createElement("div")),r(this,k).classList.add("resizers");const u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const y of u){const E=document.createElement("div");r(this,k).append(E),E.classList.add("resizer",y),E.addEventListener("pointerdown",it(this,pt,Es).bind(this,y)),E.addEventListener("contextmenu",a.noContextMenu)}this.div.prepend(r(this,k))},pt=new WeakSet,Es=function(u,y){y.preventDefault();const{isMac:E}=i.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&E)return;const N=it(this,X,ws).bind(this,u),V=this._isDraggable;this._isDraggable=!1;const Y={passive:!0,capture:!0};window.addEventListener("pointermove",N,Y);const dt=this.x,v=this.y,D=this.width,W=this.height,rt=this.parent.div.style.cursor,K=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(y.target).cursor;const ut=()=>{this._isDraggable=V,window.removeEventListener("pointerup",ut),window.removeEventListener("blur",ut),window.removeEventListener("pointermove",N,Y),this.parent.div.style.cursor=rt,this.div.style.cursor=K;const St=this.x,ft=this.y,_t=this.width,Z=this.height;St===dt&&ft===v&&_t===D&&Z===W||this.addCommands({cmd:()=>{this.width=_t,this.height=Z,this.x=St,this.y=ft;const[J,q]=this.parentDimensions;this.setDims(J*_t,q*Z),this.fixAndSetPosition()},undo:()=>{this.width=D,this.height=W,this.x=dt,this.y=v;const[J,q]=this.parentDimensions;this.setDims(J*D,q*W),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",ut),window.addEventListener("blur",ut)},X=new WeakSet,ws=function(u,y){const[E,N]=this.parentDimensions,V=this.x,Y=this.y,dt=this.width,v=this.height,D=h.MIN_SIZE/E,W=h.MIN_SIZE/N,rt=xt=>Math.round(xt*1e4)/1e4,K=it(this,Q,$e).call(this,this.rotation),ut=(xt,Ct)=>[K[0]*xt+K[2]*Ct,K[1]*xt+K[3]*Ct],St=it(this,Q,$e).call(this,360-this.rotation),ft=(xt,Ct)=>[St[0]*xt+St[2]*Ct,St[1]*xt+St[3]*Ct];let _t,Z,J=!1,q=!1;switch(u){case"topLeft":J=!0,_t=(xt,Ct)=>[0,0],Z=(xt,Ct)=>[xt,Ct];break;case"topMiddle":_t=(xt,Ct)=>[xt/2,0],Z=(xt,Ct)=>[xt/2,Ct];break;case"topRight":J=!0,_t=(xt,Ct)=>[xt,0],Z=(xt,Ct)=>[0,Ct];break;case"middleRight":q=!0,_t=(xt,Ct)=>[xt,Ct/2],Z=(xt,Ct)=>[0,Ct/2];break;case"bottomRight":J=!0,_t=(xt,Ct)=>[xt,Ct],Z=(xt,Ct)=>[0,0];break;case"bottomMiddle":_t=(xt,Ct)=>[xt/2,Ct],Z=(xt,Ct)=>[xt/2,0];break;case"bottomLeft":J=!0,_t=(xt,Ct)=>[0,Ct],Z=(xt,Ct)=>[xt,0];break;case"middleLeft":q=!0,_t=(xt,Ct)=>[0,Ct/2],Z=(xt,Ct)=>[xt,Ct/2];break}const ct=_t(dt,v),vt=Z(dt,v);let Et=ut(...vt);const Dt=rt(V+Et[0]),Lt=rt(Y+Et[1]);let jt=1,$t=1,[Gt,Wt]=this.screenToPageTranslation(y.movementX,y.movementY);if([Gt,Wt]=ft(Gt/E,Wt/N),J){const xt=Math.hypot(dt,v);jt=$t=Math.max(Math.min(Math.hypot(vt[0]-ct[0]-Gt,vt[1]-ct[1]-Wt)/xt,1/dt,1/v),D/dt,W/v)}else q?jt=Math.max(D,Math.min(1,Math.abs(vt[0]-ct[0]-Gt)))/dt:$t=Math.max(W,Math.min(1,Math.abs(vt[1]-ct[1]-Wt)))/v;const Yt=rt(dt*jt),At=rt(v*$t);Et=ut(...Z(Yt,At));const at=Dt-Et[0],st=Lt-Et[1];this.width=Yt,this.height=At,this.x=at,this.y=st,this.setDims(E*Yt,N*At),this.fixAndSetPosition()},wt=new WeakSet,ze=async function(){var E;const u=r(this,l);if(!u)return;if(!r(this,d)&&!r(this,g)){u.classList.remove("done"),(E=r(this,w))==null||E.remove();return}h._l10nPromise.get("editor_alt_text_edit_button_label").then(N=>{u.setAttribute("aria-label",N)});let y=r(this,w);if(!y){gt(this,w,y=document.createElement("span")),y.className="tooltip",y.setAttribute("role","tooltip");const N=y.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",N);const V=100;u.addEventListener("mouseenter",()=>{gt(this,R,setTimeout(()=>{gt(this,R,null),r(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},V))}),u.addEventListener("mouseleave",()=>{var Y;clearTimeout(r(this,R)),gt(this,R,null),(Y=r(this,w))==null||Y.classList.remove("show")})}u.classList.add("done"),y.innerText=r(this,g)?await h._l10nPromise.get("editor_alt_text_decorative_tooltip"):r(this,d),y.parentNode||u.append(y)},kt=new WeakSet,xs=function(u){if(!this._isDraggable)return;const y=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let E,N;y&&(E={passive:!0,capture:!0},N=Y=>{const[dt,v]=this.screenToPageTranslation(Y.movementX,Y.movementY);this._uiManager.dragSelectedEditors(dt,v)},window.addEventListener("pointermove",N,E));const V=()=>{if(window.removeEventListener("pointerup",V),window.removeEventListener("blur",V),y&&window.removeEventListener("pointermove",N,E),gt(this,P,!1),!this._uiManager.endDragSession()){const{isMac:Y}=i.FeatureTest.platform;u.ctrlKey&&!Y||u.shiftKey||u.metaKey&&Y?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",V),window.addEventListener("blur",V)},G(h,B),ne(h,"_borderLineWidth",-1),ne(h,"_colorManager",new s.ColorManager),ne(h,"_zIndex",1),ne(h,"SMALL_EDITOR_SIZE",0);let o=h;e.AnnotationEditor=o;class _ extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var x,k,T,S,P,Ge,C,m,A,H,F,Ts,O,Q,nt,U,ot,pt,mt,X,yt,wt,Rt,kt,j,h,f,u,y,E,N,V,Y,dt,v,D,W,rt,K,ut,St,ft,_t,Z,J,q,ct,Cs,Et,qe,Lt,Xe,$t,Ce,Wt,Ye,At,Ke,st,oe,Ct,_e,ee,Ps,Mt,Rs,Ft,Je,zt,ye,Pt,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=a,e.opacityToHex=o;var s=n(1),i=n(6);function a($,c,L){for(const z of L)c.addEventListener(z,$[z].bind($))}function o($){return Math.round(Math.min(255,Math.max(1,255*$))).toString(16).padStart(2,"0")}class _{constructor(){G(this,x,0)}getId(){return`${s.AnnotationEditorPrefix}${be(this,x)._++}`}}x=new WeakMap;const M=class M{constructor(){G(this,P);G(this,k,(0,s.getUuid)());G(this,T,0);G(this,S,null)}static get _isSVGFittingCanvas(){const c='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',z=new OffscreenCanvas(1,3).getContext("2d"),et=new Image;et.src=c;const lt=et.decode().then(()=>(z.drawImage(et,0,0,1,1,0,0,1,3),new Uint32Array(z.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",lt)}async getFromFile(c){const{lastModified:L,name:z,size:et,type:lt}=c;return it(this,P,Ge).call(this,`${L}_${z}_${et}_${lt}`,c)}async getFromUrl(c){return it(this,P,Ge).call(this,c,c)}async getFromId(c){r(this,S)||gt(this,S,new Map);const L=r(this,S).get(c);return L?L.bitmap?(L.refCounter+=1,L):L.file?this.getFromFile(L.file):this.getFromUrl(L.url):null}getSvgUrl(c){const L=r(this,S).get(c);return L!=null&&L.isSvg?L.svgUrl:null}deleteId(c){r(this,S)||gt(this,S,new Map);const L=r(this,S).get(c);L&&(L.refCounter-=1,L.refCounter===0&&(L.bitmap=null))}isValidId(c){return c.startsWith(`image_${r(this,k)}_`)}};k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakSet,Ge=async function(c,L){r(this,S)||gt(this,S,new Map);let z=r(this,S).get(c);if(z===null)return null;if(z!=null&&z.bitmap)return z.refCounter+=1,z;try{z||(z={bitmap:null,id:`image_${r(this,k)}_${be(this,T)._++}`,refCounter:0,isSvg:!1});let et;if(typeof L=="string"){z.url=L;const lt=await fetch(L);if(!lt.ok)throw new Error(lt.statusText);et=await lt.blob()}else et=z.file=L;if(et.type==="image/svg+xml"){const lt=M._isSVGFittingCanvas,bt=new FileReader,Tt=new Image,Ot=new Promise((It,Xt)=>{Tt.onload=()=>{z.bitmap=Tt,z.isSvg=!0,It()},bt.onload=async()=>{const Nt=z.svgUrl=bt.result;Tt.src=await lt?`${Nt}#svgView(preserveAspectRatio(none))`:Nt},Tt.onerror=bt.onerror=Xt});bt.readAsDataURL(et),await Ot}else z.bitmap=await createImageBitmap(et);z.refCounter=1}catch(et){console.error(et),z=null}return r(this,S).set(c,z),z&&r(this,S).set(z.id,z),z};let d=M;class g{constructor(c=128){G(this,C,[]);G(this,m,!1);G(this,A,void 0);G(this,H,-1);gt(this,A,c)}add({cmd:c,undo:L,mustExec:z,type:et=NaN,overwriteIfSameType:lt=!1,keepUndo:bt=!1}){if(z&&c(),r(this,m))return;const Tt={cmd:c,undo:L,type:et};if(r(this,H)===-1){r(this,C).length>0&&(r(this,C).length=0),gt(this,H,0),r(this,C).push(Tt);return}if(lt&&r(this,C)[r(this,H)].type===et){bt&&(Tt.undo=r(this,C)[r(this,H)].undo),r(this,C)[r(this,H)]=Tt;return}const Ot=r(this,H)+1;Ot===r(this,A)?r(this,C).splice(0,1):(gt(this,H,Ot),Ot<r(this,C).length&&r(this,C).splice(Ot)),r(this,C).push(Tt)}undo(){r(this,H)!==-1&&(gt(this,m,!0),r(this,C)[r(this,H)].undo(),gt(this,m,!1),gt(this,H,r(this,H)-1))}redo(){r(this,H)<r(this,C).length-1&&(gt(this,H,r(this,H)+1),gt(this,m,!0),r(this,C)[r(this,H)].cmd(),gt(this,m,!1))}hasSomethingToUndo(){return r(this,H)!==-1}hasSomethingToRedo(){return r(this,H)<r(this,C).length-1}destroy(){gt(this,C,null)}}C=new WeakMap,m=new WeakMap,A=new WeakMap,H=new WeakMap,e.CommandManager=g;class l{constructor(c){G(this,F);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:L}=s.FeatureTest.platform;for(const[z,et,lt={}]of c)for(const bt of z){const Tt=bt.startsWith("mac+");L&&Tt?(this.callbacks.set(bt.slice(4),{callback:et,options:lt}),this.allKeys.add(bt.split("+").at(-1))):!L&&!Tt&&(this.callbacks.set(bt,{callback:et,options:lt}),this.allKeys.add(bt.split("+").at(-1)))}}exec(c,L){if(!this.allKeys.has(L.key))return;const z=this.callbacks.get(it(this,F,Ts).call(this,L));if(!z)return;const{callback:et,options:{bubbles:lt=!1,args:bt=[],checker:Tt=null}}=z;Tt&&!Tt(c,L)||(et.bind(c,...bt)(),lt||(L.stopPropagation(),L.preventDefault()))}}F=new WeakSet,Ts=function(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const L=this.buffer.join("+");return this.buffer.length=0,L},e.KeyboardManager=l;const B=class B{get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(c),(0,s.shadow)(this,"_colors",c)}convert(c){const L=(0,i.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return L;for(const[z,et]of this._colors)if(et.every((lt,bt)=>lt===L[bt]))return B._colorsMapping.get(z);return L}getHexCode(c){const L=this._colors.get(c);return L?s.Util.makeHexColor(...L):c}};ne(B,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=B;e.ColorManager=w;const Ut=class Ut{constructor(c,L,z,et,lt,bt){G(this,ct);G(this,Et);G(this,Lt);G(this,$t);G(this,Wt);G(this,At);G(this,st);G(this,Ct);G(this,ee);G(this,Mt);G(this,Ft);G(this,zt);G(this,Pt);G(this,O,null);G(this,Q,new Map);G(this,nt,new Map);G(this,U,null);G(this,ot,null);G(this,pt,new g);G(this,mt,0);G(this,X,new Set);G(this,yt,null);G(this,wt,null);G(this,Rt,new Set);G(this,kt,null);G(this,j,new _);G(this,h,!1);G(this,f,!1);G(this,u,null);G(this,y,s.AnnotationEditorType.NONE);G(this,E,new Set);G(this,N,null);G(this,V,this.blur.bind(this));G(this,Y,this.focus.bind(this));G(this,dt,this.copy.bind(this));G(this,v,this.cut.bind(this));G(this,D,this.paste.bind(this));G(this,W,this.keydown.bind(this));G(this,rt,this.onEditingAction.bind(this));G(this,K,this.onPageChanging.bind(this));G(this,ut,this.onScaleChanging.bind(this));G(this,St,this.onRotationChanging.bind(this));G(this,ft,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});G(this,_t,[0,0]);G(this,Z,null);G(this,J,null);G(this,q,null);gt(this,J,c),gt(this,q,L),gt(this,U,z),this._eventBus=et,this._eventBus._on("editingaction",r(this,rt)),this._eventBus._on("pagechanging",r(this,K)),this._eventBus._on("scalechanging",r(this,ut)),this._eventBus._on("rotationchanging",r(this,St)),gt(this,ot,lt.annotationStorage),gt(this,kt,lt.filterFactory),gt(this,N,bt),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const c=Ut.prototype,L=lt=>{const{activeElement:bt}=document;return bt&&r(lt,J).contains(bt)&&lt.hasSomethingToControl()},z=this.TRANSLATE_SMALL,et=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],c.selectAll],[["ctrl+z","mac+meta+z"],c.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],c.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],c.delete],[["Escape","mac+Escape"],c.unselectAll],[["ArrowLeft","mac+ArrowLeft"],c.translateSelectedEditors,{args:[-z,0],checker:L}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],c.translateSelectedEditors,{args:[-et,0],checker:L}],[["ArrowRight","mac+ArrowRight"],c.translateSelectedEditors,{args:[z,0],checker:L}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],c.translateSelectedEditors,{args:[et,0],checker:L}],[["ArrowUp","mac+ArrowUp"],c.translateSelectedEditors,{args:[0,-z],checker:L}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],c.translateSelectedEditors,{args:[0,-et],checker:L}],[["ArrowDown","mac+ArrowDown"],c.translateSelectedEditors,{args:[0,z],checker:L}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],c.translateSelectedEditors,{args:[0,et],checker:L}]]))}destroy(){it(this,$t,Ce).call(this),it(this,Et,qe).call(this),this._eventBus._off("editingaction",r(this,rt)),this._eventBus._off("pagechanging",r(this,K)),this._eventBus._off("scalechanging",r(this,ut)),this._eventBus._off("rotationchanging",r(this,St));for(const c of r(this,nt).values())c.destroy();r(this,nt).clear(),r(this,Q).clear(),r(this,Rt).clear(),gt(this,O,null),r(this,E).clear(),r(this,pt).destroy(),r(this,U).destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",r(this,N)?r(this,kt).addHCMFilter(r(this,N).foreground,r(this,N).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(r(this,J)).direction)}editAltText(c){var L;(L=r(this,U))==null||L.editAltText(this,c)}onPageChanging({pageNumber:c}){gt(this,mt,c-1)}focusMainContainer(){r(this,J).focus()}findParent(c,L){for(const z of r(this,nt).values()){const{x:et,y:lt,width:bt,height:Tt}=z.div.getBoundingClientRect();if(c>=et&&c<=et+bt&&L>=lt&&L<=lt+Tt)return z}return null}disableUserSelect(c=!1){r(this,q).classList.toggle("noUserSelect",c)}addShouldRescale(c){r(this,Rt).add(c)}removeShouldRescale(c){r(this,Rt).delete(c)}onScaleChanging({scale:c}){this.commitOrRemove(),this.viewParameters.realScale=c*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const L of r(this,Rt))L.onScaleChanging()}onRotationChanging({pagesRotation:c}){this.commitOrRemove(),this.viewParameters.rotation=c}addToAnnotationStorage(c){!c.isEmpty()&&r(this,ot)&&!r(this,ot).has(c.id)&&r(this,ot).setValue(c.id,c)}blur(){if(!this.hasSelection)return;const{activeElement:c}=document;for(const L of r(this,E))if(L.div.contains(c)){gt(this,u,[L,c]),L._focusEventsAllowed=!1;break}}focus(){if(!r(this,u))return;const[c,L]=r(this,u);gt(this,u,null),L.addEventListener("focusin",()=>{c._focusEventsAllowed=!0},{once:!0}),L.focus()}addEditListeners(){it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this)}removeEditListeners(){it(this,$t,Ce).call(this),it(this,At,Ke).call(this)}copy(c){var z;if(c.preventDefault(),(z=r(this,O))==null||z.commitOrRemove(),!this.hasSelection)return;const L=[];for(const et of r(this,E)){const lt=et.serialize(!0);lt&&L.push(lt)}L.length!==0&&c.clipboardData.setData("application/pdfjs",JSON.stringify(L))}cut(c){this.copy(c),this.delete()}paste(c){c.preventDefault();const{clipboardData:L}=c;for(const lt of L.items)for(const bt of r(this,wt))if(bt.isHandlingMimeForPasting(lt.type)){bt.paste(lt,this.currentLayer);return}let z=L.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(lt){(0,s.warn)(`paste: "${lt.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const et=this.currentLayer;try{const lt=[];for(const Ot of z){const It=et.deserialize(Ot);if(!It)return;lt.push(It)}const bt=()=>{for(const Ot of lt)it(this,Ft,Je).call(this,Ot);it(this,Pt,Qe).call(this,lt)},Tt=()=>{for(const Ot of lt)Ot.remove()};this.addCommands({cmd:bt,undo:Tt,mustExec:!0})}catch(lt){(0,s.warn)(`paste: "${lt.message}".`)}}keydown(c){var L;(L=this.getActive())!=null&&L.shouldGetKeyboardEvents()||Ut._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","delete","selectAll"].includes(c.name)&&this[c.name]()}setEditingState(c){c?(it(this,ct,Cs).call(this),it(this,Lt,Xe).call(this),it(this,Wt,Ye).call(this),it(this,st,oe).call(this,{isEditing:r(this,y)!==s.AnnotationEditorType.NONE,isEmpty:it(this,zt,ye).call(this),hasSomethingToUndo:r(this,pt).hasSomethingToUndo(),hasSomethingToRedo:r(this,pt).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,Et,qe).call(this),it(this,$t,Ce).call(this),it(this,At,Ke).call(this),it(this,st,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(c){if(!r(this,wt)){gt(this,wt,c);for(const L of r(this,wt))it(this,Ct,_e).call(this,L.defaultPropertiesToUpdate)}}getId(){return r(this,j).getId()}get currentLayer(){return r(this,nt).get(r(this,mt))}getLayer(c){return r(this,nt).get(c)}get currentPageIndex(){return r(this,mt)}addLayer(c){r(this,nt).set(c.pageIndex,c),r(this,h)?c.enable():c.disable()}removeLayer(c){r(this,nt).delete(c.pageIndex)}updateMode(c,L=null){if(r(this,y)!==c){if(gt(this,y,c),c===s.AnnotationEditorType.NONE){this.setEditingState(!1),it(this,Mt,Rs).call(this);return}this.setEditingState(!0),it(this,ee,Ps).call(this),this.unselectAll();for(const z of r(this,nt).values())z.updateMode(c);if(L){for(const z of r(this,Q).values())if(z.annotationElementId===L){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(c){c!==r(this,y)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,L){if(r(this,wt)){if(c===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(c);return}for(const z of r(this,E))z.updateParams(c,L);for(const z of r(this,wt))z.updateDefaultParams(c,L)}}enableWaiting(c=!1){if(r(this,f)!==c){gt(this,f,c);for(const L of r(this,nt).values())c?L.disableClick():L.enableClick(),L.div.classList.toggle("waiting",c)}}getEditors(c){const L=[];for(const z of r(this,Q).values())z.pageIndex===c&&L.push(z);return L}getEditor(c){return r(this,Q).get(c)}addEditor(c){r(this,Q).set(c.id,c)}removeEditor(c){var L;r(this,Q).delete(c.id),this.unselect(c),(!c.annotationElementId||!r(this,X).has(c.annotationElementId))&&((L=r(this,ot))==null||L.remove(c.id))}addDeletedAnnotationElement(c){r(this,X).add(c.annotationElementId),c.deleted=!0}isDeletedAnnotationElement(c){return r(this,X).has(c)}removeDeletedAnnotationElement(c){r(this,X).delete(c.annotationElementId),c.deleted=!1}setActiveEditor(c){r(this,O)!==c&&(gt(this,O,c),c&&it(this,Ct,_e).call(this,c.propertiesToUpdate))}toggleSelected(c){if(r(this,E).has(c)){r(this,E).delete(c),c.unselect(),it(this,st,oe).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,E).add(c),c.select(),it(this,Ct,_e).call(this,c.propertiesToUpdate),it(this,st,oe).call(this,{hasSelectedEditor:!0})}setSelected(c){for(const L of r(this,E))L!==c&&L.unselect();r(this,E).clear(),r(this,E).add(c),c.select(),it(this,Ct,_e).call(this,c.propertiesToUpdate),it(this,st,oe).call(this,{hasSelectedEditor:!0})}isSelected(c){return r(this,E).has(c)}unselect(c){c.unselect(),r(this,E).delete(c),it(this,st,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,E).size!==0}undo(){r(this,pt).undo(),it(this,st,oe).call(this,{hasSomethingToUndo:r(this,pt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,zt,ye).call(this)})}redo(){r(this,pt).redo(),it(this,st,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,pt).hasSomethingToRedo(),isEmpty:it(this,zt,ye).call(this)})}addCommands(c){r(this,pt).add(c),it(this,st,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,zt,ye).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const c=[...r(this,E)],L=()=>{for(const et of c)et.remove()},z=()=>{for(const et of c)it(this,Ft,Je).call(this,et)};this.addCommands({cmd:L,undo:z,mustExec:!0})}commitOrRemove(){var c;(c=r(this,O))==null||c.commitOrRemove()}hasSomethingToControl(){return r(this,O)||this.hasSelection}selectAll(){for(const c of r(this,E))c.commit();it(this,Pt,Qe).call(this,r(this,Q).values())}unselectAll(){if(r(this,O)){r(this,O).commitOrRemove();return}if(this.hasSelection){for(const c of r(this,E))c.unselect();r(this,E).clear(),it(this,st,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(c,L,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;r(this,_t)[0]+=c,r(this,_t)[1]+=L;const[et,lt]=r(this,_t),bt=[...r(this,E)],Tt=1e3;r(this,Z)&&clearTimeout(r(this,Z)),gt(this,Z,setTimeout(()=>{gt(this,Z,null),r(this,_t)[0]=r(this,_t)[1]=0,this.addCommands({cmd:()=>{for(const Ot of bt)r(this,Q).has(Ot.id)&&Ot.translateInPage(et,lt)},undo:()=>{for(const Ot of bt)r(this,Q).has(Ot.id)&&Ot.translateInPage(-et,-lt)},mustExec:!1})},Tt));for(const Ot of bt)Ot.translateInPage(c,L)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),gt(this,yt,new Map);for(const c of r(this,E))r(this,yt).set(c,{savedX:c.x,savedY:c.y,savedPageIndex:c.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!r(this,yt))return!1;this.disableUserSelect(!1);const c=r(this,yt);gt(this,yt,null);let L=!1;for(const[{x:et,y:lt,pageIndex:bt},Tt]of c)Tt.newX=et,Tt.newY=lt,Tt.newPageIndex=bt,L||(L=et!==Tt.savedX||lt!==Tt.savedY||bt!==Tt.savedPageIndex);if(!L)return!1;const z=(et,lt,bt,Tt)=>{if(r(this,Q).has(et.id)){const Ot=r(this,nt).get(Tt);Ot?et._setParentAndPosition(Ot,lt,bt):(et.pageIndex=Tt,et.x=lt,et.y=bt)}};return this.addCommands({cmd:()=>{for(const[et,{newX:lt,newY:bt,newPageIndex:Tt}]of c)z(et,lt,bt,Tt)},undo:()=>{for(const[et,{savedX:lt,savedY:bt,savedPageIndex:Tt}]of c)z(et,lt,bt,Tt)},mustExec:!0}),!0}dragSelectedEditors(c,L){if(r(this,yt))for(const z of r(this,yt).keys())z.drag(c,L)}rebuild(c){if(c.parent===null){const L=this.getLayer(c.pageIndex);L?(L.changeParent(c),L.addOrRebuild(c)):(this.addEditor(c),this.addToAnnotationStorage(c),c.rebuild())}else c.parent.addOrRebuild(c)}isActive(c){return r(this,O)===c}getActive(){return r(this,O)}getMode(){return r(this,y)}get imageManager(){return(0,s.shadow)(this,"imageManager",new d)}};O=new WeakMap,Q=new WeakMap,nt=new WeakMap,U=new WeakMap,ot=new WeakMap,pt=new WeakMap,mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,f=new WeakMap,u=new WeakMap,y=new WeakMap,E=new WeakMap,N=new WeakMap,V=new WeakMap,Y=new WeakMap,dt=new WeakMap,v=new WeakMap,D=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,_t=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakSet,Cs=function(){window.addEventListener("focus",r(this,Y)),window.addEventListener("blur",r(this,V))},Et=new WeakSet,qe=function(){window.removeEventListener("focus",r(this,Y)),window.removeEventListener("blur",r(this,V))},Lt=new WeakSet,Xe=function(){window.addEventListener("keydown",r(this,W),{capture:!0})},$t=new WeakSet,Ce=function(){window.removeEventListener("keydown",r(this,W),{capture:!0})},Wt=new WeakSet,Ye=function(){document.addEventListener("copy",r(this,dt)),document.addEventListener("cut",r(this,v)),document.addEventListener("paste",r(this,D))},At=new WeakSet,Ke=function(){document.removeEventListener("copy",r(this,dt)),document.removeEventListener("cut",r(this,v)),document.removeEventListener("paste",r(this,D))},st=new WeakSet,oe=function(c){Object.entries(c).some(([z,et])=>r(this,ft)[z]!==et)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,ft),c)})},Ct=new WeakSet,_e=function(c){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:c})},ee=new WeakSet,Ps=function(){if(!r(this,h)){gt(this,h,!0);for(const c of r(this,nt).values())c.enable()}},Mt=new WeakSet,Rs=function(){if(this.unselectAll(),r(this,h)){gt(this,h,!1);for(const c of r(this,nt).values())c.disable()}},Ft=new WeakSet,Je=function(c){const L=r(this,nt).get(c.pageIndex);L?L.addOrRebuild(c):this.addEditor(c)},zt=new WeakSet,ye=function(){if(r(this,Q).size===0)return!0;if(r(this,Q).size===1)for(const c of r(this,Q).values())return c.isEmpty();return!1},Pt=new WeakSet,Qe=function(c){r(this,E).clear();for(const L of c)L.isEmpty()||(r(this,E).add(L),L.select());it(this,st,oe).call(this,{hasSelectedEditor:!0})},ne(Ut,"TRANSLATE_SMALL",1),ne(Ut,"TRANSLATE_BIG",10);let R=Ut;e.AnnotationEditorUIManager=R},(t,e,n)=>{var mt,X,yt,wt,Rt,kt,j,h,f,u,y,E,fe,V,pe,dt,Ze,D,Pe,rt,Re,ut,Ae,ft,ve;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=H,e.getColorValues=Q,e.getCurrentTransform=nt,e.getCurrentTransformInverse=U,e.getFilenameFromUrl=P,e.getPdfFilenameFromUrl=I,e.getRGB=O,e.getXfaPageViewport=B,e.isDataScheme=T,e.isPdfFile=S,e.isValidFetchUrl=C,e.loadScript=A,e.noContextMenu=m,e.setLayerDimensions=ot;var s=n(7),i=n(1);const a="http://www.w3.org/2000/svg",pt=class pt{};ne(pt,"CSS",96),ne(pt,"PDF",72),ne(pt,"PDF_TO_CSS_UNITS",pt.CSS/pt.PDF);let o=pt;e.PixelsPerInch=o;class _ extends s.BaseFilterFactory{constructor({docId:q,ownerDocument:ct=globalThis.document}={}){super();G(this,E);G(this,V);G(this,dt);G(this,D);G(this,rt);G(this,ut);G(this,ft);G(this,mt,void 0);G(this,X,void 0);G(this,yt,void 0);G(this,wt,void 0);G(this,Rt,void 0);G(this,kt,void 0);G(this,j,void 0);G(this,h,void 0);G(this,f,void 0);G(this,u,void 0);G(this,y,0);gt(this,yt,q),gt(this,wt,ct)}addFilter(q){if(!q)return"none";let ct=r(this,E,fe).get(q);if(ct)return ct;let vt,Et,Dt,Lt;if(q.length===1){const Wt=q[0],Yt=new Array(256);for(let At=0;At<256;At++)Yt[At]=Wt[At]/255;Lt=vt=Et=Dt=Yt.join(",")}else{const[Wt,Yt,At]=q,at=new Array(256),st=new Array(256),xt=new Array(256);for(let Ct=0;Ct<256;Ct++)at[Ct]=Wt[Ct]/255,st[Ct]=Yt[Ct]/255,xt[Ct]=At[Ct]/255;vt=at.join(","),Et=st.join(","),Dt=xt.join(","),Lt=`${vt}${Et}${Dt}`}if(ct=r(this,E,fe).get(Lt),ct)return r(this,E,fe).set(q,ct),ct;const jt=`g_${r(this,yt)}_transfer_map_${be(this,y)._++}`,$t=`url(#${jt})`;r(this,E,fe).set(q,$t),r(this,E,fe).set(Lt,$t);const Gt=it(this,D,Pe).call(this,jt);return it(this,ut,Ae).call(this,vt,Et,Dt,Gt),$t}addHCMFilter(q,ct){var Yt;const vt=`${q}-${ct}`;if(r(this,kt)===vt)return r(this,j);if(gt(this,kt,vt),gt(this,j,"none"),(Yt=r(this,Rt))==null||Yt.remove(),!q||!ct)return r(this,j);const Et=it(this,ft,ve).call(this,q);q=i.Util.makeHexColor(...Et);const Dt=it(this,ft,ve).call(this,ct);if(ct=i.Util.makeHexColor(...Dt),r(this,V,pe).style.color="",q==="#000000"&&ct==="#ffffff"||q===ct)return r(this,j);const Lt=new Array(256);for(let At=0;At<=255;At++){const at=At/255;Lt[At]=at<=.03928?at/12.92:((at+.055)/1.055)**2.4}const jt=Lt.join(","),$t=`g_${r(this,yt)}_hcm_filter`,Gt=gt(this,h,it(this,D,Pe).call(this,$t));it(this,ut,Ae).call(this,jt,jt,jt,Gt),it(this,dt,Ze).call(this,Gt);const Wt=(At,at)=>{const st=Et[At]/255,xt=Dt[At]/255,Ct=new Array(at+1);for(let se=0;se<=at;se++)Ct[se]=st+se/at*(xt-st);return Ct.join(",")};return it(this,ut,Ae).call(this,Wt(0,5),Wt(1,5),Wt(2,5),Gt),gt(this,j,`url(#${$t})`),r(this,j)}addHighlightHCMFilter(q,ct,vt,Et){var xt;const Dt=`${q}-${ct}-${vt}-${Et}`;if(r(this,f)===Dt)return r(this,u);if(gt(this,f,Dt),gt(this,u,"none"),(xt=r(this,h))==null||xt.remove(),!q||!ct)return r(this,u);const[Lt,jt]=[q,ct].map(it(this,ft,ve).bind(this));let $t=Math.round(.2126*Lt[0]+.7152*Lt[1]+.0722*Lt[2]),Gt=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),[Wt,Yt]=[vt,Et].map(it(this,ft,ve).bind(this));Gt<$t&&([$t,Gt,Wt,Yt]=[Gt,$t,Yt,Wt]),r(this,V,pe).style.color="";const At=(Ct,se,ee)=>{const ht=new Array(256),Mt=(Gt-$t)/ee,Ht=Ct/255,Ft=(se-Ct)/(255*ee);let Vt=0;for(let zt=0;zt<=ee;zt++){const Zt=Math.round($t+zt*Mt),Pt=Ht+zt*Ft;for(let Jt=Vt;Jt<=Zt;Jt++)ht[Jt]=Pt;Vt=Zt+1}for(let zt=Vt;zt<256;zt++)ht[zt]=ht[Vt-1];return ht.join(",")},at=`g_${r(this,yt)}_hcm_highlight_filter`,st=gt(this,h,it(this,D,Pe).call(this,at));return it(this,dt,Ze).call(this,st),it(this,ut,Ae).call(this,At(Wt[0],Yt[0],5),At(Wt[1],Yt[1],5),At(Wt[2],Yt[2],5),st),gt(this,u,`url(#${at})`),r(this,u)}destroy(q=!1){q&&(r(this,j)||r(this,u))||(r(this,X)&&(r(this,X).parentNode.parentNode.remove(),gt(this,X,null)),r(this,mt)&&(r(this,mt).clear(),gt(this,mt,null)),gt(this,y,0))}}mt=new WeakMap,X=new WeakMap,yt=new WeakMap,wt=new WeakMap,Rt=new WeakMap,kt=new WeakMap,j=new WeakMap,h=new WeakMap,f=new WeakMap,u=new WeakMap,y=new WeakMap,E=new WeakSet,fe=function(){return r(this,mt)||gt(this,mt,new Map)},V=new WeakSet,pe=function(){if(!r(this,X)){const q=r(this,wt).createElement("div"),{style:ct}=q;ct.visibility="hidden",ct.contain="strict",ct.width=ct.height=0,ct.position="absolute",ct.top=ct.left=0,ct.zIndex=-1;const vt=r(this,wt).createElementNS(a,"svg");vt.setAttribute("width",0),vt.setAttribute("height",0),gt(this,X,r(this,wt).createElementNS(a,"defs")),q.append(vt),vt.append(r(this,X)),r(this,wt).body.append(q)}return r(this,X)},dt=new WeakSet,Ze=function(q){const ct=r(this,wt).createElementNS(a,"feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(ct)},D=new WeakSet,Pe=function(q){const ct=r(this,wt).createElementNS(a,"filter");return ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("id",q),r(this,V,pe).append(ct),ct},rt=new WeakSet,Re=function(q,ct,vt){const Et=r(this,wt).createElementNS(a,ct);Et.setAttribute("type","discrete"),Et.setAttribute("tableValues",vt),q.append(Et)},ut=new WeakSet,Ae=function(q,ct,vt,Et){const Dt=r(this,wt).createElementNS(a,"feComponentTransfer");Et.append(Dt),it(this,rt,Re).call(this,Dt,"feFuncR",q),it(this,rt,Re).call(this,Dt,"feFuncG",ct),it(this,rt,Re).call(this,Dt,"feFuncB",vt)},ft=new WeakSet,ve=function(q){return r(this,V,pe).style.color=q,O(getComputedStyle(r(this,V,pe)).getPropertyValue("color"))},e.DOMFilterFactory=_;class d extends s.BaseCanvasFactory{constructor({ownerDocument:J=globalThis.document}={}){super(),this._document=J}_createCanvas(J,q){const ct=this._document.createElement("canvas");return ct.width=J,ct.height=q,ct}}e.DOMCanvasFactory=d;async function g(Z,J=!1){if(C(Z,document.baseURI)){const q=await fetch(Z);if(!q.ok)throw new Error(q.statusText);return J?new Uint8Array(await q.arrayBuffer()):(0,i.stringToBytes)(await q.text())}return new Promise((q,ct)=>{const vt=new XMLHttpRequest;vt.open("GET",Z,!0),J&&(vt.responseType="arraybuffer"),vt.onreadystatechange=()=>{if(vt.readyState===XMLHttpRequest.DONE){if(vt.status===200||vt.status===0){let Et;if(J&&vt.response?Et=new Uint8Array(vt.response):!J&&vt.responseText&&(Et=(0,i.stringToBytes)(vt.responseText)),Et){q(Et);return}}ct(new Error(vt.statusText))}},vt.send(null)})}class l extends s.BaseCMapReaderFactory{_fetchData(J,q){return g(J,this.isCompressed).then(ct=>({cMapData:ct,compressionType:q}))}}e.DOMCMapReaderFactory=l;class w extends s.BaseStandardFontDataFactory{_fetchData(J){return g(J,!0)}}e.DOMStandardFontDataFactory=w;class R extends s.BaseSVGFactory{_createSVG(J){return document.createElementNS(a,J)}}e.DOMSVGFactory=R;class x{constructor({viewBox:J,scale:q,rotation:ct,offsetX:vt=0,offsetY:Et=0,dontFlip:Dt=!1}){this.viewBox=J,this.scale=q,this.rotation=ct,this.offsetX=vt,this.offsetY=Et;const Lt=(J[2]+J[0])/2,jt=(J[3]+J[1])/2;let $t,Gt,Wt,Yt;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:$t=-1,Gt=0,Wt=0,Yt=1;break;case 90:$t=0,Gt=1,Wt=1,Yt=0;break;case 270:$t=0,Gt=-1,Wt=-1,Yt=0;break;case 0:$t=1,Gt=0,Wt=0,Yt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Wt=-Wt,Yt=-Yt);let At,at,st,xt;$t===0?(At=Math.abs(jt-J[1])*q+vt,at=Math.abs(Lt-J[0])*q+Et,st=(J[3]-J[1])*q,xt=(J[2]-J[0])*q):(At=Math.abs(Lt-J[0])*q+vt,at=Math.abs(jt-J[1])*q+Et,st=(J[2]-J[0])*q,xt=(J[3]-J[1])*q),this.transform=[$t*q,Gt*q,Wt*q,Yt*q,At-$t*q*Lt-Wt*q*jt,at-Gt*q*Lt-Yt*q*jt],this.width=st,this.height=xt}get rawDims(){const{viewBox:J}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:J[2]-J[0],pageHeight:J[3]-J[1],pageX:J[0],pageY:J[1]})}clone({scale:J=this.scale,rotation:q=this.rotation,offsetX:ct=this.offsetX,offsetY:vt=this.offsetY,dontFlip:Et=!1}={}){return new x({viewBox:this.viewBox.slice(),scale:J,rotation:q,offsetX:ct,offsetY:vt,dontFlip:Et})}convertToViewportPoint(J,q){return i.Util.applyTransform([J,q],this.transform)}convertToViewportRectangle(J){const q=i.Util.applyTransform([J[0],J[1]],this.transform),ct=i.Util.applyTransform([J[2],J[3]],this.transform);return[q[0],q[1],ct[0],ct[1]]}convertToPdfPoint(J,q){return i.Util.applyInverseTransform([J,q],this.transform)}}e.PageViewport=x;class k extends i.BaseException{constructor(J,q=0){super(J,"RenderingCancelledException"),this.extraDelay=q}}e.RenderingCancelledException=k;function T(Z){const J=Z.length;let q=0;for(;q<J&&Z[q].trim()==="";)q++;return Z.substring(q,q+5).toLowerCase()==="data:"}function S(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function P(Z,J=!1){return J||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function I(Z,J="document.pdf"){if(typeof Z!="string")return J;if(T(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),J;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,vt=q.exec(Z);let Et=ct.exec(vt[1])||ct.exec(vt[2])||ct.exec(vt[3]);if(Et&&(Et=Et[0],Et.includes("%")))try{Et=ct.exec(decodeURIComponent(Et))[0]}catch{}return Et||J}class M{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(J){J in this.started&&(0,i.warn)(`Timer is already running for ${J}`),this.started[J]=Date.now()}timeEnd(J){J in this.started||(0,i.warn)(`Timer has not been started for ${J}`),this.times.push({name:J,start:this.started[J],end:Date.now()}),delete this.started[J]}toString(){const J=[];let q=0;for(const{name:ct}of this.times)q=Math.max(ct.length,q);for(const{name:ct,start:vt,end:Et}of this.times)J.push(`${ct.padEnd(q)} ${Et-vt}ms
`);return J.join("")}}e.StatTimer=M;function C(Z,J){try{const{protocol:q}=J?new URL(Z,J):new URL(Z);return q==="http:"||q==="https:"}catch{return!1}}function m(Z){Z.preventDefault()}function A(Z,J=!1){return new Promise((q,ct)=>{const vt=document.createElement("script");vt.src=Z,vt.onload=function(Et){J&&vt.remove(),q(Et)},vt.onerror=function(){ct(new Error(`Cannot load script at: ${vt.src}`))},(document.head||document.documentElement).append(vt)})}function H(Z){console.log("Deprecated API usage: "+Z)}let F;class b{static toDateObject(J){if(!J||typeof J!="string")return null;F||(F=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=F.exec(J);if(!q)return null;const ct=parseInt(q[1],10);let vt=parseInt(q[2],10);vt=vt>=1&&vt<=12?vt-1:0;let Et=parseInt(q[3],10);Et=Et>=1&&Et<=31?Et:1;let Dt=parseInt(q[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Lt=parseInt(q[5],10);Lt=Lt>=0&&Lt<=59?Lt:0;let jt=parseInt(q[6],10);jt=jt>=0&&jt<=59?jt:0;const $t=q[7]||"Z";let Gt=parseInt(q[8],10);Gt=Gt>=0&&Gt<=23?Gt:0;let Wt=parseInt(q[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,$t==="-"?(Dt+=Gt,Lt+=Wt):$t==="+"&&(Dt-=Gt,Lt-=Wt),new Date(Date.UTC(ct,vt,Et,Dt,Lt,jt))}}e.PDFDateString=b;function B(Z,{scale:J=1,rotation:q=0}){const{width:ct,height:vt}=Z.attributes.style,Et=[0,0,parseInt(ct),parseInt(vt)];return new x({viewBox:Et,scale:J,rotation:q})}function O(Z){if(Z.startsWith("#")){const J=parseInt(Z.slice(1),16);return[(J&16711680)>>16,(J&65280)>>8,J&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(J=>parseInt(J)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(J=>parseInt(J)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function Q(Z){const J=document.createElement("span");J.style.visibility="hidden",document.body.append(J);for(const q of Z.keys()){J.style.color=q;const ct=window.getComputedStyle(J).color;Z.set(q,O(ct))}J.remove()}function nt(Z){const{a:J,b:q,c:ct,d:vt,e:Et,f:Dt}=Z.getTransform();return[J,q,ct,vt,Et,Dt]}function U(Z){const{a:J,b:q,c:ct,d:vt,e:Et,f:Dt}=Z.getTransform().invertSelf();return[J,q,ct,vt,Et,Dt]}function ot(Z,J,q=!1,ct=!0){if(J instanceof x){const{pageWidth:vt,pageHeight:Et}=J.rawDims,{style:Dt}=Z,Lt=i.FeatureTest.isCSSRoundSupported,jt=`var(--scale-factor) * ${vt}px`,$t=`var(--scale-factor) * ${Et}px`,Gt=Lt?`round(${jt}, 1px)`:`calc(${jt})`,Wt=Lt?`round(${$t}, 1px)`:`calc(${$t})`;!q||J.rotation%180===0?(Dt.width=Gt,Dt.height=Wt):(Dt.width=Wt,Dt.height=Gt)}ct&&Z.setAttribute("data-main-rotation",J.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=n(1);class i{constructor(){this.constructor===i&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(l){return"none"}addHCMFilter(l,w){return"none"}addHighlightHCMFilter(l,w,R,x){return"none"}destroy(l=!1){}}e.BaseFilterFactory=i;class a{constructor(){this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,w){if(l<=0||w<=0)throw new Error("Invalid canvas size");const R=this._createCanvas(l,w);return{canvas:R,context:R.getContext("2d")}}reset(l,w,R){if(!l.canvas)throw new Error("Canvas is not specified");if(w<=0||R<=0)throw new Error("Invalid canvas size");l.canvas.width=w,l.canvas.height=R}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,w){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=a;class o{constructor({baseUrl:l=null,isCompressed:w=!0}){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=w}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const w=this.baseUrl+l+(this.isCompressed?".bcmap":""),R=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(w,R).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(l,w){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class _{constructor({baseUrl:l=null}){this.constructor===_&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${l}`;return this._fetchData(w).catch(R=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(l){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=_;class d{constructor(){this.constructor===d&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,w,R=!1){if(l<=0||w<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),R||(x.setAttribute("width",`${l}px`),x.setAttribute("height",`${w}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${l} ${w}`),x}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=d},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var s=n(1);const i=3285377520,a=4294901760,o=65535;class _{constructor(g){this.h1=g?g&4294967295:i,this.h2=g?g&4294967295:i}update(g){let l,w;if(typeof g=="string"){l=new Uint8Array(g.length*2),w=0;for(let H=0,F=g.length;H<F;H++){const b=g.charCodeAt(H);b<=255?l[w++]=b:(l[w++]=b>>>8,l[w++]=b&255)}}else if((0,s.isArrayBuffer)(g))l=g.slice(),w=l.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const R=w>>2,x=w-R*4,k=new Uint32Array(l.buffer,0,R);let T=0,S=0,P=this.h1,I=this.h2;const M=3432918353,C=461845907,m=M&o,A=C&o;for(let H=0;H<R;H++)H&1?(T=k[H],T=T*M&a|T*m&o,T=T<<15|T>>>17,T=T*C&a|T*A&o,P^=T,P=P<<13|P>>>19,P=P*5+3864292196):(S=k[H],S=S*M&a|S*m&o,S=S<<15|S>>>17,S=S*C&a|S*A&o,I^=S,I=I<<13|I>>>19,I=I*5+3864292196);switch(T=0,x){case 3:T^=l[R*4+2]<<16;case 2:T^=l[R*4+1]<<8;case 1:T^=l[R*4],T=T*M&a|T*m&o,T=T<<15|T>>>17,T=T*C&a|T*A&o,R&1?P^=T:I^=T}this.h1=P,this.h2=I}hexdigest(){let g=this.h1,l=this.h2;return g^=l>>>1,g=g*3981806797&a|g*36045&o,l=l*4283543511&a|((l<<16|g>>>16)*2950163797&a)>>>16,g^=l>>>1,g=g*444984403&a|g*60499&o,l=l*3301882366&a|((l<<16|g>>>16)*3120437893&a)>>>16,g^=l>>>1,(g>>>0).toString(16).padStart(8,"0")+(l>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=_},(t,e,n)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var s=n(1);class i{constructor({ownerDocument:d=globalThis.document,styleElement:g=null}){G(this,o,new Set);this._document=d,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(d){this.nativeFontFaces.add(d),this._document.fonts.add(d)}removeNativeFontFace(d){this.nativeFontFaces.delete(d),this._document.fonts.delete(d)}insertRule(d){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const g=this.styleElement.sheet;g.insertRule(d,g.cssRules.length)}clear(){for(const d of this.nativeFontFaces)this._document.fonts.delete(d);this.nativeFontFaces.clear(),r(this,o).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(d){if(!(!d||r(this,o).has(d.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:g,src:l,style:w}=d,R=new FontFace(g,l,w);this.addNativeFontFace(R);try{await R.load(),r(this,o).add(g)}catch{(0,s.warn)(`Cannot load system font: ${d.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(R)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(d){if(d.attached||d.missingFile&&!d.systemFontInfo)return;if(d.attached=!0,d.systemFontInfo){await this.loadSystemFont(d.systemFontInfo);return}if(this.isFontLoadingAPISupported){const l=d.createNativeFontFace();if(l){this.addNativeFontFace(l);try{await l.loaded}catch(w){throw(0,s.warn)(`Failed to load font '${l.family}': '${w}'.`),d.disableFontFace=!0,w}}return}const g=d.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise(l=>{const w=this._queueLoadingCallback(l);this._prepareFontLoadEvent(d,w)})}}get isFontLoadingAPISupported(){var g;const d=!!((g=this._document)!=null&&g.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",d)}get isSyncFontLoadingSupported(){let d=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(d=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",d)}_queueLoadingCallback(d){function g(){for((0,s.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;l.length>0&&l[0].done;){const R=l.shift();setTimeout(R.callback,0)}}const{loadingRequests:l}=this,w={done:!1,complete:g,callback:d};return l.push(w),w}get _loadTestFont(){const d=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",d)}_prepareFontLoadEvent(d,g){function l(O,Q){return O.charCodeAt(Q)<<24|O.charCodeAt(Q+1)<<16|O.charCodeAt(Q+2)<<8|O.charCodeAt(Q+3)&255}function w(O,Q,nt,U){const ot=O.substring(0,Q),pt=O.substring(Q+nt);return ot+U+pt}let R,x;const k=this._document.createElement("canvas");k.width=1,k.height=1;const T=k.getContext("2d");let S=0;function P(O,Q){if(++S>30){(0,s.warn)("Load test font never loaded."),Q();return}if(T.font="30px "+O,T.fillText(".",0,20),T.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(P.bind(null,O,Q))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=w(M,976,I.length,I);const m=16,A=1482184792;let H=l(M,m);for(R=0,x=I.length-3;R<x;R+=4)H=H-A+l(I,R)|0;R<I.length&&(H=H-A+l(I+"XXX",R)|0),M=w(M,m,4,(0,s.string32)(H));const F=`url(data:font/opentype;base64,${btoa(M)});`,b=`@font-face {font-family:"${I}";src:${F}}`;this.insertRule(b);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const O of[d.loadedName,I]){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=O,B.append(Q)}this._document.body.append(B),P(I,()=>{B.remove(),g.complete()})}}o=new WeakMap,e.FontLoader=i;class a{constructor(d,{isEvalSupported:g=!0,disableFontFace:l=!1,ignoreErrors:w=!1,inspectFont:R=null}){this.compiledGlyphs=Object.create(null);for(const x in d)this[x]=d[x];this.isEvalSupported=g!==!1,this.disableFontFace=l===!0,this.ignoreErrors=w===!0,this._inspectFont=R}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let d;if(!this.cssFontInfo)d=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),d=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return(g=this._inspectFont)==null||g.call(this,this),d}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const d=(0,s.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(d)});`;let l;if(!this.cssFontInfo)l=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),l=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${g}}`}return(w=this._inspectFont)==null||w.call(this,this,g),l}getPathGenerator(d,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let l;try{l=d.get(this.loadedName+"_path_"+g)}catch(w){if(!this.ignoreErrors)throw w;return(0,s.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[g]=function(R,x){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const w=[];for(const R of l){const x=R.args!==void 0?R.args.join(","):"";w.push("c.",R.cmd,"(",x,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",w.join(""))}return this.compiledGlyphs[g]=function(w,R){for(const x of l)x.cmd==="scale"&&(x.args=[R,-R]),w[x.cmd].apply(w,x.args)}}}e.FontFaceObject=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var s=n(7);n(1);const i=function(g){return new Promise((l,w)=>{require$$5.readFile(g,(x,k)=>{if(x||!k){w(new Error(x));return}l(new Uint8Array(k))})})};class a extends s.BaseFilterFactory{}e.NodeFilterFactory=a;class o extends s.BaseCanvasFactory{_createCanvas(l,w){return require$$5.createCanvas(l,w)}}e.NodeCanvasFactory=o;class _ extends s.BaseCMapReaderFactory{_fetchData(l,w){return i(l).then(R=>({cMapData:R,compressionType:w}))}}e.NodeCMapReaderFactory=_;class d extends s.BaseStandardFontDataFactory{_fetchData(l){return i(l)}}e.NodeStandardFontDataFactory=d},(t,e,n)=>{var X,ts,wt,es;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var s=n(1),i=n(6),a=n(12),o=n(13);const _=16,d=100,g=4096,l=15,w=10,R=1e3,x=16;function k(j,h){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){h.save(),this.__originalSave()},j.restore=function(){h.restore(),this.__originalRestore()},j.translate=function(u,y){h.translate(u,y),this.__originalTranslate(u,y)},j.scale=function(u,y){h.scale(u,y),this.__originalScale(u,y)},j.transform=function(u,y,E,N,V,Y){h.transform(u,y,E,N,V,Y),this.__originalTransform(u,y,E,N,V,Y)},j.setTransform=function(u,y,E,N,V,Y){h.setTransform(u,y,E,N,V,Y),this.__originalSetTransform(u,y,E,N,V,Y)},j.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},j.rotate=function(u){h.rotate(u),this.__originalRotate(u)},j.clip=function(u){h.clip(u),this.__originalClip(u)},j.moveTo=function(f,u){h.moveTo(f,u),this.__originalMoveTo(f,u)},j.lineTo=function(f,u){h.lineTo(f,u),this.__originalLineTo(f,u)},j.bezierCurveTo=function(f,u,y,E,N,V){h.bezierCurveTo(f,u,y,E,N,V),this.__originalBezierCurveTo(f,u,y,E,N,V)},j.rect=function(f,u,y,E){h.rect(f,u,y,E),this.__originalRect(f,u,y,E)},j.closePath=function(){h.closePath(),this.__originalClosePath()},j.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class T{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,f,u){let y;return this.cache[h]!==void 0?(y=this.cache[h],this.canvasFactory.reset(y,f,u)):(y=this.canvasFactory.create(f,u),this.cache[h]=y),y}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const f=this.cache[h];this.canvasFactory.destroy(f),delete this.cache[h]}}}function S(j,h,f,u,y,E,N,V,Y,dt){const[v,D,W,rt,K,ut]=(0,i.getCurrentTransform)(j);if(D===0&&W===0){const _t=N*v+K,Z=Math.round(_t),J=V*rt+ut,q=Math.round(J),ct=(N+Y)*v+K,vt=Math.abs(Math.round(ct)-Z)||1,Et=(V+dt)*rt+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(Math.sign(v),0,0,Math.sign(rt),Z,q),j.drawImage(h,f,u,y,E,0,0,vt,Dt),j.setTransform(v,D,W,rt,K,ut),[vt,Dt]}if(v===0&&rt===0){const _t=V*W+K,Z=Math.round(_t),J=N*D+ut,q=Math.round(J),ct=(V+dt)*W+K,vt=Math.abs(Math.round(ct)-Z)||1,Et=(N+Y)*D+ut,Dt=Math.abs(Math.round(Et)-q)||1;return j.setTransform(0,Math.sign(D),Math.sign(W),0,Z,q),j.drawImage(h,f,u,y,E,0,0,Dt,vt),j.setTransform(v,D,W,rt,K,ut),[Dt,vt]}j.drawImage(h,f,u,y,E,N,V,Y,dt);const St=Math.hypot(v,D),ft=Math.hypot(W,rt);return[St*Y,ft*dt]}function P(j){const{width:h,height:f}=j;if(h>R||f>R)return null;const u=1e3,y=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),E=h+1;let N=new Uint8Array(E*(f+1)),V,Y,dt;const v=h+7&-8;let D=new Uint8Array(v*f),W=0;for(const ft of j.data){let _t=128;for(;_t>0;)D[W++]=ft&_t?0:255,_t>>=1}let rt=0;for(W=0,D[W]!==0&&(N[0]=1,++rt),Y=1;Y<h;Y++)D[W]!==D[W+1]&&(N[Y]=D[W]?2:1,++rt),W++;for(D[W]!==0&&(N[Y]=2,++rt),V=1;V<f;V++){W=V*v,dt=V*E,D[W-v]!==D[W]&&(N[dt]=D[W]?1:8,++rt);let ft=(D[W]?4:0)+(D[W-v]?8:0);for(Y=1;Y<h;Y++)ft=(ft>>2)+(D[W+1]?4:0)+(D[W-v+1]?8:0),y[ft]&&(N[dt+Y]=y[ft],++rt),W++;if(D[W-v]!==D[W]&&(N[dt+Y]=D[W]?2:4,++rt),rt>u)return null}for(W=v*(f-1),dt=V*E,D[W]!==0&&(N[dt]=8,++rt),Y=1;Y<h;Y++)D[W]!==D[W+1]&&(N[dt+Y]=D[W]?4:8,++rt),W++;if(D[W]!==0&&(N[dt+Y]=4,++rt),rt>u)return null;const K=new Int32Array([0,E,-1,0,-E,0,0,0,1]),ut=new Path2D;for(V=0;rt&&V<=f;V++){let ft=V*E;const _t=ft+h;for(;ft<_t&&!N[ft];)ft++;if(ft===_t)continue;ut.moveTo(ft%E,V);const Z=ft;let J=N[ft];do{const q=K[J];do ft+=q;while(!N[ft]);const ct=N[ft];ct!==5&&ct!==10?(J=ct,N[ft]=0):(J=ct&51*J>>4,N[ft]&=J>>2|J<<2),ut.lineTo(ft%E,ft/E|0),N[ft]||--rt}while(Z!==ft);--V}return D=null,N=null,function(ft){ft.save(),ft.scale(1/h,-1/f),ft.translate(0,-f),ft.fill(ut),ft.beginPath(),ft.restore()}}class I{constructor(h,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,h,f])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,f){this.x=h,this.y=f}updatePathMinMax(h,f,u){[f,u]=s.Util.applyTransform([f,u],h),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,u),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,u)}updateRectMinMax(h,f){const u=s.Util.applyTransform(f,h),y=s.Util.applyTransform(f.slice(2),h);this.minX=Math.min(this.minX,u[0],y[0]),this.minY=Math.min(this.minY,u[1],y[1]),this.maxX=Math.max(this.maxX,u[0],y[0]),this.maxY=Math.max(this.maxY,u[1],y[1])}updateScalingPathMinMax(h,f){s.Util.scaleMinMax(h,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(h,f,u,y,E,N,V,Y,dt,v){const D=s.Util.bezierBoundingBox(f,u,y,E,N,V,Y,dt);if(v){v[0]=Math.min(v[0],D[0],D[2]),v[1]=Math.max(v[1],D[0],D[2]),v[2]=Math.min(v[2],D[1],D[3]),v[3]=Math.max(v[3],D[1],D[3]);return}this.updateRectMinMax(h,D)}getPathBoundingBox(h=a.PathType.FILL,f=null){const u=[this.minX,this.minY,this.maxX,this.maxY];if(h===a.PathType.STROKE){f||(0,s.unreachable)("Stroke bounding box must include transform.");const y=s.Util.singularValueDecompose2dScale(f),E=y[0]*this.lineWidth/2,N=y[1]*this.lineWidth/2;u[0]-=E,u[1]-=N,u[2]+=E,u[3]+=N}return u}updateClipFromPath(){const h=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=a.PathType.FILL,f=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(h,f))}}function M(j,h){if(typeof ImageData<"u"&&h instanceof ImageData){j.putImageData(h,0,0);return}const f=h.height,u=h.width,y=f%x,E=(f-y)/x,N=y===0?E:E+1,V=j.createImageData(u,x);let Y=0,dt;const v=h.data,D=V.data;let W,rt,K,ut;if(h.kind===s.ImageKind.GRAYSCALE_1BPP){const St=v.byteLength,ft=new Uint32Array(D.buffer,0,D.byteLength>>2),_t=ft.length,Z=u+7>>3,J=4294967295,q=s.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<N;W++){for(K=W<E?x:y,dt=0,rt=0;rt<K;rt++){const ct=St-Y;let vt=0;const Et=ct>Z?u:ct*8-7,Dt=Et&-8;let Lt=0,jt=0;for(;vt<Dt;vt+=8)jt=v[Y++],ft[dt++]=jt&128?J:q,ft[dt++]=jt&64?J:q,ft[dt++]=jt&32?J:q,ft[dt++]=jt&16?J:q,ft[dt++]=jt&8?J:q,ft[dt++]=jt&4?J:q,ft[dt++]=jt&2?J:q,ft[dt++]=jt&1?J:q;for(;vt<Et;vt++)Lt===0&&(jt=v[Y++],Lt=128),ft[dt++]=jt&Lt?J:q,Lt>>=1}for(;dt<_t;)ft[dt++]=0;j.putImageData(V,0,W*x)}}else if(h.kind===s.ImageKind.RGBA_32BPP){for(rt=0,ut=u*x*4,W=0;W<E;W++)D.set(v.subarray(Y,Y+ut)),Y+=ut,j.putImageData(V,0,rt),rt+=x;W<N&&(ut=u*y*4,D.set(v.subarray(Y,Y+ut)),j.putImageData(V,0,rt))}else if(h.kind===s.ImageKind.RGB_24BPP)for(K=x,ut=u*K,W=0;W<N;W++){for(W>=E&&(K=y,ut=u*K),dt=0,rt=ut;rt--;)D[dt++]=v[Y++],D[dt++]=v[Y++],D[dt++]=v[Y++],D[dt++]=255;j.putImageData(V,0,W*x)}else throw new Error(`bad image kind: ${h.kind}`)}function C(j,h){if(h.bitmap){j.drawImage(h.bitmap,0,0);return}const f=h.height,u=h.width,y=f%x,E=(f-y)/x,N=y===0?E:E+1,V=j.createImageData(u,x);let Y=0;const dt=h.data,v=V.data;for(let D=0;D<N;D++){const W=D<E?x:y;({srcPos:Y}=(0,o.convertBlackAndWhiteToRGBA)({src:dt,srcPos:Y,dest:v,width:u,height:W,nonBlackColor:0})),j.putImageData(V,0,D*x)}}function m(j,h){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const u of f)j[u]!==void 0&&(h[u]=j[u]);j.setLineDash!==void 0&&(h.setLineDash(j.getLineDash()),h.lineDashOffset=j.lineDashOffset)}function A(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!s.isNodeJS){const{filter:h}=j;h!=="none"&&h!==""&&(j.filter="none")}}function H(j,h,f,u){const y=j.length;for(let E=3;E<y;E+=4){const N=j[E];if(N===0)j[E-3]=h,j[E-2]=f,j[E-1]=u;else if(N<255){const V=255-N;j[E-3]=j[E-3]*N+h*V>>8,j[E-2]=j[E-2]*N+f*V>>8,j[E-1]=j[E-1]*N+u*V>>8}}}function F(j,h,f){const u=j.length,y=1/255;for(let E=3;E<u;E+=4){const N=f?f[j[E]]:j[E];h[E]=h[E]*N*y|0}}function b(j,h,f){const u=j.length;for(let y=3;y<u;y+=4){const E=j[y-3]*77+j[y-2]*152+j[y-1]*28;h[y]=f?h[y]*f[E>>8]>>8:h[y]*E>>16}}function B(j,h,f,u,y,E,N,V,Y,dt,v){const D=!!E,W=D?E[0]:0,rt=D?E[1]:0,K=D?E[2]:0,ut=y==="Luminosity"?b:F,ft=Math.min(u,Math.ceil(1048576/f));for(let _t=0;_t<u;_t+=ft){const Z=Math.min(ft,u-_t),J=j.getImageData(V-dt,_t+(Y-v),f,Z),q=h.getImageData(V,_t+Y,f,Z);D&&H(J.data,W,rt,K),ut(J.data,q.data,N),h.putImageData(q,V,_t+Y)}}function O(j,h,f,u){const y=u[0],E=u[1],N=u[2]-y,V=u[3]-E;N===0||V===0||(B(h.context,f,N,V,h.subtype,h.backdrop,h.transferMap,y,E,h.offsetX,h.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(f.canvas,0,0),j.restore())}function Q(j,h){const f=s.Util.singularValueDecompose2dScale(j);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const u=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:f[0]<=u||f[1]<=u}const nt=["butt","round","square"],U=["miter","round","bevel"],ot={},pt={},kt=class kt{constructor(h,f,u,y,E,{optionalContentConfig:N,markedContentStack:V=null},Y,dt){G(this,X);G(this,wt);this.ctx=h,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=u,this.canvasFactory=y,this.filterFactory=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=V||[],this.optionalContentConfig=N,this.cachedCanvases=new T(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,f=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):f}beginDrawing({transform:h,viewport:f,transparency:u=!1,background:y=null}){const E=this.ctx.canvas.width,N=this.ctx.canvas.height,V=this.ctx.fillStyle;if(this.ctx.fillStyle=y||"#ffffff",this.ctx.fillRect(0,0,E,N),this.ctx.fillStyle=V,u){const Y=this.cachedCanvases.getCanvas("transparent",E,N);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...f.transform),this.viewportScale=f.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(h,f,u,y){const E=h.argsArray,N=h.fnArray;let V=f||0;const Y=E.length;if(Y===V)return V;const dt=Y-V>w&&typeof u=="function",v=dt?Date.now()+l:0;let D=0;const W=this.commonObjs,rt=this.objs;let K;for(;;){if(y!==void 0&&V===y.nextBreakPoint)return y.breakIt(V,u),V;if(K=N[V],K!==s.OPS.dependency)this[K].apply(this,E[V]);else for(const ut of E[V]){const St=ut.startsWith("g_")?W:rt;if(!St.has(ut))return St.get(ut,u),V}if(V++,V===Y)return V;if(dt&&++D>w){if(Date.now()>v)return u(),V;D=0}}}endDrawing(){it(this,X,ts).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const f of h.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);h.clear()}this._cachedBitmapsMap.clear(),it(this,wt,es).call(this)}_scaleImage(h,f){const u=h.width,y=h.height;let E=Math.max(Math.hypot(f[0],f[1]),1),N=Math.max(Math.hypot(f[2],f[3]),1),V=u,Y=y,dt="prescale1",v,D;for(;E>2&&V>1||N>2&&Y>1;){let W=V,rt=Y;E>2&&V>1&&(W=V>=16384?Math.floor(V/2)-1||1:Math.ceil(V/2),E/=V/W),N>2&&Y>1&&(rt=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,N/=Y/rt),v=this.cachedCanvases.getCanvas(dt,W,rt),D=v.context,D.clearRect(0,0,W,rt),D.drawImage(h,0,0,V,Y,0,0,W,rt),h=v.canvas,V=W,Y=rt,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:V,paintHeight:Y}}_createMaskCanvas(h){const f=this.ctx,{width:u,height:y}=h,E=this.current.fillColor,N=this.current.patternFill,V=(0,i.getCurrentTransform)(f);let Y,dt,v,D;if((h.bitmap||h.data)&&h.count>1){const vt=h.bitmap||h.data.buffer;dt=JSON.stringify(N?V:[V.slice(0,4),E]),Y=this._cachedBitmapsMap.get(vt),Y||(Y=new Map,this._cachedBitmapsMap.set(vt,Y));const Et=Y.get(dt);if(Et&&!N){const Dt=Math.round(Math.min(V[0],V[2])+V[4]),Lt=Math.round(Math.min(V[1],V[3])+V[5]);return{canvas:Et,offsetX:Dt,offsetY:Lt}}v=Et}v||(D=this.cachedCanvases.getCanvas("maskCanvas",u,y),C(D.context,h));let W=s.Util.transform(V,[1/u,0,0,-1/y,0,0]);W=s.Util.transform(W,[1,0,0,1,0,-y]);const rt=s.Util.applyTransform([0,0],W),K=s.Util.applyTransform([u,y],W),ut=s.Util.normalizeRect([rt[0],rt[1],K[0],K[1]]),St=Math.round(ut[2]-ut[0])||1,ft=Math.round(ut[3]-ut[1])||1,_t=this.cachedCanvases.getCanvas("fillCanvas",St,ft),Z=_t.context,J=Math.min(rt[0],K[0]),q=Math.min(rt[1],K[1]);Z.translate(-J,-q),Z.transform(...W),v||(v=this._scaleImage(D.canvas,(0,i.getCurrentTransformInverse)(Z)),v=v.img,Y&&N&&Y.set(dt,v)),Z.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(Z),h.interpolate),S(Z,v,0,0,v.width,v.height,0,0,u,y),Z.globalCompositeOperation="source-in";const ct=s.Util.transform((0,i.getCurrentTransformInverse)(Z),[1,0,0,1,-J,-q]);return Z.fillStyle=N?E.getPattern(f,this,ct,a.PathType.FILL):E,Z.fillRect(0,0,u,y),Y&&!N&&(this.cachedCanvases.delete("fillCanvas"),Y.set(dt,_t.canvas)),{canvas:_t.canvas,offsetX:Math.round(J),offsetY:Math.round(q)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=nt[h]}setLineJoin(h){this.ctx.lineJoin=U[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,f){const u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(h),u.lineDashOffset=f)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[f,u]of h)switch(f){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u[0],u[1]);break;case"CA":this.current.strokeAlpha=u;break;case"ca":this.current.fillAlpha=u,this.ctx.globalAlpha=u;break;case"BM":this.ctx.globalCompositeOperation=u;break;case"SMask":this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,f=this.ctx.canvas.height,u="smaskGroupAt"+this.groupLevel,y=this.cachedCanvases.getCanvas(u,h,f);this.suspendedCtx=this.ctx,this.ctx=y.context;const E=this.ctx;E.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,E),k(E,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const f=this.current.activeSMask,u=this.suspendedCtx;O(u,f,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(h,f,u,y,E,N){this.ctx.transform(h,f,u,y,E,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(h,f,u){const y=this.ctx,E=this.current;let N=E.x,V=E.y,Y,dt;const v=(0,i.getCurrentTransform)(y),D=v[0]===0&&v[3]===0||v[1]===0&&v[2]===0,W=D?u.slice(0):null;for(let rt=0,K=0,ut=h.length;rt<ut;rt++)switch(h[rt]|0){case s.OPS.rectangle:N=f[K++],V=f[K++];const St=f[K++],ft=f[K++],_t=N+St,Z=V+ft;y.moveTo(N,V),St===0||ft===0?y.lineTo(_t,Z):(y.lineTo(_t,V),y.lineTo(_t,Z),y.lineTo(N,Z)),D||E.updateRectMinMax(v,[N,V,_t,Z]),y.closePath();break;case s.OPS.moveTo:N=f[K++],V=f[K++],y.moveTo(N,V),D||E.updatePathMinMax(v,N,V);break;case s.OPS.lineTo:N=f[K++],V=f[K++],y.lineTo(N,V),D||E.updatePathMinMax(v,N,V);break;case s.OPS.curveTo:Y=N,dt=V,N=f[K+4],V=f[K+5],y.bezierCurveTo(f[K],f[K+1],f[K+2],f[K+3],N,V),E.updateCurvePathMinMax(v,Y,dt,f[K],f[K+1],f[K+2],f[K+3],N,V,W),K+=6;break;case s.OPS.curveTo2:Y=N,dt=V,y.bezierCurveTo(N,V,f[K],f[K+1],f[K+2],f[K+3]),E.updateCurvePathMinMax(v,Y,dt,N,V,f[K],f[K+1],f[K+2],f[K+3],W),N=f[K+2],V=f[K+3],K+=4;break;case s.OPS.curveTo3:Y=N,dt=V,N=f[K+2],V=f[K+3],y.bezierCurveTo(f[K],f[K+1],N,V,N,V),E.updateCurvePathMinMax(v,Y,dt,f[K],f[K+1],N,V,N,V,W),K+=4;break;case s.OPS.closePath:y.closePath();break}D&&E.updateScalingPathMinMax(v,W),E.setCurrentPoint(N,V)}closePath(){this.ctx.closePath()}stroke(h=!0){const f=this.ctx,u=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof u=="object"&&(u!=null&&u.getPattern)?(f.save(),f.strokeStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),a.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h=!0){const f=this.ctx,u=this.current.fillColor,y=this.current.patternFill;let E=!1;y&&(f.save(),f.fillStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),a.PathType.FILL),E=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),E&&f.restore(),h&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ot}eoClip(){this.pendingClip=pt}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,f=this.ctx;if(h===void 0){f.beginPath();return}f.save(),f.beginPath();for(const u of h)f.setTransform(...u.transform),f.translate(u.x,u.y),u.addToPath(f,u.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,f){var v;const u=this.commonObjs.get(h),y=this.current;if(!u)throw new Error(`Can't find font for ${h}`);if(y.fontMatrix=u.fontMatrix||s.FONT_IDENTITY_MATRIX,(y.fontMatrix[0]===0||y.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+h),f<0?(f=-f,y.fontDirection=-1):y.fontDirection=1,this.current.font=u,this.current.fontSize=f,u.isType3Font)return;const E=u.loadedName||"sans-serif",N=((v=u.systemFontInfo)==null?void 0:v.css)||`"${E}", ${u.fallbackName}`;let V="normal";u.black?V="900":u.bold&&(V="bold");const Y=u.italic?"italic":"normal";let dt=f;f<_?dt=_:f>d&&(dt=d),this.current.fontSizeScale=f/dt,this.ctx.font=`${Y} ${V} ${dt}px ${N}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,f){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=f}setLeadingMoveText(h,f){this.setLeading(-f),this.moveText(h,f)}setTextMatrix(h,f,u,y,E,N){this.current.textMatrix=[h,f,u,y,E,N],this.current.textMatrixScale=Math.hypot(h,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,f,u,y){const E=this.ctx,N=this.current,V=N.font,Y=N.textRenderingMode,dt=N.fontSize/N.fontSizeScale,v=Y&s.TextRenderingMode.FILL_STROKE_MASK,D=!!(Y&s.TextRenderingMode.ADD_TO_PATH_FLAG),W=N.patternFill&&!V.missingFile;let rt;(V.disableFontFace||D||W)&&(rt=V.getPathGenerator(this.commonObjs,h)),V.disableFontFace||W?(E.save(),E.translate(f,u),E.beginPath(),rt(E,dt),y&&E.setTransform(...y),(v===s.TextRenderingMode.FILL||v===s.TextRenderingMode.FILL_STROKE)&&E.fill(),(v===s.TextRenderingMode.STROKE||v===s.TextRenderingMode.FILL_STROKE)&&E.stroke(),E.restore()):((v===s.TextRenderingMode.FILL||v===s.TextRenderingMode.FILL_STROKE)&&E.fillText(h,f,u),(v===s.TextRenderingMode.STROKE||v===s.TextRenderingMode.FILL_STROKE)&&E.strokeText(h,f,u)),D&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(E),x:f,y:u,fontSize:dt,addToPath:rt})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const f=h.getImageData(0,0,10,10).data;let u=!1;for(let y=3;y<f.length;y+=4)if(f[y]>0&&f[y]<255){u=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",u)}showText(h){const f=this.current,u=f.font;if(u.isType3Font)return this.showType3Text(h);const y=f.fontSize;if(y===0)return;const E=this.ctx,N=f.fontSizeScale,V=f.charSpacing,Y=f.wordSpacing,dt=f.fontDirection,v=f.textHScale*dt,D=h.length,W=u.vertical,rt=W?1:-1,K=u.defaultVMetrics,ut=y*f.fontMatrix[0],St=f.textRenderingMode===s.TextRenderingMode.FILL&&!u.disableFontFace&&!f.patternFill;E.save(),E.transform(...f.textMatrix),E.translate(f.x,f.y+f.textRise),dt>0?E.scale(v,-1):E.scale(v,1);let ft;if(f.patternFill){E.save();const ct=f.fillColor.getPattern(E,this,(0,i.getCurrentTransformInverse)(E),a.PathType.FILL);ft=(0,i.getCurrentTransform)(E),E.restore(),E.fillStyle=ct}let _t=f.lineWidth;const Z=f.textMatrixScale;if(Z===0||_t===0){const ct=f.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(ct===s.TextRenderingMode.STROKE||ct===s.TextRenderingMode.FILL_STROKE)&&(_t=this.getSinglePixelWidth())}else _t/=Z;if(N!==1&&(E.scale(N,N),_t/=N),E.lineWidth=_t,u.isInvalidPDFjsFont){const ct=[];let vt=0;for(const Et of h)ct.push(Et.unicode),vt+=Et.width;E.fillText(ct.join(""),0,0),f.x+=vt*ut*v,E.restore(),this.compose();return}let J=0,q;for(q=0;q<D;++q){const ct=h[q];if(typeof ct=="number"){J+=rt*ct*y/1e3;continue}let vt=!1;const Et=(ct.isSpace?Y:0)+V,Dt=ct.fontChar,Lt=ct.accent;let jt,$t,Gt=ct.width;if(W){const Yt=ct.vmetric||K,At=-(ct.vmetric?Yt[1]:Gt*.5)*ut,at=Yt[2]*ut;Gt=Yt?-Yt[0]:Gt,jt=At/N,$t=(J+at)/N}else jt=J/N,$t=0;if(u.remeasure&&Gt>0){const Yt=E.measureText(Dt).width*1e3/y*N;if(Gt<Yt&&this.isFontSubpixelAAEnabled){const At=Gt/Yt;vt=!0,E.save(),E.scale(At,1),jt/=At}else Gt!==Yt&&(jt+=(Gt-Yt)/2e3*y/N)}if(this.contentVisible&&(ct.isInFont||u.missingFile)){if(St&&!Lt)E.fillText(Dt,jt,$t);else if(this.paintChar(Dt,jt,$t,ft),Lt){const Yt=jt+y*Lt.offset.x/N,At=$t-y*Lt.offset.y/N;this.paintChar(Lt.fontChar,Yt,At,ft)}}const Wt=W?Gt*ut-Et*dt:Gt*ut+Et*dt;J+=Wt,vt&&E.restore()}W?f.y-=J:f.x+=J*v,E.restore(),this.compose()}showType3Text(h){const f=this.ctx,u=this.current,y=u.font,E=u.fontSize,N=u.fontDirection,V=y.vertical?1:-1,Y=u.charSpacing,dt=u.wordSpacing,v=u.textHScale*N,D=u.fontMatrix||s.FONT_IDENTITY_MATRIX,W=h.length,rt=u.textRenderingMode===s.TextRenderingMode.INVISIBLE;let K,ut,St,ft;if(!(rt||E===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...u.textMatrix),f.translate(u.x,u.y),f.scale(v,N),K=0;K<W;++K){if(ut=h[K],typeof ut=="number"){ft=V*ut*E/1e3,this.ctx.translate(ft,0),u.x+=ft*v;continue}const _t=(ut.isSpace?dt:0)+Y,Z=y.charProcOperatorList[ut.operatorListId];if(!Z){(0,s.warn)(`Type3 character "${ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ut,this.save(),f.scale(E,E),f.transform(...D),this.executeOperatorList(Z),this.restore()),St=s.Util.applyTransform([ut.width,0],D)[0]*E+_t,f.translate(St,0),u.x+=St*v}f.restore(),this.processingType3=null}}setCharWidth(h,f){}setCharWidthAndBounds(h,f,u,y,E,N){this.ctx.rect(u,y,E-u,N-y),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let f;if(h[0]==="TilingPattern"){const u=h[1],y=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),E={createCanvasGraphics:N=>new kt(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};f=new a.TilingPattern(h,u,this.ctx,E,y)}else f=this._getPattern(h[1],h[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,f,u){const y=s.Util.makeHexColor(h,f,u);this.ctx.strokeStyle=y,this.current.strokeColor=y}setFillRGBColor(h,f,u){const y=s.Util.makeHexColor(h,f,u);this.ctx.fillStyle=y,this.current.fillColor=y,this.current.patternFill=!1}_getPattern(h,f=null){let u;return this.cachedPatterns.has(h)?u=this.cachedPatterns.get(h):(u=(0,a.getShadingPattern)(this.getObject(h)),this.cachedPatterns.set(h,u)),f&&(u.matrix=f),u}shadingFill(h){if(!this.contentVisible)return;const f=this.ctx;this.save();const u=this._getPattern(h);f.fillStyle=u.getPattern(f,this,(0,i.getCurrentTransformInverse)(f),a.PathType.SHADING);const y=(0,i.getCurrentTransformInverse)(f);if(y){const{width:E,height:N}=f.canvas,[V,Y,dt,v]=s.Util.getAxialAlignedBoundingBox([0,0,E,N],y);this.ctx.fillRect(V,Y,dt-V,v-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,f){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),f)){const u=f[2]-f[0],y=f[3]-f[1];this.ctx.rect(f[0],f[1],u,y),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;h.isolated||(0,s.info)("TODO: Support non-isolated groups."),h.knockout&&(0,s.warn)("Knockout groups not supported.");const u=(0,i.getCurrentTransform)(f);if(h.matrix&&f.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let y=s.Util.getAxialAlignedBoundingBox(h.bbox,(0,i.getCurrentTransform)(f));const E=[0,0,f.canvas.width,f.canvas.height];y=s.Util.intersect(y,E)||[0,0,0,0];const N=Math.floor(y[0]),V=Math.floor(y[1]);let Y=Math.max(Math.ceil(y[2])-N,1),dt=Math.max(Math.ceil(y[3])-V,1),v=1,D=1;Y>g&&(v=Y/g,Y=g),dt>g&&(D=dt/g,dt=g),this.current.startNewPathAndClipBox([0,0,Y,dt]);let W="groupAt"+this.groupLevel;h.smask&&(W+="_smask_"+this.smaskCounter++%2);const rt=this.cachedCanvases.getCanvas(W,Y,dt),K=rt.context;K.scale(1/v,1/D),K.translate(-N,-V),K.transform(...u),h.smask?this.smaskStack.push({canvas:rt.canvas,context:K,offsetX:N,offsetY:V,scaleX:v,scaleY:D,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(N,V),f.scale(v,D),f.save()),m(f,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,u=this.groupStack.pop();if(this.ctx=u,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const y=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...y);const E=s.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],y);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(E)}}beginAnnotation(h,f,u,y,E){if(it(this,X,ts).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&f.length===4){const N=f[2]-f[0],V=f[3]-f[1];if(E&&this.annotationCanvasMap){u=u.slice(),u[4]-=f[0],u[5]-=f[1],f=f.slice(),f[0]=f[1]=0,f[2]=N,f[3]=V;const[Y,dt]=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:v}=this,D=Math.ceil(N*this.outputScaleX*v),W=Math.ceil(V*this.outputScaleY*v);this.annotationCanvas=this.canvasFactory.create(D,W);const{canvas:rt,context:K}=this.annotationCanvas;this.annotationCanvasMap.set(h,rt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=K,this.ctx.save(),this.ctx.setTransform(Y,0,0,-dt,0,V*dt),A(this.ctx)}else A(this.ctx),this.ctx.rect(f[0],f[1],N,V),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...u),this.transform(...y)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,wt,es).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const f=h.count;h=this.getObject(h.data,h),h.count=f;const u=this.ctx,y=this.processingType3;if(y&&(y.compiled===void 0&&(y.compiled=P(h)),y.compiled)){y.compiled(u);return}const E=this._createMaskCanvas(h),N=E.canvas;u.save(),u.setTransform(1,0,0,1,0,0),u.drawImage(N,E.offsetX,E.offsetY),u.restore(),this.compose()}paintImageMaskXObjectRepeat(h,f,u=0,y=0,E,N){if(!this.contentVisible)return;h=this.getObject(h.data,h);const V=this.ctx;V.save();const Y=(0,i.getCurrentTransform)(V);V.transform(f,u,y,E,0,0);const dt=this._createMaskCanvas(h);V.setTransform(1,0,0,1,dt.offsetX-Y[4],dt.offsetY-Y[5]);for(let v=0,D=N.length;v<D;v+=2){const W=s.Util.transform(Y,[f,u,y,E,N[v],N[v+1]]),[rt,K]=s.Util.applyTransform([0,0],W);V.drawImage(dt.canvas,rt,K)}V.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const f=this.ctx,u=this.current.fillColor,y=this.current.patternFill;for(const E of h){const{data:N,width:V,height:Y,transform:dt}=E,v=this.cachedCanvases.getCanvas("maskCanvas",V,Y),D=v.context;D.save();const W=this.getObject(N,E);C(D,W),D.globalCompositeOperation="source-in",D.fillStyle=y?u.getPattern(D,this,(0,i.getCurrentTransformInverse)(f),a.PathType.FILL):u,D.fillRect(0,0,V,Y),D.restore(),f.save(),f.transform(...dt),f.scale(1,-1),S(f,v.canvas,0,0,V,Y,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const f=this.getObject(h);if(!f){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)}paintImageXObjectRepeat(h,f,u,y){if(!this.contentVisible)return;const E=this.getObject(h);if(!E){(0,s.warn)("Dependent image isn't ready yet");return}const N=E.width,V=E.height,Y=[];for(let dt=0,v=y.length;dt<v;dt+=2)Y.push({transform:[f,0,0,u,y[dt],y[dt+1]],x:0,y:0,w:N,h:V});this.paintInlineImageXObjectGroup(E,Y)}applyTransferMapsToCanvas(h){return this.current.transferMaps!=="none"&&(h.filter=this.current.transferMaps,h.drawImage(h.canvas,0,0),h.filter="none"),h.canvas}applyTransferMapsToBitmap(h){if(this.current.transferMaps==="none")return h.bitmap;const{bitmap:f,width:u,height:y}=h,E=this.cachedCanvases.getCanvas("inlineImage",u,y),N=E.context;return N.filter=this.current.transferMaps,N.drawImage(f,0,0),N.filter="none",E.canvas}paintInlineImageXObject(h){if(!this.contentVisible)return;const f=h.width,u=h.height,y=this.ctx;if(this.save(),!s.isNodeJS){const{filter:V}=y;V!=="none"&&V!==""&&(y.filter="none")}y.scale(1/f,-1/u);let E;if(h.bitmap)E=this.applyTransferMapsToBitmap(h);else if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)E=h;else{const Y=this.cachedCanvases.getCanvas("inlineImage",f,u).context;M(Y,h),E=this.applyTransferMapsToCanvas(Y)}const N=this._scaleImage(E,(0,i.getCurrentTransformInverse)(y));y.imageSmoothingEnabled=Q((0,i.getCurrentTransform)(y),h.interpolate),S(y,N.img,0,0,N.paintWidth,N.paintHeight,0,-u,f,u),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,f){if(!this.contentVisible)return;const u=this.ctx;let y;if(h.bitmap)y=h.bitmap;else{const E=h.width,N=h.height,Y=this.cachedCanvases.getCanvas("inlineImage",E,N).context;M(Y,h),y=this.applyTransferMapsToCanvas(Y)}for(const E of f)u.save(),u.transform(...E.transform),u.scale(1,-1),S(u,y,E.x,E.y,E.w,E.h,0,-1,1,1),u.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,f){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,f){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(f)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const u=this.ctx;this.pendingClip&&(f||(this.pendingClip===pt?u.clip("evenodd"):u.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),u.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,i.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const f=Math.abs(h[0]*h[3]-h[2]*h[1]),u=Math.hypot(h[0],h[2]),y=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(u,y)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:h}=this.current,{a:f,b:u,c:y,d:E}=this.ctx.getTransform();let N,V;if(u===0&&y===0){const Y=Math.abs(f),dt=Math.abs(E);if(Y===dt)if(h===0)N=V=1/Y;else{const v=Y*h;N=V=v<1?1/v:1}else if(h===0)N=1/Y,V=1/dt;else{const v=Y*h,D=dt*h;N=v<1?1/v:1,V=D<1?1/D:1}}else{const Y=Math.abs(f*E-u*y),dt=Math.hypot(f,u),v=Math.hypot(y,E);if(h===0)N=v/Y,V=dt/Y;else{const D=h*Y;N=v>D?v/D:1,V=dt>D?dt/D:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=V}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:f}=this,{lineWidth:u}=this.current,[y,E]=this.getScaleForStroking();if(f.lineWidth=u||1,y===1&&E===1){f.stroke();return}const N=f.getLineDash();if(h&&f.save(),f.scale(y,E),N.length>0){const V=Math.max(y,E);f.setLineDash(N.map(Y=>Y/V)),f.lineDashOffset/=V}f.stroke(),h&&f.restore()}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};X=new WeakSet,ts=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wt=new WeakSet,es=function(){if(this.pageColors){const h=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(h!=="none"){const f=this.ctx.filter;this.ctx.filter=h,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=f}}};let mt=kt;e.CanvasGraphics=mt;for(const j in s.OPS)mt.prototype[j]!==void 0&&(mt.prototype[s.OPS[j]]=mt.prototype[j])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=x;var s=n(1),i=n(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=a;function o(P,I){if(!I)return;const M=I[2]-I[0],C=I[3]-I[1],m=new Path2D;m.rect(I[0],I[1],M,C),P.clip(m)}class _{constructor(){this.constructor===_&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class d extends _{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let M;this._type==="axial"?M=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const C of this._colorStops)M.addColorStop(C[0],C[1]);return M}getPattern(I,M,C,m){let A;if(m===a.STROKE||m===a.FILL){const H=M.current.getClippedPathBoundingBox(m,(0,i.getCurrentTransform)(I))||[0,0,0,0],F=Math.ceil(H[2]-H[0])||1,b=Math.ceil(H[3]-H[1])||1,B=M.cachedCanvases.getCanvas("pattern",F,b,!0),O=B.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-H[0],-H[1]),C=s.Util.transform(C,[1,0,0,1,H[0],H[1]]),O.transform(...M.baseTransform),this.matrix&&O.transform(...this.matrix),o(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),A=I.createPattern(B.canvas,"no-repeat");const Q=new DOMMatrix(C);A.setTransform(Q)}else o(I,this._bbox),A=this._createGradient(I);return A}}function g(P,I,M,C,m,A,H,F){const b=I.coords,B=I.colors,O=P.data,Q=P.width*4;let nt;b[M+1]>b[C+1]&&(nt=M,M=C,C=nt,nt=A,A=H,H=nt),b[C+1]>b[m+1]&&(nt=C,C=m,m=nt,nt=H,H=F,F=nt),b[M+1]>b[C+1]&&(nt=M,M=C,C=nt,nt=A,A=H,H=nt);const U=(b[M]+I.offsetX)*I.scaleX,ot=(b[M+1]+I.offsetY)*I.scaleY,pt=(b[C]+I.offsetX)*I.scaleX,mt=(b[C+1]+I.offsetY)*I.scaleY,X=(b[m]+I.offsetX)*I.scaleX,yt=(b[m+1]+I.offsetY)*I.scaleY;if(ot>=yt)return;const wt=B[A],Rt=B[A+1],kt=B[A+2],j=B[H],h=B[H+1],f=B[H+2],u=B[F],y=B[F+1],E=B[F+2],N=Math.round(ot),V=Math.round(yt);let Y,dt,v,D,W,rt,K,ut;for(let St=N;St<=V;St++){if(St<mt){const q=St<ot?0:(ot-St)/(ot-mt);Y=U-(U-pt)*q,dt=wt-(wt-j)*q,v=Rt-(Rt-h)*q,D=kt-(kt-f)*q}else{let q;St>yt?q=1:mt===yt?q=0:q=(mt-St)/(mt-yt),Y=pt-(pt-X)*q,dt=j-(j-u)*q,v=h-(h-y)*q,D=f-(f-E)*q}let ft;St<ot?ft=0:St>yt?ft=1:ft=(ot-St)/(ot-yt),W=U-(U-X)*ft,rt=wt-(wt-u)*ft,K=Rt-(Rt-y)*ft,ut=kt-(kt-E)*ft;const _t=Math.round(Math.min(Y,W)),Z=Math.round(Math.max(Y,W));let J=Q*St+_t*4;for(let q=_t;q<=Z;q++)ft=(Y-q)/(Y-W),ft<0?ft=0:ft>1&&(ft=1),O[J++]=dt-(dt-rt)*ft|0,O[J++]=v-(v-K)*ft|0,O[J++]=D-(D-ut)*ft|0,O[J++]=255}}function l(P,I,M){const C=I.coords,m=I.colors;let A,H;switch(I.type){case"lattice":const F=I.verticesPerRow,b=Math.floor(C.length/F)-1,B=F-1;for(A=0;A<b;A++){let O=A*F;for(let Q=0;Q<B;Q++,O++)g(P,M,C[O],C[O+1],C[O+F],m[O],m[O+1],m[O+F]),g(P,M,C[O+F+1],C[O+1],C[O+F],m[O+F+1],m[O+1],m[O+F])}break;case"triangles":for(A=0,H=C.length;A<H;A+=3)g(P,M,C[A],C[A+1],C[A+2],m[A],m[A+1],m[A+2]);break;default:throw new Error("illegal figure")}}class w extends _{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,M,C){const F=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-F,O=Math.ceil(this._bounds[3])-b,Q=Math.min(Math.ceil(Math.abs(B*I[0]*1.1)),3e3),nt=Math.min(Math.ceil(Math.abs(O*I[1]*1.1)),3e3),U=B/Q,ot=O/nt,pt={coords:this._coords,colors:this._colors,offsetX:-F,offsetY:-b,scaleX:1/U,scaleY:1/ot},mt=Q+2*2,X=nt+2*2,yt=C.getCanvas("mesh",mt,X,!1),wt=yt.context,Rt=wt.createImageData(Q,nt);if(M){const j=Rt.data;for(let h=0,f=j.length;h<f;h+=4)j[h]=M[0],j[h+1]=M[1],j[h+2]=M[2],j[h+3]=255}for(const j of this._figures)l(Rt,j,pt);return wt.putImageData(Rt,2,2),{canvas:yt.canvas,offsetX:F-2*U,offsetY:b-2*ot,scaleX:U,scaleY:ot}}getPattern(I,M,C,m){o(I,this._bbox);let A;if(m===a.SHADING)A=s.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(I));else if(A=s.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const F=s.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*F[0],A[1]*F[1]]}const H=this._createMeshCanvas(A,m===a.SHADING?null:this._background,M.cachedCanvases);return m!==a.SHADING&&(I.setTransform(...M.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(H.offsetX,H.offsetY),I.scale(H.scaleX,H.scaleY),I.createPattern(H.canvas,"no-repeat")}}class R extends _{getPattern(){return"hotpink"}}function x(P){switch(P[0]){case"RadialAxial":return new d(P);case"Mesh":return new w(P);case"Dummy":return new R}throw new Error(`Unknown IR type: ${P[0]}`)}const k={COLORED:1,UNCOLORED:2},S=class S{constructor(I,M,C,m,A){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=M,this.ctx=C,this.canvasGraphicsFactory=m,this.baseTransform=A}createPatternCanvas(I){const M=this.operatorList,C=this.bbox,m=this.xstep,A=this.ystep,H=this.paintType,F=this.tilingType,b=this.color,B=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+F);const O=C[0],Q=C[1],nt=C[2],U=C[3],ot=s.Util.singularValueDecompose2dScale(this.matrix),pt=s.Util.singularValueDecompose2dScale(this.baseTransform),mt=[ot[0]*pt[0],ot[1]*pt[1]],X=this.getSizeAndScale(m,this.ctx.canvas.width,mt[0]),yt=this.getSizeAndScale(A,this.ctx.canvas.height,mt[1]),wt=I.cachedCanvases.getCanvas("pattern",X.size,yt.size,!0),Rt=wt.context,kt=B.createCanvasGraphics(Rt);kt.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(kt,H,b);let j=O,h=Q,f=nt,u=U;return O<0&&(j=0,f+=Math.abs(O)),Q<0&&(h=0,u+=Math.abs(Q)),Rt.translate(-(X.scale*j),-(yt.scale*h)),kt.transform(X.scale,0,0,yt.scale,0,0),Rt.save(),this.clipBbox(kt,j,h,f,u),kt.baseTransform=(0,i.getCurrentTransform)(kt.ctx),kt.executeOperatorList(M),kt.endDrawing(),{canvas:wt.canvas,scaleX:X.scale,scaleY:yt.scale,offsetX:j,offsetY:h}}getSizeAndScale(I,M,C){I=Math.abs(I);const m=Math.max(S.MAX_PATTERN_SIZE,M);let A=Math.ceil(I*C);return A>=m?A=m:C=A/I,{scale:C,size:A}}clipBbox(I,M,C,m,A){const H=m-M,F=A-C;I.ctx.rect(M,C,H,F),I.current.updateRectMinMax((0,i.getCurrentTransform)(I.ctx),[M,C,m,A]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,M,C){const m=I.ctx,A=I.current;switch(M){case k.COLORED:const H=this.ctx;m.fillStyle=H.fillStyle,m.strokeStyle=H.strokeStyle,A.fillColor=H.fillStyle,A.strokeColor=H.strokeStyle;break;case k.UNCOLORED:const F=s.Util.makeHexColor(C[0],C[1],C[2]);m.fillStyle=F,m.strokeStyle=F,A.fillColor=F,A.strokeColor=F;break;default:throw new s.FormatError(`Unsupported paint type: ${M}`)}}getPattern(I,M,C,m){let A=C;m!==a.SHADING&&(A=s.Util.transform(A,M.baseTransform),this.matrix&&(A=s.Util.transform(A,this.matrix)));const H=this.createPatternCanvas(M);let F=new DOMMatrix(A);F=F.translate(H.offsetX,H.offsetY),F=F.scale(1/H.scaleX,1/H.scaleY);const b=I.createPattern(H.canvas,"repeat");return b.setTransform(F),b}};ne(S,"MAX_PATTERN_SIZE",3e3);let T=S;e.TilingPattern=T},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=a,e.convertToRGBA=i,e.grayToRGBA=_;var s=n(1);function i(d){switch(d.kind){case s.ImageKind.GRAYSCALE_1BPP:return a(d);case s.ImageKind.RGB_24BPP:return o(d)}return null}function a({src:d,srcPos:g=0,dest:l,width:w,height:R,nonBlackColor:x=4294967295,inverseDecode:k=!1}){const T=s.FeatureTest.isLittleEndian?4278190080:255,[S,P]=k?[x,T]:[T,x],I=w>>3,M=w&7,C=d.length;l=new Uint32Array(l.buffer);let m=0;for(let A=0;A<R;A++){for(const F=g+I;g<F;g++){const b=g<C?d[g]:255;l[m++]=b&128?P:S,l[m++]=b&64?P:S,l[m++]=b&32?P:S,l[m++]=b&16?P:S,l[m++]=b&8?P:S,l[m++]=b&4?P:S,l[m++]=b&2?P:S,l[m++]=b&1?P:S}if(M===0)continue;const H=g<C?d[g++]:255;for(let F=0;F<M;F++)l[m++]=H&1<<7-F?P:S}return{srcPos:g,destPos:m}}function o({src:d,srcPos:g=0,dest:l,destPos:w=0,width:R,height:x}){let k=0;const T=d.length>>2,S=new Uint32Array(d.buffer,g,T);if(s.FeatureTest.isLittleEndian){for(;k<T-2;k+=3,w+=4){const P=S[k],I=S[k+1],M=S[k+2];l[w]=P|4278190080,l[w+1]=P>>>24|I<<8|4278190080,l[w+2]=I>>>16|M<<16|4278190080,l[w+3]=M>>>8|4278190080}for(let P=k*4,I=d.length;P<I;P+=3)l[w++]=d[P]|d[P+1]<<8|d[P+2]<<16|4278190080}else{for(;k<T-2;k+=3,w+=4){const P=S[k],I=S[k+1],M=S[k+2];l[w]=P|255,l[w+1]=P<<24|I>>>8|255,l[w+2]=I<<16|M>>>16|255,l[w+3]=M<<8|255}for(let P=k*4,I=d.length;P<I;P+=3)l[w++]=d[P]<<24|d[P+1]<<16|d[P+2]<<8|255}return{srcPos:g,destPos:w}}function _(d,g){if(s.FeatureTest.isLittleEndian)for(let l=0,w=d.length;l<w;l++)g[l]=d[l]*65793|4278190080;else for(let l=0,w=d.length;l<w;l++)g[l]=d[l]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var d,ks,l,Ms,R,ke;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var s=n(1);const i={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(k){switch(k instanceof Error||typeof k=="object"&&k!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k.name){case"AbortException":return new s.AbortException(k.message);case"MissingPDFException":return new s.MissingPDFException(k.message);case"PasswordException":return new s.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new s.UnknownErrorException(k.message,k.details);default:return new s.UnknownErrorException(k.message,k.toString())}}class _{constructor(T,S,P){G(this,d);G(this,l);G(this,R);this.sourceName=T,this.targetName=S,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const M=I.data;if(M.targetName!==this.sourceName)return;if(M.stream){it(this,l,Ms).call(this,M);return}if(M.callback){const m=M.callbackId,A=this.callbackCapabilities[m];if(!A)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],M.callback===i.DATA)A.resolve(M.data);else if(M.callback===i.ERROR)A.reject(o(M.reason));else throw new Error("Unexpected callback case");return}const C=this.actionHandler[M.action];if(!C)throw new Error(`Unknown action from worker: ${M.action}`);if(M.callbackId){const m=this.sourceName,A=M.sourceName;new Promise(function(H){H(C(M.data))}).then(function(H){P.postMessage({sourceName:m,targetName:A,callback:i.DATA,callbackId:M.callbackId,data:H})},function(H){P.postMessage({sourceName:m,targetName:A,callback:i.ERROR,callbackId:M.callbackId,reason:o(H)})});return}if(M.streamId){it(this,d,ks).call(this,M);return}C(M.data)},P.addEventListener("message",this._onComObjOnMessage)}on(T,S){const P=this.actionHandler;if(P[T])throw new Error(`There is already an actionName called "${T}"`);P[T]=S}send(T,S,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:S},P)}sendWithPromise(T,S,P){const I=this.callbackId++,M=new s.PromiseCapability;this.callbackCapabilities[I]=M;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:I,data:S},P)}catch(C){M.reject(C)}return M.promise}sendWithStream(T,S,P,I){const M=this.streamId++,C=this.sourceName,m=this.targetName,A=this.comObj;return new ReadableStream({start:H=>{const F=new s.PromiseCapability;return this.streamControllers[M]={controller:H,startCall:F,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:C,targetName:m,action:T,streamId:M,data:S,desiredSize:H.desiredSize},I),F.promise},pull:H=>{const F=new s.PromiseCapability;return this.streamControllers[M].pullCall=F,A.postMessage({sourceName:C,targetName:m,stream:a.PULL,streamId:M,desiredSize:H.desiredSize}),F.promise},cancel:H=>{(0,s.assert)(H instanceof Error,"cancel must have a valid reason");const F=new s.PromiseCapability;return this.streamControllers[M].cancelCall=F,this.streamControllers[M].isClosed=!0,A.postMessage({sourceName:C,targetName:m,stream:a.CANCEL,streamId:M,reason:o(H)}),F.promise}},P)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}d=new WeakSet,ks=function(T){const S=T.streamId,P=this.sourceName,I=T.sourceName,M=this.comObj,C=this,m=this.actionHandler[T.action],A={enqueue(H,F=1,b){if(this.isCancelled)return;const B=this.desiredSize;this.desiredSize-=F,B>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),M.postMessage({sourceName:P,targetName:I,stream:a.ENQUEUE,streamId:S,chunk:H},b)},close(){this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:P,targetName:I,stream:a.CLOSE,streamId:S}),delete C.streamSinks[S])},error(H){(0,s.assert)(H instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,M.postMessage({sourceName:P,targetName:I,stream:a.ERROR,streamId:S,reason:o(H)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[S]=A,new Promise(function(H){H(m(T.data,A))}).then(function(){M.postMessage({sourceName:P,targetName:I,stream:a.START_COMPLETE,streamId:S,success:!0})},function(H){M.postMessage({sourceName:P,targetName:I,stream:a.START_COMPLETE,streamId:S,reason:o(H)})})},l=new WeakSet,Ms=function(T){const S=T.streamId,P=this.sourceName,I=T.sourceName,M=this.comObj,C=this.streamControllers[S],m=this.streamSinks[S];switch(T.stream){case a.START_COMPLETE:T.success?C.startCall.resolve():C.startCall.reject(o(T.reason));break;case a.PULL_COMPLETE:T.success?C.pullCall.resolve():C.pullCall.reject(o(T.reason));break;case a.PULL:if(!m){M.postMessage({sourceName:P,targetName:I,stream:a.PULL_COMPLETE,streamId:S,success:!0});break}m.desiredSize<=0&&T.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=T.desiredSize,new Promise(function(A){var H;A((H=m.onPull)==null?void 0:H.call(m))}).then(function(){M.postMessage({sourceName:P,targetName:I,stream:a.PULL_COMPLETE,streamId:S,success:!0})},function(A){M.postMessage({sourceName:P,targetName:I,stream:a.PULL_COMPLETE,streamId:S,reason:o(A)})});break;case a.ENQUEUE:if((0,s.assert)(C,"enqueue should have stream controller"),C.isClosed)break;C.controller.enqueue(T.chunk);break;case a.CLOSE:if((0,s.assert)(C,"close should have stream controller"),C.isClosed)break;C.isClosed=!0,C.controller.close(),it(this,R,ke).call(this,C,S);break;case a.ERROR:(0,s.assert)(C,"error should have stream controller"),C.controller.error(o(T.reason)),it(this,R,ke).call(this,C,S);break;case a.CANCEL_COMPLETE:T.success?C.cancelCall.resolve():C.cancelCall.reject(o(T.reason)),it(this,R,ke).call(this,C,S);break;case a.CANCEL:if(!m)break;new Promise(function(A){var H;A((H=m.onCancel)==null?void 0:H.call(m,o(T.reason)))}).then(function(){M.postMessage({sourceName:P,targetName:I,stream:a.CANCEL_COMPLETE,streamId:S,success:!0})},function(A){M.postMessage({sourceName:P,targetName:I,stream:a.CANCEL_COMPLETE,streamId:S,reason:o(A)})}),m.sinkCapability.reject(o(T.reason)),m.isCancelled=!0,delete this.streamSinks[S];break;default:throw new Error("Unexpected stream case")}},R=new WeakSet,ke=async function(T,S){var P,I,M;await Promise.allSettled([(P=T.startCall)==null?void 0:P.promise,(I=T.pullCall)==null?void 0:I.promise,(M=T.cancelCall)==null?void 0:M.promise]),delete this.streamControllers[S]},e.MessageHandler=_},(t,e,n)=>{var a,o;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var s=n(1);class i{constructor({parsedData:d,rawData:g}){G(this,a,void 0);G(this,o,void 0);gt(this,a,d),gt(this,o,g)}getRaw(){return r(this,o)}get(d){return r(this,a).get(d)??null}getAll(){return(0,s.objectFromMap)(r(this,a))}has(d){return r(this,a).has(d)}}a=new WeakMap,o=new WeakMap,e.Metadata=i},(t,e,n)=>{var d,g,l,w,R,x,ss;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var s=n(1),i=n(8);const a=Symbol("INTERNAL");class o{constructor(S,P){G(this,d,!0);this.name=S,this.intent=P}get visible(){return r(this,d)}_setVisible(S,P){S!==a&&(0,s.unreachable)("Internal method `_setVisible` called."),gt(this,d,P)}}d=new WeakMap;class _{constructor(S){G(this,x);G(this,g,null);G(this,l,new Map);G(this,w,null);G(this,R,null);if(this.name=null,this.creator=null,S!==null){this.name=S.name,this.creator=S.creator,gt(this,R,S.order);for(const P of S.groups)r(this,l).set(P.id,new o(P.name,P.intent));if(S.baseState==="OFF")for(const P of r(this,l).values())P._setVisible(a,!1);for(const P of S.on)r(this,l).get(P)._setVisible(a,!0);for(const P of S.off)r(this,l).get(P)._setVisible(a,!1);gt(this,w,this.getHash())}}isVisible(S){if(r(this,l).size===0)return!0;if(!S)return(0,s.warn)("Optional content group not defined."),!0;if(S.type==="OCG")return r(this,l).has(S.id)?r(this,l).get(S.id).visible:((0,s.warn)(`Optional content group not found: ${S.id}`),!0);if(S.type==="OCMD"){if(S.expression)return it(this,x,ss).call(this,S.expression);if(!S.policy||S.policy==="AnyOn"){for(const P of S.ids){if(!r(this,l).has(P))return(0,s.warn)(`Optional content group not found: ${P}`),!0;if(r(this,l).get(P).visible)return!0}return!1}else if(S.policy==="AllOn"){for(const P of S.ids){if(!r(this,l).has(P))return(0,s.warn)(`Optional content group not found: ${P}`),!0;if(!r(this,l).get(P).visible)return!1}return!0}else if(S.policy==="AnyOff"){for(const P of S.ids){if(!r(this,l).has(P))return(0,s.warn)(`Optional content group not found: ${P}`),!0;if(!r(this,l).get(P).visible)return!0}return!1}else if(S.policy==="AllOff"){for(const P of S.ids){if(!r(this,l).has(P))return(0,s.warn)(`Optional content group not found: ${P}`),!0;if(r(this,l).get(P).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${S.policy}.`),!0}return(0,s.warn)(`Unknown group type ${S.type}.`),!0}setVisibility(S,P=!0){if(!r(this,l).has(S)){(0,s.warn)(`Optional content group not found: ${S}`);return}r(this,l).get(S)._setVisible(a,!!P),gt(this,g,null)}get hasInitialVisibility(){return r(this,w)===null||this.getHash()===r(this,w)}getOrder(){return r(this,l).size?r(this,R)?r(this,R).slice():[...r(this,l).keys()]:null}getGroups(){return r(this,l).size>0?(0,s.objectFromMap)(r(this,l)):null}getGroup(S){return r(this,l).get(S)||null}getHash(){if(r(this,g)!==null)return r(this,g);const S=new i.MurmurHash3_64;for(const[P,I]of r(this,l))S.update(`${P}:${I.visible}`);return gt(this,g,S.hexdigest())}}g=new WeakMap,l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakSet,ss=function(S){const P=S.length;if(P<2)return!0;const I=S[0];for(let M=1;M<P;M++){const C=S[M];let m;if(Array.isArray(C))m=it(this,x,ss).call(this,C);else if(r(this,l).has(C))m=r(this,l).get(C).visible;else return(0,s.warn)(`Optional content group not found: ${C}`),!0;switch(I){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return I==="And"},e.OptionalContentConfig=_},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var s=n(1),i=n(6);class a{constructor({length:g,initialData:l,progressiveDone:w=!1,contentDispositionFilename:R=null,disableRange:x=!1,disableStream:k=!1},T){if((0,s.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=w,this._contentDispositionFilename=R,(l==null?void 0:l.length)>0){const S=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(S)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!k,this._isRangeSupported=!x,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((S,P)=>{this._onReceiveData({begin:S,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((S,P)=>{this._onProgress({loaded:S,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(S=>{this._onReceiveData({chunk:S})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:l}){const w=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(w):this._queuedChunks.push(w);else{const R=this._rangeReaders.some(function(x){return x._begin!==g?!1:(x._enqueue(w),!0)});(0,s.assert)(R,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var l,w,R,x;g.total===void 0?(w=(l=this._rangeReaders[0])==null?void 0:l.onProgress)==null||w.call(l,{loaded:g.loaded}):(x=(R=this._fullRequestReader)==null?void 0:R.onProgress)==null||x.call(R,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const l=this._rangeReaders.indexOf(g);l>=0&&this._rangeReaders.splice(l,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new o(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,l){if(l<=this._progressiveDataLength)return null;const w=new _(this,g,l);return this._pdfDataRangeTransport.requestDataRange(g,l),this._rangeReaders.push(w),w}cancelAllRequests(g){var l;(l=this._fullRequestReader)==null||l.cancel(g);for(const w of this._rangeReaders.slice(0))w.cancel(g);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=a;class o{constructor(g,l,w=!1,R=null){this._stream=g,this._done=w||!1,this._filename=(0,i.isPdfFile)(R)?R:null,this._queuedChunks=l||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new s.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(g,l,w){this._stream=g,this._begin=l,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new s.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var s=n(1),i=n(20);function a(w,R,x){return{method:"GET",headers:w,signal:x.signal,mode:"cors",credentials:R?"include":"same-origin",redirect:"follow"}}function o(w){const R=new Headers;for(const x in w){const k=w[x];k!==void 0&&R.append(x,k)}return R}function _(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,s.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class d{constructor(R){this.source=R,this.isHttp=/^https?:/i.test(R.url),this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(R,x){if(x<=this._progressiveDataLength)return null;const k=new l(this,R,x);return this._rangeRequestReaders.push(k),k}cancelAllRequests(R){var x;(x=this._fullRequestReader)==null||x.cancel(R);for(const k of this._rangeRequestReaders.slice(0))k.cancel(R)}}e.PDFFetchStream=d;class g{constructor(R){this._stream=R,this._reader=null,this._loaded=0,this._filename=null;const x=R.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new s.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=o(this._stream.httpHeaders);const k=x.url;fetch(k,a(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,k);this._reader=T.body.getReader(),this._headersCapability.resolve();const S=M=>T.headers.get(M),{allowRangeRequests:P,suggestedLength:I}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=I||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._headersCapability.promise;const{value:R,done:x}=await this._reader.read();return x?{value:R,done:x}:(this._loaded+=R.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_(R),done:!1})}cancel(R){var x;(x=this._reader)==null||x.cancel(R),this._abortController.abort()}}class l{constructor(R,x,k){this._stream=R,this._reader=null,this._loaded=0;const T=R.source;this._withCredentials=T.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!T.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${k-1}`);const S=T.url;fetch(S,a(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,i.validateResponseStatus)(P.status))throw(0,i.createResponseStatusError)(P.status,S);this._readCapability.resolve(),this._reader=P.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var k;await this._readCapability.promise;const{value:R,done:x}=await this._reader.read();return x?{value:R,done:x}:(this._loaded+=R.byteLength,(k=this.onProgress)==null||k.call(this,{loaded:this._loaded}),{value:_(R),done:!1})}cancel(R){var x;(x=this._reader)==null||x.cancel(R),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=d,e.extractFilenameFromHeader=_,e.validateRangeRequestCapabilities=o,e.validateResponseStatus=g;var s=n(1),i=n(21),a=n(6);function o({getResponseHeader:l,isHttp:w,rangeChunkSize:R,disableRange:x}){const k={allowRangeRequests:!1,suggestedLength:void 0},T=parseInt(l("Content-Length"),10);return!Number.isInteger(T)||(k.suggestedLength=T,T<=2*R)||x||!w||l("Accept-Ranges")!=="bytes"||(l("Content-Encoding")||"identity")!=="identity"||(k.allowRangeRequests=!0),k}function _(l){const w=l("Content-Disposition");if(w){let R=(0,i.getFilenameFromContentDispositionHeader)(w);if(R.includes("%"))try{R=decodeURIComponent(R)}catch{}if((0,a.isPdfFile)(R))return R}return null}function d(l,w){return l===404||l===0&&w.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+w+'".'):new s.UnexpectedResponseException(`Unexpected server response (${l}) while retrieving PDF "${w}".`,l)}function g(l){return l===200||l===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var s=n(1);function i(a){let o=!0,_=d("filename\\*","i").exec(a);if(_){_=_[1];let T=R(_);return T=unescape(T),T=x(T),T=k(T),l(T)}if(_=w(a),_){const T=k(_);return l(T)}if(_=d("filename","i").exec(a),_){_=_[1];let T=R(_);return T=k(T),l(T)}function d(T,S){return new RegExp("(?:^|;)\\s*"+T+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function g(T,S){if(T){if(!/^[\x00-\xFF]+$/.test(S))return S;try{const P=new TextDecoder(T,{fatal:!0}),I=(0,s.stringToBytes)(S);S=P.decode(I),o=!1}catch{}}return S}function l(T){return o&&/[\x80-\xff]/.test(T)&&(T=g("utf-8",T),o&&(T=g("iso-8859-1",T))),T}function w(T){const S=[];let P;const I=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(P=I.exec(T))!==null;){let[,C,m,A]=P;if(C=parseInt(C,10),C in S){if(C===0)break;continue}S[C]=[m,A]}const M=[];for(let C=0;C<S.length&&C in S;++C){let[m,A]=S[C];A=R(A),m&&(A=unescape(A),C===0&&(A=x(A))),M.push(A)}return M.join("")}function R(T){if(T.startsWith('"')){const S=T.slice(1).split('\\"');for(let P=0;P<S.length;++P){const I=S[P].indexOf('"');I!==-1&&(S[P]=S[P].slice(0,I),S.length=P+1),S[P]=S[P].replaceAll(/\\(.)/g,"$1")}T=S.join('"')}return T}function x(T){const S=T.indexOf("'");if(S===-1)return T;const P=T.slice(0,S),M=T.slice(S+1).replace(/^[^']*'/,"");return g(P,M)}function k(T){return!T.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(T)?T:T.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,P,I,M){if(I==="q"||I==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,m){return String.fromCharCode(parseInt(m,16))}),g(P,M);try{M=atob(M)}catch{}return g(P,M)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var s=n(1),i=n(20);const a=200,o=206;function _(R){const x=R.response;return typeof x!="string"?x:(0,s.stringToBytes)(x).buffer}class d{constructor(x,k={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&k.httpHeaders||Object.create(null),this.withCredentials=k.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,k,T){const S={begin:x,end:k};for(const P in T)S[P]=T[P];return this.request(S)}requestFull(x){return this.request(x)}request(x){const k=new XMLHttpRequest,T=this.currXhrId++,S=this.pendingRequests[T]={xhr:k};k.open("GET",this.url),k.withCredentials=this.withCredentials;for(const P in this.httpHeaders){const I=this.httpHeaders[P];I!==void 0&&k.setRequestHeader(P,I)}return this.isHttp&&"begin"in x&&"end"in x?(k.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),S.expectedStatus=o):S.expectedStatus=a,k.responseType="arraybuffer",x.onError&&(k.onerror=function(P){x.onError(k.status)}),k.onreadystatechange=this.onStateChange.bind(this,T),k.onprogress=this.onProgress.bind(this,T),S.onHeadersReceived=x.onHeadersReceived,S.onDone=x.onDone,S.onError=x.onError,S.onProgress=x.onProgress,k.send(null),T}onProgress(x,k){var S;const T=this.pendingRequests[x];T&&((S=T.onProgress)==null||S.call(T,k))}onStateChange(x,k){var C,m,A;const T=this.pendingRequests[x];if(!T)return;const S=T.xhr;if(S.readyState>=2&&T.onHeadersReceived&&(T.onHeadersReceived(),delete T.onHeadersReceived),S.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],S.status===0&&this.isHttp){(C=T.onError)==null||C.call(T,S.status);return}const P=S.status||a;if(!(P===a&&T.expectedStatus===o)&&P!==T.expectedStatus){(m=T.onError)==null||m.call(T,S.status);return}const M=_(S);if(P===o){const H=S.getResponseHeader("Content-Range"),F=/bytes (\d+)-(\d+)\/(\d+)/.exec(H);T.onDone({begin:parseInt(F[1],10),chunk:M})}else M?T.onDone({begin:0,chunk:M}):(A=T.onError)==null||A.call(T,S.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const k=this.pendingRequests[x].xhr;delete this.pendingRequests[x],k.abort()}}class g{constructor(x){this._source=x,this._manager=new d(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const k=this._rangeRequestReaders.indexOf(x);k>=0&&this._rangeRequestReaders.splice(k,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(x,k){const T=new w(this._manager,x,k);return T.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(T),T}cancelAllRequests(x){var k;(k=this._fullRequestReader)==null||k.cancel(x);for(const T of this._rangeRequestReaders.slice(0))T.cancel(x)}}e.PDFNetworkStream=g;class l{constructor(x,k){this._manager=x;const T={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._fullRequestId=x.requestFull(T),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=k.disableRange||!1,this._contentLength=k.length,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,k=this._manager.getRequestXhr(x),T=I=>k.getResponseHeader(I),{allowRangeRequests:S,suggestedLength:P}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});S&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(T),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,i.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var k;(k=this.onProgress)==null||k.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new s.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(x,k,T){this._manager=x;const S={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(k,T,S),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const k=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:k,done:!1}):this._queuedChunk=k,this._done=!0;for(const T of this._requests)T.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,i.createResponseStatusError)(x,this._url);for(const k of this._requests)k.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var k;this.isStreamingSupported||(k=this.onProgress)==null||k.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const k=this._queuedChunk;return this._queuedChunk=null,{value:k,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new s.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var s=n(1),i=n(20);const a=/^file:\/\/\/[a-zA-Z]:\//;function o(T){const S=require$$5,P=S.parse(T);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(T)?S.parse(`file:///${T}`):(P.host||(P.protocol="file:"),P)}class _{constructor(S){this.source=S,this.url=o(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new w(this),this._fullRequestReader}getRangeReader(S,P){if(P<=this._progressiveDataLength)return null;const I=this.isFsUrl?new k(this,S,P):new R(this,S,P);return this._rangeRequestReaders.push(I),I}cancelAllRequests(S){var P;(P=this._fullRequestReader)==null||P.cancel(S);for(const I of this._rangeRequestReaders.slice(0))I.cancel(S)}}e.PDFNodeStream=_;class d{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const P=S.source;this._contentLength=P.length,this._loaded=0,this._filename=null,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=S.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",P=>{this._error(P)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const P=S.source;this._isStreamingSupported=!P.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=S.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",P=>{this._error(P)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(T,S){return{protocol:T.protocol,auth:T.auth,host:T.hostname,port:T.port,path:T.path,method:"GET",headers:S}}class w extends d{constructor(S){super(S);const P=I=>{if(I.statusCode===404){const A=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(I);const M=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:C,suggestedLength:m}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=C,this._contentLength=m||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(l(this._url,S.httpHeaders),P)}else{const I=require$$5;this._request=I.request(l(this._url,S.httpHeaders),P)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class R extends g{constructor(S,P,I){super(S),this._httpHeaders={};for(const C in S.httpHeaders){const m=S.httpHeaders[C];m!==void 0&&(this._httpHeaders[C]=m)}this._httpHeaders.Range=`bytes=${P}-${I-1}`;const M=C=>{if(C.statusCode===404){const m=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m;return}this._setReadableStream(C)};if(this._request=null,this._url.protocol==="http:"){const C=require$$5;this._request=C.request(l(this._url,this._httpHeaders),M)}else{const C=require$$5;this._request=C.request(l(this._url,this._httpHeaders),M)}this._request.on("error",C=>{this._storedError=C}),this._request.end()}}class x extends d{constructor(S){super(S);let P=decodeURIComponent(this._url.path);a.test(this._url.href)&&(P=P.replace(/^\//,""));const I=require$$5;I.lstat(P,(M,C)=>{if(M){M.code==="ENOENT"&&(M=new s.MissingPDFException(`Missing PDF "${P}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=C.size,this._setReadableStream(I.createReadStream(P)),this._headersCapability.resolve()})}}class k extends g{constructor(S,P,I){super(S);let M=decodeURIComponent(this._url.path);a.test(this._url.href)&&(M=M.replace(/^\//,""));const C=require$$5;this._setReadableStream(C.createReadStream(M,{start:P,end:I-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var s=n(6),i=n(1);const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",d=["butt","round","square"],g=["miter","round","bevel"],l=function(C,m="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([C],{type:m}));const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${m};base64,`;for(let b=0,B=C.length;b<B;b+=3){const O=C[b]&255,Q=C[b+1]&255,nt=C[b+2]&255,U=O>>2,ot=(O&3)<<4|Q>>4,pt=b+1<B?(Q&15)<<2|nt>>6:64,mt=b+2<B?nt&63:64;F+=H[U]+H[ot]+H[pt]+H[mt]}return F},w=function(){const C=new Uint8Array([137,80,78,71,13,10,26,10]),m=12,A=new Int32Array(256);for(let nt=0;nt<256;nt++){let U=nt;for(let ot=0;ot<8;ot++)U=U&1?3988292384^U>>1&2147483647:U>>1&2147483647;A[nt]=U}function H(nt,U,ot){let pt=-1;for(let mt=U;mt<ot;mt++){const X=(pt^nt[mt])&255,yt=A[X];pt=pt>>>8^yt}return pt^-1}function F(nt,U,ot,pt){let mt=pt;const X=U.length;ot[mt]=X>>24&255,ot[mt+1]=X>>16&255,ot[mt+2]=X>>8&255,ot[mt+3]=X&255,mt+=4,ot[mt]=nt.charCodeAt(0)&255,ot[mt+1]=nt.charCodeAt(1)&255,ot[mt+2]=nt.charCodeAt(2)&255,ot[mt+3]=nt.charCodeAt(3)&255,mt+=4,ot.set(U,mt),mt+=U.length;const yt=H(ot,pt+4,mt);ot[mt]=yt>>24&255,ot[mt+1]=yt>>16&255,ot[mt+2]=yt>>8&255,ot[mt+3]=yt&255}function b(nt,U,ot){let pt=1,mt=0;for(let X=U;X<ot;++X)pt=(pt+(nt[X]&255))%65521,mt=(mt+pt)%65521;return mt<<16|pt}function B(nt){if(!i.isNodeJS)return O(nt);try{const U=parseInt(process.versions.node)>=8?nt:Buffer.from(nt),ot=require$$5.deflateSync(U,{level:9});return ot instanceof Uint8Array?ot:new Uint8Array(ot)}catch(U){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+U)}return O(nt)}function O(nt){let U=nt.length;const ot=65535,pt=Math.ceil(U/ot),mt=new Uint8Array(2+U+pt*5+4);let X=0;mt[X++]=120,mt[X++]=156;let yt=0;for(;U>ot;)mt[X++]=0,mt[X++]=255,mt[X++]=255,mt[X++]=0,mt[X++]=0,mt.set(nt.subarray(yt,yt+ot),X),X+=ot,yt+=ot,U-=ot;mt[X++]=1,mt[X++]=U&255,mt[X++]=U>>8&255,mt[X++]=~U&65535&255,mt[X++]=(~U&65535)>>8&255,mt.set(nt.subarray(yt),X),X+=nt.length-yt;const wt=b(nt,0,nt.length);return mt[X++]=wt>>24&255,mt[X++]=wt>>16&255,mt[X++]=wt>>8&255,mt[X++]=wt&255,mt}function Q(nt,U,ot,pt){const mt=nt.width,X=nt.height;let yt,wt,Rt;const kt=nt.data;switch(U){case i.ImageKind.GRAYSCALE_1BPP:wt=0,yt=1,Rt=mt+7>>3;break;case i.ImageKind.RGB_24BPP:wt=2,yt=8,Rt=mt*3;break;case i.ImageKind.RGBA_32BPP:wt=6,yt=8,Rt=mt*4;break;default:throw new Error("invalid format")}const j=new Uint8Array((1+Rt)*X);let h=0,f=0;for(let Y=0;Y<X;++Y)j[h++]=0,j.set(kt.subarray(f,f+Rt),h),f+=Rt,h+=Rt;if(U===i.ImageKind.GRAYSCALE_1BPP&&pt){h=0;for(let Y=0;Y<X;Y++){h++;for(let dt=0;dt<Rt;dt++)j[h++]^=255}}const u=new Uint8Array([mt>>24&255,mt>>16&255,mt>>8&255,mt&255,X>>24&255,X>>16&255,X>>8&255,X&255,yt,wt,0,0,0]),y=B(j),E=C.length+m*3+u.length+y.length,N=new Uint8Array(E);let V=0;return N.set(C,V),V+=C.length,F("IHDR",u,N,V),V+=m+u.length,F("IDATA",y,N,V),V+=m+y.length,F("IEND",new Uint8Array(0),N,V),l(N,"image/png",ot)}return function(U,ot,pt){const mt=U.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:U.kind;return Q(U,mt,ot,pt)}}();class R{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(m,A){this.x=m,this.y=A}}function x(C){let m=[];const A=[];for(const H of C){if(H.fn==="save"){m.push({fnId:92,fn:"group",items:[]}),A.push(m),m=m.at(-1).items;continue}H.fn==="restore"?m=A.pop():m.push(H)}return m}function k(C){if(Number.isInteger(C))return C.toString();const m=C.toFixed(10);let A=m.length-1;if(m[A]!=="0")return m;do A--;while(m[A]==="0");return m.substring(0,m[A]==="."?A:A+1)}function T(C){if(C[4]===0&&C[5]===0){if(C[1]===0&&C[2]===0)return C[0]===1&&C[3]===1?"":`scale(${k(C[0])} ${k(C[3])})`;if(C[0]===C[3]&&C[1]===-C[2]){const m=Math.acos(C[0])*180/Math.PI;return`rotate(${k(m)})`}}else if(C[0]===1&&C[1]===0&&C[2]===0&&C[3]===1)return`translate(${k(C[4])} ${k(C[5])})`;return`matrix(${k(C[0])} ${k(C[1])} ${k(C[2])} ${k(C[3])} ${k(C[4])} ${k(C[5])})`}let S=0,P=0,I=0;class M{constructor(m,A,H=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new R,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=m,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!H,this._operatorIdMapping=[];for(const F in i.OPS)this._operatorIdMapping[i.OPS[F]]=F}getObject(m,A=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):A}save(){this.transformStack.push(this.transformMatrix);const m=this.current;this.extraStack.push(m),this.current=m.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(m){this.save(),this.executeOpTree(m),this.restore()}loadDependencies(m){const A=m.fnArray,H=m.argsArray;for(let F=0,b=A.length;F<b;F++)if(A[F]===i.OPS.dependency)for(const B of H[F]){const O=B.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(nt=>{O.get(B,nt)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(m,A,H,F,b,B){const O=[m,A,H,F,b,B];this.transformMatrix=i.Util.transform(this.transformMatrix,O),this.tgrp=null}getSVG(m,A){this.viewport=A;const H=this._initialize(A);return this.loadDependencies(m).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(m)),H))}convertOpList(m){const A=this._operatorIdMapping,H=m.argsArray,F=m.fnArray,b=[];for(let B=0,O=F.length;B<O;B++){const Q=F[B];b.push({fnId:Q,fn:A[Q],args:H[B]})}return x(b)}executeOpTree(m){for(const A of m){const H=A.fn,F=A.fnId,b=A.args;switch(F|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(b);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(b[0],b[1]);break;case i.OPS.setFont:this.setFont(b);break;case i.OPS.showText:this.showText(b[0]);break;case i.OPS.showSpacedText:this.showText(b[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(b[0],b[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(b[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(b[0]);break;case i.OPS.setHScale:this.setHScale(b[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(b[0],b[1],b[2],b[3],b[4],b[5]);break;case i.OPS.setTextRise:this.setTextRise(b[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(b[0]);break;case i.OPS.setLineWidth:this.setLineWidth(b[0]);break;case i.OPS.setLineJoin:this.setLineJoin(b[0]);break;case i.OPS.setLineCap:this.setLineCap(b[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(b[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(b[0],b[1],b[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(b[0],b[1],b[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(b);break;case i.OPS.setFillColorN:this.setFillColorN(b);break;case i.OPS.shadingFill:this.shadingFill(b[0]);break;case i.OPS.setDash:this.setDash(b[0],b[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(b[0]);break;case i.OPS.setFlatness:this.setFlatness(b[0]);break;case i.OPS.setGState:this.setGState(b[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(b[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(b[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(b[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(b[0],b[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(b[0],b[1],b[2],b[3],b[4],b[5]);break;case i.OPS.constructPath:this.constructPath(b[0],b[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,i.warn)(`Unimplemented operator ${H}`);break}}}setWordSpacing(m){this.current.wordSpacing=m}setCharSpacing(m){this.current.charSpacing=m}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(m,A,H,F,b,B){const O=this.current;O.textMatrix=O.lineMatrix=[m,A,H,F,b,B],O.textMatrixScale=Math.hypot(m,A),O.x=O.lineX=0,O.y=O.lineY=0,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${k(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",k(-O.y)),O.txtElement=this.svgFactory.createElement("svg:text"),O.txtElement.append(O.tspan)}beginText(){const m=this.current;m.x=m.lineX=0,m.y=m.lineY=0,m.textMatrix=i.IDENTITY_MATRIX,m.lineMatrix=i.IDENTITY_MATRIX,m.textMatrixScale=1,m.tspan=this.svgFactory.createElement("svg:tspan"),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtgrp=this.svgFactory.createElement("svg:g"),m.xcoords=[],m.ycoords=[]}moveText(m,A){const H=this.current;H.x=H.lineX+=m,H.y=H.lineY+=A,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${k(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",k(-H.y))}showText(m){const A=this.current,H=A.font,F=A.fontSize;if(F===0)return;const b=A.fontSizeScale,B=A.charSpacing,O=A.wordSpacing,Q=A.fontDirection,nt=A.textHScale*Q,U=H.vertical,ot=U?1:-1,pt=H.defaultVMetrics,mt=F*A.fontMatrix[0];let X=0;for(const Rt of m){if(Rt===null){X+=Q*O;continue}else if(typeof Rt=="number"){X+=ot*Rt*F/1e3;continue}const kt=(Rt.isSpace?O:0)+B,j=Rt.fontChar;let h,f,u=Rt.width;if(U){let E;const N=Rt.vmetric||pt;E=Rt.vmetric?N[1]:u*.5,E=-E*mt;const V=N[2]*mt;u=N?-N[0]:u,h=E/b,f=(X+V)/b}else h=X/b,f=0;(Rt.isInFont||H.missingFile)&&(A.xcoords.push(A.x+h),U&&A.ycoords.push(-A.y+f),A.tspan.textContent+=j);const y=U?u*mt-kt*Q:u*mt+kt*Q;X+=y}A.tspan.setAttributeNS(null,"x",A.xcoords.map(k).join(" ")),U?A.tspan.setAttributeNS(null,"y",A.ycoords.map(k).join(" ")):A.tspan.setAttributeNS(null,"y",k(-A.y)),U?A.y-=X:A.x+=X*nt,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${k(A.fontSize)}px`),A.fontStyle!==a.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==a.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const yt=A.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(yt===i.TextRenderingMode.FILL||yt===i.TextRenderingMode.FILL_STROKE?(A.fillColor!==a.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),yt===i.TextRenderingMode.STROKE||yt===i.TextRenderingMode.FILL_STROKE){const Rt=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,Rt)}let wt=A.textMatrix;A.textRise!==0&&(wt=wt.slice(),wt[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${T(wt)} scale(${k(nt)}, -1)`),A.txtElement.setAttributeNS(o,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(m,A){this.setLeading(-A),this.moveText(m,A)}addFontStyle(m){if(!m.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=l(m.data,m.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${m.loadedName}"; src: url(${A}); }
`}setFont(m){const A=this.current,H=this.commonObjs.get(m[0]);let F=m[1];A.font=H,this.embedFonts&&!H.missingFile&&!this.embeddedFonts[H.loadedName]&&(this.addFontStyle(H),this.embeddedFonts[H.loadedName]=H),A.fontMatrix=H.fontMatrix||i.FONT_IDENTITY_MATRIX;let b="normal";H.black?b="900":H.bold&&(b="bold");const B=H.italic?"italic":"normal";F<0?(F=-F,A.fontDirection=-1):A.fontDirection=1,A.fontSize=F,A.fontFamily=H.loadedName,A.fontWeight=b,A.fontStyle=B,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",k(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const m=this.current;m.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=m.txtElement)!=null&&A.hasChildNodes())&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(m){m>0&&(this.current.lineWidth=m)}setLineCap(m){this.current.lineCap=d[m]}setLineJoin(m){this.current.lineJoin=g[m]}setMiterLimit(m){this.current.miterLimit=m}setStrokeAlpha(m){this.current.strokeAlpha=m}setStrokeRGBColor(m,A,H){this.current.strokeColor=i.Util.makeHexColor(m,A,H)}setFillAlpha(m){this.current.fillAlpha=m}setFillRGBColor(m,A,H){this.current.fillColor=i.Util.makeHexColor(m,A,H),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(m){this.current.strokeColor=this._makeColorN_Pattern(m)}setFillColorN(m){this.current.fillColor=this._makeColorN_Pattern(m)}shadingFill(m){const{width:A,height:H}=this.viewport,F=i.Util.inverseTransform(this.transformMatrix),[b,B,O,Q]=i.Util.getAxialAlignedBoundingBox([0,0,A,H],F),nt=this.svgFactory.createElement("svg:rect");nt.setAttributeNS(null,"x",b),nt.setAttributeNS(null,"y",B),nt.setAttributeNS(null,"width",O-b),nt.setAttributeNS(null,"height",Q-B),nt.setAttributeNS(null,"fill",this._makeShadingPattern(m)),this.current.fillAlpha<1&&nt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(nt)}_makeColorN_Pattern(m){return m[0]==="TilingPattern"?this._makeTilingPattern(m):this._makeShadingPattern(m)}_makeTilingPattern(m){const A=m[1],H=m[2],F=m[3]||i.IDENTITY_MATRIX,[b,B,O,Q]=m[4],nt=m[5],U=m[6],ot=m[7],pt=`shading${I++}`,[mt,X,yt,wt]=i.Util.normalizeRect([...i.Util.applyTransform([b,B],F),...i.Util.applyTransform([O,Q],F)]),[Rt,kt]=i.Util.singularValueDecompose2dScale(F),j=nt*Rt,h=U*kt,f=this.svgFactory.createElement("svg:pattern");f.setAttributeNS(null,"id",pt),f.setAttributeNS(null,"patternUnits","userSpaceOnUse"),f.setAttributeNS(null,"width",j),f.setAttributeNS(null,"height",h),f.setAttributeNS(null,"x",`${mt}`),f.setAttributeNS(null,"y",`${X}`);const u=this.svg,y=this.transformMatrix,E=this.current.fillColor,N=this.current.strokeColor,V=this.svgFactory.create(yt-mt,wt-X);if(this.svg=V,this.transformMatrix=F,ot===2){const Y=i.Util.makeHexColor(...A);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(H)),this.svg=u,this.transformMatrix=y,this.current.fillColor=E,this.current.strokeColor=N,f.append(V.childNodes[0]),this.defs.append(f),`url(#${pt})`}_makeShadingPattern(m){switch(typeof m=="string"&&(m=this.objs.get(m)),m[0]){case"RadialAxial":const A=`shading${I++}`,H=m[3];let F;switch(m[1]){case"axial":const b=m[4],B=m[5];F=this.svgFactory.createElement("svg:linearGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"x1",b[0]),F.setAttributeNS(null,"y1",b[1]),F.setAttributeNS(null,"x2",B[0]),F.setAttributeNS(null,"y2",B[1]);break;case"radial":const O=m[4],Q=m[5],nt=m[6],U=m[7];F=this.svgFactory.createElement("svg:radialGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"cx",Q[0]),F.setAttributeNS(null,"cy",Q[1]),F.setAttributeNS(null,"r",U),F.setAttributeNS(null,"fx",O[0]),F.setAttributeNS(null,"fy",O[1]),F.setAttributeNS(null,"fr",nt);break;default:throw new Error(`Unknown RadialAxial type: ${m[1]}`)}for(const b of H){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",b[0]),B.setAttributeNS(null,"stop-color",b[1]),F.append(B)}return this.defs.append(F),`url(#${A})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${m[0]}`)}}setDash(m,A){this.current.dashArray=m,this.current.dashPhase=A}constructPath(m,A){const H=this.current;let F=H.x,b=H.y,B=[],O=0;for(const Q of m)switch(Q|0){case i.OPS.rectangle:F=A[O++],b=A[O++];const nt=A[O++],U=A[O++],ot=F+nt,pt=b+U;B.push("M",k(F),k(b),"L",k(ot),k(b),"L",k(ot),k(pt),"L",k(F),k(pt),"Z");break;case i.OPS.moveTo:F=A[O++],b=A[O++],B.push("M",k(F),k(b));break;case i.OPS.lineTo:F=A[O++],b=A[O++],B.push("L",k(F),k(b));break;case i.OPS.curveTo:F=A[O+4],b=A[O+5],B.push("C",k(A[O]),k(A[O+1]),k(A[O+2]),k(A[O+3]),k(F),k(b)),O+=6;break;case i.OPS.curveTo2:B.push("C",k(F),k(b),k(A[O]),k(A[O+1]),k(A[O+2]),k(A[O+3])),F=A[O+2],b=A[O+3],O+=4;break;case i.OPS.curveTo3:F=A[O+2],b=A[O+3],B.push("C",k(A[O]),k(A[O+1]),k(F),k(b),k(F),k(b)),O+=4;break;case i.OPS.closePath:B.push("Z");break}B=B.join(" "),H.path&&m.length>0&&m[0]!==i.OPS.rectangle&&m[0]!==i.OPS.moveTo?B=H.path.getAttributeNS(null,"d")+B:(H.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(H.path)),H.path.setAttributeNS(null,"d",B),H.path.setAttributeNS(null,"fill","none"),H.element=H.path,H.setCurrentPoint(F,b)}endPath(){const m=this.current;if(m.path=null,!this.pendingClip)return;if(!m.element){this.pendingClip=null;return}const A=`clippath${S++}`,H=this.svgFactory.createElement("svg:clipPath");H.setAttributeNS(null,"id",A),H.setAttributeNS(null,"transform",T(this.transformMatrix));const F=m.element.cloneNode(!0);if(this.pendingClip==="evenodd"?F.setAttributeNS(null,"clip-rule","evenodd"):F.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,H.append(F),this.defs.append(H),m.activeClipUrl){m.clipGroup=null;for(const b of this.extraStack)b.clipGroup=null;H.setAttributeNS(null,"clip-path",m.activeClipUrl)}m.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(m){this.pendingClip=m}closePath(){const m=this.current;if(m.path){const A=`${m.path.getAttributeNS(null,"d")}Z`;m.path.setAttributeNS(null,"d",A)}}setLeading(m){this.current.leading=-m}setTextRise(m){this.current.textRise=m}setTextRenderingMode(m){this.current.textRenderingMode=m}setHScale(m){this.current.textHScale=m/100}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[A,H]of m)switch(A){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H);break;case"CA":this.setStrokeAlpha(H);break;case"ca":this.setFillAlpha(H);break;default:(0,i.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const m=this.current;m.element&&(m.element.setAttributeNS(null,"fill",m.fillColor),m.element.setAttributeNS(null,"fill-opacity",m.fillAlpha),this.endPath())}stroke(){const m=this.current;m.element&&(this._setStrokeAttributes(m.element),m.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(m,A=1){const H=this.current;let F=H.dashArray;A!==1&&F.length>0&&(F=F.map(function(b){return A*b})),m.setAttributeNS(null,"stroke",H.strokeColor),m.setAttributeNS(null,"stroke-opacity",H.strokeAlpha),m.setAttributeNS(null,"stroke-miterlimit",k(H.miterLimit)),m.setAttributeNS(null,"stroke-linecap",H.lineCap),m.setAttributeNS(null,"stroke-linejoin",H.lineJoin),m.setAttributeNS(null,"stroke-width",k(A*H.lineWidth)+"px"),m.setAttributeNS(null,"stroke-dasharray",F.map(k).join(" ")),m.setAttributeNS(null,"stroke-dashoffset",k(A*H.dashPhase)+"px")}eoFill(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var m;(m=this.current.element)==null||m.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(m)}paintImageXObject(m){const A=this.getObject(m);if(!A){(0,i.warn)(`Dependent image with object ID ${m} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(m,A){const H=m.width,F=m.height,b=w(m,this.forceDataSchema,!!A),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",k(H)),B.setAttributeNS(null,"height",k(F)),this.current.element=B,this.clip("nonzero");const O=this.svgFactory.createElement("svg:image");O.setAttributeNS(_,"xlink:href",b),O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y",k(-F)),O.setAttributeNS(null,"width",k(H)+"px"),O.setAttributeNS(null,"height",k(F)+"px"),O.setAttributeNS(null,"transform",`scale(${k(1/H)} ${k(-1/F)})`),A?A.append(O):this._ensureTransformGroup().append(O)}paintImageMaskXObject(m){const A=this.getObject(m.data,m);if(A.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const H=this.current,F=A.width,b=A.height,B=H.fillColor;H.maskId=`mask${P++}`;const O=this.svgFactory.createElement("svg:mask");O.setAttributeNS(null,"id",H.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",k(F)),Q.setAttributeNS(null,"height",k(b)),Q.setAttributeNS(null,"fill",B),Q.setAttributeNS(null,"mask",`url(#${H.maskId})`),this.defs.append(O),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(A,O)}paintFormXObjectBegin(m,A){if(Array.isArray(m)&&m.length===6&&this.transform(m[0],m[1],m[2],m[3],m[4],m[5]),A){const H=A[2]-A[0],F=A[3]-A[1],b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x",A[0]),b.setAttributeNS(null,"y",A[1]),b.setAttributeNS(null,"width",k(H)),b.setAttributeNS(null,"height",k(F)),this.current.element=b,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(m){const A=this.svgFactory.create(m.width,m.height),H=this.svgFactory.createElement("svg:defs");A.append(H),this.defs=H;const F=this.svgFactory.createElement("svg:g");return F.setAttributeNS(null,"transform",T(m.transform)),A.append(F),this.svg=F,A}_ensureClipGroup(){if(!this.current.clipGroup){const m=this.svgFactory.createElement("svg:g");m.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(m),this.current.clipGroup=m}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=M},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(i){const a=[],o={items:a,styles:Object.create(null)};function _(d){var w;if(!d)return;let g=null;const l=d.name;if(l==="#text")g=d.value;else if(n.shouldBuildText(l))(w=d==null?void 0:d.attributes)!=null&&w.textContent?g=d.attributes.textContent:d.value&&(g=d.value);else return;if(g!==null&&a.push({str:g}),!!d.children)for(const R of d.children)_(R)}return _(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=T,e.updateTextLayer=S;var s=n(1),i=n(6);const a=1e5,o=30,_=.8,d=new Map;function g(P,I){let M;if(I&&s.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(P,P).getContext("2d",{alpha:!1});else{const C=document.createElement("canvas");C.width=C.height=P,M=C.getContext("2d",{alpha:!1})}return M}function l(P,I){const M=d.get(P);if(M)return M;const C=g(o,I);C.font=`${o}px ${P}`;const m=C.measureText("");let A=m.fontBoundingBoxAscent,H=Math.abs(m.fontBoundingBoxDescent);if(A){const b=A/(A+H);return d.set(P,b),C.canvas.width=C.canvas.height=0,b}C.strokeStyle="red",C.clearRect(0,0,o,o),C.strokeText("g",0,0);let F=C.getImageData(0,0,o,o).data;H=0;for(let b=F.length-1-3;b>=0;b-=4)if(F[b]>0){H=Math.ceil(b/4/o);break}C.clearRect(0,0,o,o),C.strokeText("A",0,o),F=C.getImageData(0,0,o,o).data,A=0;for(let b=0,B=F.length;b<B;b+=4)if(F[b]>0){A=o-Math.floor(b/4/o);break}if(C.canvas.width=C.canvas.height=0,A){const b=A/(A+H);return d.set(P,b),b}return d.set(P,_),_}function w(P,I,M){const C=document.createElement("span"),m={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};P._textDivs.push(C);const A=s.Util.transform(P._transform,I.transform);let H=Math.atan2(A[1],A[0]);const F=M[I.fontName];F.vertical&&(H+=Math.PI/2);const b=Math.hypot(A[2],A[3]),B=b*l(F.fontFamily,P._isOffscreenCanvasSupported);let O,Q;H===0?(O=A[4],Q=A[5]-B):(O=A[4]+B*Math.sin(H),Q=A[5]-B*Math.cos(H));const nt="calc(var(--scale-factor)*",U=C.style;P._container===P._rootContainer?(U.left=`${(100*O/P._pageWidth).toFixed(2)}%`,U.top=`${(100*Q/P._pageHeight).toFixed(2)}%`):(U.left=`${nt}${O.toFixed(2)}px)`,U.top=`${nt}${Q.toFixed(2)}px)`),U.fontSize=`${nt}${b.toFixed(2)}px)`,U.fontFamily=F.fontFamily,m.fontSize=b,C.setAttribute("role","presentation"),C.textContent=I.str,C.dir=I.dir,P._fontInspectorEnabled&&(C.dataset.fontName=I.fontName),H!==0&&(m.angle=H*(180/Math.PI));let ot=!1;if(I.str.length>1)ot=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const pt=Math.abs(I.transform[0]),mt=Math.abs(I.transform[3]);pt!==mt&&Math.max(pt,mt)/Math.min(pt,mt)>1.5&&(ot=!0)}ot&&(m.canvasWidth=F.vertical?I.height:I.width),P._textDivProperties.set(C,m),P._isReadableStream&&P._layoutText(C)}function R(P){const{div:I,scale:M,properties:C,ctx:m,prevFontSize:A,prevFontFamily:H}=P,{style:F}=I;let b="";if(C.canvasWidth!==0&&C.hasText){const{fontFamily:B}=F,{canvasWidth:O,fontSize:Q}=C;(A!==Q||H!==B)&&(m.font=`${Q*M}px ${B}`,P.prevFontSize=Q,P.prevFontFamily=B);const{width:nt}=m.measureText(I.textContent);nt>0&&(b=`scaleX(${O*M/nt})`)}C.angle!==0&&(b=`rotate(${C.angle}deg) ${b}`),b.length>0&&(F.transform=b)}function x(P){if(P._canceled)return;const I=P._textDivs,M=P._capability;if(I.length>a){M.resolve();return}if(!P._isReadableStream)for(const m of I)P._layoutText(m);M.resolve()}class k{constructor({textContentSource:I,container:M,viewport:C,textDivs:m,textDivProperties:A,textContentItemsStr:H,isOffscreenCanvasSupported:F}){var nt;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=m||[],this._textContentItemsStr=H||[],this._isOffscreenCanvasSupported=F,this._fontInspectorEnabled=!!((nt=globalThis.FontInspector)!=null&&nt.enabled),this._reader=null,this._textDivProperties=A||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,F)};const{pageWidth:b,pageHeight:B,pageX:O,pageY:Q}=C.rawDims;this._transform=[1,0,0,-1,-O,Q+B],this._pageWidth=b,this._pageHeight=B,(0,i.setLayerDimensions)(M,C),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(I,M){for(const C of I){if(C.str===void 0){if(C.type==="beginMarkedContentProps"||C.type==="beginMarkedContent"){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),C.id!==null&&this._container.setAttribute("id",`${C.id}`),m.append(this._container)}else C.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(C.str),w(this,C,M)}}_layoutText(I){const M=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,R(this._layoutTextParams),M.hasText&&this._container.append(I),M.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),this._container.append(C)}}_render(){const I=new s.PromiseCapability;let M=Object.create(null);if(this._isReadableStream){const C=()=>{this._reader.read().then(({value:m,done:A})=>{if(A){I.resolve();return}Object.assign(M,m.styles),this._processItems(m.items,M),C()},I.reject)};this._reader=this._textContentSource.getReader(),C()}else if(this._textContentSource){const{items:C,styles:m}=this._textContentSource;this._processItems(C,m),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{M=null,x(this)},this._capability.reject)}}e.TextLayerRenderTask=k;function T(P){!P.textContentSource&&(P.textContent||P.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),P.textContentSource=P.textContent||P.textContentStream);const{container:I,viewport:M}=P,C=getComputedStyle(I),m=C.getPropertyValue("visibility"),A=parseFloat(C.getPropertyValue("--scale-factor"));m==="visible"&&(!A||Math.abs(A-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const H=new k(P);return H._render(),H}function S({container:P,viewport:I,textDivs:M,textDivProperties:C,isOffscreenCanvasSupported:m,mustRotate:A=!0,mustRescale:H=!0}){if(A&&(0,i.setLayerDimensions)(P,{rotation:I.rotation}),H){const F=g(0,m),B={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F};for(const O of M)B.properties=C.get(O),B.div=O,R(B)}}},(t,e,n)=>{var l,w,R,x,k,T,S,P,I,M,C,ns,A,Me,F,is,B,rs;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var s=n(1),i=n(4),a=n(28),o=n(33),_=n(6),d=n(34);const Q=class Q{constructor({uiManager:U,pageIndex:ot,div:pt,accessibilityManager:mt,annotationLayer:X,viewport:yt,l10n:wt}){G(this,C);G(this,A);G(this,F);G(this,B);G(this,l,void 0);G(this,w,!1);G(this,R,null);G(this,x,this.pointerup.bind(this));G(this,k,this.pointerdown.bind(this));G(this,T,new Map);G(this,S,!1);G(this,P,!1);G(this,I,!1);G(this,M,void 0);const Rt=[a.FreeTextEditor,o.InkEditor,d.StampEditor];if(!Q._initialized){Q._initialized=!0;for(const kt of Rt)kt.initialize(wt)}U.registerEditorTypes(Rt),gt(this,M,U),this.pageIndex=ot,this.div=pt,gt(this,l,mt),gt(this,R,X),this.viewport=yt,r(this,M).addLayer(this)}get isEmpty(){return r(this,T).size===0}updateToolbar(U){r(this,M).updateToolbar(U)}updateMode(U=r(this,M).getMode()){it(this,B,rs).call(this),U===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),U!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",U===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",U===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",U===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(U){if(!U&&r(this,M).getMode()!==s.AnnotationEditorType.INK)return;if(!U){for(const pt of r(this,T).values())if(pt.isEmpty()){pt.setInBackground();return}}it(this,A,Me).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(U){r(this,M).setEditingState(U)}addCommands(U){r(this,M).addCommands(U)}enable(){this.div.style.pointerEvents="auto";const U=new Set;for(const pt of r(this,T).values())pt.enableEditing(),pt.annotationElementId&&U.add(pt.annotationElementId);if(!r(this,R))return;const ot=r(this,R).getEditableAnnotations();for(const pt of ot){if(pt.hide(),r(this,M).isDeletedAnnotationElement(pt.data.id)||U.has(pt.data.id))continue;const mt=this.deserialize(pt);mt&&(this.addOrRebuild(mt),mt.enableEditing())}}disable(){var ot;gt(this,I,!0),this.div.style.pointerEvents="none";const U=new Set;for(const pt of r(this,T).values()){if(pt.disableEditing(),!pt.annotationElementId||pt.serialize()!==null){U.add(pt.annotationElementId);continue}(ot=this.getEditableAnnotation(pt.annotationElementId))==null||ot.show(),pt.remove()}if(r(this,R)){const pt=r(this,R).getEditableAnnotations();for(const mt of pt){const{id:X}=mt.data;U.has(X)||r(this,M).isDeletedAnnotationElement(X)||mt.show()}}it(this,B,rs).call(this),this.isEmpty&&(this.div.hidden=!0),gt(this,I,!1)}getEditableAnnotation(U){var ot;return((ot=r(this,R))==null?void 0:ot.getEditableAnnotation(U))||null}setActiveEditor(U){r(this,M).getActive()!==U&&r(this,M).setActiveEditor(U)}enableClick(){this.div.addEventListener("pointerdown",r(this,k)),this.div.addEventListener("pointerup",r(this,x))}disableClick(){this.div.removeEventListener("pointerdown",r(this,k)),this.div.removeEventListener("pointerup",r(this,x))}attach(U){r(this,T).set(U.id,U);const{annotationElementId:ot}=U;ot&&r(this,M).isDeletedAnnotationElement(ot)&&r(this,M).removeDeletedAnnotationElement(U)}detach(U){var ot;r(this,T).delete(U.id),(ot=r(this,l))==null||ot.removePointerInTextLayer(U.contentDiv),!r(this,I)&&U.annotationElementId&&r(this,M).addDeletedAnnotationElement(U)}remove(U){this.detach(U),r(this,M).removeEditor(U),U.div.contains(document.activeElement)&&setTimeout(()=>{r(this,M).focusMainContainer()},0),U.div.remove(),U.isAttachedToDOM=!1,r(this,P)||this.addInkEditorIfNeeded(!1)}changeParent(U){var ot;U.parent!==this&&(U.annotationElementId&&(r(this,M).addDeletedAnnotationElement(U.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(U),U.annotationElementId=null),this.attach(U),(ot=U.parent)==null||ot.detach(U),U.setParent(this),U.div&&U.isAttachedToDOM&&(U.div.remove(),this.div.append(U.div)))}add(U){if(this.changeParent(U),r(this,M).addEditor(U),this.attach(U),!U.isAttachedToDOM){const ot=U.render();this.div.append(ot),U.isAttachedToDOM=!0}U.fixAndSetPosition(),U.onceAdded(),r(this,M).addToAnnotationStorage(U)}moveEditorInDOM(U){var pt;if(!U.isAttachedToDOM)return;const{activeElement:ot}=document;U.div.contains(ot)&&(U._focusEventsAllowed=!1,setTimeout(()=>{U.div.contains(document.activeElement)?U._focusEventsAllowed=!0:(U.div.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),ot.focus())},0)),U._structTreeParentId=(pt=r(this,l))==null?void 0:pt.moveElementInDOM(this.div,U.div,U.contentDiv,!0)}addOrRebuild(U){U.needsToBeRebuilt()?U.rebuild():this.add(U)}addUndoableEditor(U){const ot=()=>U._uiManager.rebuild(U),pt=()=>{U.remove()};this.addCommands({cmd:ot,undo:pt,mustExec:!1})}getNextId(){return r(this,M).getId()}pasteEditor(U,ot){r(this,M).updateToolbar(U),r(this,M).updateMode(U);const{offsetX:pt,offsetY:mt}=it(this,F,is).call(this),X=this.getNextId(),yt=it(this,C,ns).call(this,{parent:this,id:X,x:pt,y:mt,uiManager:r(this,M),isCentered:!0,...ot});yt&&this.add(yt)}deserialize(U){switch(U.annotationType??U.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(U,this,r(this,M));case s.AnnotationEditorType.INK:return o.InkEditor.deserialize(U,this,r(this,M));case s.AnnotationEditorType.STAMP:return d.StampEditor.deserialize(U,this,r(this,M))}return null}addNewEditor(){it(this,A,Me).call(this,it(this,F,is).call(this),!0)}setSelected(U){r(this,M).setSelected(U)}toggleSelected(U){r(this,M).toggleSelected(U)}isSelected(U){return r(this,M).isSelected(U)}unselect(U){r(this,M).unselect(U)}pointerup(U){const{isMac:ot}=s.FeatureTest.platform;if(!(U.button!==0||U.ctrlKey&&ot)&&U.target===this.div&&r(this,S)){if(gt(this,S,!1),!r(this,w)){gt(this,w,!0);return}if(r(this,M).getMode()===s.AnnotationEditorType.STAMP){r(this,M).unselectAll();return}it(this,A,Me).call(this,U,!1)}}pointerdown(U){if(r(this,S)){gt(this,S,!1);return}const{isMac:ot}=s.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&ot||U.target!==this.div)return;gt(this,S,!0);const pt=r(this,M).getActive();gt(this,w,!pt||pt.isEmpty())}findNewParent(U,ot,pt){const mt=r(this,M).findParent(ot,pt);return mt===null||mt===this?!1:(mt.changeParent(U),!0)}destroy(){var U,ot;((U=r(this,M).getActive())==null?void 0:U.parent)===this&&(r(this,M).commitOrRemove(),r(this,M).setActiveEditor(null));for(const pt of r(this,T).values())(ot=r(this,l))==null||ot.removePointerInTextLayer(pt.contentDiv),pt.setParent(null),pt.isAttachedToDOM=!1,pt.div.remove();this.div=null,r(this,T).clear(),r(this,M).removeLayer(this)}render({viewport:U}){this.viewport=U,(0,_.setLayerDimensions)(this.div,U);for(const ot of r(this,M).getEditors(this.pageIndex))this.add(ot);this.updateMode()}update({viewport:U}){r(this,M).commitOrRemove(),this.viewport=U,(0,_.setLayerDimensions)(this.div,{rotation:U.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:U,pageHeight:ot}=this.viewport.rawDims;return[U,ot]}};l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,I=new WeakMap,M=new WeakMap,C=new WeakSet,ns=function(U){switch(r(this,M).getMode()){case s.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(U);case s.AnnotationEditorType.INK:return new o.InkEditor(U);case s.AnnotationEditorType.STAMP:return new d.StampEditor(U)}return null},A=new WeakSet,Me=function(U,ot){const pt=this.getNextId(),mt=it(this,C,ns).call(this,{parent:this,id:pt,x:U.offsetX,y:U.offsetY,uiManager:r(this,M),isCentered:ot});return mt&&this.add(mt),mt},F=new WeakSet,is=function(){const{x:U,y:ot,width:pt,height:mt}=this.div.getBoundingClientRect(),X=Math.max(0,U),yt=Math.max(0,ot),wt=Math.min(window.innerWidth,U+pt),Rt=Math.min(window.innerHeight,ot+mt),kt=(X+wt)/2-U,j=(yt+Rt)/2-ot,[h,f]=this.viewport.rotation%180===0?[kt,j]:[j,kt];return{offsetX:h,offsetY:f}},B=new WeakSet,rs=function(){gt(this,P,!0);for(const U of r(this,T).values())U.isEmpty()&&U.remove();gt(this,P,!1)},ne(Q,"_initialized",!1);let g=Q;e.AnnotationEditorLayer=g},(t,e,n)=>{var d,g,l,w,R,x,k,T,S,P,Fs,M,Is,m,Os,H,Se,b,as,O,Ds,nt,os;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var s=n(1),i=n(5),a=n(4),o=n(29);const ot=class ot extends a.AnnotationEditor{constructor(X){super({...X,name:"freeTextEditor"});G(this,P);G(this,M);G(this,m);G(this,H);G(this,b);G(this,O);G(this,nt);G(this,d,this.editorDivBlur.bind(this));G(this,g,this.editorDivFocus.bind(this));G(this,l,this.editorDivInput.bind(this));G(this,w,this.editorDivKeydown.bind(this));G(this,R,void 0);G(this,x,"");G(this,k,`${this.id}-editor`);G(this,T,void 0);G(this,S,null);gt(this,R,X.color||ot._defaultColor||a.AnnotationEditor._defaultLineColor),gt(this,T,X.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const X=ot.prototype,yt=kt=>kt.isEmpty(),wt=i.AnnotationEditorUIManager.TRANSLATE_SMALL,Rt=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],X.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],X.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],X._translateEmpty,{args:[-wt,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],X._translateEmpty,{args:[-Rt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],X._translateEmpty,{args:[wt,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],X._translateEmpty,{args:[Rt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],X._translateEmpty,{args:[0,-wt],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],X._translateEmpty,{args:[0,-Rt],checker:yt}],[["ArrowDown","mac+ArrowDown"],X._translateEmpty,{args:[0,wt],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],X._translateEmpty,{args:[0,Rt],checker:yt}]]))}static initialize(X){a.AnnotationEditor.initialize(X,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(X,yt){switch(X){case s.AnnotationEditorParamsType.FREETEXT_SIZE:ot._defaultFontSize=yt;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:ot._defaultColor=yt;break}}updateParams(X,yt){switch(X){case s.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,P,Fs).call(this,yt);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,M,Is).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,ot._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,ot._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,T)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,R)]]}_translateEmpty(X,yt){this._uiManager.translateSelectedEditors(X,yt,!0)}getInitialTranslation(){const X=this.parentScale;return[-ot._internalPadding*X,-(ot._internalPadding+r(this,T))*X]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,w)),this.editorDiv.addEventListener("focus",r(this,g)),this.editorDiv.addEventListener("blur",r(this,d)),this.editorDiv.addEventListener("input",r(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,k)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",r(this,w)),this.editorDiv.removeEventListener("focus",r(this,g)),this.editorDiv.removeEventListener("blur",r(this,d)),this.editorDiv.removeEventListener("input",r(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(X){this._focusEventsAllowed&&(super.focusin(X),X.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var X;if(this.width){it(this,nt,os).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(X=this._initialOptions)!=null&&X.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const X=r(this,x),yt=gt(this,x,it(this,m,Os).call(this).trimEnd());if(X===yt)return;const wt=Rt=>{if(gt(this,x,Rt),!Rt){this.remove();return}it(this,b,as).call(this),this._uiManager.rebuild(this),it(this,H,Se).call(this)};this.addCommands({cmd:()=>{wt(yt)},undo:()=>{wt(X)},mustExec:!1}),it(this,H,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(X){this.enterInEditMode()}keydown(X){X.target===this.div&&X.key==="Enter"&&(this.enterInEditMode(),X.preventDefault())}editorDivKeydown(X){ot._keyboardManager.exec(this,X)}editorDivFocus(X){this.isEditing=!0}editorDivBlur(X){this.isEditing=!1}editorDivInput(X){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let X,yt;this.width&&(X=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,k)),this.enableEditing(),a.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("aria-label",Rt)}),a.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Rt=>{var kt;return(kt=this.editorDiv)==null?void 0:kt.setAttribute("default-content",Rt)}),this.editorDiv.contentEditable=!0;const{style:wt}=this.editorDiv;if(wt.fontSize=`calc(${r(this,T)}px * var(--scale-factor))`,wt.color=r(this,R),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Rt,kt]=this.parentDimensions;if(this.annotationElementId){const{position:j}=r(this,S);let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[u,y]=this.pageDimensions,[E,N]=this.pageTranslation;let V,Y;switch(this.rotation){case 0:V=X+(j[0]-E)/u,Y=yt+this.height-(j[1]-N)/y;break;case 90:V=X+(j[0]-E)/u,Y=yt-(j[1]-N)/y,[h,f]=[f,-h];break;case 180:V=X-this.width+(j[0]-E)/u,Y=yt-(j[1]-N)/y,[h,f]=[-h,-f];break;case 270:V=X+(j[0]-E-this.height*y)/u,Y=yt+(j[1]-N-this.width*u)/y,[h,f]=[-f,h];break}this.setAt(V*Rt,Y*kt,h,f)}else this.setAt(X*Rt,yt*kt,this.width*Rt,this.height*kt);it(this,b,as).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(X,yt,wt){let Rt=null;if(X instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:j,fontColor:h},rect:f,rotation:u,id:y},textContent:E,textPosition:N,parent:{page:{pageNumber:V}}}=X;if(!E||E.length===0)return null;Rt=X={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(h),fontSize:j,value:E.join(`
`),position:N,pageIndex:V-1,rect:f,rotation:u,id:y,deleted:!1}}const kt=super.deserialize(X,yt,wt);return gt(kt,T,X.fontSize),gt(kt,R,s.Util.makeHexColor(...X.color)),gt(kt,x,X.value),kt.annotationElementId=X.id||null,gt(kt,S,Rt),kt}serialize(X=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=ot._internalPadding*this.parentScale,wt=this.getRect(yt,yt),Rt=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,R)),kt={annotationType:s.AnnotationEditorType.FREETEXT,color:Rt,fontSize:r(this,T),value:r(this,x),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return X?kt:this.annotationElementId&&!it(this,O,Ds).call(this,kt)?null:(kt.id=this.annotationElementId,kt)}};d=new WeakMap,g=new WeakMap,l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakSet,Fs=function(X){const yt=Rt=>{this.editorDiv.style.fontSize=`calc(${Rt}px * var(--scale-factor))`,this.translate(0,-(Rt-r(this,T))*this.parentScale),gt(this,T,Rt),it(this,H,Se).call(this)},wt=r(this,T);this.addCommands({cmd:()=>{yt(X)},undo:()=>{yt(wt)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,Is=function(X){const yt=r(this,R);this.addCommands({cmd:()=>{gt(this,R,this.editorDiv.style.color=X)},undo:()=>{gt(this,R,this.editorDiv.style.color=yt)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Os=function(){const X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;const yt=[];for(const wt of X)yt.push(wt.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},H=new WeakSet,Se=function(){const[X,yt]=this.parentDimensions;let wt;if(this.isAttachedToDOM)wt=this.div.getBoundingClientRect();else{const{currentLayer:Rt,div:kt}=this,j=kt.style.display;kt.style.display="hidden",Rt.div.append(this.div),wt=kt.getBoundingClientRect(),kt.remove(),kt.style.display=j}this.rotation%180===this.parentRotation%180?(this.width=wt.width/X,this.height=wt.height/yt):(this.width=wt.height/X,this.height=wt.width/yt),this.fixAndSetPosition()},b=new WeakSet,as=function(){if(this.editorDiv.replaceChildren(),!!r(this,x))for(const X of r(this,x).split(`
`)){const yt=document.createElement("div");yt.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(yt)}},O=new WeakSet,Ds=function(X){const{value:yt,fontSize:wt,color:Rt,rect:kt,pageIndex:j}=r(this,S);return X.value!==yt||X.fontSize!==wt||X.rect.some((h,f)=>Math.abs(h-kt[f])>=1)||X.color.some((h,f)=>h!==Rt[f])||X.pageIndex!==j},nt=new WeakSet,os=function(X=!1){if(!this.annotationElementId)return;if(it(this,H,Se).call(this),!X&&(this.width===0||this.height===0)){setTimeout(()=>it(this,nt,os).call(this,!0),0);return}const yt=ot._internalPadding*this.parentScale;r(this,S).rect=this.getRect(yt,yt)},ne(ot,"_freeTextDefaultContent",""),ne(ot,"_internalPadding",0),ne(ot,"_defaultColor",null),ne(ot,"_defaultFontSize",10),ne(ot,"_type","freetext");let _=ot;e.FreeTextEditor=_},(t,e,n)=>{var f,y,ue,N,Ls,Y,dt,v,D,W,rt,K,ut,St,ft,_t,Z,J,q,ct,vt,Et,Dt,Ns,jt,Fe,Gt,ls,Yt,cs,at,st,xt,Ct,se,ee,ht,hs,Ht,Ft,Vt,zt,Bs,Pt,us;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var s=n(1),i=n(6),a=n(3),o=n(30),_=n(31),d=n(32);const g=1e3,l=9,w=new WeakSet;function R(Ut){return{width:Ut[2]-Ut[0],height:Ut[3]-Ut[1]}}class x{static create($){switch($.data.annotationType){case s.AnnotationType.LINK:return new T($);case s.AnnotationType.TEXT:return new S($);case s.AnnotationType.WIDGET:switch($.data.fieldType){case"Tx":return new I($);case"Btn":return $.data.radioButton?new m($):$.data.checkBox?new C($):new A($);case"Ch":return new H($);case"Sig":return new M($)}return new P($);case s.AnnotationType.POPUP:return new F($);case s.AnnotationType.FREETEXT:return new B($);case s.AnnotationType.LINE:return new O($);case s.AnnotationType.SQUARE:return new Q($);case s.AnnotationType.CIRCLE:return new nt($);case s.AnnotationType.POLYLINE:return new U($);case s.AnnotationType.CARET:return new pt($);case s.AnnotationType.INK:return new mt($);case s.AnnotationType.POLYGON:return new ot($);case s.AnnotationType.HIGHLIGHT:return new X($);case s.AnnotationType.UNDERLINE:return new yt($);case s.AnnotationType.SQUIGGLY:return new wt($);case s.AnnotationType.STRIKEOUT:return new Rt($);case s.AnnotationType.STAMP:return new kt($);case s.AnnotationType.FILEATTACHMENT:return new j($);default:return new k($)}}}const u=class u{constructor($,{isRenderable:c=!1,ignoreBorder:L=!1,createQuadrilaterals:z=!1}={}){G(this,f,!1);this.isRenderable=c,this.data=$.data,this.layer=$.layer,this.linkService=$.linkService,this.downloadManager=$.downloadManager,this.imageResourcesPath=$.imageResourcesPath,this.renderForms=$.renderForms,this.svgFactory=$.svgFactory,this.annotationStorage=$.annotationStorage,this.enableScripting=$.enableScripting,this.hasJSActions=$.hasJSActions,this._fieldObjects=$.fieldObjects,this.parent=$.parent,c&&(this.container=this._createContainer(L)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:$,contentsObj:c,richText:L}){return!!($!=null&&$.str||c!=null&&c.str||L!=null&&L.str)}get hasPopupData(){return u._hasPopupData(this.data)}_createContainer($){const{data:c,parent:{page:L,viewport:z}}=this,et=document.createElement("section");et.setAttribute("data-annotation-id",c.id),this instanceof P||(et.tabIndex=g),et.style.zIndex=this.parent.zIndex++,this.data.popupRef&&et.setAttribute("aria-haspopup","dialog"),c.noRotate&&et.classList.add("norotate");const{pageWidth:lt,pageHeight:bt,pageX:Tt,pageY:Ot}=z.rawDims;if(!c.rect||this instanceof F){const{rotation:qt}=c;return!c.hasOwnCanvas&&qt!==0&&this.setRotation(qt,et),et}const{width:It,height:Xt}=R(c.rect),Nt=s.Util.normalizeRect([c.rect[0],L.view[3]-c.rect[1]+L.view[1],c.rect[2],L.view[3]-c.rect[3]+L.view[1]]);if(!$&&c.borderStyle.width>0){et.style.borderWidth=`${c.borderStyle.width}px`;const qt=c.borderStyle.horizontalCornerRadius,Kt=c.borderStyle.verticalCornerRadius;if(qt>0||Kt>0){const te=`calc(${qt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;et.style.borderRadius=te}else if(this instanceof m){const te=`calc(${It}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;et.style.borderRadius=te}switch(c.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:et.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:et.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:et.style.borderBottomStyle="solid";break}const Qt=c.borderColor||null;Qt?(gt(this,f,!0),et.style.borderColor=s.Util.makeHexColor(Qt[0]|0,Qt[1]|0,Qt[2]|0)):et.style.borderWidth=0}et.style.left=`${100*(Nt[0]-Tt)/lt}%`,et.style.top=`${100*(Nt[1]-Ot)/bt}%`;const{rotation:Bt}=c;return c.hasOwnCanvas||Bt===0?(et.style.width=`${100*It/lt}%`,et.style.height=`${100*Xt/bt}%`):this.setRotation(Bt,et),et}setRotation($,c=this.container){if(!this.data.rect)return;const{pageWidth:L,pageHeight:z}=this.parent.viewport.rawDims,{width:et,height:lt}=R(this.data.rect);let bt,Tt;$%180===0?(bt=100*et/L,Tt=100*lt/z):(bt=100*lt/L,Tt=100*et/z),c.style.width=`${bt}%`,c.style.height=`${Tt}%`,c.setAttribute("data-main-rotation",(360-$)%360)}get _commonActions(){const $=(c,L,z)=>{const et=z.detail[c],lt=et[0],bt=et.slice(1);z.target.style[L]=o.ColorConverters[`${lt}_HTML`](bt),this.annotationStorage.setValue(this.data.id,{[L]:o.ColorConverters[`${lt}_rgb`](bt)})};return(0,s.shadow)(this,"_commonActions",{display:c=>{const{display:L}=c.detail,z=L%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:L===1||L===2})},print:c=>{this.annotationStorage.setValue(this.data.id,{noPrint:!c.detail.print})},hidden:c=>{const{hidden:L}=c.detail;this.container.style.visibility=L?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:L,noView:L})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.target.disabled=c.detail.readonly},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{$("bgColor","backgroundColor",c)},fillColor:c=>{$("fillColor","backgroundColor",c)},fgColor:c=>{$("fgColor","color",c)},textColor:c=>{$("textColor","color",c)},borderColor:c=>{$("borderColor","borderColor",c)},strokeColor:c=>{$("strokeColor","borderColor",c)},rotation:c=>{const L=c.detail.rotation;this.setRotation(L),this.annotationStorage.setValue(this.data.id,{rotation:L})}})}_dispatchEventFromSandbox($,c){const L=this._commonActions;for(const z of Object.keys(c.detail)){const et=$[z]||L[z];et==null||et(c)}}_setDefaultPropertiesFromJS($){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const L=this._commonActions;for(const[z,et]of Object.entries(c)){const lt=L[z];if(lt){const bt={detail:{[z]:et},target:$};lt(bt),delete c[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:$}=this.data;if(!$)return;const[c,L,z,et]=this.data.rect;if($.length===1){const[,{x:Kt,y:Qt},{x:te,y:re}]=$[0];if(z===Kt&&et===Qt&&c===te&&L===re)return}const{style:lt}=this.container;let bt;if(r(this,f)){const{borderColor:Kt,borderWidth:Qt}=lt;lt.borderWidth=0,bt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Qt}">`],this.container.classList.add("hasBorder")}const Tt=z-c,Ot=et-L,{svgFactory:It}=this,Xt=It.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Nt=It.createElement("defs");Xt.append(Nt);const Bt=It.createElement("clipPath"),qt=`clippath_${this.data.id}`;Bt.setAttribute("id",qt),Bt.setAttribute("clipPathUnits","objectBoundingBox"),Nt.append(Bt);for(const[,{x:Kt,y:Qt},{x:te,y:re}]of $){const ie=It.createElement("rect"),ae=(te-c)/Tt,ce=(et-Qt)/Ot,he=(Kt-te)/Tt,As=(Qt-re)/Ot;ie.setAttribute("x",ae),ie.setAttribute("y",ce),ie.setAttribute("width",he),ie.setAttribute("height",As),Bt.append(ie),bt==null||bt.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${As}"/>`)}r(this,f)&&(bt.push("</g></svg>')"),lt.backgroundImage=bt.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${qt})`}_createPopup(){const{container:$,data:c}=this;$.setAttribute("aria-haspopup","dialog");const L=new F({data:{color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,parentRect:c.rect,borderStyle:0,id:`popup_${c.id}`,rotation:c.rotation},parent:this.parent,elements:[this]});this.parent.div.append(L.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName($,c=null){const L=[];if(this._fieldObjects){const z=this._fieldObjects[$];if(z)for(const{page:et,id:lt,exportValues:bt}of z){if(et===-1||lt===c)continue;const Tt=typeof bt=="string"?bt:null,Ot=document.querySelector(`[data-element-id="${lt}"]`);if(Ot&&!w.has(Ot)){(0,s.warn)(`_getElementsByName - element not allowed: ${lt}`);continue}L.push({id:lt,exportValue:Tt,domElement:Ot})}return L}for(const z of document.getElementsByName($)){const{exportValue:et}=z,lt=z.getAttribute("data-element-id");lt!==c&&w.has(z)&&L.push({id:lt,exportValue:et,domElement:z})}return L}show(){var $;this.container&&(this.container.hidden=!1),($=this.popup)==null||$.maybeShow()}hide(){var $;this.container&&(this.container.hidden=!0),($=this.popup)==null||$.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const $=this.getElementsToTriggerPopup();if(Array.isArray($))for(const c of $)c.classList.add("highlightArea");else $.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:$,data:{id:c}}=this;this.container.addEventListener("dblclick",()=>{var L;(L=this.linkService.eventBus)==null||L.dispatch("switchannotationeditormode",{source:this,mode:$,editId:c})})}};f=new WeakMap;let k=u;class T extends k{constructor(c,L=null){super(c,{isRenderable:!0,ignoreBorder:!!(L!=null&&L.ignoreBorder),createQuadrilaterals:!0});G(this,y);G(this,N);this.isTooltipOnly=c.data.isTooltipOnly}render(){const{data:c,linkService:L}=this,z=document.createElement("a");z.setAttribute("data-element-id",c.id);let et=!1;return c.url?(L.addLinkAttributes(z,c.url,c.newWindow),et=!0):c.action?(this._bindNamedAction(z,c.action),et=!0):c.attachment?(this._bindAttachment(z,c.attachment),et=!0):c.setOCGState?(it(this,N,Ls).call(this,z,c.setOCGState),et=!0):c.dest?(this._bindLink(z,c.dest),et=!0):(c.actions&&(c.actions.Action||c.actions["Mouse Up"]||c.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(z,c),et=!0),c.resetForm?(this._bindResetFormAction(z,c.resetForm),et=!0):this.isTooltipOnly&&!et&&(this._bindLink(z,""),et=!0)),this.container.classList.add("linkAnnotation"),et&&this.container.append(z),this.container}_bindLink(c,L){c.href=this.linkService.getDestinationHash(L),c.onclick=()=>(L&&this.linkService.goToDestination(L),!1),(L||L==="")&&it(this,y,ue).call(this)}_bindNamedAction(c,L){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeNamedAction(L),!1),it(this,y,ue).call(this)}_bindAttachment(c,L){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>{var z;return(z=this.downloadManager)==null||z.openOrDownloadData(this.container,L.content,L.filename),!1},it(this,y,ue).call(this)}_bindJSAction(c,L){c.href=this.linkService.getAnchorUrl("");const z=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const et of Object.keys(L.actions)){const lt=z.get(et);lt&&(c[lt]=()=>{var bt;return(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L.id,name:et}}),!1})}c.onclick||(c.onclick=()=>!1),it(this,y,ue).call(this)}_bindResetFormAction(c,L){const z=c.onclick;if(z||(c.href=this.linkService.getAnchorUrl("")),it(this,y,ue).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),z||(c.onclick=()=>!1);return}c.onclick=()=>{var Xt;z==null||z();const{fields:et,refs:lt,include:bt}=L,Tt=[];if(et.length!==0||lt.length!==0){const Nt=new Set(lt);for(const Bt of et){const qt=this._fieldObjects[Bt]||[];for(const{id:Kt}of qt)Nt.add(Kt)}for(const Bt of Object.values(this._fieldObjects))for(const qt of Bt)Nt.has(qt.id)===bt&&Tt.push(qt)}else for(const Nt of Object.values(this._fieldObjects))Tt.push(...Nt);const Ot=this.annotationStorage,It=[];for(const Nt of Tt){const{id:Bt}=Nt;switch(It.push(Bt),Nt.type){case"text":{const Kt=Nt.defaultValue||"";Ot.setValue(Bt,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Nt.defaultValue===Nt.exportValues;Ot.setValue(Bt,{value:Kt});break}case"combobox":case"listbox":{const Kt=Nt.defaultValue||"";Ot.setValue(Bt,{value:Kt});break}default:continue}const qt=document.querySelector(`[data-element-id="${Bt}"]`);if(qt){if(!w.has(qt)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;qt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:It,name:"ResetForm"}})),!1}}}y=new WeakSet,ue=function(){this.container.setAttribute("data-internal-link","")},N=new WeakSet,Ls=function(c,L){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeSetOCGState(L),!1),it(this,y,ue).call(this)};class S extends k{constructor($){super($,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const $=document.createElement("img");return $.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",$.alt="[{{type}} Annotation]",$.dataset.l10nId="text_annotation_type",$.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append($),this.container}}class P extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas($){var c;this.data.hasOwnCanvas&&(((c=$.previousSibling)==null?void 0:c.nodeName)==="CANVAS"&&($.previousSibling.hidden=!0),$.hidden=!1)}_getKeyModifier($){const{isWin:c,isMac:L}=s.FeatureTest.platform;return c&&$.ctrlKey||L&&$.metaKey}_setEventListener($,c,L,z,et){L.includes("mouse")?$.addEventListener(L,lt=>{var bt;(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt),shift:lt.shiftKey,modifier:this._getKeyModifier(lt)}})}):$.addEventListener(L,lt=>{var bt;if(L==="blur"){if(!c.focused||!lt.relatedTarget)return;c.focused=!1}else if(L==="focus"){if(c.focused)return;c.focused=!0}et&&((bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:et(lt)}}))})}_setEventListeners($,c,L,z){var et,lt,bt;for(const[Tt,Ot]of L)(Ot==="Action"||(et=this.data.actions)!=null&&et[Ot])&&((Ot==="Focus"||Ot==="Blur")&&(c||(c={focused:!1})),this._setEventListener($,c,Tt,Ot,z),Ot==="Focus"&&!((lt=this.data.actions)!=null&&lt.Blur)?this._setEventListener($,c,"blur","Blur",null):Ot==="Blur"&&!((bt=this.data.actions)!=null&&bt.Focus)&&this._setEventListener($,c,"focus","Focus",null))}_setBackgroundColor($){const c=this.data.backgroundColor||null;$.style.backgroundColor=c===null?"transparent":s.Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle($){const c=["left","center","right"],{fontColor:L}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||l,et=$.style;let lt;const bt=2,Tt=Ot=>Math.round(10*Ot)/10;if(this.data.multiLine){const Ot=Math.abs(this.data.rect[3]-this.data.rect[1]-bt),It=Math.round(Ot/(s.LINE_FACTOR*z))||1,Xt=Ot/It;lt=Math.min(z,Tt(Xt/s.LINE_FACTOR))}else{const Ot=Math.abs(this.data.rect[3]-this.data.rect[1]-bt);lt=Math.min(z,Tt(Ot/s.LINE_FACTOR))}et.fontSize=`calc(${lt}px * var(--scale-factor))`,et.color=s.Util.makeHexColor(L[0],L[1],L[2]),this.data.textAlignment!==null&&(et.textAlign=c[this.data.textAlignment])}_setRequired($,c){c?$.setAttribute("required",!0):$.removeAttribute("required"),$.setAttribute("aria-required",c)}}class I extends P{constructor($){const c=$.renderForms||!$.data.hasAppearance&&!!$.data.fieldValue;super($,{isRenderable:c})}setPropertyOnSiblings($,c,L,z){const et=this.annotationStorage;for(const lt of this._getElementsByName($.name,$.id))lt.domElement&&(lt.domElement[c]=L),et.setValue(lt.id,{[z]:L})}render(){var z,et;const $=this.annotationStorage,c=this.data.id;this.container.classList.add("textWidgetAnnotation");let L=null;if(this.renderForms){const lt=$.getValue(c,{value:this.data.fieldValue});let bt=lt.value||"";const Tt=$.getValue(c,{charLimit:this.data.maxLen}).charLimit;Tt&&bt.length>Tt&&(bt=bt.slice(0,Tt));let Ot=lt.formattedValue||((z=this.data.textContent)==null?void 0:z.join(`
`))||null;Ot&&this.data.comb&&(Ot=Ot.replaceAll(/\s+/g,""));const It={userValue:bt,formattedValue:Ot,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(L=document.createElement("textarea"),L.textContent=Ot??bt,this.data.doNotScroll&&(L.style.overflowY="hidden")):(L=document.createElement("input"),L.type="text",L.setAttribute("value",Ot??bt),this.data.doNotScroll&&(L.style.overflowX="hidden")),this.data.hasOwnCanvas&&(L.hidden=!0),w.add(L),L.setAttribute("data-element-id",c),L.disabled=this.data.readOnly,L.name=this.data.fieldName,L.tabIndex=g,this._setRequired(L,this.data.required),Tt&&(L.maxLength=Tt),L.addEventListener("input",Nt=>{$.setValue(c,{value:Nt.target.value}),this.setPropertyOnSiblings(L,"value",Nt.target.value,"value"),It.formattedValue=null}),L.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue??"";L.value=It.userValue=Bt,It.formattedValue=null});let Xt=Nt=>{const{formattedValue:Bt}=It;Bt!=null&&(Nt.target.value=Bt),Nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){L.addEventListener("focus",Bt=>{if(It.focused)return;const{target:qt}=Bt;It.userValue&&(qt.value=It.userValue),It.lastCommittedValue=qt.value,It.commitKey=1,It.focused=!0}),L.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const qt={value(Kt){It.userValue=Kt.detail.value??"",$.setValue(c,{value:It.userValue.toString()}),Kt.target.value=It.userValue},formattedValue(Kt){const{formattedValue:Qt}=Kt.detail;It.formattedValue=Qt,Qt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Qt),$.setValue(c,{formattedValue:Qt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ie;const{charLimit:Qt}=Kt.detail,{target:te}=Kt;if(Qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Qt);let re=It.userValue;!re||re.length<=Qt||(re=re.slice(0,Qt),te.value=It.userValue=re,$.setValue(c,{value:re}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(qt,Bt)}),L.addEventListener("keydown",Bt=>{var Qt;It.commitKey=1;let qt=-1;if(Bt.key==="Escape"?qt=0:Bt.key==="Enter"&&!this.data.multiLine?qt=2:Bt.key==="Tab"&&(It.commitKey=3),qt===-1)return;const{value:Kt}=Bt.target;It.lastCommittedValue!==Kt&&(It.lastCommittedValue=Kt,It.userValue=Kt,(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Kt,willCommit:!0,commitKey:qt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Nt=Xt;Xt=null,L.addEventListener("blur",Bt=>{var Kt;if(!It.focused||!Bt.relatedTarget)return;It.focused=!1;const{value:qt}=Bt.target;It.userValue=qt,It.lastCommittedValue!==qt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:qt,willCommit:!0,commitKey:It.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Nt(Bt)}),(et=this.data.actions)!=null&&et.Keystroke&&L.addEventListener("beforeinput",Bt=>{var ce;It.lastCommittedValue=null;const{data:qt,target:Kt}=Bt,{value:Qt,selectionStart:te,selectionEnd:re}=Kt;let ie=te,ae=re;switch(Bt.inputType){case"deleteWordBackward":{const he=Qt.substring(0,te).match(/\w*[^\w]*$/);he&&(ie-=he[0].length);break}case"deleteWordForward":{const he=Qt.substring(te).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":te===re&&(ie-=1);break;case"deleteContentForward":te===re&&(ae+=1);break}Bt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Qt,change:qt||"",willCommit:!1,selStart:ie,selEnd:ae}})}),this._setEventListeners(L,It,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Xt&&L.addEventListener("blur",Xt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Tt;L.classList.add("comb"),L.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else L=document.createElement("div"),L.textContent=this.data.fieldValue,L.style.verticalAlign="middle",L.style.display="table-cell";return this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class M extends P{constructor($){super($,{isRenderable:!!$.data.hasOwnCanvas})}}class C extends P{constructor($){super($,{isRenderable:$.renderForms})}render(){const $=this.annotationStorage,c=this.data,L=c.id;let z=$.getValue(L,{value:c.exportValue===c.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",$.setValue(L,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const et=document.createElement("input");return w.add(et),et.setAttribute("data-element-id",L),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="checkbox",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.setAttribute("exportValue",c.exportValue),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:bt,checked:Tt}=lt.target;for(const Ot of this._getElementsByName(bt,L)){const It=Tt&&Ot.exportValue===c.exportValue;Ot.domElement&&(Ot.domElement.checked=It),$.setValue(Ot.id,{value:It})}$.setValue(L,{value:Tt})}),et.addEventListener("resetform",lt=>{const bt=c.defaultFieldValue||"Off";lt.target.checked=bt===c.exportValue}),this.enableScripting&&this.hasJSActions&&(et.addEventListener("updatefromsandbox",lt=>{const bt={value(Tt){Tt.target.checked=Tt.detail.value!=="Off",$.setValue(L,{value:Tt.target.checked})}};this._dispatchEventFromSandbox(bt,lt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)),this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class m extends P{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const $=this.annotationStorage,c=this.data,L=c.id;let z=$.getValue(L,{value:c.fieldValue===c.buttonValue}).value;typeof z=="string"&&(z=z!==c.buttonValue,$.setValue(L,{value:z}));const et=document.createElement("input");if(w.add(et),et.setAttribute("data-element-id",L),et.disabled=c.readOnly,this._setRequired(et,this.data.required),et.type="radio",et.name=c.fieldName,z&&et.setAttribute("checked",!0),et.tabIndex=g,et.addEventListener("change",lt=>{const{name:bt,checked:Tt}=lt.target;for(const Ot of this._getElementsByName(bt,L))$.setValue(Ot.id,{value:!1});$.setValue(L,{value:Tt})}),et.addEventListener("resetform",lt=>{const bt=c.defaultFieldValue;lt.target.checked=bt!=null&&bt===c.buttonValue}),this.enableScripting&&this.hasJSActions){const lt=c.buttonValue;et.addEventListener("updatefromsandbox",bt=>{const Tt={value:Ot=>{const It=lt===Ot.detail.value;for(const Xt of this._getElementsByName(Ot.target.name)){const Nt=It&&Xt.id===L;Xt.domElement&&(Xt.domElement.checked=Nt),$.setValue(Xt.id,{value:Nt})}}};this._dispatchEventFromSandbox(Tt,bt)}),this._setEventListeners(et,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],bt=>bt.target.checked)}return this._setBackgroundColor(et),this._setDefaultPropertiesFromJS(et),this.container.append(et),this.container}}class A extends T{constructor($){super($,{ignoreBorder:$.data.hasAppearance})}render(){const $=super.render();$.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&($.title=this.data.alternativeText);const c=$.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",L=>{this._dispatchEventFromSandbox({},L)})),$}}class H extends P{constructor($){super($,{isRenderable:$.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const $=this.annotationStorage,c=this.data.id,L=$.getValue(c,{value:this.data.fieldValue}),z=document.createElement("select");w.add(z),z.setAttribute("data-element-id",c),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=g;let et=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",It=>{const Xt=this.data.defaultFieldValue;for(const Nt of z.options)Nt.selected=Nt.value===Xt});for(const It of this.data.options){const Xt=document.createElement("option");Xt.textContent=It.displayValue,Xt.value=It.exportValue,L.value.includes(It.exportValue)&&(Xt.setAttribute("selected",!0),et=!1),z.append(Xt)}let lt=null;if(et){const It=document.createElement("option");It.value=" ",It.setAttribute("hidden",!0),It.setAttribute("selected",!0),z.prepend(It),lt=()=>{It.remove(),z.removeEventListener("input",lt),lt=null},z.addEventListener("input",lt)}const bt=It=>{const Xt=It?"value":"textContent",{options:Nt,multiple:Bt}=z;return Bt?Array.prototype.filter.call(Nt,qt=>qt.selected).map(qt=>qt[Xt]):Nt.selectedIndex===-1?null:Nt[Nt.selectedIndex][Xt]};let Tt=bt(!1);const Ot=It=>{const Xt=It.target.options;return Array.prototype.map.call(Xt,Nt=>({displayValue:Nt.textContent,exportValue:Nt.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",It=>{const Xt={value(Nt){lt==null||lt();const Bt=Nt.detail.value,qt=new Set(Array.isArray(Bt)?Bt:[Bt]);for(const Kt of z.options)Kt.selected=qt.has(Kt.value);$.setValue(c,{value:bt(!0)}),Tt=bt(!1)},multipleSelection(Nt){z.multiple=!0},remove(Nt){const Bt=z.options,qt=Nt.detail.remove;Bt[qt].selected=!1,z.remove(qt),Bt.length>0&&Array.prototype.findIndex.call(Bt,Qt=>Qt.selected)===-1&&(Bt[0].selected=!0),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Tt=bt(!1)},clear(Nt){for(;z.length!==0;)z.remove(0);$.setValue(c,{value:null,items:[]}),Tt=bt(!1)},insert(Nt){const{index:Bt,displayValue:qt,exportValue:Kt}=Nt.detail.insert,Qt=z.children[Bt],te=document.createElement("option");te.textContent=qt,te.value=Kt,Qt?Qt.before(te):z.append(te),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Tt=bt(!1)},items(Nt){const{items:Bt}=Nt.detail;for(;z.length!==0;)z.remove(0);for(const qt of Bt){const{displayValue:Kt,exportValue:Qt}=qt,te=document.createElement("option");te.textContent=Kt,te.value=Qt,z.append(te)}z.options.length>0&&(z.options[0].selected=!0),$.setValue(c,{value:bt(!0),items:Ot(Nt)}),Tt=bt(!1)},indices(Nt){const Bt=new Set(Nt.detail.indices);for(const qt of Nt.target.options)qt.selected=Bt.has(qt.index);$.setValue(c,{value:bt(!0)}),Tt=bt(!1)},editable(Nt){Nt.target.disabled=!Nt.detail.editable}};this._dispatchEventFromSandbox(Xt,It)}),z.addEventListener("input",It=>{var Nt;const Xt=bt(!0);$.setValue(c,{value:Xt}),It.preventDefault(),(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Tt,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],It=>It.target.value)):z.addEventListener("input",function(It){$.setValue(c,{value:bt(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class F extends k{constructor($){const{data:c,elements:L}=$;super($,{isRenderable:k._hasPopupData(c)}),this.elements=L}render(){this.container.classList.add("popupAnnotation");const $=new b({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),c=[];for(const L of this.elements)L.popup=$,c.push(L.data.id),L.addHighlightArea();return this.container.setAttribute("aria-controls",c.map(L=>`${s.AnnotationPrefix}${L}`).join(",")),this.container}}class b{constructor({container:$,color:c,elements:L,titleObj:z,modificationDate:et,contentsObj:lt,richText:bt,parent:Tt,rect:Ot,parentRect:It,open:Xt}){G(this,Dt);G(this,jt);G(this,Gt);G(this,Yt);G(this,Y,null);G(this,dt,it(this,Dt,Ns).bind(this));G(this,v,it(this,Yt,cs).bind(this));G(this,D,it(this,Gt,ls).bind(this));G(this,W,it(this,jt,Fe).bind(this));G(this,rt,null);G(this,K,null);G(this,ut,null);G(this,St,null);G(this,ft,null);G(this,_t,null);G(this,Z,!1);G(this,J,null);G(this,q,null);G(this,ct,null);G(this,vt,null);G(this,Et,!1);var Bt;gt(this,K,$),gt(this,vt,z),gt(this,ut,lt),gt(this,ct,bt),gt(this,ft,Tt),gt(this,rt,c),gt(this,q,Ot),gt(this,_t,It),gt(this,St,L);const Nt=i.PDFDateString.toDateObject(et);Nt&&gt(this,Y,Tt.l10n.get("annotation_date_string",{date:Nt.toLocaleDateString(),time:Nt.toLocaleTimeString()})),this.trigger=L.flatMap(qt=>qt.getElementsToTriggerPopup());for(const qt of this.trigger)qt.addEventListener("click",r(this,W)),qt.addEventListener("mouseenter",r(this,D)),qt.addEventListener("mouseleave",r(this,v)),qt.classList.add("popupTriggerArea");for(const qt of L)(Bt=qt.container)==null||Bt.addEventListener("keydown",r(this,dt));r(this,K).hidden=!0,Xt&&it(this,jt,Fe).call(this)}render(){if(r(this,J))return;const{page:{view:$},viewport:{rawDims:{pageWidth:c,pageHeight:L,pageX:z,pageY:et}}}=r(this,ft),lt=gt(this,J,document.createElement("div"));if(lt.className="popup",r(this,rt)){const ie=lt.style.outlineColor=s.Util.makeHexColor(...r(this,rt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?lt.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:lt.style.backgroundColor=s.Util.makeHexColor(...r(this,rt).map(ce=>Math.floor(.7*(255-ce)+ce)))}const bt=document.createElement("span");bt.className="header";const Tt=document.createElement("h1");if(bt.append(Tt),{dir:Tt.dir,str:Tt.textContent}=r(this,vt),lt.append(bt),r(this,Y)){const ie=document.createElement("span");ie.classList.add("popupDate"),r(this,Y).then(ae=>{ie.textContent=ae}),bt.append(ie)}const Ot=r(this,ut),It=r(this,ct);if(It!=null&&It.str&&(!(Ot!=null&&Ot.str)||Ot.str===It.str))d.XfaLayer.render({xfaHtml:It.html,intent:"richText",div:lt}),lt.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(Ot);lt.append(ie)}let Xt=!!r(this,_t),Nt=Xt?r(this,_t):r(this,q);for(const ie of r(this,St))if(!Nt||s.Util.intersect(ie.data.rect,Nt)!==null){Nt=ie.data.rect,Xt=!0;break}const Bt=s.Util.normalizeRect([Nt[0],$[3]-Nt[1]+$[1],Nt[2],$[3]-Nt[3]+$[1]]),qt=5,Kt=Xt?Nt[2]-Nt[0]+qt:0,Qt=Bt[0]+Kt,te=Bt[1],{style:re}=r(this,K);re.left=`${100*(Qt-z)/c}%`,re.top=`${100*(te-et)/L}%`,r(this,K).append(lt)}_formatContents({str:$,dir:c}){const L=document.createElement("p");L.classList.add("popupContent"),L.dir=c;const z=$.split(/(?:\r\n?|\n)/);for(let et=0,lt=z.length;et<lt;++et){const bt=z[et];L.append(document.createTextNode(bt)),et<lt-1&&L.append(document.createElement("br"))}return L}forceHide(){gt(this,Et,this.isVisible),r(this,Et)&&(r(this,K).hidden=!0)}maybeShow(){r(this,Et)&&(gt(this,Et,!1),r(this,K).hidden=!1)}get isVisible(){return r(this,K).hidden===!1}}Y=new WeakMap,dt=new WeakMap,v=new WeakMap,D=new WeakMap,W=new WeakMap,rt=new WeakMap,K=new WeakMap,ut=new WeakMap,St=new WeakMap,ft=new WeakMap,_t=new WeakMap,Z=new WeakMap,J=new WeakMap,q=new WeakMap,ct=new WeakMap,vt=new WeakMap,Et=new WeakMap,Dt=new WeakSet,Ns=function($){$.altKey||$.shiftKey||$.ctrlKey||$.metaKey||($.key==="Enter"||$.key==="Escape"&&r(this,Z))&&it(this,jt,Fe).call(this)},jt=new WeakSet,Fe=function(){gt(this,Z,!r(this,Z)),r(this,Z)?(it(this,Gt,ls).call(this),r(this,K).addEventListener("click",r(this,W)),r(this,K).addEventListener("keydown",r(this,dt))):(it(this,Yt,cs).call(this),r(this,K).removeEventListener("click",r(this,W)),r(this,K).removeEventListener("keydown",r(this,dt)))},Gt=new WeakSet,ls=function(){r(this,J)||this.render(),this.isVisible?r(this,Z)&&r(this,K).classList.add("focused"):(r(this,K).hidden=!1,r(this,K).style.zIndex=parseInt(r(this,K).style.zIndex)+1e3)},Yt=new WeakSet,cs=function(){r(this,K).classList.remove("focused"),!(r(this,Z)||!this.isVisible)&&(r(this,K).hidden=!0,r(this,K).style.zIndex=parseInt(r(this,K).style.zIndex)-1e3)};class B extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0}),this.textContent=$.data.textContent,this.textPosition=$.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const $=document.createElement("div");$.classList.add("annotationTextContent"),$.setAttribute("role","comment");for(const c of this.textContent){const L=document.createElement("span");L.textContent=c,$.append(L)}this.container.append($)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=B;class O extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,at,null)}render(){this.container.classList.add("lineAnnotation");const c=this.data,{width:L,height:z}=R(c.rect),et=this.svgFactory.create(L,z,!0),lt=gt(this,at,this.svgFactory.createElement("svg:line"));return lt.setAttribute("x1",c.rect[2]-c.lineCoordinates[0]),lt.setAttribute("y1",c.rect[3]-c.lineCoordinates[1]),lt.setAttribute("x2",c.rect[2]-c.lineCoordinates[2]),lt.setAttribute("y2",c.rect[3]-c.lineCoordinates[3]),lt.setAttribute("stroke-width",c.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),et.append(lt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,at)}addHighlightArea(){this.container.classList.add("highlightArea")}}at=new WeakMap;class Q extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,st,null)}render(){this.container.classList.add("squareAnnotation");const c=this.data,{width:L,height:z}=R(c.rect),et=this.svgFactory.create(L,z,!0),lt=c.borderStyle.width,bt=gt(this,st,this.svgFactory.createElement("svg:rect"));return bt.setAttribute("x",lt/2),bt.setAttribute("y",lt/2),bt.setAttribute("width",L-lt),bt.setAttribute("height",z-lt),bt.setAttribute("stroke-width",lt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,st)}addHighlightArea(){this.container.classList.add("highlightArea")}}st=new WeakMap;class nt extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,xt,null)}render(){this.container.classList.add("circleAnnotation");const c=this.data,{width:L,height:z}=R(c.rect),et=this.svgFactory.create(L,z,!0),lt=c.borderStyle.width,bt=gt(this,xt,this.svgFactory.createElement("svg:ellipse"));return bt.setAttribute("cx",L/2),bt.setAttribute("cy",z/2),bt.setAttribute("rx",L/2-lt/2),bt.setAttribute("ry",z/2-lt/2),bt.setAttribute("stroke-width",lt||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,xt)}addHighlightArea(){this.container.classList.add("highlightArea")}}xt=new WeakMap;class U extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,Ct,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:L,height:z}=R(c.rect),et=this.svgFactory.create(L,z,!0);let lt=[];for(const Tt of c.vertices){const Ot=Tt.x-c.rect[0],It=c.rect[3]-Tt.y;lt.push(Ot+","+It)}lt=lt.join(" ");const bt=gt(this,Ct,this.svgFactory.createElement(this.svgElementName));return bt.setAttribute("points",lt),bt.setAttribute("stroke-width",c.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),et.append(bt),this.container.append(et),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ct=new WeakMap;class ot extends U{constructor($){super($),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class pt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class mt extends k{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});G(this,se,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const c=this.data,{width:L,height:z}=R(c.rect),et=this.svgFactory.create(L,z,!0);for(const lt of c.inkLists){let bt=[];for(const Ot of lt){const It=Ot.x-c.rect[0],Xt=c.rect[3]-Ot.y;bt.push(`${It},${Xt}`)}bt=bt.join(" ");const Tt=this.svgFactory.createElement(this.svgElementName);r(this,se).push(Tt),Tt.setAttribute("points",bt),Tt.setAttribute("stroke-width",c.borderStyle.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),!c.popupRef&&this.hasPopupData&&this._createPopup(),et.append(Tt)}return this.container.append(et),this.container}getElementsToTriggerPopup(){return r(this,se)}addHighlightArea(){this.container.classList.add("highlightArea")}}se=new WeakMap,e.InkAnnotationElement=mt;class X extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class wt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Rt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class kt extends k{constructor($){super($,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=kt;class j extends k{constructor(c){var et;super(c,{isRenderable:!0});G(this,ht);G(this,ee,null);const{filename:L,content:z}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(L,!0),this.content=z,(et=this.linkService.eventBus)==null||et.dispatch("fileattachmentannotation",{source:this,filename:L,content:z})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:c,data:L}=this;let z;L.hasAppearance||L.fillAlpha===0?z=document.createElement("div"):(z=document.createElement("img"),z.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(L.name)?"paperclip":"pushpin"}.svg`,L.fillAlpha&&L.fillAlpha<1&&(z.style=`filter: opacity(${Math.round(L.fillAlpha*100)}%);`)),z.addEventListener("dblclick",it(this,ht,hs).bind(this)),gt(this,ee,z);const{isMac:et}=s.FeatureTest.platform;return c.addEventListener("keydown",lt=>{lt.key==="Enter"&&(et?lt.metaKey:lt.ctrlKey)&&it(this,ht,hs).call(this)}),!L.popupRef&&this.hasPopupData?this._createPopup():z.classList.add("popupTriggerArea"),c.append(z),c}getElementsToTriggerPopup(){return r(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,ht=new WeakSet,hs=function(){var c;(c=this.downloadManager)==null||c.openOrDownloadData(this.container,this.content,this.filename)};class h{constructor({div:$,accessibilityManager:c,annotationCanvasMap:L,l10n:z,page:et,viewport:lt}){G(this,zt);G(this,Pt);G(this,Ht,null);G(this,Ft,null);G(this,Vt,new Map);this.div=$,gt(this,Ht,c),gt(this,Ft,L),this.l10n=z,this.page=et,this.viewport=lt,this.zIndex=0,this.l10n||(this.l10n=_.NullL10n)}async render($){const{annotations:c}=$,L=this.div;(0,i.setLayerDimensions)(L,this.viewport);const z=new Map,et={data:null,layer:L,linkService:$.linkService,downloadManager:$.downloadManager,imageResourcesPath:$.imageResourcesPath||"",renderForms:$.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:$.annotationStorage||new a.AnnotationStorage,enableScripting:$.enableScripting===!0,hasJSActions:$.hasJSActions,fieldObjects:$.fieldObjects,parent:this,elements:null};for(const lt of c){if(lt.noHTML)continue;const bt=lt.annotationType===s.AnnotationType.POPUP;if(bt){const It=z.get(lt.id);if(!It)continue;et.elements=It}else{const{width:It,height:Xt}=R(lt.rect);if(It<=0||Xt<=0)continue}et.data=lt;const Tt=x.create(et);if(!Tt.isRenderable)continue;if(!bt&&lt.popupRef){const It=z.get(lt.popupRef);It?It.push(Tt):z.set(lt.popupRef,[Tt])}Tt.annotationEditorType>0&&r(this,Vt).set(Tt.data.id,Tt);const Ot=Tt.render();lt.hidden&&(Ot.style.visibility="hidden"),it(this,zt,Bs).call(this,Ot,lt.id)}it(this,Pt,us).call(this),await this.l10n.translate(L)}update({viewport:$}){const c=this.div;this.viewport=$,(0,i.setLayerDimensions)(c,{rotation:$.rotation}),it(this,Pt,us).call(this),c.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Vt).values())}getEditableAnnotation($){return r(this,Vt).get($)}}Ht=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,zt=new WeakSet,Bs=function($,c){var z;const L=$.firstChild||$;L.id=`${s.AnnotationPrefix}${c}`,this.div.append($),(z=r(this,Ht))==null||z.moveElementInDOM(this.div,$,L,!1)},Pt=new WeakSet,us=function(){if(!r(this,Ft))return;const $=this.div;for(const[c,L]of r(this,Ft)){const z=$.querySelector(`[data-annotation-id="${c}"]`);if(!z)continue;const{firstChild:et}=z;et?et.nodeName==="CANVAS"?et.replaceWith(L):et.before(L):z.append(L)}r(this,Ft).clear()},e.AnnotationLayer=h},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function s(a){return Math.max(0,Math.min(255,255*a))}class i{static CMYK_G([o,_,d,g]){return["G",1-Math.min(1,.3*o+.59*d+.11*_+g)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=s(o),[o,o,o]}static G_HTML([o]){const _=n(o);return`#${_}${_}${_}`}static RGB_G([o,_,d]){return["G",.3*o+.59*_+.11*d]}static RGB_rgb(o){return o.map(s)}static RGB_HTML(o){return`#${o.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,_,d,g]){return["RGB",1-Math.min(1,o+g),1-Math.min(1,d+g),1-Math.min(1,_+g)]}static CMYK_rgb([o,_,d,g]){return[s(1-Math.min(1,o+g)),s(1-Math.min(1,d+g)),s(1-Math.min(1,_+g))]}static CMYK_HTML(o){const _=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(_)}static RGB_CMYK([o,_,d]){const g=1-o,l=1-_,w=1-d,R=Math.min(g,l,w);return["CMYK",g,l,w,R]}}e.ColorConverters=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=s;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function s(o,_){switch(o){case"find_match_count":o=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":o=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return n[o]||""}function i(o,_){return _?o.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(d,g)=>g in _?_[g]:"{{"+g+"}}"):o}const a={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(o,_=null,d=s(o,_)){return i(d,_)},async translate(o){}};e.NullL10n=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var s=n(25);class i{static setupStorage(o,_,d,g,l){const w=g.getValue(_,{value:null});switch(d.name){case"textarea":if(w.value!==null&&(o.textContent=w.value),l==="print")break;o.addEventListener("input",R=>{g.setValue(_,{value:R.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(w.value===d.attributes.xfaOn?o.setAttribute("checked",!0):w.value===d.attributes.xfaOff&&o.removeAttribute("checked"),l==="print")break;o.addEventListener("change",R=>{g.setValue(_,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&o.setAttribute("value",w.value),l==="print")break;o.addEventListener("input",R=>{g.setValue(_,{value:R.target.value})})}break;case"select":if(w.value!==null){o.setAttribute("value",w.value);for(const R of d.children)R.attributes.value===w.value?R.attributes.selected=!0:R.attributes.hasOwnProperty("selected")&&delete R.attributes.selected}o.addEventListener("input",R=>{const x=R.target.options,k=x.selectedIndex===-1?"":x[x.selectedIndex].value;g.setValue(_,{value:k})});break}}static setAttributes({html:o,element:_,storage:d=null,intent:g,linkService:l}){const{attributes:w}=_,R=o instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${g}`);for(const[x,k]of Object.entries(w))if(k!=null)switch(x){case"class":k.length&&o.setAttribute(x,k.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",k);break;case"style":Object.assign(o.style,k);break;case"textContent":o.textContent=k;break;default:(!R||x!=="href"&&x!=="newWindow")&&o.setAttribute(x,k)}R&&l.addLinkAttributes(o,w.href,w.newWindow),d&&w.dataId&&this.setupStorage(o,w.dataId,_,d)}static render(o){var T;const _=o.annotationStorage,d=o.linkService,g=o.xfaHtml,l=o.intent||"display",w=document.createElement(g.name);g.attributes&&this.setAttributes({html:w,element:g,intent:l,linkService:d});const R=[[g,-1,w]],x=o.div;if(x.append(w),o.viewport){const S=`matrix(${o.viewport.transform.join(",")})`;x.style.transform=S}l!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const k=[];for(;R.length>0;){const[S,P,I]=R.at(-1);if(P+1===S.children.length){R.pop();continue}const M=S.children[++R.at(-1)[1]];if(M===null)continue;const{name:C}=M;if(C==="#text"){const A=document.createTextNode(M.value);k.push(A),I.append(A);continue}const m=(T=M==null?void 0:M.attributes)!=null&&T.xmlns?document.createElementNS(M.attributes.xmlns,C):document.createElement(C);if(I.append(m),M.attributes&&this.setAttributes({html:m,element:M,storage:_,intent:l,linkService:d}),M.children&&M.children.length>0)R.push([M,-1,m]);else if(M.value){const A=document.createTextNode(M.value);s.XfaText.shouldBuildText(C)&&k.push(A),m.append(A)}}for(const S of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:k}}static update(o){const _=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=_,o.div.hidden=!1}}e.XfaLayer=i},(t,e,n)=>{var g,l,w,R,x,k,T,S,P,I,M,C,m,A,H,js,b,Us,O,Hs,nt,Vs,ot,ds,mt,Ws,yt,fs,Rt,$s,j,zs,f,Gs,y,qs,N,Xs,Y,le,v,ps,W,Ie,K,Oe,St,ge,_t,gs,J,De,ct,Ys,Et,ms,Lt,Ks,$t,Js,Wt,bs,At,Le,st,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var s=n(1),i=n(4),a=n(29),o=n(6),_=n(5);const Ct=class Ct extends i.AnnotationEditor{constructor(ht){super({...ht,name:"inkEditor"});G(this,H);G(this,b);G(this,O);G(this,nt);G(this,ot);G(this,mt);G(this,yt);G(this,Rt);G(this,j);G(this,f);G(this,y);G(this,N);G(this,Y);G(this,v);G(this,W);G(this,K);G(this,St);G(this,_t);G(this,J);G(this,$t);G(this,Wt);G(this,At);G(this,st);G(this,g,0);G(this,l,0);G(this,w,this.canvasPointermove.bind(this));G(this,R,this.canvasPointerleave.bind(this));G(this,x,this.canvasPointerup.bind(this));G(this,k,this.canvasPointerdown.bind(this));G(this,T,new Path2D);G(this,S,!1);G(this,P,!1);G(this,I,!1);G(this,M,null);G(this,C,0);G(this,m,0);G(this,A,null);this.color=ht.color||null,this.thickness=ht.thickness||null,this.opacity=ht.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(ht){i.AnnotationEditor.initialize(ht,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(ht,Mt){switch(ht){case s.AnnotationEditorParamsType.INK_THICKNESS:Ct._defaultThickness=Mt;break;case s.AnnotationEditorParamsType.INK_COLOR:Ct._defaultColor=Mt;break;case s.AnnotationEditorParamsType.INK_OPACITY:Ct._defaultOpacity=Mt/100;break}}updateParams(ht,Mt){switch(ht){case s.AnnotationEditorParamsType.INK_THICKNESS:it(this,H,js).call(this,Mt);break;case s.AnnotationEditorParamsType.INK_COLOR:it(this,b,Us).call(this,Mt);break;case s.AnnotationEditorParamsType.INK_OPACITY:it(this,O,Hs).call(this,Mt);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,Ct._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,Ct._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ct._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ct._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||Ct._defaultColor||i.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ct._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(it(this,W,Ie).call(this),it(this,K,Oe).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,St,ge).call(this)),it(this,st,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,M).disconnect(),gt(this,M,null),super.remove())}setParent(ht){!this.parent&&ht?this._uiManager.removeShouldRescale(this):this.parent&&ht===null&&this._uiManager.addShouldRescale(this),super.setParent(ht)}onScaleChanging(){const[ht,Mt]=this.parentDimensions,Ht=this.width*ht,Ft=this.height*Mt;this.setDimensions(Ht,Ft)}enableEditMode(){r(this,S)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",r(this,k)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,k)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,S)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,S,!0),this.div.classList.add("disabled"),it(this,st,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(ht){this._focusEventsAllowed&&(super.focusin(ht),this.enableEditMode())}canvasPointerdown(ht){ht.button!==0||!this.isInEditMode()||r(this,S)||(this.setInForeground(),ht.preventDefault(),ht.type!=="mouse"&&this.div.focus(),it(this,mt,Ws).call(this,ht.offsetX,ht.offsetY))}canvasPointermove(ht){ht.preventDefault(),it(this,yt,fs).call(this,ht.offsetX,ht.offsetY)}canvasPointerup(ht){ht.preventDefault(),it(this,v,ps).call(this,ht)}canvasPointerleave(ht){it(this,v,ps).call(this,ht)}get isResizable(){return!this.isEmpty()&&r(this,S)}render(){if(this.div)return this.div;let ht,Mt;this.width&&(ht=this.x,Mt=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var Pt;return(Pt=this.div)==null?void 0:Pt.setAttribute("aria-label",Zt)});const[Ht,Ft,Vt,zt]=it(this,nt,Vs).call(this);if(this.setAt(Ht,Ft,0,0),this.setDims(Vt,zt),it(this,W,Ie).call(this),this.width){const[Zt,Pt]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*Pt),this.setAt(ht*Zt,Mt*Pt,this.width*Zt,this.height*Pt),gt(this,I,!0),it(this,St,ge).call(this),this.setDims(this.width*Zt,this.height*Pt),it(this,Y,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,K,Oe).call(this),this.div}setDimensions(ht,Mt){const Ht=Math.round(ht),Ft=Math.round(Mt);if(r(this,C)===Ht&&r(this,m)===Ft)return;gt(this,C,Ht),gt(this,m,Ft),this.canvas.style.visibility="hidden";const[Vt,zt]=this.parentDimensions;this.width=ht/Vt,this.height=Mt/zt,this.fixAndSetPosition(),r(this,S)&&it(this,_t,gs).call(this,ht,Mt),it(this,St,ge).call(this),it(this,Y,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ht,Mt,Ht){var et,lt,bt;if(ht instanceof a.InkAnnotationElement)return null;const Ft=super.deserialize(ht,Mt,Ht);Ft.thickness=ht.thickness,Ft.color=s.Util.makeHexColor(...ht.color),Ft.opacity=ht.opacity;const[Vt,zt]=Ft.pageDimensions,Zt=Ft.width*Vt,Pt=Ft.height*zt,Jt=Ft.parentScale,Ut=ht.thickness/2;gt(Ft,S,!0),gt(Ft,C,Math.round(Zt)),gt(Ft,m,Math.round(Pt));const{paths:$,rect:c,rotation:L}=ht;for(let{bezier:Tt}of $){Tt=it(et=Ct,Lt,Ks).call(et,Tt,c,L);const Ot=[];Ft.paths.push(Ot);let It=Jt*(Tt[0]-Ut),Xt=Jt*(Tt[1]-Ut);for(let Bt=2,qt=Tt.length;Bt<qt;Bt+=6){const Kt=Jt*(Tt[Bt]-Ut),Qt=Jt*(Tt[Bt+1]-Ut),te=Jt*(Tt[Bt+2]-Ut),re=Jt*(Tt[Bt+3]-Ut),ie=Jt*(Tt[Bt+4]-Ut),ae=Jt*(Tt[Bt+5]-Ut);Ot.push([[It,Xt],[Kt,Qt],[te,re],[ie,ae]]),It=ie,Xt=ae}const Nt=it(this,ct,Ys).call(this,Ot);Ft.bezierPath2D.push(Nt)}const z=it(lt=Ft,Wt,bs).call(lt);return gt(Ft,l,Math.max(i.AnnotationEditor.MIN_SIZE,z[2]-z[0])),gt(Ft,g,Math.max(i.AnnotationEditor.MIN_SIZE,z[3]-z[1])),it(bt=Ft,_t,gs).call(bt,Zt,Pt),Ft}serialize(){if(this.isEmpty())return null;const ht=this.getRect(0,0),Mt=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:Mt,thickness:this.thickness,opacity:this.opacity,paths:it(this,$t,Js).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ht),pageIndex:this.pageIndex,rect:ht,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};g=new WeakMap,l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,I=new WeakMap,M=new WeakMap,C=new WeakMap,m=new WeakMap,A=new WeakMap,H=new WeakSet,js=function(ht){const Mt=this.thickness;this.addCommands({cmd:()=>{this.thickness=ht,it(this,st,me).call(this)},undo:()=>{this.thickness=Mt,it(this,st,me).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,Us=function(ht){const Mt=this.color;this.addCommands({cmd:()=>{this.color=ht,it(this,Y,le).call(this)},undo:()=>{this.color=Mt,it(this,Y,le).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,Hs=function(ht){ht/=100;const Mt=this.opacity;this.addCommands({cmd:()=>{this.opacity=ht,it(this,Y,le).call(this)},undo:()=>{this.opacity=Mt,it(this,Y,le).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},nt=new WeakSet,Vs=function(){const{parentRotation:ht,parentDimensions:[Mt,Ht]}=this;switch(ht){case 90:return[0,Ht,Ht,Mt];case 180:return[Mt,Ht,Mt,Ht];case 270:return[Mt,0,Ht,Mt];default:return[0,0,Mt,Ht]}},ot=new WeakSet,ds=function(){const{ctx:ht,color:Mt,opacity:Ht,thickness:Ft,parentScale:Vt,scaleFactor:zt}=this;ht.lineWidth=Ft*Vt/zt,ht.lineCap="round",ht.lineJoin="round",ht.miterLimit=10,ht.strokeStyle=`${Mt}${(0,_.opacityToHex)(Ht)}`},mt=new WeakSet,Ws=function(ht,Mt){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",r(this,R)),this.canvas.addEventListener("pointermove",r(this,w)),this.canvas.addEventListener("pointerup",r(this,x)),this.canvas.removeEventListener("pointerdown",r(this,k)),this.isEditing=!0,r(this,I)||(gt(this,I,!0),it(this,St,ge).call(this),this.thickness||(this.thickness=Ct._defaultThickness),this.color||(this.color=Ct._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ct._defaultOpacity)),this.currentPath.push([ht,Mt]),gt(this,P,!1),it(this,ot,ds).call(this),gt(this,A,()=>{it(this,f,Gs).call(this),r(this,A)&&window.requestAnimationFrame(r(this,A))}),window.requestAnimationFrame(r(this,A))},yt=new WeakSet,fs=function(ht,Mt){const[Ht,Ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&ht===Ht&&Mt===Ft)return;const Vt=this.currentPath;let zt=r(this,T);if(Vt.push([ht,Mt]),gt(this,P,!0),Vt.length<=2){zt.moveTo(...Vt[0]),zt.lineTo(ht,Mt);return}Vt.length===3&&(gt(this,T,zt=new Path2D),zt.moveTo(...Vt[0])),it(this,y,qs).call(this,zt,...Vt.at(-3),...Vt.at(-2),ht,Mt)},Rt=new WeakSet,$s=function(){if(this.currentPath.length===0)return;const ht=this.currentPath.at(-1);r(this,T).lineTo(...ht)},j=new WeakSet,zs=function(ht,Mt){gt(this,A,null),ht=Math.min(Math.max(ht,0),this.canvas.width),Mt=Math.min(Math.max(Mt,0),this.canvas.height),it(this,yt,fs).call(this,ht,Mt),it(this,Rt,$s).call(this);let Ht;if(this.currentPath.length!==1)Ht=it(this,N,Xs).call(this);else{const Pt=[ht,Mt];Ht=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const Ft=r(this,T),Vt=this.currentPath;this.currentPath=[],gt(this,T,new Path2D);const zt=()=>{this.allRawPaths.push(Vt),this.paths.push(Ht),this.bezierPath2D.push(Ft),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,W,Ie).call(this),it(this,K,Oe).call(this)),it(this,st,me).call(this))};this.addCommands({cmd:zt,undo:Zt,mustExec:!0})},f=new WeakSet,Gs=function(){if(!r(this,P))return;gt(this,P,!1);const ht=Math.ceil(this.thickness*this.parentScale),Mt=this.currentPath.slice(-3),Ht=Mt.map(zt=>zt[0]),Ft=Mt.map(zt=>zt[1]);Math.min(...Ht)-ht,Math.max(...Ht)+ht,Math.min(...Ft)-ht,Math.max(...Ft)+ht;const{ctx:Vt}=this;Vt.save(),Vt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const zt of this.bezierPath2D)Vt.stroke(zt);Vt.stroke(r(this,T)),Vt.restore()},y=new WeakSet,qs=function(ht,Mt,Ht,Ft,Vt,zt,Zt){const Pt=(Mt+Ft)/2,Jt=(Ht+Vt)/2,Ut=(Ft+zt)/2,$=(Vt+Zt)/2;ht.bezierCurveTo(Pt+2*(Ft-Pt)/3,Jt+2*(Vt-Jt)/3,Ut+2*(Ft-Ut)/3,$+2*(Vt-$)/3,Ut,$)},N=new WeakSet,Xs=function(){const ht=this.currentPath;if(ht.length<=2)return[[ht[0],ht[0],ht.at(-1),ht.at(-1)]];const Mt=[];let Ht,[Ft,Vt]=ht[0];for(Ht=1;Ht<ht.length-2;Ht++){const[c,L]=ht[Ht],[z,et]=ht[Ht+1],lt=(c+z)/2,bt=(L+et)/2,Tt=[Ft+2*(c-Ft)/3,Vt+2*(L-Vt)/3],Ot=[lt+2*(c-lt)/3,bt+2*(L-bt)/3];Mt.push([[Ft,Vt],Tt,Ot,[lt,bt]]),[Ft,Vt]=[lt,bt]}const[zt,Zt]=ht[Ht],[Pt,Jt]=ht[Ht+1],Ut=[Ft+2*(zt-Ft)/3,Vt+2*(Zt-Vt)/3],$=[Pt+2*(zt-Pt)/3,Jt+2*(Zt-Jt)/3];return Mt.push([[Ft,Vt],Ut,$,[Pt,Jt]]),Mt},Y=new WeakSet,le=function(){if(this.isEmpty()){it(this,J,De).call(this);return}it(this,ot,ds).call(this);const{canvas:ht,ctx:Mt}=this;Mt.setTransform(1,0,0,1,0,0),Mt.clearRect(0,0,ht.width,ht.height),it(this,J,De).call(this);for(const Ht of this.bezierPath2D)Mt.stroke(Ht)},v=new WeakSet,ps=function(ht){this.canvas.removeEventListener("pointerleave",r(this,R)),this.canvas.removeEventListener("pointermove",r(this,w)),this.canvas.removeEventListener("pointerup",r(this,x)),this.canvas.addEventListener("pointerdown",r(this,k)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),it(this,j,zs).call(this,ht.offsetX,ht.offsetY),this.addToAnnotationStorage(),this.setInBackground()},W=new WeakSet,Ie=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(ht=>{var Mt;return(Mt=this.canvas)==null?void 0:Mt.setAttribute("aria-label",ht)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},K=new WeakSet,Oe=function(){gt(this,M,new ResizeObserver(ht=>{const Mt=ht[0].contentRect;Mt.width&&Mt.height&&this.setDimensions(Mt.width,Mt.height)})),r(this,M).observe(this.div)},St=new WeakSet,ge=function(){if(!r(this,I))return;const[ht,Mt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ht),this.canvas.height=Math.ceil(this.height*Mt),it(this,J,De).call(this)},_t=new WeakSet,gs=function(ht,Mt){const Ht=it(this,At,Le).call(this),Ft=(ht-Ht)/r(this,l),Vt=(Mt-Ht)/r(this,g);this.scaleFactor=Math.min(Ft,Vt)},J=new WeakSet,De=function(){const ht=it(this,At,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ht,this.translationY*this.scaleFactor+ht)},ct=new WeakSet,Ys=function(ht){const Mt=new Path2D;for(let Ht=0,Ft=ht.length;Ht<Ft;Ht++){const[Vt,zt,Zt,Pt]=ht[Ht];Ht===0&&Mt.moveTo(...Vt),Mt.bezierCurveTo(zt[0],zt[1],Zt[0],Zt[1],Pt[0],Pt[1])}return Mt},Et=new WeakSet,ms=function(ht,Mt,Ht){const[Ft,Vt,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]+=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const Ut=ht[Pt];ht[Pt]=ht[Pt+1]+Ft,ht[Pt+1]=Ut+Vt}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]+=Vt;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const Ut=ht[Pt];ht[Pt]=zt-ht[Pt+1],ht[Pt+1]=Zt-Ut}break;default:throw new Error("Invalid rotation")}return ht},Lt=new WeakSet,Ks=function(ht,Mt,Ht){const[Ft,Vt,zt,Zt]=Mt;switch(Ht){case 0:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]-=Ft,ht[Pt+1]=Zt-ht[Pt+1];break;case 90:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const Ut=ht[Pt];ht[Pt]=ht[Pt+1]-Vt,ht[Pt+1]=Ut-Ft}break;case 180:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2)ht[Pt]=zt-ht[Pt],ht[Pt+1]-=Vt;break;case 270:for(let Pt=0,Jt=ht.length;Pt<Jt;Pt+=2){const Ut=ht[Pt];ht[Pt]=Zt-ht[Pt+1],ht[Pt+1]=zt-Ut}break;default:throw new Error("Invalid rotation")}return ht},$t=new WeakSet,Js=function(ht,Mt,Ht,Ft){var Jt,Ut;const Vt=[],zt=this.thickness/2,Zt=ht*Mt+zt,Pt=ht*Ht+zt;for(const $ of this.paths){const c=[],L=[];for(let z=0,et=$.length;z<et;z++){const[lt,bt,Tt,Ot]=$[z],It=ht*lt[0]+Zt,Xt=ht*lt[1]+Pt,Nt=ht*bt[0]+Zt,Bt=ht*bt[1]+Pt,qt=ht*Tt[0]+Zt,Kt=ht*Tt[1]+Pt,Qt=ht*Ot[0]+Zt,te=ht*Ot[1]+Pt;z===0&&(c.push(It,Xt),L.push(It,Xt)),c.push(Nt,Bt,qt,Kt,Qt,te),L.push(Nt,Bt),z===et-1&&L.push(Qt,te)}Vt.push({bezier:it(Jt=Ct,Et,ms).call(Jt,c,Ft,this.rotation),points:it(Ut=Ct,Et,ms).call(Ut,L,Ft,this.rotation)})}return Vt},Wt=new WeakSet,bs=function(){let ht=1/0,Mt=-1/0,Ht=1/0,Ft=-1/0;for(const Vt of this.paths)for(const[zt,Zt,Pt,Jt]of Vt){const Ut=s.Util.bezierBoundingBox(...zt,...Zt,...Pt,...Jt);ht=Math.min(ht,Ut[0]),Ht=Math.min(Ht,Ut[1]),Mt=Math.max(Mt,Ut[2]),Ft=Math.max(Ft,Ut[3])}return[ht,Ht,Mt,Ft]},At=new WeakSet,Le=function(){return r(this,S)?Math.ceil(this.thickness*this.parentScale):0},st=new WeakSet,me=function(ht=!1){if(this.isEmpty())return;if(!r(this,S)){it(this,Y,le).call(this);return}const Mt=it(this,Wt,bs).call(this),Ht=it(this,At,Le).call(this);gt(this,l,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0])),gt(this,g,Math.max(i.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1]));const Ft=Math.ceil(Ht+r(this,l)*this.scaleFactor),Vt=Math.ceil(Ht+r(this,g)*this.scaleFactor),[zt,Zt]=this.parentDimensions;this.width=Ft/zt,this.height=Vt/Zt,this.setAspectRatio(Ft,Vt);const Pt=this.translationX,Jt=this.translationY;this.translationX=-Mt[0],this.translationY=-Mt[1],it(this,St,ge).call(this),it(this,Y,le).call(this),gt(this,C,Ft),gt(this,m,Vt),this.setDims(Ft,Vt);const Ut=ht?Ht/this.scaleFactor/2:0;this.translate(Pt-this.translationX-Ut,Jt-this.translationY-Ut)},G(Ct,ct),G(Ct,Et),G(Ct,Lt),ne(Ct,"_defaultColor",null),ne(Ct,"_defaultOpacity",1),ne(Ct,"_defaultThickness",1),ne(Ct,"_type","ink");let d=Ct;e.InkEditor=d},(t,e,n)=>{var d,g,l,w,R,x,k,T,S,P,I,Ee,C,we,A,Ne,F,_s,B,Qs,Q,Zs,U,ys,pt,Be,X,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var s=n(1),i=n(4),a=n(6),o=n(29);const wt=class wt extends i.AnnotationEditor{constructor(j){super({...j,name:"stampEditor"});G(this,I);G(this,C);G(this,A);G(this,F);G(this,B);G(this,Q);G(this,U);G(this,pt);G(this,X);G(this,d,null);G(this,g,null);G(this,l,null);G(this,w,null);G(this,R,null);G(this,x,null);G(this,k,null);G(this,T,null);G(this,S,!1);G(this,P,!1);gt(this,w,j.bitmapUrl),gt(this,R,j.bitmapFile)}static initialize(j){i.AnnotationEditor.initialize(j)}static get supportedTypes(){const j=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",j.map(h=>`image/${h}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(j){return this.supportedTypes.includes(j)}static paste(j,h){h.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:j.getAsFile()})}remove(){var j,h;r(this,g)&&(gt(this,d,null),this._uiManager.imageManager.deleteId(r(this,g)),(j=r(this,x))==null||j.remove(),gt(this,x,null),(h=r(this,k))==null||h.disconnect(),gt(this,k,null)),super.remove()}rebuild(){if(!this.parent){r(this,g)&&it(this,A,Ne).call(this);return}super.rebuild(),this.div!==null&&(r(this,g)&&it(this,A,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(r(this,l)||r(this,d)||r(this,w)||r(this,R))}get isResizable(){return!0}render(){if(this.div)return this.div;let j,h;if(this.width&&(j=this.x,h=this.y),super.render(),this.div.hidden=!0,r(this,d)?it(this,F,_s).call(this):it(this,A,Ne).call(this),this.width){const[f,u]=this.parentDimensions;this.setAt(j*f,h*u,this.width*f,this.height*u)}return this.div}static deserialize(j,h,f){if(j instanceof o.StampAnnotationElement)return null;const u=super.deserialize(j,h,f),{rect:y,bitmapUrl:E,bitmapId:N,isSvg:V,accessibilityData:Y}=j;N&&f.imageManager.isValidId(N)?gt(u,g,N):gt(u,w,E),gt(u,S,V);const[dt,v]=u.pageDimensions;return u.width=(y[2]-y[0])/dt,u.height=(y[3]-y[1])/v,Y&&(u.altTextData=Y),u}serialize(j=!1,h=null){if(this.isEmpty())return null;const f={annotationType:s.AnnotationEditorType.STAMP,bitmapId:r(this,g),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,S),structTreeParentId:this._structTreeParentId};if(j)return f.bitmapUrl=it(this,pt,Be).call(this,!0),f.accessibilityData=this.altTextData,f;const{decorative:u,altText:y}=this.altTextData;if(!u&&y&&(f.accessibilityData={type:"Figure",alt:y}),h===null)return f;h.stamps||(h.stamps=new Map);const E=r(this,S)?(f.rect[2]-f.rect[0])*(f.rect[3]-f.rect[1]):null;if(!h.stamps.has(r(this,g)))h.stamps.set(r(this,g),{area:E,serialized:f}),f.bitmap=it(this,pt,Be).call(this,!1);else if(r(this,S)){const N=h.stamps.get(r(this,g));E>N.area&&(N.area=E,N.serialized.bitmap.close(),N.serialized.bitmap=it(this,pt,Be).call(this,!1))}return f}};d=new WeakMap,g=new WeakMap,l=new WeakMap,w=new WeakMap,R=new WeakMap,x=new WeakMap,k=new WeakMap,T=new WeakMap,S=new WeakMap,P=new WeakMap,I=new WeakSet,Ee=function(j,h=!1){if(!j){this.remove();return}gt(this,d,j.bitmap),h||(gt(this,g,j.id),gt(this,S,j.isSvg)),it(this,F,_s).call(this)},C=new WeakSet,we=function(){gt(this,l,null),this._uiManager.enableWaiting(!1),r(this,x)&&this.div.focus()},A=new WeakSet,Ne=function(){if(r(this,g)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(r(this,g)).then(h=>it(this,I,Ee).call(this,h,!0)).finally(()=>it(this,C,we).call(this));return}if(r(this,w)){const h=r(this,w);gt(this,w,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromUrl(h).then(f=>it(this,I,Ee).call(this,f)).finally(()=>it(this,C,we).call(this)));return}if(r(this,R)){const h=r(this,R);gt(this,R,null),this._uiManager.enableWaiting(!0),gt(this,l,this._uiManager.imageManager.getFromFile(h).then(f=>it(this,I,Ee).call(this,f)).finally(()=>it(this,C,we).call(this)));return}const j=document.createElement("input");j.type="file",j.accept=wt.supportedTypesStr,gt(this,l,new Promise(h=>{j.addEventListener("change",async()=>{if(!j.files||j.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const f=await this._uiManager.imageManager.getFromFile(j.files[0]);it(this,I,Ee).call(this,f)}h()}),j.addEventListener("cancel",()=>{this.remove(),h()})}).finally(()=>it(this,C,we).call(this))),j.click()},F=new WeakSet,_s=function(){const{div:j}=this;let{width:h,height:f}=r(this,d);const[u,y]=this.pageDimensions,E=.75;if(this.width)h=this.width*u,f=this.height*y;else if(h>E*u||f>E*y){const dt=Math.min(E*u/h,E*y/f);h*=dt,f*=dt}const[N,V]=this.parentDimensions;this.setDims(h*N/u,f*V/y),this._uiManager.enableWaiting(!1);const Y=gt(this,x,document.createElement("canvas"));j.append(Y),j.hidden=!1,it(this,U,ys).call(this,h,f),it(this,X,tn).call(this),r(this,P)||(this.parent.addUndoableEditor(this),gt(this,P,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},B=new WeakSet,Qs=function(j,h){var E;const[f,u]=this.parentDimensions;this.width=j/f,this.height=h/u,this.setDims(j,h),(E=this._initialOptions)!=null&&E.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,r(this,T)!==null&&clearTimeout(r(this,T)),gt(this,T,setTimeout(()=>{gt(this,T,null),it(this,U,ys).call(this,j,h)},200))},Q=new WeakSet,Zs=function(j,h){const{width:f,height:u}=r(this,d);let y=f,E=u,N=r(this,d);for(;y>2*j||E>2*h;){const V=y,Y=E;y>2*j&&(y=y>=16384?Math.floor(y/2)-1:Math.ceil(y/2)),E>2*h&&(E=E>=16384?Math.floor(E/2)-1:Math.ceil(E/2));const dt=new OffscreenCanvas(y,E);dt.getContext("2d").drawImage(N,0,0,V,Y,0,0,y,E),N=dt.transferToImageBitmap()}return N},U=new WeakSet,ys=function(j,h){j=Math.ceil(j),h=Math.ceil(h);const f=r(this,x);if(!f||f.width===j&&f.height===h)return;f.width=j,f.height=h;const u=r(this,S)?r(this,d):it(this,Q,Zs).call(this,j,h),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(u,0,0,u.width,u.height,0,0,j,h)},pt=new WeakSet,Be=function(j){if(j){if(r(this,S)){const u=this._uiManager.imageManager.getSvgUrl(r(this,g));if(u)return u}const h=document.createElement("canvas");return{width:h.width,height:h.height}=r(this,d),h.getContext("2d").drawImage(r(this,d),0,0),h.toDataURL()}if(r(this,S)){const[h,f]=this.pageDimensions,u=Math.round(this.width*h*a.PixelsPerInch.PDF_TO_CSS_UNITS),y=Math.round(this.height*f*a.PixelsPerInch.PDF_TO_CSS_UNITS),E=new OffscreenCanvas(u,y);return E.getContext("2d").drawImage(r(this,d),0,0,r(this,d).width,r(this,d).height,0,0,u,y),E.transferToImageBitmap()}return structuredClone(r(this,d))},X=new WeakSet,tn=function(){gt(this,k,new ResizeObserver(j=>{const h=j[0].contentRect;h.width&&h.height&&it(this,B,Qs).call(this,h.width,h.height)})),r(this,k).observe(this.div)},ne(wt,"_type","stamp");let _=wt;e.StampEditor=_}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),_=__w_pdfjs_require__(29),d=__w_pdfjs_require__(14),g=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-e3f005b2.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(t,e){(function(n,s){s()})(commonjsGlobal,function(){function n(g,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function s(g,l,w){var R=new XMLHttpRequest;R.open("GET",g),R.responseType="blob",R.onload=function(){d(R.response,l,w)},R.onerror=function(){console.error("could not download file")},R.send()}function i(g){var l=new XMLHttpRequest;l.open("HEAD",g,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,_=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(g,l,w){var R=o.URL||o.webkitURL,x=document.createElement("a");l=l||g.name||"download",x.download=l,x.rel="noopener",typeof g=="string"?(x.href=g,x.origin===location.origin?a(x):i(x.href)?s(g,l,w):a(x,x.target="_blank")):(x.href=R.createObjectURL(g),setTimeout(function(){R.revokeObjectURL(x.href)},4e4),setTimeout(function(){a(x)},0))}:"msSaveOrOpenBlob"in navigator?function(g,l,w){if(l=l||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(n(g,w),l);else if(i(g))s(g,l,w);else{var R=document.createElement("a");R.href=g,R.target="_blank",setTimeout(function(){a(R)})}}:function(g,l,w,R){if(R=R||open("","_blank"),R&&(R.document.title=R.document.body.innerText="downloading..."),typeof g=="string")return s(g,l,w);var x=g.type==="application/octet-stream",k=/constructor/i.test(o.HTMLElement)||o.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||x&&k||_)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var M=S.result;M=T?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),R?R.location.href=M:location=M,R=null},S.readAsDataURL(g)}else{var P=o.URL||o.webkitURL,I=P.createObjectURL(g);R?R.location=I:location.href=I,R=null,setTimeout(function(){P.revokeObjectURL(I)},4e4)}});o.saveAs=d.saveAs=d,t.exports=d})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function hexToRgba(t,e){const n=t.replace("#",""),s=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),a=parseInt(n.substring(4,6),16);return`rgba(${s}, ${i}, ${a}, ${e/100})`}function generateCanvas(t,e,n){const{width:s,height:i,words:a,compression:o}=t,_=document.createElement("canvas"),d=_.getContext("2d"),g=n?e.width:s,l=n?e.height:i;return _.width=g,_.height=l,d.drawImage(e,0,0,_.width,_.height),a.trim().length>0&&addWaterMark(t,d,g,l),{src:_.toDataURL("image/jpeg",o),newCanvas:_}}function addWaterMark(t,e,n,s){const i=n??t.width,a=s??t.height,{words:o,fontSize:_,color:d,opacity:g,rotate:l}=t;let{row:w,col:R,startX:x,startY:k,offsetX:T,offsetY:S}=t;const P=o.length*_*.6,I=_*1.3;T===48&&S===48&&(T=Math.max(30,Math.min(80,i/10)),S=Math.max(30,Math.min(80,a/10)));const M=P+T,C=I+S,m=Math.sqrt(i*i+a*a),A=Math.ceil(m/M)+3,H=Math.ceil(m/C)+3;w===7&&R===7&&(w=Math.max(H,8),R=Math.max(A,8)),x===-100&&k===0&&(x=-Math.abs(m*.3),k=-Math.abs(m*.1)),e.fillStyle="rgba(255, 255, 255, 0.2)",e.fillRect(0,0,i,a),e.rotate(parseInt(String(l))*Math.PI/180),e.fillStyle=hexToRgba(d,g),e.font=`normal ${_}px Arial`,Array.from({length:w}).forEach((F,b)=>{Array.from({length:R}).forEach((B,O)=>{if(o.includes(`
`))multipleWords(e,b,O,o,_,x,k,T,S);else{const Q=x+O*(o.length*_+T),nt=k+b*(S+_);e.fillText(o,Q,nt)}})})}function multipleWords(t,e,n,s,i,a,o,_,d){const g=s.split(`
`),l=g.length,w=Math.max(...g.map(R=>R.length));for(let R=0;R<l;R++){const x=+a+n*(w*i+_)+(w-g[R].length)/2*i,k=+o+e*d+i*1.3*(R+l*e);t.fillText(g[R],x,k)}}function downloadImage(t,e,n){const s=new Image;s.src=t,s.onload=()=>{const i=document.createElement("canvas");i.width=+e.width,i.height=+e.height;const a=i.getContext("2d");a==null||a.drawImage(s,0,0);const o=i.toDataURL("image/png"),_=dataURLToBlob(o),d=document.createElement("a");d.href=URL.createObjectURL(_),d.download=n,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)}}function dataURLToBlob(t){const e=t.split(";base64,"),n=e[0].split(":")[1],s=window.atob(e[1]),i=s.length,a=new Uint8Array(i);for(let o=0;o<i;++o)a[o]=s.charCodeAt(o);return new Blob([a],{type:n})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(t,e,n,s,i){const a=pdfExports.getDocument({url:t,disableRange:!0});imgData.length=0,a.promise.then(o=>{n.value&&(n.value.innerHTML="");const _=o.numPages;for(let d=1;d<=_;d++)o.getPage(d).then(g=>{const l=document.createElement("canvas"),w=l.getContext("2d"),R=g.getViewport({scale:1});l.width=R.width,l.height=R.height,i&&(e.width=l.width,e.height=l.height);const x={canvasContext:w,viewport:R};g.render(x).promise.then(function(){const{newCanvas:T,src:S}=generateCanvas(e,l,i);n.value.appendChild(T),imgData.push({src:S,width:l.width,height:l.height}),imgData.length===_&&(s.value=!1)})})})}function img2Pdf(t,e){const n={autoFirstPage:!1,compress:!1},s=new PDFDocument(n),i=s.pipe(blobStream());for(let a=0;a<imgData.length;a++){const{src:o,width:_,height:d}=imgData[a];s.addPage({size:[_,d]}),s.image(o,0,0,{width:_,height:d})}s.end(),i.on("finish",function(){var a=i.toBlob("application/pdf");FileSaver_minExports.saveAs(a,t),e.value=!1})}const _hoisted_1$5={class:"flex gap-2 mb-4"},_hoisted_2$5={class:"btn-gradient"},_hoisted_3$4=["disabled"],_hoisted_4$3={class:"glass-card p-6 min-h-[300px] flex items-center justify-center animate-fade-in"},_hoisted_5$2={key:0,class:"flex items-center justify-center"},_hoisted_6$1=["src"],_hoisted_7$1={key:1,class:"overflow-auto w-full"},_hoisted_8$1={key:2,class:"upload-zone w-full h-48 flex flex-col items-center justify-center cursor-pointer group"},_hoisted_9$1={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm"},_sfc_main$6=defineComponent({__name:"TheMain",props:{config:null},setup(t){let e;const n=ref(),s=ref(),i=ref(""),a=ref(""),o=ref(!1),_=ref();let d=!1;watch(t.config,g),watch(o,I=>{!I&&d&&(d=!1)});function g(){l=!1,e&&(s.value.src=generateCanvas(t.config,e,l).src),a.value&&!d&&loadPdf(a.value,t.config,_,o,l)}let l=!1,w="",R="";function x(I){l=!0,k();const M=I.target.files;if(M&&M.length>0){const C=M[0];w=C.type,R=C.name,w.startsWith("image/")&&T(C),w==="application/pdf"&&(o.value=!0,d=!0,S(C))}}function k(){e&&(e=null),i.value&&(i.value=""),a.value&&(a.value=""),_.value&&(_.value.innerHTML="")}function T(I){const M=new FileReader;M.readAsDataURL(I),M.onload=()=>{const C=new Image;C.src=M.result,e=C,C.onload=()=>{t.config.width=C.width,t.config.height=C.height,s.value.src=generateCanvas(t.config,C,l).src}},M.onloadend=()=>{i.value=M.result}}function S(I){const M=new FileReader;M.readAsDataURL(I),M.onloadend=()=>{a.value=M.result,loadPdf(a.value,t.config,_,o,l)}}function P(){if(!(i.value===""&&a.value==="")){if(w.startsWith("image/")&&e){const I=generateCanvas(t.config,e,l).src;downloadImage(I,t.config,R)}w==="application/pdf"&&img2Pdf(R,o)}}return(I,M)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("label",_hoisted_2$5,[M[0]||(M[0]=createBaseVNode("span",{"i-carbon-upload":"",class:"mr-2"},null,-1)),M[1]||(M[1]=createBaseVNode("span",null,"Upload File",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:x},null,32)]),createBaseVNode("button",{class:"btn-secondary flex items-center",disabled:unref(i)===""&&unref(a)==="",onClick:P},[...M[2]||(M[2]=[createBaseVNode("span",{"i-carbon-download":"",class:"mr-2"},null,-1),createBaseVNode("span",null,"Download PDF",-1)])],8,_hoisted_3$4)]),createBaseVNode("div",_hoisted_4$3,[unref(i)?(openBlock(),createElementBlock("div",_hoisted_5$2,[createBaseVNode("img",{ref_key:"preview",ref:s,src:unref(i),class:"max-w-full h-auto rounded-lg shadow-xl",style:{"max-height":"70vh"}},null,8,_hoisted_6$1),createBaseVNode("canvas",{ref_key:"canvas",ref:n,class:"hidden"},null,512)])):unref(a)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",{ref_key:"wrap",ref:_,class:"flex flex-wrap gap-3 justify-center [&>canvas]:rounded-lg [&>canvas]:shadow-xl [&>canvas]:max-w-full [&>canvas]:h-auto"},null,512)])):(openBlock(),createElementBlock("label",_hoisted_8$1,[M[3]||(M[3]=createBaseVNode("div",{class:"p-4 rounded-full bg-white/5 mb-4 group-hover:bg-violet-500/10 transition-colors"},[createBaseVNode("div",{"i-carbon-document-add":"",class:"text-3xl text-violet-400"})],-1)),M[4]||(M[4]=createBaseVNode("p",{class:"text-sm text-gray-400 group-hover:text-violet-300 transition-colors"},"Select PDF or Image to Watermark",-1)),M[5]||(M[5]=createBaseVNode("p",{class:"text-[10px] text-gray-500 mt-2"},"Maximum file size: 10MB",-1)),createBaseVNode("input",{type:"file",accept:"image/*, application/pdf",class:"hidden",onChange:x},null,32)]))]),unref(o)?(openBlock(),createElementBlock("div",_hoisted_9$1,[...M[6]||(M[6]=[createBaseVNode("div",{class:"text-center"},[createBaseVNode("div",{class:"w-10 h-10 border-3 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),createBaseVNode("p",{class:"text-sm text-gray-300"},"Processing...")],-1)])])):createCommentVNode("",!0)]))}}),_hoisted_1$4={class:"flex items-center justify-center gap-2"},_hoisted_2$4={class:"bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-sm mx-4 text-center shadow-2xl"},_hoisted_3$3={class:"flex justify-between items-center mb-4"},_sfc_main$5=defineComponent({__name:"TheFooter",setup(t){const e=ref(!1);return(n,s)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$4,[s[4]||(s[4]=createBaseVNode("a",{href:"https://hamradio.my",target:"_blank",class:"p-2 rounded-lg bg-slate-700/50 hover:bg-slate-600 text-gray-400 hover:text-white transition-colors",title:"Visit hamradio.my"},[createBaseVNode("div",{"i-carbon-home":"",class:"text-sm"})],-1)),createBaseVNode("button",{onClick:s[0]||(s[0]=i=>e.value=!0),class:"p-2 rounded-lg bg-pink-600/70 hover:bg-pink-500 text-white transition-colors",title:"Support this project"},[...s[3]||(s[3]=[createBaseVNode("div",{"i-carbon-favorite":"",class:"text-sm"},null,-1)])])]),(openBlock(),createBlock(Teleport,{to:"body"},[unref(e)?(openBlock(),createElementBlock("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm",onClick:s[2]||(s[2]=withModifiers(i=>e.value=!1,["self"]))},[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$3,[s[6]||(s[6]=createBaseVNode("h3",{class:"text-lg font-bold text-white"},"Support This Project",-1)),createBaseVNode("button",{onClick:s[1]||(s[1]=i=>e.value=!1),class:"p-1 rounded-lg hover:bg-slate-700 text-gray-400 hover:text-white transition-colors"},[...s[5]||(s[5]=[createBaseVNode("div",{"i-carbon-close":"",class:"text-lg"},null,-1)])])]),s[7]||(s[7]=createBaseVNode("div",{class:"bg-white rounded-xl p-3 mb-4"},[createBaseVNode("img",{src:"https://lh3.googleusercontent.com/d/1lf1zgIN1Kx5cduZM79n3boGDJQ68uSJ_=w1000?authuser=0",alt:"DuitNow QR Code",class:"w-full max-w-[250px] mx-auto"})],-1)),s[8]||(s[8]=createBaseVNode("p",{class:"text-sm text-gray-300 mb-2"}," Scan with eWallet or Banking App ",-1)),s[9]||(s[9]=createBaseVNode("p",{class:"text-xs text-gray-500"}," Thank you for your support!  ",-1))])])):createCommentVNode("",!0)]))],64))}}),_sfc_main$4=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(t,{emit:e}){const n=e;return(s,i)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["relative w-9 h-5 rounded-full transition-colors",t.value?"bg-violet-600":"bg-slate-600"]),onClick:i[0]||(i[0]=a=>n("update:value",!t.value))},[createBaseVNode("span",{class:normalizeClass(["absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform",t.value?"left-[18px]":"left-0.5"])},null,2)],2))}});var _a;const isClient=typeof window<"u",isDef=t=>typeof t<"u",isFunction=t=>typeof t=="function";isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function identity(t){return t}function cloneFnJSON(t){return JSON.parse(JSON.stringify(t))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues=(t,e)=>{for(var n in e||(e={}))__hasOwnProp.call(e,n)&&__defNormalProp(t,n,e[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))__propIsEnum.call(e,n)&&__defNormalProp(t,n,e[n]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(t,e,n,s={}){var i,a,o;const{clone:_=!1,passive:d=!1,eventName:g,deep:l=!1,defaultValue:w}=s,R=getCurrentInstance(),x=n||(R==null?void 0:R.emit)||((i=R==null?void 0:R.$emit)==null?void 0:i.bind(R))||((o=(a=R==null?void 0:R.proxy)==null?void 0:a.$emit)==null?void 0:o.bind(R==null?void 0:R.proxy));let k=g;e||(e="modelValue"),k=g||k||`update:${e.toString()}`;const T=P=>_?isFunction(_)?_(P):cloneFnJSON(P):P,S=()=>isDef(t[e])?T(t[e]):w;if(d){const P=S(),I=ref(P);return watch(()=>t[e],M=>I.value=T(M)),watch(I,M=>{(M!==t[e]||l)&&x(k,M)},{deep:l}),I}else return computed({get(){return S()},set(P){x(k,P)}})}const __MACROS_useVModel=(...t)=>{const e=getCurrentInstance().proxy.$props,n=Object.create(null);for(const s of t)if(typeof s=="string")n[s]=useVModel(e,s,void 0,{eventName:`update:${s}`,passive:!0});else{const[i,a=i,o=`update:${i}`,_={}]=s;n[i]=useVModel(e,a,void 0,{eventName:o,passive:!0,..._})}return n},WATERMWRK_KEY="watermark-config",defaultConfig={words:"CONFIDENTIAL",width:0,height:0,fontSize:24,color:"#000000",opacity:20,rotate:-15,row:7,col:7,startX:-100,startY:0,offsetX:48,offsetY:48,compression:1,saveConfig:!1},rotatePresets=[{label:" Diagonal",value:-15},{label:" Horizontal",value:0},{label:" Vertical",value:-90}],tooltips={words:"Text to display as watermark",width:"Image width (auto-detected)",height:"Image height (auto-detected)",fontSize:"Size of the watermark text",color:"Watermark color",opacity:"Watermark transparency (0-100%)",rotate:"Rotation angle of watermark",row:"Number of watermark rows",col:"Number of watermark columns",startX:"Horizontal starting position",startY:"Vertical starting position",offsetX:"Horizontal spacing between watermarks",offsetY:"Vertical spacing between watermarks",compression:"Output quality (higher = better)",saveConfig:"Remember settings for next time"},basicSettings=["words","color","opacity","fontSize","rotate"],advancedSettings=["row","col","startX","startY","offsetX","offsetY","compression"],_hoisted_1$3={class:"flex items-center justify-between py-1.5"},_hoisted_2$3=["for","title"],_hoisted_3$2=["id"],_hoisted_4$2={key:2,class:"flex items-center gap-2"},_hoisted_5$1=["id"],_hoisted_6={class:"text-[10px] text-gray-500 font-mono"},_hoisted_7={key:3,class:"flex items-center gap-2"},_hoisted_8={class:"text-[10px] text-gray-500 w-8"},_hoisted_9={key:4,class:"flex items-center gap-2"},_hoisted_10={class:"text-[10px] text-gray-500 w-6"},_hoisted_11={key:5,class:"flex items-center gap-1"},_hoisted_12=["onClick"],_hoisted_13={key:6,class:"flex items-center gap-2"},_hoisted_14={class:"text-[10px] text-gray-500 w-6"},_hoisted_15={key:7,class:"flex items-center gap-2"},_hoisted_16={class:"text-[10px] text-gray-500 w-6"},_hoisted_17={key:8,class:"flex items-center gap-2"},_hoisted_18={class:"text-[10px] text-gray-500 w-6"},_hoisted_19={key:9,class:"flex items-center gap-2"},_hoisted_20={class:"text-[10px] text-gray-500 w-8"},_hoisted_21={key:10,class:"flex items-center gap-2"},_hoisted_22={class:"text-[10px] text-gray-500 w-8"},_hoisted_23={key:11,class:"flex items-center gap-2"},_hoisted_24={class:"text-[10px] text-gray-500 w-6"},_hoisted_25={key:12,class:"flex items-center gap-2"},_hoisted_26={class:"text-[10px] text-gray-500 w-6"},_hoisted_27=["id"],_hoisted_28=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{property:null,value:{type:[String,Boolean]}},emits:["update:value"],setup(t){const{value:e}=__MACROS_useVModel("value"),n={words:"Watermark Text",color:"Color",opacity:"Opacity",fontSize:"Font Size",rotate:"Rotation",row:"Rows",col:"Columns",startX:"Start X",startY:"Start Y",offsetX:"Spacing X",offsetY:"Spacing Y",compression:"Quality",saveConfig:"Remember Settings"};return(s,i)=>{const a=_sfc_main$4;return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("label",{for:t.property,class:"text-xs text-gray-400",title:unref(tooltips)[t.property]},toDisplayString(n[t.property]||t.property),9,_hoisted_2$3),t.property==="saveConfig"?(openBlock(),createBlock(a,{key:0,value:unref(e),"onUpdate:value":i[0]||(i[0]=o=>s.$emit("update:value",o))},null,8,["value"])):t.property==="words"?withDirectives((openBlock(),createElementBlock("input",{key:1,id:t.property,"onUpdate:modelValue":i[1]||(i[1]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-32 sm:w-36 input-modern",placeholder:"Enter text..."},null,8,_hoisted_3$2)),[[vModelText,unref(e)]]):t.property==="color"?(openBlock(),createElementBlock("div",_hoisted_4$2,[withDirectives(createBaseVNode("input",{id:t.property,"onUpdate:modelValue":i[2]||(i[2]=o=>isRef(e)?e.value=o:null),type:"color",class:"w-8 h-8 rounded cursor-pointer border border-slate-600 bg-transparent"},null,8,_hoisted_5$1),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_6,toDisplayString(unref(e)),1)])):t.property==="opacity"?(openBlock(),createElementBlock("div",_hoisted_7,[withDirectives(createBaseVNode("input",{type:"range",min:"5",max:"100",step:"5","onUpdate:modelValue":i[3]||(i[3]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_8,toDisplayString(unref(e))+"%",1)])):t.property==="fontSize"?(openBlock(),createElementBlock("div",_hoisted_9,[withDirectives(createBaseVNode("input",{type:"range",min:"12",max:"48",step:"2","onUpdate:modelValue":i[4]||(i[4]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_10,toDisplayString(unref(e)),1)])):t.property==="rotate"?(openBlock(),createElementBlock("div",_hoisted_11,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(rotatePresets),o=>(openBlock(),createElementBlock("button",{key:o.value,onClick:_=>s.$emit("update:value",o.value),class:normalizeClass(["px-2 py-0.5 text-[10px] rounded transition-colors",unref(e)===o.value?"btn-gradient !px-2 !py-0.5":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white border border-white/10"])},toDisplayString(o.label),11,_hoisted_12))),128))])):t.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_13,[withDirectives(createBaseVNode("input",{type:"range",min:"0.1",max:"1",step:"0.1","onUpdate:modelValue":i[5]||(i[5]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_14,toDisplayString(Math.round(Number(unref(e))*100))+"%",1)])):t.property==="row"?(openBlock(),createElementBlock("div",_hoisted_15,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[6]||(i[6]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_16,toDisplayString(unref(e)),1)])):t.property==="col"?(openBlock(),createElementBlock("div",_hoisted_17,[withDirectives(createBaseVNode("input",{type:"range",min:"1",max:"20",step:"1","onUpdate:modelValue":i[7]||(i[7]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_18,toDisplayString(unref(e)),1)])):t.property==="startX"?(openBlock(),createElementBlock("div",_hoisted_19,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[8]||(i[8]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_20,toDisplayString(unref(e)),1)])):t.property==="startY"?(openBlock(),createElementBlock("div",_hoisted_21,[withDirectives(createBaseVNode("input",{type:"range",min:"-200",max:"200",step:"10","onUpdate:modelValue":i[9]||(i[9]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_22,toDisplayString(unref(e)),1)])):t.property==="offsetX"?(openBlock(),createElementBlock("div",_hoisted_23,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[10]||(i[10]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_24,toDisplayString(unref(e)),1)])):t.property==="offsetY"?(openBlock(),createElementBlock("div",_hoisted_25,[withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"200",step:"8","onUpdate:modelValue":i[11]||(i[11]=o=>isRef(e)?e.value=o:null),class:"w-20 sm:w-24 range-modern"},null,512),[[vModelText,unref(e)]]),createBaseVNode("span",_hoisted_26,toDisplayString(unref(e)),1)])):typeof unref(e)=="number"?withDirectives((openBlock(),createElementBlock("input",{key:13,id:t.property,"onUpdate:modelValue":i[12]||(i[12]=o=>isRef(e)?e.value=o:null),type:"number",class:"w-24 input-modern text-center"},null,8,_hoisted_27)),[[vModelText,unref(e)]]):withDirectives((openBlock(),createElementBlock("input",{key:14,id:t.property,"onUpdate:modelValue":i[13]||(i[13]=o=>isRef(e)?e.value=o:null),type:"text",class:"w-24 input-modern text-center"},null,8,_hoisted_28)),[[vModelText,unref(e)]])])}}}),_hoisted_1$2={class:"glass-card p-5 lg:sticky lg:top-4 animate-fade-in shadow-glow"},_hoisted_2$2={class:"space-y-2"},_hoisted_3$1={class:"mt-2 pt-2 border-t border-slate-700/30 space-y-2"},_hoisted_4$1={class:"mt-3 pt-3 border-t border-slate-700/50"},_hoisted_5={class:"mt-3 pt-3 border-t border-slate-700/50"},_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(t){const e=ref(!1);return(n,s)=>{const i=_sfc_main$3,a=_sfc_main$5;return openBlock(),createElementBlock("div",_hoisted_1$2,[s[3]||(s[3]=createBaseVNode("div",{class:"text-center pb-4 mb-4 border-b border-white/10"},[createBaseVNode("div",{class:"flex items-center justify-center gap-3 mb-3"},[createBaseVNode("div",{class:"p-2 rounded-xl bg-violet-600/20 glass"},[createBaseVNode("span",{"i-material-symbols-add-photo-alternate-rounded":"",class:"text-2xl text-violet-400"})]),createBaseVNode("div",{class:"p-2 rounded-xl bg-cyan-600/20 glass"},[createBaseVNode("span",{"i-material-symbols:picture-as-pdf":"",class:"text-2xl text-cyan-400"})])]),createBaseVNode("h1",{class:"text-lg font-black tracking-tight bg-gradient-to-r from-violet-400 to-cyan-400 bg-clip-text text-transparent uppercase"},"9M2PJU WATERMARK"),createBaseVNode("p",{class:"text-[10px] uppercase font-bold tracking-widest text-gray-500 mt-1"},"Premium PDF Security Tool")],-1)),createBaseVNode("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(basicSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":_=>n.$emit("update",o,_)},null,8,["property","value","onUpdate:value"]))),128))]),createBaseVNode("button",{onClick:s[0]||(s[0]=o=>e.value=!unref(e)),class:"w-full mt-3 py-2 flex items-center justify-center gap-2 text-xs text-gray-400 hover:text-white transition-colors"},[createBaseVNode("span",null,toDisplayString(unref(e)?"Hide":"Show")+" Advanced Settings",1),createBaseVNode("span",{class:normalizeClass([unref(e)?"rotate-180":"","transition-transform duration-200"]),"i-carbon-chevron-down":""},null,2)]),withDirectives(createBaseVNode("div",_hoisted_3$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(advancedSettings),o=>(openBlock(),createBlock(i,{key:o,property:o,value:t.config[o],"onUpdate:value":_=>n.$emit("update",o,_)},null,8,["property","value","onUpdate:value"]))),128))],512),[[vShow,unref(e)]]),createBaseVNode("div",_hoisted_4$1,[createVNode(i,{property:"saveConfig",value:t.config.saveConfig,"onUpdate:value":s[1]||(s[1]=o=>n.$emit("update","saveConfig",o))},null,8,["value"])]),createBaseVNode("div",_hoisted_5,[s[2]||(s[2]=createBaseVNode("p",{class:"text-[10px] text-gray-500 text-center mb-2"},[createTextVNode(" Remake by "),createBaseVNode("a",{href:"https://hamradio.my",target:"_blank",class:"text-violet-400 hover:text-violet-300 underline"},"9M2PJU")],-1)),createVNode(a)])])}}}),_hoisted_1$1={class:"max-w-6xl mx-auto"},_hoisted_2$1={class:"flex flex-col lg:flex-row lg:items-start gap-4"},_hoisted_3={class:"w-full lg:w-72 lg:flex-shrink-0 order-2 lg:order-1"},_hoisted_4={class:"flex-1 order-1 lg:order-2"},_sfc_main$1=defineComponent({__name:"index",setup(t){const e=localStorage.getItem(WATERMWRK_KEY),n=e&&JSON.parse(e),s=reactive(i(n)||defaultConfig);function i(_){if(!_)return;const{rotate:d,startX:g,startY:l}=_;return{..._,rotate:Number(d),startX:Number(g),startY:Number(l)}}const a=["words","color","rotate","startX","startY"];function o(_,d){_==="saveConfig"?s[_]=!!d:a.includes(_)?s[_]=d:s[_]=+d,_==="saveConfig"&&d===!1?localStorage.setItem(WATERMWRK_KEY,""):s.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(s))}return(_,d)=>{const g=_sfc_main$2,l=_sfc_main$6;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3,[createVNode(g,{config:unref(s),onUpdate:o},null,8,["config"])]),createBaseVNode("div",_hoisted_4,[createVNode(l,{config:unref(s)},null,8,["config"])])])])}}}),_hoisted_1={class:"min-h-screen"},_hoisted_2={class:"relative z-10 p-3 sm:p-4 lg:p-6 container mx-auto"},_sfc_main=defineComponent({__name:"App",setup(t){return(e,n)=>(openBlock(),createElementBlock("main",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(_sfc_main$1)])]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
